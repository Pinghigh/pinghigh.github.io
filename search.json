[{"title":"ST Link v2 åˆ· GNUK è®°å½•","path":"/post/st-link-2-gnuk/","content":"## å‰è¨€\n\nçœ‹åˆ°äº†[è¿™ç¯‡æ–‡ç« ](https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/) æƒ³æ PGP æ™ºèƒ½å¡ç©ï¼Œä½†æ˜¯ yubikey æ­»è´µ ~~è¿˜æ¶‰åŠåˆ°æŸäº›å‚»é€¼æ”¿æ²»é—®é¢˜~~ äºæ˜¯å°±æƒ³æ‰¾æ‰¾æœ‰æ— å¼€æºå®ç°ä»€ä¹ˆçš„ã€‚\n\nç„¶åå°±çœ‹è§äº† [smartcard çš„åˆ¶ä½œæ•™ç¨‹](https://www.liuyusong.cn/2023/04/05/diy-smartgpg/)ï¼Œå¯æƒœèƒ½æ‰¾åˆ°çš„ä¾¿å®œ javacard éƒ½æ˜¯éœ€è¦è¯»å¡å™¨çš„ã€‚\n\næœ¬æ¥æ­»å¿ƒäº†ï¼Œä½†æ˜¯çœ‹è§ [ST-link v2 åˆ· GNUK æ•™ç¨‹](https://techie-s.work/posts/2021/04/homemade-gnuk/) çªç„¶å°±æƒ³æŠ˜è…¾äº†ã€‚é¡¹ç›®ç”± $\\stackrel{\\textsf{Free Software Initiative of Japan}}{\\textsf{FSIJ}}$ ç»´æŠ¤ã€‚\n\nè¿™ç©æ„æ¯” yubikey ç‰›é€¼ï¼Œæ”¯æŒæœ€æ–°çš„ x448 æ¤­åœ†æ›²çº¿åŠ å¯†ç®—æ³•ï¼ˆä½†æ˜¯å·²ç»å¼ƒç”¨ RSA äº†ï¼‰\n\n## ææ–™å‡†å¤‡\n\nä¸€èˆ¬ ST-Link v2 åŠå…¶ä»¿å“éƒ½åªæä¾› SWDIO SWCLK è€Œæ—  RXD TXD è¿™ç§ç›´æ¥ä¸²å£å°±èƒ½åˆ·çš„å£ï¼Œæ‰€ä»¥æœ€å¥½å†ä¹°ä¸ª ST-Link v2 å½“çƒ§å½•å™¨ï¼ˆä¹°åˆ«çš„ä¹Ÿè¡Œï¼Œä¸»è¦æ˜¯è¿™ä¸ªä¾¿å®œï¼‰ï¼Œæˆ‘ä¹°çš„æ˜¯ PowerWriter Lite 2ã€‚~~æœ¬æ¥æƒ³åˆ·è¿™ä¸ªçš„ï¼Œç»“æœå¤–å£³éƒ½æ‹†ä¸å¼€~~\n\næ‰€ä»¥ï¼š\n\n- ä¸€ä¸ªçƒ§å½•å™¨ï¼ˆST-Link v2ï¼‰\n- å¾…çƒ§å½•çš„ ST-Link v2ï¼ˆç¡®ä¿ä¸»æ§æ˜¯ STM32F103C8T6 æˆ– STM32F103CBT6ï¼ŒGD32F103 ä¸€èˆ¬ä¸ä¼šåœ¨ä»¿å“é‡Œå‡ºç°ï¼Œç½‘ä¸Šæœ‰[å…³äºè¿™æ¬¾ä¸»æ§çš„åˆ·å†™æ•™ç¨‹](https://blog.indexyz.me/diy-gnuk-token/)ï¼‰ï¼Œè´­ä¹°è¸©å‘è¿™é‡Œæœ‰[^2]ã€‚\n- å››æ ¹æœé‚¦çº¿ï¼Œæœ‰ä¸€ç«¯æ˜¯å…¬å¤´ç”¨äºè¿æ¥å¾…çƒ§å½•çš„ ST-Linkï¼Œå¦ä¸€ç«¯è¿æ¥çƒ§å½•å™¨ï¼Œå…¬æ¯è§†æƒ…å†µè€Œå®š\n- ä¸€å°ç”µè„‘\n\næˆ‘é‡‡ç”¨äº† Arch Linuxï¼Œå…¶ä»–ç³»ç»Ÿç¼–è¯‘å›ºä»¶çš„æ•™ç¨‹åœ¨è¿™é‡Œæœ‰[^1]\n\n## ä¸ºå•¥ä¸»æ§è¦æ±‚æ˜¯è¿™ä¸¤ä¸ªç‰ˆæœ¬\n\né¦–å…ˆ GNUK æ”¯æŒ STM32F103 ç³»åˆ—ã€‚\n\nç„¶å GNUK éœ€è¦ 128KB é—ªå­˜å®¹é‡ã€‚\n\næœ€å STM32F103C8T6 å’Œ STM32F103CBT6 ç”¨äº†ä¸€å¥—ä¸œè¥¿ï¼Œåè€…å®˜æ–¹ç»™å®šå®¹é‡ 128KBï¼Œå‰è€…è™½ç„¶æ ‡äº† 64KB ä½†æ˜¯å®é™…ä¸Šæœ‰ 128KB çš„ç©ºé—´å¯ç”¨ã€‚æ°å¥½ï¼ŒST-Link 2 å®˜æ–¹ä½¿ç”¨çš„ä¸»æ§å°±æ˜¯å‰è€…ã€‚ä»¿å“ä¸­å¯èƒ½å‡ºç°åè€…ã€‚\n\nGD32F103 èƒ½ pin2pin æ›¿æ¢ STM32F103 è‡ªç„¶ä¹Ÿèƒ½ç”¨ã€‚ä½†æ˜¯éœ€è¦æ¢çƒ§å½•æ–¹å¼ã€‚\n\n## ç¼–è¯‘å›ºä»¶\n\n### å®‰è£…ä¾èµ–\n\n```shell\npacman -S arm-none-eabi-gcc\n```\n\nå®˜ç½‘ï¼šIn 2.5, we added GD32VF103 support. Please note that default libc is now picolibc (instead of newlib).\n\nè€æ•™ç¨‹ä¼šæ•™ä½ å®‰è£… newlibï¼Œä½†æ˜¯ç°åœ¨éœ€è¦å®‰è£… picolibcã€‚ä½†æ˜¯è¿™ä¸ªä¸œè¥¿ä¸ä»…åªåœ¨ aur é‡Œï¼Œè€Œä¸”è¿‡æœŸäº†ã€‚å®æµ‹ç›´æ¥æ›´æ”¹ pkgver ä¹Ÿå¯ä»¥æ­£å¸¸æ„å»º[æ–°ç‰ˆæœ¬](https://github.com/picolibc/picolibc/releases)ã€‚\n\næ‰€ä»¥ï¼š\n\n```shell\ngit clone https://aur.archlinux.org/arm-none-eabi-picolibc.git\ncd arm-none-eabi-picolibc.git\nvim PKGBUILD # å°† pkgver æ”¹æˆæœ€æ–°ç‰ˆæœ¬å·ï¼Œå¯ä»¥åœ¨ä¸Šé¢ picolibc é¡¹ç›® release é¡µé¢çœ‹\nmakepkg -sif\n```\n\n### ç¼–è¯‘å›ºä»¶\n\n```shell\ngit clone --recursive https://salsa.debian.org/gnuk-team/gnuk/gnuk.git gnuk\ncd gnuk/src\n./configure --vidpid=234b:0000 --target=ST_DONGLE\nmake build/gnuk-vidpid.bin\n```\n\nç„¶å `build/gnuk-vidpid.bin` å°±æ˜¯å¾…çƒ§å½•çš„å›ºä»¶æ–‡ä»¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå•ç‹¬å–å‡ºæ¥å¾…ç”¨ã€‚\n\n## çƒ§å†™\n\n### å®‰è£…è½¯ä»¶\n\n```shell\npacman -S openocd inetutils\n```\n\n`inetutils` ç”¨æ¥æä¾› `telnet` æ”¯æŒã€‚`putty` ç”¨ä¸äº†ï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ä¸å…¼å®¹ XWayland çš„é—®é¢˜ã€‚\n\n### è¿æ¥è®¾å¤‡\n\nST-Link v2 è¿æ¥ç³»ç»Ÿæ¿æ•™ç¨‹æŒºå¤šçš„ï¼Œç›´æ¥æœå°±è¡Œã€‚è¿™ä¸ªé‡Œé¢ä¹Ÿæœ‰[^1]ã€‚\n\nPW Lite 2 çš„è¯[å®˜æ–¹æ–‡æ¡£](https://docs.powerwriter.com/docs/faq/powerwriter/base/connection/#2131%E8%AE%BE%E5%A4%87%E4%B8%BApwlink2%E6%88%96%E8%80%85pwlink2-lite)æœ‰æ¥çº¿æ•™ç¨‹ã€‚\n\næˆ‘çš„æ˜¯è¿™æ ·\n\n![](https://pic.imgdb.cn/item/654b44b5c458853aef5f7a34.webp)\n\nå¦‚æœåƒ[^1]é‡Œé¢è¿™æ ·æ˜¯éå¸¸å¥½çš„ï¼Œç›´æ¥æ’è¿›å»éšä¾¿å›ºå®šä¸€ä¸‹å°±è¡Œã€‚ä½†æ˜¯æˆ‘ä¸æ˜¯è¿™ç§æƒ…å†µã€‚æˆ‘ä¹°çš„ ST-Link åªæä¾›äº†å››ä¸ªç„Šç›˜ï¼ï¼ï¼\n\n![](https://pic.imgdb.cn/item/654b44afc458853aef5f6c93.webp)\n\nè¿™æ„å‘³ç€ä½ éœ€è¦ç”¨è°ƒè¯•æ’é’ˆå‡‘åˆè¿æ¥ä¸€ä¸‹ï¼Œè¿æ¥åˆ·å†™è¿‡ç¨‹ä¸­éœ€è¦ç”¨æ‰‹æŒ‰ä½ï¼è°ƒè¯•æ’é’ˆ...å°±æ˜¯å››æ ¹æœé‚¦çº¿ç²˜æˆä¸€æ’ ğŸ˜‹\n\n![](https://pic.imgdb.cn/item/654b44a5c458853aef5f56c7.webp)\n\n![](https://pic.imgdb.cn/item/654b44bac458853aef5f8470.webp)\n\nè¿æ¥å¤±è´¥äº†å¥½å‡ æ¬¡ï¼Œåˆ·å†™å®Œäº†ä¹‹åæœé‚¦çº¿çš„å¤´éƒ½è®©æˆ‘æŒ‰æ­ªäº†ï¼\n\n![](https://pic.imgdb.cn/item/654b44aac458853aef5f60e5.webp)\n\n### é…ç½® openocd\n\néšä¾¿æ–°å»ºä¸€ä¸ª `xxx.cfg`ï¼Œå†…å®¹ï¼š\n\n```\ntelnet_port 4444\nsource [find interface/stlink-v2.cfg]\nsource [find target/stm32f1x.cfg]\nset WORKAREASIZE 0x10000\n```\n\nSTM32F103C8T6 éœ€è¦è¿™å¥ `set WORKAREASIZE 0x10000`ï¼Œè¿™å¥ä½¿å¾—ç¨‹åºå¯ä»¥åˆ·å†™åˆ°é¢å¤–çš„ 64KB ç©ºé—´ä¸­ã€‚å¦‚æœå­˜å‚¨è¶³å¤Ÿ 128KB å°±ä¸ç”¨è¿™å¥ã€‚\n\nå¦‚æœä½ åƒæˆ‘ä¸€æ ·ç”¨ PWLink 2ï¼Œéœ€è¦æŠŠ `source [find interface/stlink-v2.cfg]` æ¢æˆ `source [find interface/cmsis-dap.cfg]`ï¼ˆåœ¨ä¸€ä¸ªæ±‚åŠ©å¸–çœ‹è§çš„ï¼Œåœ°å€æ‰¾ä¸åˆ°äº†ï¼‰\n\nè¿æ¥å¥½è®¾å¤‡å `openocd -f ./xxx.cfg`ï¼Œå¦‚æœè·‘èµ·æ¥ä¹‹åæ²¡æŠ¥é”™æ²¡é€€å‡ºå°±è¯´æ˜ä½ æå¯¹äº†ã€‚\n\n### åˆ·å†™å›ºä»¶\n\n```shell\ntelnet 127.0.0.1:4444\n```\n\nç„¶åè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤\n\n```\nstm32f1x unlock 0\nreset halt\nflash write_bank 0 ./src/build/gnuk-vidpid.bin 0\nstm32f1x lock 0\nreset halt\n```\n\n`./src/build/gnuk-vidpid.bin` è¿™ä¸ªæ˜¯ä½ åˆšæ‰ç¼–è¯‘å‡ºæ¥çš„å›ºä»¶\n\nç„¶åå°±æ²¡äº†ï¼Œé€€å‡º telnet å’Œ openocdï¼Œæ–­å¼€è®¾å¤‡è¿æ¥å°±è¡Œã€‚\n\n## æµ‹è¯•\n\næ’å…¥ä½ åˆ·å¥½çš„ GNUK æ™ºèƒ½å¡ï¼Œè¾“å…¥\n\n```shell\ngpg --card-status\n```\n\næ­¤æ—¶åº”è¯¥è¾“å‡ºä½ çš„æ™ºèƒ½å¡çš„è¯¦ç»†ä¿¡æ¯ã€‚\n\n![image](https://pic.imgdb.cn/item/654b4e1cc458853aef7d4c1f.webp)\n\n## åˆ·åäº†/æƒ³é‡åˆ·\n\nçœ‹[^1]\n\n----\n\nä»¥ä¸‹æ–‡ç« æˆ‘æˆ–å¤šæˆ–å°‘å‚è€ƒäº†ä¸€äº›ï¼Œæ¨èé˜…è¯» [^1][^2][^3][^4]\n\n[è¿™ç¯‡æ–‡ç« ](https://blog.misaka4e21.science/gnuk-stm32f103-minimum-system/) è®²è¿°äº† 64KB ä¸»æ§å¦‚ä½•åˆ·æ”¯æŒ 64KB çš„æ—§ç‰ˆ GNUK\n\n[^1]: https://nx3d.org/gnuk-st-link-v2/\n[^2]: https://blog.dylanwu.space/2020/01/24/stm32-gnuk.html\n[^3]: https://kgame.tw/gnupg/stm32-gnuk/\n[^4]: https://techie-s.work/posts/2021/04/homemade-gnuk/","tags":["OpenPGP"],"categories":["ç”µå­"]},{"title":"æ˜¥èŠ‚åäºŒå“ é¢˜è§£","path":"/post/spring-12-biu/","content":"## é¢˜æ„\n\nç»™å®š $n$ ä¸ªç¨‹åºï¼Œæ¯ä¸ªç¨‹åºæ‰€éœ€å†…å­˜ç©ºé—´ä¸º $m_i$ã€‚\n\nè¿™äº›ç¨‹åºçš„è°ƒç”¨å…³ç³»å½¢æˆä¸€æ£µä»¥ $1$ ä¸ºæ ¹çš„æ ‘ã€‚\n\nå†…å­˜å¯ä»¥åˆ†ä¸ºè‹¥å¹²ä¸ªæ®µï¼Œæ¯ä¸ªæ®µå­˜æ”¾è‹¥å¹²ä¸ªç¨‹åºï¼Œè¿™äº›ç¨‹åºåœ¨è°ƒç”¨å…³ç³»æ ‘ä¸Šä¸èƒ½ä¸ºç¥–å…ˆ-åä»£å…³ç³»ï¼Œæ¯ä¸ªæ®µçš„å¤§å°ä¸ºå­˜æ”¾çš„ç¨‹åºæ‰€éœ€ç©ºé—´çš„æœ€å¤§å€¼ã€‚\n\n$n\\leq 2\\times 10^5$\n\n## é¢˜è§£\n\nåšè¿™ç§é¢˜è¦å…ˆä»éƒ¨åˆ†åˆ†å…¥æ‰‹ã€‚\n\nå®ƒç»™äº†ä¸€ä¸ªç‰¹æ®Šæ€§è´¨ï¼šè°ƒç”¨å…³ç³»ä¸ºä¸€æ¡é“¾ã€‚æˆ‘ä»¬æŠŠä¸€ä¸ªä½ç½®çš„æ®µè®°åˆ°ä¸€ä¸ªé›†åˆé‡Œï¼Œç„¶ååˆ†ç±»è®¨è®ºï¼š\n\n-   åªæœ‰ä¸€ä¸ªå„¿å­ï¼šæœ‰ä¾èµ–å…³ç³»æ˜¾ç„¶æ²¡æ³•æ‰”åˆ°ä¸€ä¸ªæ®µé‡Œé¢ï¼Œæ‰€ä»¥æŠŠ $m_i$ æ‰”åˆ°é›†åˆé‡Œé¢ã€‚\n-   ä¸¤ä¸ªå„¿å­ï¼šä¸€ä¸ªå®¹æ˜“æƒ³åˆ°çš„è´ªå¿ƒç­–ç•¥ï¼Œå³æŠŠä¸¤ä¸ªå„¿å­çš„æ®µé›†åˆé‡Œé¢æœ€å¤§çš„å‡ ä¸ªæ‹¿å‡ºæ¥åˆå¹¶åˆ°ä¸€ä¸ªæ®µé‡Œé¢ï¼ˆå³å– $\\max$ï¼‰ã€‚  \n    æˆ‘ä»¬ç”¨å †æ¥ç»´æŠ¤è¿™ä¸ªé›†åˆï¼Œå¦‚æœæ˜¯ä¸¤ä¸ªå„¿å­çš„æƒ…å†µï¼Œå°±å–ä¸¤ä¸ªå„¿å­çš„å †é¡¶çš„ $\\max$ æ”¾åˆ°å½“å‰èŠ‚ç‚¹çš„å †ä¸­ï¼Œç„¶ååˆ†åˆ«å¼¹å †é¡¶ï¼Œé‡å¤è¿™ä¸ªè¿‡ç¨‹ç›´åˆ°ä¸€ä¸ªå„¿å­çš„å †ä¸ºç©ºï¼Œå†æŠŠå¦ä¸€ä¸ªå„¿å­å‰©ä¸‹çš„ä¸œè¥¿æ‰”åˆ°çˆ¶èŠ‚ç‚¹å †é‡Œé¢å»å°±å¥½äº†ã€‚\n\nç„¶åæˆ‘ä»¬å‘ç°å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•ç›´æ¥åœ¨æ ‘ä¸Šåˆå¹¶ï¼Œç„¶åå°±æˆäº†ä¸€èˆ¬æƒ…å†µã€‚å¯¹äºå¤šä¸ªå„¿å­çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬å°†å®ƒä»¬æŒ‰ç…§ç¬¬äºŒæ¡è§„åˆ™ä¸¤ä¸¤åˆå¹¶ï¼Œç„¶åæ‰”åˆ°çˆ¶èŠ‚ç‚¹çš„é›†åˆé‡Œé¢ã€‚\n\nï¼ˆä»¤ $dep_i$ è¡¨ç¤º $i$ å­æ ‘å†…æœ€æ·±çš„ç‚¹çš„æ·±åº¦ã€‚ï¼‰\n\nå‘ç°æ¯æ¬¡éƒ½éœ€è¦è®© $\\max_{(u,v)} dep_v$ ä¸ªç¨‹åºä»ä¸€ä¸ªå †è¿›å…¥åˆ°å¦ä¸€ä¸ªå †é‡Œé¢ï¼Œä¸€ä¸ªé“¾å¸¦ç‚¹å¶å­çš„ç»“æ„å°±ä¼šå¡åˆ° $\\Theta(n^2 \\log n)$ã€‚\n\nç„¶åæˆ‘ä»¬å‘ç°ï¼Œç”¨åˆ°å †çš„**æ ¹èŠ‚ç‚¹**æœ€å¤§çš„ç‰¹æ€§çš„åœ°æ–¹ï¼Œä»…æœ‰**ä¸¤ä¸ªå„¿å­å †é¡¶å–æœ€å¤§å€¼**çš„åœ°æ–¹ï¼Œé™¤æ­¤ä»¥å¤–å¢åŠ å¤æ‚åº¦çš„åœ°æ–¹æ˜¯â€œæŠŠå¦ä¸€ä¸ªå„¿å­å‰©ä¸‹çš„ä¸œè¥¿æ‰”åˆ°çˆ¶èŠ‚ç‚¹å †é‡Œé¢å»â€çš„è¿‡ç¨‹ã€‚\n\nåé¢è¿™ä¸ªä¸œè¥¿ç›¸å½“äºåˆå¹¶ä¸¤ä¸ªå †ï¼Œæ‰€ä»¥å¦‚æœä½ å·²ç»ç”¨äº†é…å¯¹å †/æ–æ³¢é‚£å¥‘å †è¿™ç±» $\\Theta(1)$ åˆå¹¶çš„å¯å¹¶å †é‚£ä½ å°±å¯ä»¥å…ˆèµ°äº†ã€‚\n\nå…¶å®æˆ‘ä»¬å¯ä»¥åœ¨**ä¸¤ä¸ªå„¿å­å †é¡¶å–æœ€å¤§å€¼**åæ‰”åˆ°ä¸€ä¸ªç¼“å†²åŒºé‡Œé¢ï¼Œä¸€ä¸ªå †ç©ºäº†ä¹‹åç›´æ¥æŠŠç¼“å†²åŒºé‡Œé¢çš„ä¸œè¥¿å…¨éƒ½æ‰”åˆ°å¦ä¸€ä¸ªéç©ºå †ä¸­ï¼Œè¿™æ ·å°±çœå»äº†åˆå¹¶çš„è¿‡ç¨‹ã€‚è¿™æ ·çš„è¯ä¸€æ¬¡åˆå¹¶çš„å¤æ‚åº¦æ˜¯ $\\min(dep_x,dep_y)$ çš„ã€‚\n\nåˆ†ææ€»æ—¶é—´å¤æ‚åº¦ï¼Œå‘ç°æ¯ä¸€æ¬¡å– $\\max$ å®é™…ä¸Šå°±æ˜¯æ‰”æ‰ä¸€ä¸ªå…ƒç´ ï¼Œç„¶åæ¯ä¸ªå…ƒç´ åªèƒ½è¢«æ‰”æ‰ä¸€æ¬¡ï¼Œæ€»å…±è¢«æ‰”äº† $\\Theta(n)$ æ¬¡ï¼ŒåŠ ä¸Šå †çš„å½±å“å°±æˆäº† $\\Theta(n\\log n)$ æ¬¡ã€‚","tags":["å¯å‘å¼åˆå¹¶","è´ªå¿ƒ"],"categories":["é¢˜è§£"]},{"title":"Tauri ä½¿ç”¨ WebviewWindow æ–°å»ºçª—å£","path":"/post/tauri-react-jsx-dynamic-new-window/","content":"æˆ‘ä½¿ç”¨çš„æ˜¯ create-tauri-app é‡Œé¢è‡ªå¸¦çš„ Vite + React é…ç½®ã€‚\n\næŒ‰ç…§[å®˜ç½‘è¯´æ˜](https://tauri.app/zh-cn/v1/guides/features/multiwindow#%E5%9C%A8-javascript-%E4%B8%AD%E5%88%9B%E5%BB%BA%E7%AA%97%E5%8F%A3)ï¼Œä½ å¯èƒ½è¿™æ ·å†™äº†ï¼š\n\n```jsx\nimport { WebviewWindow } from \"@tauri-apps/api/window\";\nfunction App() {\n    let open = () => {\n        const webview = new WebviewWindow(\"my-label\", {\n            url: \"https://www.tibrella.space/\",\n        });\n        webview.once(\"tauri://created\", function () {\n            console.log(\"Failed\");\n        });\n        webview.once(\"tauri://error\", function (e) {\n            console.log(\"Failed\");\n        });\n    };\n    return <button onClick={open}></button>;\n}\n```\n\nä½†æ˜¯ä½ åˆå‘ç°ï¼Œå’‹è¿è¡Œéƒ½è·‘ä¸èµ·æ¥ï¼Œç„¶åæ§åˆ¶å°é‡Œé¢åªæœ‰ä½ è‡ªå·±è®¾ç½®å¥½çš„ `console.log(\"Failed\");`ï¼Œå…¶ä»–æŠ¥é”™ä¸€æ¦‚æ²¡æœ‰ã€‚\n\nç„¶åæœäº†å¥½ä¹…ï¼Œæˆ‘æ‰¾åˆ°äº†[ä¸€ç¯‡ Tauri æ•™ç¨‹](https://ithelp.ithome.com.tw/m/articles/10304587)ï¼Œé‡Œé¢æåˆ°äº†éœ€è¦æ›´æ”¹ `/src-tauri/tauri.conf.json`ï¼Œä½†æ˜¯å®˜ç½‘æ–‡æ¡£å®Œå…¨æ²¡æœ‰æåˆ°è¿™ä»¶äº‹æƒ…......\n\næœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼š`/src-tauri/tauri.conf.json` ä¸­ `\"allowlist\"` å­—æ®µæ·»åŠ  `\"window\": { \"create\": true }` å³å¯ã€‚\n\n```diff\n{\n    \"build\": {\n        \"beforeDevCommand\": \"pnpm dev\",\n        \"beforeBuildCommand\": \"pnpm build\",\n        \"devPath\": \"http://localhost:1420\",\n        \"distDir\": \"../dist\",\n        \"withGlobalTauri\": false\n    },\n    \"package\": {\n        \"productName\": \"name\",\n        \"version\": \"0.0.0\"\n    },\n    \"tauri\": {\n        \"allowlist\": {\n            \"all\": false,\n            \"shell\": {\n                \"all\": false,\n                \"open\": true\n-            }\n+            },\n+            \"window\": {\n+                \"create\": true\n+            }\n        },\n        \"bundle\": {\n            \"active\": true,\n            \"targets\": \"all\",\n            \"identifier\": \"com.tauri.dev\",\n            \"icon\": [\n                \"icons/32x32.png\",\n                \"icons/128x128.png\",\n                \"icons/128x128@2x.png\",\n                \"icons/icon.icns\",\n                \"icons/icon.ico\"\n            ]\n        },\n        \"security\": {\n            \"csp\": null\n        },\n        \"windows\": [\n            {\n                \"fullscreen\": false,\n                \"resizable\": true,\n                \"title\": \"name\",\n                \"width\": 800,\n                \"height\": 600\n            }\n        ]\n    }\n}\n```\n\nä¿®æ”¹ä¹‹åå°±å¯ä»¥æŒ‰ç…§æœ€å¼€å§‹æåˆ°çš„æ–¹æ³•åŠ¨æ€åˆ›å»ºæ–°çª—å£äº†ã€‚","categories":["Tauri"]},{"title":"å¦‚ä½•åœ¨ä½¿ç”¨ Linux ç¯å¢ƒçš„æ¯”èµ›ç°åœºé…ç½®ä¸€ä¸ªå¥½ç”¨çš„ Visual Studio Codeï¼Ÿ","path":"/post/noi-vscode/","content":"æœ¬æ–‡çš„ vscode é…ç½®æ— éœ€ä»»ä½•æ‰©å±•ï¼Œå¯ä»¥ç›´æ¥åœ¨çº¯ vscode/code-oss/vscodium ç«¯ä½¿ç”¨ã€‚è§†é¢‘é‡‡ç”¨äº† AV1 ç¼–ç  + webm å®¹å™¨å°è£…ï¼Œå¦‚æœè§‚çœ‹ä¸äº†è¯·ä½¿ç”¨æœ€æ–°ç‰ˆ chromium/firefoxï¼Œæˆ–è€…ä¸‹è½½åè§‚çœ‹ã€‚æŒ‡ä»¤æœ‰ç»è¿‡ä¿®æ”¹ï¼Œè¯·ä»¥ä¸‹æ–‡ç»™å‡ºçš„ä¸ºå‡†ã€‚  ~~æ‡’å¾—é‡æ–°å½•è§†é¢‘äº†~~é…ç½®æ¼”ç¤ºè§†é¢‘ï¼ŒåŒ…å«å¿«æ·é”®æ¼”ç¤ºä½ ä¼šå†™ JSON å—ï¼Ÿä¸ä¼šå†™çš„è¯ä½ åªéœ€è¦çŸ¥é“è¿™ç©æ„éœ€è¦ä¸€å¤§å †å¤§æ‹¬å·å°±è¡Œäº†ã€‚ç›´æ¥ç»™ä½ ä¸€å¥—é…ç½®æ–‡ä»¶ï¼šä½ç½®ï¼š`.vscode/tasks.json`ï¼Œé¡¹ç›®æ ¹ç›®å½•ä¸‹ã€‚```json{ \"version\": \"2.0.0\", \"tasks\": [ { \"label\": \"My Task\", \"type\": \"shell\", \"command\": \"dirname ${file}/.. && g++ ${file} -o out.exe -O2 && ./out.exe && rm ./out.exe\", \"problemMatcher\": [] } ]}```ç¨‹åºé…ç½®æ–‡ä»¶ç›®å½•ä¸‹ `keybindings.json`ï¼š  ```json[ { \"key\": \"F4\", \"command\": \"workbench.action.tasks.runTask\", \"args\": \"My Task\" }]````dirname + æ–‡ä»¶è·¯å¾„` å¯ä»¥æå–å‡ºè¿™ä¸ªæ–‡ä»¶è·¯å¾„çš„æ–‡ä»¶å¤¹ä½ç½®ã€‚ç„¶å bash æœ‰ä¸ªç‰¹æ€§å°±æ˜¯è¾“å…¥æ–‡ä»¶å¤¹åç§°ç›¸å½“äº `cd` + è¿™ä¸ªæ–‡ä»¶å¤¹åç§°ã€‚ä½œç”¨æ˜¯è¿›å…¥ C++ æºæ–‡ä»¶ç›®å½•ã€‚`${file}` æ˜¯æ–‡ä»¶åå˜é‡ï¼Œ`&&` æ˜¯å…³ç³»è¿ç®—ç¬¦ã€‚`args` å’Œ `label` æ˜¯ä»»åŠ¡çš„åç§°ï¼Œéšä¾¿å–ä¸€ä¸ªå°±è¡Œã€‚è¿™é‡Œé‡‡ç”¨äº†é»˜è®¤çš„ \"My Task\"ã€‚`command` éƒ¨åˆ†ä¸ºäº†å…¼å®¹ Windows è€ŒåŠ ä¸Šäº† `.exe` æ‰©å±•åï¼Œå¯¹ Linux æ²¡æœ‰å½±å“ã€‚`problemMatcher` è¡Œå¯ä»¥å»æ‰ï¼Œè¿™è¡Œæ˜¯ VSCode é»˜è®¤é…ç½®å¸¦ä¸Šçš„ã€‚`F4` å¯ä»¥æ”¹æˆä»»æ„å…¶ä»–é”®ï¼Œå…·ä½“çœ‹è§†é¢‘ï¼Œæ·»åŠ é”®ç»‘å®šæ—¶æŒ‰ç…§è¦æ±‚æŒ‰ä¸‹æƒ³è¦è®¾ç½®çš„å¿«æ·é”®ç»„åˆå³å¯ã€‚éå¸¸çŸ­ï¼Œå¤§éƒ¨åˆ†æœ‰è‡ªåŠ¨è¡¥å…¨ã€‚","categories":["æ‚æ–‡"]},{"title":"2023.9.2 é—²è¯","path":"/post/diary-2023-09-02/","content":"æ¨¡æ‹Ÿèµ›è¿ç»­çˆ†ä¸¤å¤©è›‹äº†ã€‚\n\nä¸æ˜¯ï¼ŒCF ä¸è®¾ç½®éƒ¨åˆ†åˆ†é‚£æˆ‘æ€ä¹ˆæ‹¿éƒ¨åˆ†åˆ†ã€‚ç„¶åå°±ç¡è§‰å†™åšå®¢å‘—ã€‚\n\nè”èµ›é€€å½¹èµ¶ç´§å›å»å­¦æ–‡åŒ–è¯¾å§ã€‚\n\n---\n\nBaoshuo é…çš„ s2oj docker-compose æ˜¯æ®‹åºŸå•Š...æŠ˜è…¾äº†å¥½ä¹…ï¼Œè¿˜å¾—æ‰‹åŠ¨è¿›å»å¯åŠ¨ apache2 ç„¶åè®¾ç½® mysql è´¦æˆ·å¯†ç ã€‚\n\nå¯åŠ¨ä¸€ä¸ª S2OJ æ€§èƒ½æå‡è®¡åˆ’ï¼š\n\n- [ ] æœåŠ¡ç«¯ç”± Apache æ›´æ¢åˆ° OpenLiteSpeed\n- [ ] OpenLiteSpeed å¯ç”¨ HTTP3/QUIC ä¼ è¾“\n- [ ] æœåŠ¡ç«¯ Docker åŸºç¡€é•œåƒç”± Ubuntu æ›´æ¢ä¸º Debian sid/Alpine\n- [ ] C/C++ éƒ¨åˆ†ä½¿ç”¨ Clang ç¼–è¯‘ï¼Œå¹¶æ·»åŠ æŒ‡ä»¤é›†ä¼˜åŒ–ï¼ˆS2OJ æœºå­æ˜¯æ”¯æŒ avx2 çš„ï¼‰\n\nå‰ææ˜¯è”ç³»ä¸Š Baoshuo å¹¶å‘ä»–è¦ä¸€ä»½é…ç½®æ–‡ä»¶ï¼ˆ\n\n---\n\næ¨æ­Œï¼šã€ã¾ãŸæœˆå¤œã«ã€ - ã‚ã‚‰ã¿ã½ã£ã·\n\nå‡‹å¶æ£•æ–°ä¸“è¾‘çš„æ”¶éŸ³æ¯”ä¸Šä¸€å¼ å¼ºäº†ç‚¹ï¼Œèƒ½ä½“ç°å‡ºæ¥æ¢…æ‹‰ç±³å®Œç¾æ— ç‘•çš„å£°éŸ³äº†ã€‚\n\nä½†æ˜¯æ­Œå¥½å°‘ï¼Œåªæœ‰å››é¦–ï¼Œå…¶ä»–éƒ½æ˜¯å¿µç™½ï¼Œnayuta åªåœ¨æœ€åçš„å¿µç™½é‡Œé¢å‡ºç°äº†ï¼Œå¥½å¯æƒœï¼Œæƒ³å¬ nayuta å”±æ­Œã€‚\n\nè¿™ä¸€é¦–æ„Ÿè§‰ç®—æŒºå®¹æ˜“ä¸­æ¯’çš„ä¸€é¦–ï¼ŒVocal å£°çº¿ä¹Ÿå¾ˆå¼ºå¤§ã€‚\n\n---\n\nCF585E\n\nå¾…è¡¥ã€‚\n\nè®¡æ•°æ‚é¢˜æ›´æ–°äº†ä¸¤é“æ¨¡æ‹Ÿèµ›é¢˜ã€‚","tags":["é—²è¯"],"categories":["é—²è¯"]},{"title":"2023.8.28 é—²è¯","path":"/post/diary-2023-08-28/","content":"ä¸çŸ¥é“ä¸ºå•¥ç”¨çš„ ZXGU çš„æé™ç²¾ç®€ç³»ç»Ÿä¼šå¯¼è‡´ steam å‡ºç°å‚»é€¼é—®é¢˜ï¼Œå¼€äº†å¹²å‡€å¯åŠ¨æ‰èƒ½ç©ä¸Š CSGOã€‚\n\n---\n\næ²¡ä¸‡ç”¨è¡¨ï¼Œæ²¡ä¸‰æç®¡ï¼Œæ²¡çº¿ï¼Œæ²¡é’±ï¼Œå•¥éƒ½æ²¡æœ‰ï¼Œç„¶åæ•°ç ç®¡ç°åœ¨å®Œå…¨æä¸æ˜ç™½æ€ä¹ˆç”¨ã€‚\n\næ”¹å¤©å…ˆæŠŠé©±åŠ¨ LED çš„æ•™ç¨‹å†™äº†å§ã€‚\n\n---\n\næ¨æ­Œ\n\nå¿˜å´ã®é›¨ â€”â€” ã‚ã•ãªï¼Œä¸“è¾‘ä¸º IOSYSã€ŠROCKIN'ON TOUHOU VOL.1ã€‹\n\nè¿ä¸‹ä¸¤å¤©é›¨ï¼Œç¬¬ä¸€ä¸ªæƒ³åˆ°çš„å°±æ˜¯è¿™é¦–æ­Œã€‚\n\nå„ï¼Œç®—æˆ‘å¬è¿‡çš„ç¬¬ä¸€é¦–å¯¿å‘½è®ºæ­Œæ›²ï¼Œè®²çš„æ˜¯è•¾ç±³å†ä¹Ÿå–ä¸åˆ°å’²å¤œæ³¡çš„çº¢èŒ¶äº†ã€‚\n\nå•Šå•Šï¼Œè¿˜çœŸæ˜¯å¿ƒç—›å‘¢ã€‚\n\näººæ€»æ˜¯è¿™æ ·ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°ç¦»å»ï¼Œè°ä¹Ÿä¸çŸ¥é“æ˜å¤©è¿æ¥çš„æ˜¯æ­»äº¡è¿˜æ˜¯ç”Ÿå­˜ã€‚\n\nå”¯ä¸€è¦åšçš„æ˜¯åƒå·²ç»ç¦»å»çš„ä¼Ÿå¤§çš„äººä¸€æ ·ï¼Œä¸ºåä¸–ç•™ä¸‹è‡ªå·±èƒ½ç•™ä¸‹çš„ä¸œè¥¿ï¼Œæ´»ä¸‹å»çš„ç›®çš„å°±æ˜¯ä¼ é€’è¿™æ ·æŠ½è±¡çš„è„†å¼±è€Œå¼ºå¤§çš„æ‰€è°“å¸Œæœ›ã€‚\n\n---\n\nå€¼åŸŸå·¨ä»–å¦ˆå¤§çš„ç®€å•è®¡ç®—é¢˜æ±‚è§£å¯ä»¥åˆ©ç”¨å“ˆå¸Œçš„æ€æƒ³ï¼Œæ‰”ä¸€å †æ¨¡æ•°åˆ†åˆ«è®¡ç®—ã€‚\n\næ¯”å¦‚ä¸€å…ƒé«˜æ¬¡æ–¹ç¨‹ï¼Œå®ƒæœ¬èº«çš„è§£åœ¨æ¨¡ä¸€ä¸ªæ•°çš„æ„ä¹‰ä¸‹ä¸€å®šä¹Ÿæ˜¯è¿™ä¸ªæ–¹ç¨‹çš„è§£ã€‚\n\n---\n\nå°ç±³èƒ½ä¸èƒ½æ­»å•Šï¼Œax3000 å¼€ ssh å¤ªè´¹åŠ²äº†ï¼Œæ‡’å¾—æã€‚\n\n---\n\nCEC IDE æ˜¯æœ¬å¹´åº¦æœ€ä½³ç¬‘è¯ã€‚","tags":["é—²è¯"],"categories":["é—²è¯"]},{"title":"æ‰‹æŠŠæ‰‹å¸¦ä½ å®ç°è·³è¡¨","path":"/post/skip-list/","content":"å¼•å…¥è·³è¡¨ï¼ˆè·³è·ƒè¡¨ï¼‰èƒ½å¤Ÿç»´æŠ¤ä¸€ä¸ªæ•°çš„é›†åˆï¼ˆä½œç”¨ç±»ä¼¼æ™®é€šå¹³è¡¡æ ‘ï¼‰ï¼ŒæŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä¸º $\\Theta(\\log n)$ï¼Œä¸å¹³è¡¡æ ‘ä¸€æ ·åŸºäºé“¾è¡¨ç»“æ„ã€‚ç”±äºä¸éœ€è¦å¹³è¡¡æ ‘é‚£ä¹ˆå¤šæ—‹è½¬ä»€ä¹ˆçš„ï¼Œæ‰€ä»¥æ•ˆç‡æ¯”è¾ƒé«˜ï¼Œä¸€èˆ¬è®¤ä¸ºæ€§èƒ½èƒ½æ‰“çº¢é»‘æ ‘ã€‚é™¤æ­¤ä»¥å¤–ï¼Œé“¾è¡¨çš„ç‰¹æ€§ä½¿å®ƒèƒ½å¤Ÿä»¥çº¿æ€§æ—¶é—´éå†æŸä¸ªå­æ®µã€‚Redis çš„æœ‰åºé›†åˆå°±æ˜¯ç”¨è·³è¡¨å®ç°çš„ã€‚æ›´ç®€å•æ¥è¯´ï¼Œè·³è¡¨æ˜¯ä¸€ä¸ªæ”¯æŒ $\\Theta(\\log n)$ æ—¶é—´éšæœºè®¿é—®çš„é“¾è¡¨ã€‚å®šä¹‰ä¸Šé¢è¿™ä¸ªä¸œè¥¿å«é“¾è¡¨ã€‚æˆ‘ä»¬çŸ¥é“ï¼Œé“¾è¡¨åªæ”¯æŒçº¿æ€§æ—¶é—´è®¿é—®ï¼Œæ‰€ä»¥ä¸èƒ½äºŒåˆ†ã€‚æˆ‘ä»¬å¦‚æœæƒ³ç»´æŠ¤ä¸€ä¸ªæœ‰åºåºåˆ—çš„è¯ï¼Œè™½ç„¶æ’å…¥åˆ é™¤å¾ˆå¿«ï¼Œä½†æ˜¯æ‰¾åˆ°ä¸€ä¸ªå€¼å¯¹åº”çš„ä½ç½®å¾ˆæ…¢ã€‚æˆ‘ä»¬åˆçŸ¥é“ï¼Œé“¾è¡¨çš„è®¿é—®å½¢å¼å®é™…ä¸Šæ˜¯ä¸€ä¸ªä¸€ä¸ªéå†ï¼Œè€Œå®ƒæœ‰ $n$ ä¸ªå…ƒç´ ï¼Œè¿™æ˜¯å®ƒ $\\Theta(n)$ å¤æ‚åº¦éšæœºè®¿é—®çš„æ ¹æºæ‰€åœ¨ã€‚é‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥ç»™é“¾è¡¨ç²¾ç®€ä¸€ä¸‹å‘¢ï¼Ÿæ¯”å¦‚è¯´ï¼Œæˆ‘ç»™é“¾è¡¨å¤šåŠ å‡ å±‚ï¼Œæ¯å±‚å‡å°‘ä¸€åŠçš„å…ƒç´ ï¼Œåƒè¿™æ ·ï¼šï¼ˆè“è‰²æ–¹æ¡†æ‹¬èµ·æ¥çš„æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå®ç°çš„æ—¶å€™æˆ‘ä»¬ä¸éœ€è¦æŠŠä¸Šé¢å‡ å±‚æ˜¾å¼åœ°å»ºå‡ºæ¥ï¼Œåªéœ€è¦åˆ›å»ºå¯¹åº”å±‚çš„æŒ‡é’ˆå³å¯ã€‚ï¼‰è¿™æ ·çš„è¯ï¼Œæˆ‘å°±èƒ½åƒä¸Šå›¾è¿™æ ·æ‰¾åˆ° $78$ è¿™ä¸ªèŠ‚ç‚¹äº†ã€‚æ©™è‰²è·¯å¾„æ˜¯åŸæœ‰è·¯å¾„ï¼Œèµ°äº† $4$ æ¬¡ã€‚è€Œä¸Šé¢çš„ç»¿è‰²è·¯å¾„åªèµ°äº† $\\log_2 4 = 2$ ä¸ªæ¬¡ã€‚å¥½å¥½å¥½ï¼Œé‚£æˆ‘è¿™æ ·å»ºçš„è¯ï¼Œæˆ‘å°±èƒ½åœ¨é“¾è¡¨ä¸ŠäºŒåˆ†äº†ï¼  å®é™…ä¸Šè¿™ä¸ªä¸œè¥¿å«å®Œç¾è·³è¡¨ã€‚è·³è¡¨åˆ†ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä¸Šé¢çš„å®Œç¾è·³è¡¨ï¼ˆæš‚ä¸”è¿™æ ·å«ï¼‰ã€‚è¿™ä¸ªä¸œè¥¿æœ€å¤§çš„ç‰¹ç‚¹å°±æ˜¯è¿‡äºç†æƒ³åŒ–äº†ã€‚å¦‚æœåŠ ä¸Šæ’å…¥åˆ é™¤çš„è¯ï¼Œç»´æŠ¤å¯¹åº”å±‚çš„æŒ‡é’ˆå°±å¤ªéš¾äº†ï¼Œæ¯æ¬¡éƒ½å¾—æ›´æ–°ã€‚å¦ä¸€ç§æ˜¯åŸºäºéšæœºåŒ–çš„è·³è¡¨ã€‚  è¦éšæœºåŒ–çš„ä¸œè¥¿å«åš $level$ã€‚ä¸€ä¸ªè·³è¡¨èŠ‚ç‚¹çš„ $level$ï¼Œä»£è¡¨ç€è¿™ä¸ªèŠ‚ç‚¹åŒæ—¶å­˜åœ¨äº $1 \\sim level$ å±‚çš„é“¾è¡¨ä¸­ã€‚æ¯”å¦‚è¯´ï¼Œä¸Šå›¾çš„å€¼ä¸º $1$ çš„èŠ‚ç‚¹ $level = 3$ï¼Œå€¼ä¸º $23$ çš„èŠ‚ç‚¹ $level = 1$ã€‚  å– $level$ çš„æ–¹å¼ç±»ä¼¼äºæŠ›ç¡¬å¸ï¼Œè®¡ç®— $level$ æ—¶ï¼Œå¦‚æœç¡¬å¸æ­£é¢æœä¸Šï¼Œå°± $+1$ å¹¶ç»§ç»­æŠ›ï¼›å¦‚æœåé¢æœä¸Šï¼Œåˆ™åœæ­¢ã€‚é€šè¿‡è¿™æ ·å®šä¸‹èŠ‚ç‚¹ $level$ çš„è·³è¡¨å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦å®ç°çš„è·³è¡¨ã€‚åŸºæœ¬å®ç°ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºï¼Œè¿™é‡Œå°±ä¸å†å°è£…è·³è¡¨äº†ï¼Œå…¶å®è·Ÿç€æ•™ç¨‹ä¸€è¾¹èµ°ä¸€è¾¹å°è£…ä¹Ÿæ˜¯å¯è¡Œçš„ã€‚ä¸€äº›å˜é‡`int level` è®°å½•è·³è¡¨çš„æœ€é«˜ levelã€‚`Node head` ä¸ºäº†é˜²æ­¢è¿‡å¤šçš„è¾¹ç•Œçš„åˆ†ç±»è®¨è®ºï¼Œå»ºç«‹ä¸€ä¸ªç©ºç»“ç‚¹å½“å¤´èŠ‚ç‚¹ã€‚èŠ‚ç‚¹åŠ¨æ€åˆ†é…å†…å­˜å¤ªæ…¢äº†ï¼Œå¦‚æœç”¨åŠ¨æ€åˆ†é…çš„ï¼Œæˆ‘è¿˜ä¸å¦‚ç›´æ¥ STLã€‚æ‰€ä»¥å¼€å¥½æ•°ç»„ä½œä¸ºé¢„åˆ†é…çš„ç©ºé—´ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥å¼€ä¸€ä¸ªæŒ‡é’ˆè®°å½•åˆ†é…åˆ°äº†å“ªä¸€ä¸ªä½ç½®ã€‚éœ€è¦åˆ›å»ºæ–°èŠ‚ç‚¹çš„æ—¶å€™ç›´æ¥è¿”å›ä¸€ä¸ª `++tot` å³å¯ã€‚```cppstruct Node { int key, level; Node* nxt[MAX_LEVEL];} space[N], *tot = space;```æ­¤å¤„ `level` çš„å«ä¹‰æ˜¯ï¼šè¯¥èŠ‚ç‚¹å­˜åœ¨äº 0 åˆ° `level`-1 å±‚çš„é“¾è¡¨ä¸­ï¼Œä¸å‰æ–‡å®šä¹‰ 1 åˆ° `level` ä¸åŒã€‚åƒåœ¾å›æ”¶å¯ä»¥è‡ªå·±å®ç°ï¼Œå¾…ä¼šçš„æ•´ä½“æ¼”ç¤ºé‡Œé¢ä¼šæ”¾ã€‚åˆ†é…ä¸€ä¸ªæ–°èŠ‚ç‚¹ç©ºé—´ï¼Œè¿”å›æ–°èŠ‚ç‚¹çš„æŒ‡é’ˆï¼š```cpp#define new_node() (++tot)```åˆ›å»ºä¸€ä¸ªå€¼ä¸º `key` é«˜åº¦ä¸º `level` çš„èŠ‚ç‚¹ï¼š```cppNode* create_node(int level, int key) { Node* res = new_node(); res->level = level; res->key = key; return res;}```éšæœºç”Ÿæˆ levelå‰é¢è¯´äº†ï¼Œæ˜¯æŠ›ç¡¬å¸ã€‚æ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å€Ÿç”¨ä¸€äº›éšæœºæ•°ç”Ÿæˆå™¨[^1]ã€‚ç„¶åæˆ‘ä»¬è‚¯å®šä¸èƒ½è®©å±‚æ•°æ— é™å¤§å•Šï¼Œæ‰€ä»¥éœ€è¦è®¾ç½®ä¸€ä¸ª `MAX_LEVEL` ä½œä¸ºæœ€å¤§å±‚æ•°ã€‚```cpp#define MAX_LEVEL 12std::random_device seed;std::minstd_rand rng(seed());int random_level() { int res = 1; while (res < MAX_LEVEL && (rng() & 1)) { ++res; } return res;}```æ’å…¥èŠ‚ç‚¹å£°æ˜ï¼š```cppvoid insert(int key);```ä¸‰æ­¥èµ°ï¼šæ‰¾åˆ°éœ€è¦æ’å…¥çš„ä½ç½®ï¼Œæ’å…¥èŠ‚ç‚¹ï¼Œæ›´æ–°å¯¹åº” level çš„é“¾è¡¨ã€‚é¦–å…ˆæˆ‘ä»¬ç›´æ¥ä»é«˜ level å¼€å§‹è·³ï¼Œè·³ä¸äº†äº†å°±è·³ä½ä¸€çº§çš„ level å³å¯æ‰¾åˆ°éœ€è¦æ’å…¥çš„ä½ç½®ã€‚  åŒæ—¶è®°å½•æ¯ä¸€ä¸ª level çš„å½“å‰ä½ç½®ä¹‹å‰çš„èŠ‚ç‚¹ã€‚ï¼ˆå³å¯èƒ½éœ€è¦æ›´æ–°åå‘æŒ‡é’ˆçš„èŠ‚ç‚¹ï¼‰ã€‚```cppNode *cur = head;  // currentfor (int lev = level - 1; lev != -1; --lev) { while (cur->nxt[lev] && cur->nxt[lev]->key < key) cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ update[lev] = cur;}```ç»†èŠ‚ï¼šå¯èƒ½å½“å‰ level è¿˜æ²¡æœ‰åˆ°è·³è¡¨å¯èƒ½è¾¾åˆ°çš„æœ€é«˜ levelï¼Œä½†æ˜¯å½“å‰è¿™ä¸ªèŠ‚ç‚¹éšæœºåˆ°çš„ level å€¼åœ¨è¿™ä¸¤ä¸ªæ•°ä¸­é—´ï¼Œæ‰€ä»¥éœ€è¦å°† `level` åˆ° `MAX_LEVEL` è¿™æ®µè¡¥å…¨ä¸º `head`ï¼š```cppint lev = random_level(); // å½“å‰èŠ‚ç‚¹çš„ level å€¼if (lev > level) { for (int i = level; i < lev; ++i) update[i] = head; level = lev;}```åˆ›å»ºèŠ‚ç‚¹ï¼š```cppcur = create_node(lev, key);```æ‰§è¡Œæ’å…¥æ“ä½œï¼Œå³å¯¹äºæ¯ä¸€å±‚é“¾è¡¨ï¼Œæ›´æ–°å‰ä¸€ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œå¹¶è®©å½“å‰èŠ‚ç‚¹çš„åå‘æŒ‡é’ˆæŒ‡å‘åä¸€ä¸ªèŠ‚ç‚¹ã€‚```cppfor (int i = lev - 1; i > -1; --i) {  // æ™®é€šé“¾è¡¨æ’å…¥æ“ä½œ cur->nxt[i] = update[i]->nxt[i]; update[i]->nxt[i] = cur;}```åˆ é™¤èŠ‚ç‚¹å’Œæ’å…¥ç±»ä¼¼ã€‚```cppvoid erase(int key) { nodePointer cur = head;  // current for (int lev = level - 1; lev != -1; --lev) { while (cur->nxt[lev] && cur->nxt[lev]->key < key) cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ update[lev] = cur; } cur = cur->nxt[0]; for (int i = 0; i < level; ++i) if (update[i]->nxt[i] == cur) update[i]->nxt[i] = cur->nxt[i]; else break; while (level > 1 && !head->nxt[level - 1])  // æ›´æ–°å½“å‰æœ€å¤§å±‚æ•° --level;}```é¢å¤–è¦æ³¨æ„çš„æ˜¯ï¼Œå¯èƒ½è·³è¡¨çš„æœ€é«˜å±‚å°±è¿™ä¸€ä¸ªèŠ‚ç‚¹ï¼Œåˆ äº†å°±æ²¡äº†ï¼Œæ‰€ä»¥è¦åˆ¤æ–­å¹¶æ›´æ–°æœ€å¤§å±‚æ•°ã€‚æŸ¥æ‰¾ç»“ç‚¹å®é™…ä¸Šä¸Šé¢ä¸¤ä¸ªå‡½æ•°çš„ç¬¬ä¸€éƒ¨åˆ†å°±ç›¸å½“äºæŸ¥æ‰¾ã€‚```cppbool find(int key) { Node* cur; for (int lev = level - 1; lev > -1; --lev) while (cur->nxt[lev] && cur->nxt[lev]->key < key) cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ return cur->nxt[0] ? cur->nxt[0]->key == key : false;}```æŸ¥æ‰¾å‰é©±åç»§çš„æ–¹æ³•ä¹Ÿå·®ä¸å¤šï¼Œå‰é©±å°±æ˜¯æŸ¥æ‰¾åç›´æ¥è¿”å› `cur` è€Œä¸æ˜¯ `cur->nxt[0]`ï¼Œåç»§å¯ä»¥è·³åˆ° `cur->nxt[lev]->key <= key` çš„ä½ç½®ä¹‹åè¿”å› `cur->nxt[0]->key`ã€‚æœ€åçš„ä»£ç ä¸­æœ‰ä½“ç°ã€‚éšæœºè®¿é—®ä¸Šé¢å…¶å®å·²ç»å®ç°äº†è·³è¡¨çš„åŸºæœ¬åŠŸèƒ½äº†ï¼Œä½†æ˜¯æ˜¾ç„¶ï¼Œç›®å‰å®ç°çš„åŠŸèƒ½éƒ½å¯ä»¥ç”¨å¹³è¡¡æ ‘æ›¿ä»£ï¼Œè€Œä¸”å¹³è¡¡æ ‘è¿˜èƒ½å¤ŸæŒ‰ç…§æ•°çš„æ’åæŸ¥è¯¢ã€‚ç”±äºç»´æŠ¤çš„æ˜¯æœ‰åºåºåˆ—ï¼Œæ‰€ä»¥æŒ‰ç…§æ•°çš„æ’åæŸ¥è¯¢ç›¸å½“äºéšæœºè®¿é—®ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥å®ç°è·³è¡¨çš„éšæœºè®¿é—®ã€‚å…·ä½“æ–¹æ³•ï¼šç»´æŠ¤æ¯ä¸ªåå‘æŒ‡é’ˆçš„â€œè·¨åº¦â€ï¼ˆspanï¼‰ï¼Œå³å®ƒè·³äº†å‡ ä¸ªèŠ‚ç‚¹ã€‚è®¾æŒ‡é’ˆ $ptr$ ä»ç¬¬ $a$ ä¸ªèŠ‚ç‚¹æŒ‡å‘ç¬¬ $b$ ä¸ªèŠ‚ç‚¹ï¼Œåˆ™ $ptr$ çš„è·¨åº¦ä¸º $b-a$é™¤æ­¤ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»´æŠ¤ä¸€ä¸ªé•¿åº¦ `length`ï¼Œåœ¨æ¯æ¬¡ `erase` å’Œ `insert` çš„æ—¶å€™åŠ å‡ä¸€ä¸‹å°±å¥½äº†ã€‚é‡å†™æ™ºèƒ½æŒ‡é’ˆ~~å•¥æ˜¯æ™ºèƒ½æŒ‡é’ˆï¼Ÿä¸å¤ªæ¸…æ¥šï¼Œä½†æ˜¯æˆ‘æ„Ÿè§‰ç»´æŠ¤ä¸€ä¸ª span çš„æŒ‡é’ˆå®åœ¨å¤ªæ™ºèƒ½äº†ï¼~~æˆ‘ä»¬éœ€è¦ç»™æŒ‡é’ˆè®°å½•ä¸€ä¸ªâ€œè·¨åº¦â€ï¼Œé‚£å°±ç»´æŠ¤ä¸€ä¸ªç»“æ„ä½“ä½œä¸ºæŒ‡é’ˆï¼Œå­˜åŸæ¥çš„è£¸æŒ‡é’ˆå’Œè·¨åº¦ã€‚æ€»çš„æ¥è¯´ï¼Œéœ€è¦æ„é€ å‡½æ•°å¹¶é‡è½½ä¸€ä¸ªè¿ç®—ç¬¦ï¼Œä¸€ä¸ªç±»å‹è½¬æ¢ã€‚```cppstruct nodePointer { int span; Node* pointer; nodePointer() { this->pointer = nullptr; // æ„é€ å‡½æ•°ï¼Œå°†æŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©º } nodePointer(Node* node) { this->pointer = node;  // å¦‚æœæä¾›äº†æŒ‡é’ˆå°±ç”¨æä¾›çš„ } Node* operator->() { return pointer; // æŒ‡é’ˆåŸæœ‰çš„ç®­å¤´è¿ç®—ç¬¦ï¼Œè®¿é—® nodePointer->x ç›¸å½“äºè®¿é—® pointer->x } operator Node*() const { return pointer; // æ™ºèƒ½æŒ‡é’ˆè½¬æ¢ä¸ºè£¸æŒ‡é’ˆï¼Œç›´æ¥è¿”å› pointer å°±å¥½äº† }};```ä¸è¦åœ¨æ‰€æœ‰åœ°æ–¹éƒ½ä½¿ç”¨ `nodePointer`ï¼Œæˆ‘ä»¬åªåœ¨éœ€è¦ç»´æŠ¤è·¨åº¦çš„åœ°æ–¹ä½¿ç”¨å°±å¥½äº†ã€‚  ç¼–å†™ä»£ç æ—¶ä¸€å®šè¦æ³¨æ„ç±»å‹çš„ä½¿ç”¨ï¼Œæ¯”å¦‚è¯´ `unsigned` `long` ä¸åº”ä¹±ç”¨ä¹‹ç±»çš„ã€‚å¦‚æœé”™è¯¯åœ°æ›´æ–° `span`ï¼Œè€Œä½ æ»¥ç”¨äº† `nodePointer`ï¼Œå¯èƒ½å°±æ²¡é‚£ä¹ˆå®¹æ˜“æ‰¾åˆ°é—®é¢˜äº†ã€‚åšä¸»å› ä¸ºæ»¥ç”¨ `unsigned`ï¼Œè·³è¡¨è°ƒäº†ä¸¤å¤©å¤šã€‚éœ€è¦ç»´æŠ¤è·¨åº¦çš„åœ°æ–¹åªæœ‰è·³è½¬ç”¨çš„æŒ‡é’ˆï¼Œå³ `nxt[]`ã€‚child:codeblock open:false color:cyan æ›´æ”¹åçš„ä»£ç ```cppstruct Node { int key, level; struct nodePointer { int span; Node* pointer; nodePointer() { this->pointer = nullptr; // æ„é€ å‡½æ•°ï¼Œå°†æŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©º } nodePointer(Node* node) { this->pointer = node;  // å¦‚æœæä¾›äº†æŒ‡é’ˆå°±ç”¨æä¾›çš„ } Node* operator->() { return pointer; // æŒ‡é’ˆåŸæœ‰çš„ç®­å¤´è¿ç®—ç¬¦ï¼Œè®¿é—® nodePointer->x ç›¸å½“äºè®¿é—® pointer->x } operator Node*() const { return pointer; // æ™ºèƒ½æŒ‡é’ˆè½¬æ¢ä¸ºè£¸æŒ‡é’ˆï¼Œç›´æ¥è¿”å› pointer å°±å¥½äº† } }; nodePointer nxt[MAX_LEVEL];} space[N];using nodePointer = typename Node::nodePointer; // ä¸ºäº†æ–¹ä¾¿ä¹¦å†™ï¼Œç¼©ä¸€ä¸‹```é‡å†™æ’å…¥å‡½æ•°å¼€ä¸€ä¸ªæ•°ç»„è®°å½•æ¯ä¸€å±‚â€œä¸Šä¸€ä¸ªèŠ‚ç‚¹â€çš„ä½ç½®ï¼ˆåˆ©ç”¨è·¨åº¦ï¼‰ã€‚```cppint lst_pos[MAX_LEVEL];```ç„¶ååœ¨å‡½æ•°å¼€å¤´æ‰¾ä½ç½®çš„æ—¶å€™é¡ºä¾¿æŠŠå®ƒå¤„ç†å‡ºæ¥ï¼š```cppfor (int lev = level - 1; lev > -1; --lev) { // æ›´æ–° lst_pos if (lev == level - 1) lst_pos[lev] = 0; // é»˜è®¤å¾—æ˜¯ 0 else lst_pos[lev] = lst_pos[lev + 1]; // å¦åˆ™ä»ä¸Šä¸€å±‚ç»§æ‰¿ while (cur->nxt[lev] && cur->nxt[lev]->key < key) { lst_pos[lev] += cur->nxt[lev].span; // æ›´æ–° cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ } update[lev] = cur;}```æ’å…¥çš„æ—¶å€™è®¡ç®—ä¸€ä¸‹å°±å¥½äº†ã€‚å¦‚å›¾ï¼šç„¶å `level` å¤§äºè¿™ä¸ªèŠ‚ç‚¹çš„æŒ‡é’ˆè·¨åº¦è¦åŠ ä¸€ã€‚ç»“åˆä»£ç ç†è§£ã€‚```cppfor (int i = 0; i < lev; ++i) {  // æ™®é€šé“¾è¡¨æ’å…¥æ“ä½œ cur->nxt[i] = update[i]->nxt[i]; update[i]->nxt[i].pointer = cur; // è¿™é‡Œä¸è¦ç›´æ¥è®© nxt[i] = curï¼Œå› ä¸ºåé¢è¿˜è¦ç”¨åˆ° nxt[i].span cur->nxt[i].span = update[i]->nxt[i].span - (lst_pos[0] - lst_pos[i]); // lst_pos[0] å®é™…ä¸Šå°±æ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„ä½ç½® update[i]->nxt[i].span = lst_pos[0] - lst_pos[i] + 1;}for (int i = lev; i < level; ++i) ++update[i]->nxt[i].span; // ç»´æŠ¤é«˜äºæ–°èŠ‚ç‚¹çš„æŒ‡é’ˆçš„è·¨åº¦```åˆ«å¿˜äº† `++length`ã€‚é‡å†™åˆ é™¤å‡½æ•°æŠŠè¦åˆ æ‰çš„æŒ‡é’ˆçš„ `span` åŠ èµ·æ¥èµ‹å€¼ç»™æ–°æŒ‡é’ˆå°±å¥½äº†ã€‚å’Œ `insert` ä¸€æ ·ï¼Œåˆ«å¿˜è®°æ¯”å½“å‰èŠ‚ç‚¹é«˜çš„æŒ‡é’ˆè·¨åº¦è¦ `-1`ã€‚```cppfor (int i = 0; i < level; ++i) if (update[i]->nxt[i] == cur) update[i]->nxt[i].pointer = cur->nxt[i], update[i]->nxt[i].span += cur->nxt[i].span - 1;  // è·¨åº¦ç›´æ¥æ‰”ç»™å‰é¢é‚£ä¸ªæŒ‡é’ˆå°±è¡Œäº† else --update[i]->nxt[i].span;```éšæœºè®¿é—®ï¼ˆæŒ‰ç…§æ’åæŸ¥è¯¢ï¼‰```cppint findrk(int k) { assert(k <= length && k); // k ä¸æ»¡è¶³è¦æ±‚å°±å¼‚å¸¸ Node* cur = head; for (int lev = level - 1; lev > -1 ; --lev) while (cur->nxt[lev] && k - cur->nxt[lev].span > 0) { k -= cur->nxt[lev].span; cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ } return cur->nxt[0]->key;}```å¾®è°ƒæˆ‘ä»¬å¯ä»¥å¯¹ `MAX_LEVEL` å’Œé€‰å– `level` çš„æ¦‚ç‡è¿›è¡Œå¾®è°ƒã€‚æ¯”å¦‚è¯´ä¸‹é¢çš„æ™®é€šå¹³è¡¡æ ‘ä»£ç ï¼ŒæŠŠé€‰å–å±‚æ•°çš„ $p$ æ”¹æˆäº† $\\frac 14$ï¼Œå³ `(rng() & 1) && (rng() & 1)`ï¼Œ`MAX_LEVEL` è®¾ä¸ºäº† $7$ï¼Œç»æµ‹è¯•è¿™æ ·æ¯”è¾ƒå¿«ï¼Œåœ¨æ— å¿«è¯»ä¸å¼€ O2 çš„æƒ…å†µä¸‹åŠæ‰“ Splay/FHQ/Treapï¼ŒåŠ äº†å¿«è¯» O2 ä¹‹åä¸çŸ¥é“ä¸ºå•¥è·‘ä¸è¿‡æˆ‘ä¹‹å‰å†™çš„æŒ‡é’ˆ FHQ äº†ã€‚å¦å¤–æ•°ç»„ Treap å§‹ç»ˆè¢«åŠæ‰“ã€‚~~è¿™å°±æ˜¯æŒ‡é’ˆå¸¦ç»™æˆ‘çš„è‡ªä¿¡~~åè®°å®é™…ä¸Šè·³è¡¨æœ€å¤§çš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿé¡ºåºè®¿é—®ï¼Œè¿™ç‚¹æ˜¯å¾ˆå¤šå¹³è¡¡æ ‘åšä¸åˆ°çš„ï¼ŒFHQ Treap åˆ†è£‚åŒºé—´ä¹‹åä¸­åºéå†æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¸¸æ•°å¤ªå¤§ã€‚**ç­‰æˆ‘æŠŠè·³è¡¨æ¨¡æ¿é¢˜æå‡ºæ¥ï¼Œä»–ä»¬éƒ½å¾—æ­»ï¼**å®Œæ•´ä»£ç å«ç±»å‹æ³›åŒ–å’Œå°è£…æˆç±»ã€‚å¦å¤–å®ç°äº†ä¸€äº›è¾“å…¥è¾“å‡ºæ“ä½œï¼Œè‡ªå·±çœ‹åº”è¯¥èƒ½çœ‹æ‡‚äº†ã€‚child:codeblock open:false color:cyan ä»£ç ```cpp#include <iostream>#include <random>#include <cassert>#include <cstdlib>using std::cin;using std::cout;std::random_device seed;std::minstd_rand rng(seed());#define N 106#define MAX_LEVEL 32using i32 = signed int;template <typename T>class skiplist {private: i32 level; struct Node { T key; i32 level; // åƒä¸‡çš„åˆ«ç”¨ unsigned struct nodePointer { i32 span; // è¿™ä¸ªä¹Ÿåƒä¸‡ä»–å¦ˆçš„åˆ«ç”¨ unsigned Node* pointer; nodePointer() { this->pointer = nullptr; // æ„é€ å‡½æ•°ï¼Œå°†æŒ‡é’ˆåˆå§‹åŒ–ä¸ºç©º } nodePointer(Node* node) { this->pointer = node;  // å¦‚æœæä¾›äº†æŒ‡é’ˆå°±ç”¨æä¾›çš„ } Node* operator->() { return pointer; // æŒ‡é’ˆåŸæœ‰çš„ç®­å¤´è¿ç®—ç¬¦ï¼Œè®¿é—® nodePointer->x ç›¸å½“äºè®¿é—® pointer->x } operator Node*() const { return pointer; // æ™ºèƒ½æŒ‡é’ˆè½¬æ¢ä¸ºè£¸æŒ‡é’ˆï¼Œç›´æ¥è¿”å› pointer å°±å¥½äº† } }; nodePointer nxt[MAX_LEVEL]; } space[N]; i32 bintop; using nodePointer = typename Node::nodePointer; Node *head, *tail, *tot, *rubbin[N / 4 * 3];#define new_node() (bintop ? rubbin[bintop--] : ++tot)#define del_node(x) (rubbin[++bintop] = (x)) Node* create_node(const i32& level, const T& key) { Node* res = new_node(); res->level = level; res->key = key; return res; } i32 random_level() { i32 res = 1; while (res < MAX_LEVEL && (rng() & 1)) { ++res; } return res; } Node* update[MAX_LEVEL]; i32 lst_pos[MAX_LEVEL + 1];  // æ¯ä¸ª level éå†åˆ°çš„æœ€åä¸€ä¸ªå…ƒç´ çš„ä½ç½®public: skiplist() { tail = nullptr; level = 0; head = tot = space; bintop = 0; length = 0; lst_pos[MAX_LEVEL] = 0; for (i32 i = 0; i < MAX_LEVEL; ++i) head->nxt[i] = nullptr, head->nxt[i].span = 0; } void insert(const T& key) { Node* cur = head;  // current for (i32 lev = level - 1; lev > -1; --lev) { // æ›´æ–° lst_posï¼Œè¿™é‡Œç”±äºå·²ç»æŠŠ lst_pos[MAX_LEVEL] è®¾ä¸º 0 äº†ï¼Œæ‰€ä»¥ä¸éœ€è¦åƒä¸Šæ–‡ä¸€æ ·ç‰¹åˆ¤ lst_pos[lev] = lst_pos[lev + 1]; while (cur->nxt[lev] && cur->nxt[lev]->key < key) { lst_pos[lev] += cur->nxt[lev].span; cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ } update[lev] = cur; } i32 lev = random_level(); if (lev > level) { for (i32 i = level; i < lev; ++i) { update[i] = head; update[i]->nxt[i].span = length;  // è¿™å±‚éƒ½è¿˜æ²¡æœ‰èŠ‚ç‚¹ï¼Œç›´æ¥ä» head æŒ‡å‘å°¾éƒ¨ï¼ˆnullptrï¼‰ï¼Œè·¨åº¦ä¸º length } level = lev; } cur = create_node(lev, key); for (i32 i = 0; i < lev; ++i) {  // æ™®é€šé“¾è¡¨æ’å…¥æ“ä½œ cur->nxt[i] = update[i]->nxt[i]; update[i]->nxt[i].pointer = cur; // è¿™é‡Œä¸è¦ç›´æ¥è®© nxt[i] = curï¼Œå› ä¸ºåé¢è¿˜è¦ç”¨åˆ° nxt[i].span cur->nxt[i].span = update[i]->nxt[i].span - (lst_pos[0] - lst_pos[i]); // lst_pos[0] å®é™…ä¸Šå°±æ˜¯ä¸Šä¸€ä¸ªèŠ‚ç‚¹çš„ä½ç½® update[i]->nxt[i].span = lst_pos[0] - lst_pos[i] + 1; } for (i32 i = lev; i < level; ++i) ++update[i]->nxt[i].span; ++length; } void erase(const T& key) { Node* cur = head;  // current for (i32 lev = level - 1; lev != -1; --lev) { while (cur->nxt[lev] && cur->nxt[lev]->key < key) cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ update[lev] = cur; } cur = cur->nxt[0]; for (i32 i = 0; i < level; ++i) if (update[i]->nxt[i] == cur) update[i]->nxt[i].pointer = cur->nxt[i].pointer, update[i]->nxt[i].span += cur->nxt[i].span - 1;  // è·¨åº¦ç›´æ¥æ‰”ç»™å‰é¢é‚£ä¸ªæŒ‡é’ˆå°±è¡Œäº† else --update[i]->nxt[i].span; while (level > 1 && !head->nxt[level - 1])  // æ›´æ–°å½“å‰æœ€å¤§å±‚æ•° --level; del_node(cur); --length; } bool find(const T& key) { Node* cur = head; for (i32 lev = level - 1; lev > -1; --lev) while (cur->nxt[lev] && cur->nxt[lev]->key < key) cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ return cur->nxt[0] ? cur->nxt[0]->key == key : false; } T findrk(i32 k) { assert(k <= length && k); // k ä¸æ»¡è¶³è¦æ±‚å°±å¼‚å¸¸ Node* cur = head; for (i32 lev = level - 1; lev > -1 ; --lev) while (cur->nxt[lev] && k - cur->nxt[lev].span > 0) { k -= cur->nxt[lev].span; cur = cur->nxt[lev];  // å­˜åœ¨æ»¡è¶³è¦æ±‚çš„ç‚¹å°±è·³ } return cur->nxt[0]->key; } i32 length;};skiplist<i32> list;#include <string>int main() { std::ios::sync_with_stdio(false); cin.tie(nullptr); cout.tie(nullptr); i32 n, tx; cin >> n; for (i32 i = 1; i <= n; ++i) { cin >> tx; list.insert(tx); } std::string s; while (cin >> s) { switch (s[0]) { case ('l'): cout << list.length << std::endl; break; case ('i'): case ('a'): cin >> tx; list.insert(tx); break; case ('d'): case ('r'): { cin >> tx; if (list.find(tx)) list.erase(tx); else cout << \"è¯¥å€¼ä¸å­˜åœ¨\" << std::endl; break; } case ('f'): cin >> tx; cout << (list.find(tx) ? \"å­˜åœ¨\" : \"ä¸å­˜åœ¨\") << std::endl; break; case ('g'): cin >> tx; cout << list.findrk(tx) << std::endl; break; default: cout << \"æœªçŸ¥å‘½ä»¤\" << std::endl; } } return 0;}```child:codeblock open:false color:cyan æ™®é€šå¹³è¡¡æ ‘```cpp#include <iostream>#include <random>using std::cin;using std::cout;using i32 = int;using i64 = long long;std::random_device seed;std::minstd_rand rng(seed());const i32 MAX_LEVEL = 7;#define N 100005struct Node { i32 level; i64 key; struct ptr { Node* pointer; i32 span; ptr() { pointer = nullptr; span = 0; } ptr(Node* x) { pointer = x; span = 0; } operator Node*() const& { return pointer; } Node* operator->() const& { return pointer; } } nxt[MAX_LEVEL];} space[N], *rubbin[N];Node* tot = space;Node* head = space;i32 bintop;#define new_node() (bintop ? rubbin[bintop--] : ++tot)#define del_node(x) (rubbin[++bintop] = (x))i32 level;  // global max level nowi32 length;i32 random_level() { i32 res = 1; while (res < MAX_LEVEL && (rng() & 1) && (rng() & 1)) ++res; return res;}Node* create_node(const i32& level, const i64& key) { Node* res = new_node(); res->key = key; res->level = level; return res;}void insert(const i64& key) { Node* cur = head; Node::ptr update[MAX_LEVEL]; i32 lst_pos[MAX_LEVEL + 1]; lst_pos[level] = 0; for (i32 l = level - 1; l > -1; --l) { lst_pos[l] = lst_pos[l + 1]; while (cur->nxt[l] && cur->nxt[l]->key < key) { lst_pos[l] += cur->nxt[l].span; cur = cur->nxt[l]; } update[l] = cur; } i32 lev = random_level(); if (lev > level) { for (i32 i = level; i < lev; ++i) { update[i] = head; update[i]->nxt[i].span = length; lst_pos[i] = 0; } level = lev; } cur = create_node(lev, key); for (i32 i = 0; i < lev; ++i) { cur->nxt[i] = update[i]->nxt[i]; cur->nxt[i].span = update[i]->nxt[i].span - (lst_pos[0] - lst_pos[i]); update[i]->nxt[i].pointer = cur; update[i]->nxt[i].span = lst_pos[0] - lst_pos[i] + 1; } for (i32 i = lev; i < level; ++i) ++update[i]->nxt[i].span; ++length;}void erase(const i64& key) { Node* cur = head; Node::ptr update[MAX_LEVEL]; for (i32 l = level - 1; l > -1; --l) { while (cur->nxt[l] && cur->nxt[l]->key < key) cur = cur->nxt[l]; update[l] = cur; } cur = cur->nxt[0]; for (i32 i = 0; i < level; ++i) if (update[i]->nxt[i] == cur) update[i]->nxt[i].span += cur->nxt[i].span - 1, update[i]->nxt[i].pointer = cur->nxt[i].pointer; else --update[i]->nxt[i].span; while (level > 1 && !head->nxt[level - 1]) --level; del_node(cur); --length;}i32 get_rk(const i64& key) { Node* cur = head; i32 res = 0; for (i32 l = level - 1; l > -1; --l) { while (cur->nxt[l] && cur->nxt[l]->key < key) { res += cur->nxt[l].span; cur = cur->nxt[l]; } } return res + 1;}i64 find_by_rk(i32 k) { Node* cur = head; for (i32 l = level - 1; l > -1; --l) { while (cur->nxt[l] && k - cur->nxt[l].span > 0) { k -= cur->nxt[l].span; cur = cur->nxt[l]; } } return cur->nxt[0]->key;}Node* prev(const i64& key) { Node* cur = head; for (i32 l = level - 1; l > -1; --l) { while (cur->nxt[l] && cur->nxt[l]->key < key) cur = cur->nxt[l]; } return cur;}Node* next(const i64& key) { Node* cur = head; for (i32 l = level - 1; l > -1; --l) { while (cur->nxt[l] && cur->nxt[l]->key <= key) cur = cur->nxt[l]; } return cur->nxt[0];}int main() { std::ios::sync_with_stdio(false); cin.tie(nullptr); cout.tie(nullptr); i32 n; i32 op, x; cin >> n; while (n--) { cin >> op >> x; switch (op) { case (1): insert(x); break; case (2): erase(x); break; case (3): cout << get_rk(x) << '\\n'; break; case (4): cout << find_by_rk(x) << '\\n'; break; case (5): cout << prev(x)->key << '\\n'; break; case (6): cout << next(x)->key << '\\n'; break; } // cout.flush(); } return 0;}```å¤æ‚åº¦åˆ†æç©ºé—´å¤æ‚åº¦è®¾å®šäº†æœ€é«˜ `level`ï¼Œæ‰€ä»¥ç©ºé—´å¤æ‚åº¦åªèƒ½æ˜¯ $\\Theta(n)$ çš„ã€‚æ—¶é—´å¤æ‚åº¦è§ OI Wikiå‚è€ƒæ–‡çŒ®ã€Šè·³è·ƒè¡¨æ•°æ®ç»“æ„ä¸ç®—æ³•åˆ†æã€‹ çºªå“å¿— Georgeã€Šè·³è¡¨ã€‹ OI Wikiæ¨èé˜…è¯»ã€Šå…³äº skip list çš„ä¸€äº›æ‰©å±•æƒ³æ³•ã€‹[^1]: æœ‰çš„æœ‹å‹å¯èƒ½ä¼šæœ‰ç–‘é—®å•Šï¼Œä¸ºä»€ä¹ˆèƒ½å¤Ÿç›´æ¥å–éšæœºæ•°çš„æŸä¸€ä½å‘¢ï¼Ÿè¿™ä¸ä¼šåˆ†å¸ƒåœ°ä¸å¤Ÿå‡åŒ€å—ï¼Ÿä¸ºä»€ä¹ˆç”¨çº¿æ€§åŒä½™è€Œä¸ç”¨ç»Ÿè®¡æ„ä¹‰æ›´å¥½çš„ `mt19937` å‘¢ï¼Ÿæˆ‘æƒ³ç”¨ `std::bernoulli_distribution` å¯ä»¥å—ï¼Ÿ æœ¬äººåšäº†æµ‹è¯•ï¼Œåœ¨éšæœºç§å­ + 1000 æ¬¡å–å€¼çš„æµ‹è¯•ä¸‹ï¼Œæ¢…æ£®ç¼ ç»•å’Œçº¿æ€§åŒä½™ä¸¤ç§ç®—æ³•é€šè¿‡ `& 1` æ±‚å‡ºæ¥çš„å¹³å‡å€¼åŸºæœ¬ä¸Šå°±æ˜¯ $0.5\\pm 0.03$ï¼Œè€Œä¸”çº¿æ€§åŒä½™æ€§èƒ½è¿œæ¯”æ¢…æ£®ç¼ ç»•é«˜ã€‚ç„¶åç”¨ PCG ç®—æ³•æµ‹è¯•äº†ä¸€ä¸‹ï¼Œå‘ç° PCG å®˜æ–¹ç»™çš„ C++ å®ç°èƒ½å¤Ÿåšåˆ° $0.5\\pm 0.02$ï¼Œæ€§èƒ½æ¥è¿‘çº¿æ€§åŒä½™ï¼Œä½†æ˜¯è¿™ç©æ„è€ƒåœºä¸Šå¾—è‡ªå·±å®ç°ï¼Œæ‰€ä»¥è¿˜æ˜¯ç”¨çº¿æ€§åŒä½™å§ã€‚ è‡³äº `std::bernoulli_distribution`ï¼Œè¿™ä¸œè¥¿æ˜¯å– `std::uniform_real_distribution` å’Œè®¾å®šæ¦‚ç‡æ¯”è¾ƒåšå‡ºæ¥çš„ï¼Œè€Œ `std::uniform_real_distribution` æ˜¯å–éšæœºæ•°ä¹‹ååšä¸€å †æµ®ç‚¹è¿ç®—ï¼Œæ•ˆç‡å¤ªä½äº†ï¼Œè€Œä¸”æœ€åå¾—å‡ºæ¥çš„ç»“æœå¹¶æ²¡æœ‰æ¯”ç›´æ¥ `& 1` å¼ºåˆ°å“ªå»ã€‚","tags":["è·³è¡¨","éšæœºåŒ–"],"categories":["æ•°æ®ç»“æ„"]},{"title":"2023.8.19 é—²è¯","path":"/post/diary-2023-08-19/","content":"é¦–å…ˆæ˜¯ç ´äº‹ã€‚\n\næ™šä¸Šç¡çš„å¥½æ™šï¼Œç¬¬äºŒå¤©æ—©ä¸Šèµ·æ¥æ²¡ç²¾ç¥æŠ˜è…¾å•ç‰‡æœºäº†ã€‚\n\nUpdated on 8.21: ä¸œè¥¿åˆ äº†ï¼Œè¯¥æ€ä¹ˆç€å°±æ€ä¹ˆç€å§ã€‚ä¸ºäº†åƒç“œè€Œæ¥çš„å¯ä»¥å…³ç½‘é¡µèµ°äº†ã€‚\n\n---\n\nç ´äº‹è¿˜æ˜¯å°‘ç‚¹å¥½ã€‚\n\næ‰“äº†åœº ABCï¼ŒC é¢˜åƒäº† 5 å‘ç½šæ—¶ï¼Œç»“æœæ˜¯ä¸€ä¸ªéå¸¸å‚»é€¼çš„å°‘æ›´æ–°ä¸€ä¸ªæ•°ç»„çš„é”™è¯¯ã€‚ï¼ˆèµ›æ—¶æ²¡è°ƒå‡ºæ¥ï¼‰  \néå¸¸å®Œç¾çš„è·³é¢˜ç­–ç•¥ï¼ŒæˆåŠŸè·³è¿‡ D é¢˜å¹¶ç›´æ¥æ‹¿ä¸‹ E é¢˜ï¼Œä½†æ˜¯ F é¢˜å¤ªæ€¥äº†å½“è´ªå¿ƒåšäº†ã€‚\n\n---\n\næ¨æ­Œ\n\nã€Šãƒ’ã‚«ãƒªã€‹â€”â€” ã‚ã‚‰ã¿ã½ã£ã·ï¼Œä¸“è¾‘ å‡‹å¶æ£•ã€Šç¶´ã€‹\n\næ¢…æ‹‰ç±³å”±æ­Œä¸€ç›´å¾ˆæœ‰æ„ŸæŸ“åŠ›ï¼Œæˆ‘è®¤ä¸ºè¿™é¦–æ˜¯å¥¹æ„ŸæŸ“åŠ›æœ€å¼ºçš„ä¸€é¦–ã€‚\n\nç¬¬ä¸€æ¬¡è§è¿™é¦–æ­Œæ˜¯åœ¨ 2023 ä¸œæ–¹æ–°æ˜¥å®´çš„ä¸€ä¸ªé™æ­¢ç³» madï¼Œå·®ç‚¹çœ‹å“­äº†ã€‚\n\nè®²çš„æ˜¯ç¥ç¦åˆ›ä½œä¸€ä¸ªäººå¶çˆ±ä¸½ä¸ï¼Œé€æ¸å°†å…¶è®¤å¯æˆä¸ºè‡ªå·±å¥³å„¿çš„äº‹ã€‚\n\næ²¡å•¥è¯´çš„ï¼Œæ¢…æ‹‰ç±³ç‰›é€¼ï¼Œè¿™é¦–æ­Œä»äººå£°å’Œä¼´å¥ä¸Šéƒ½å¾ˆæœ‰æ„ŸæŸ“åŠ›ï¼Œå¯¹ç¥ç¦çš„å¡‘é€ éå¸¸å½¢è±¡ã€‚\n\n---\n\nabc315 e é¢˜\n\nå®é™…ä¸Šå°±æ˜¯æ‰¾å‡º 1 è¿™ä¸ªä»»åŠ¡ä¾èµ–çš„æ‰€æœ‰ä»»åŠ¡ã€‚\n\näºæ˜¯å»ºåå›¾ï¼Œä» 1 å¼€å§‹ dfsï¼Œè¾“å‡º dfs çš„å‡ºæ ˆåºåˆ—ï¼ˆé€†ååºï¼‰å³å¯ã€‚ç”±äºæ ˆé¡¶ä¸€å®šæ²¡æœ‰ä¾èµ–ï¼Œæ‰€ä»¥ç›¸å½“äºåšäº†æ‹“æ‰‘æ’åºï¼Œæ˜¯æ­£ç¡®çš„ã€‚\n\n---\n\nè¦é€€å½¹äº†ï¼Œæˆ‘è¦å­¦è·³è¡¨ã€‚","tags":["é—²è¯"],"categories":["é—²è¯"]},{"title":"2023.8.18 é—²è¯","path":"/post/diary-2023-08-18/","content":"å¥½å¥½å¥½ï¼Œé—²è¯æ—¥æ›´äº†ã€‚\n\n---\n\nä¸Šåˆæœåˆ°äº†ä¸€ä¸ªç”¨ sdcc æ”¯æŒçš„è¯­æ³•å†™çš„ [LED æ§åˆ¶ç¨‹åº](https://www.jianshu.com/p/bf313788b37b)ï¼Œè¿˜æœ‰å®Œæ•´çš„æ³¨é‡Šï¼Œäºæ˜¯å°±ç”¨äº†ã€‚ç°åœ¨å•ç‰‡æœºèƒ½å¤Ÿæ§åˆ¶ LED ç¯äº®ç­äº†ã€‚å°±æ˜¯ç”¨æœé‚¦çº¿ä¸²èµ·æ¥çš„ä¸¤ä¸ª 6 å˜ç±³å¤šé•¿çš„ç”µé˜»çœ‹èµ·æ¥æœ‰ç‚¹å‚»é€¼ ğŸ˜…ã€‚ç„¶åè¿˜å¾—ä¸²ä¸€ä¸ª LED è¿›å»ã€‚\n\n8051 è¿™å—è²Œä¼¼è¢«å•†ä¸šå·¥å…·é“¾å æ®å¤§éƒ¨åˆ†å¸‚åœºäº†ï¼Œä¸ªäººè®¤ä¸ºè¿™æ˜¯å¾ˆææ€–çš„äº‹æƒ…ï¼Œæ‰€ä»¥è¿…é€Ÿä½¿ç”¨ sdcc æŠ¥å¹³å®‰ã€‚Keil å†å¯¹ä¸ªäººå…è´¹ä½ ä¹Ÿæ²¡æ³•ç¡®å®šä»€ä¹ˆæ—¶å€™å‰²éŸ­èœï¼Œå¯¹å•†ä¸šå…¬å¸äººä¹Ÿè‚¯å®šå¾—æ”¶è´¹ã€‚\n\nARM å’Œ RISC-V ä¹‹ç±»æ¶æ„çš„æ¿å­ï¼ŒLLVM åº”è¯¥å¤Ÿç”¨äº†ï¼Œåœ¨è¿™åŸºç¡€ä¹‹ä¸Šä½ è¿˜èƒ½å†™ Rust ä¹‹ç±»æ”¯æŒ LLVM åç«¯çš„è¯­è¨€ã€‚\n\nä¹°çš„ RGB ç¯ç¯å¥½å‚»é€¼ï¼Œä¸èƒ½ç”¨æœé‚¦çº¿æ¥ï¼Œå£å¤ªç»†è¿˜ç„Šä¸äº†ï¼Œä¹°çš„æ—¶å€™åº”è¯¥çœ‹çœ‹æ¥å£å‹å·çš„ ğŸ˜…ã€‚\n\nä¸‹ä¸€æ­¥å°±æ˜¯æŠ˜è…¾æ•°ç ç®¡äº†ï¼Œæ‰“ç®—æä¸€ä¸ª IO å£ç”¨æ¥æ ¡å‡†æ—¶é—´ï¼Œç„¶åç”¨å¡‘æ–™å®šä¸€ä¸ªåŒ…è£…é€ç»™è°¢ç‰¹ä»¥æŠ¥ç­”ä»–ä»ä»–ä»¬å­¦æ ¡å°å–éƒ¨ç»™æˆ‘ä¹°çš„ä¸œæ–¹æ˜ä¿¡ç‰‡ã€‚\n\nä¼šå‘åšå®¢çš„ï¼Œè¿™æ–¹é¢æ•™ç¨‹è¿˜æ˜¯å¤ªå°‘äº†ã€‚\n\n---\n\næ¨æ­Œã€‚\n\nã¾ã‚ŠãŠã•ã‚“ã«è´ˆã‚‹ãƒŠã‚¤ãƒˆãƒ»ã‚ªãƒ–ãƒ»ãƒŠã‚¤ãƒ„2018 â€”â€” marasyï¼Œä¸“è¾‘æ˜¯ COOL&CREATE çš„éª‘å£«ä¹‹å¤œã€‚\n\nå¬åˆ°çš„ç¬¬ä¸€é¦–æ¥è‡ªè§¦æ‰‹çŒ´çš„ä¸œæ–¹ç»„æ›²ï¼Œè¿™é¦–æ›²å­åœ¨éŸ³è‰²ï¼ˆæ”¶éŸ³ï¼‰ï¼Œç¼–æ›²ï¼ŒèŠ‚å¥ä¸Šéƒ½æ— å¯æŒ‘å‰”ï¼Œæ„Ÿè§‰æ˜¯éå¸¸å…»è€³æœµçš„ä¸€é¦–æ­Œï¼Œå®ƒçš„æ”¶éŸ³è¦æ¯”å¾ˆå¤šçŒ´å­ä¸“è¾‘ä¸­çš„æ›²å­å¥½çš„ã€‚\n\nå®é™…ä¸Šå°±æ˜¯åœ¨éª‘å£«ä¹‹å¤œé‡Œä¸²äº†å¥½å‡ é¦–æ›²å­ï¼ˆç¬‘ï¼‰\n\n\nä½†æ˜¯å¤šå°‘æœ‰ç‚¹ä¸­è€³ç‚ï¼Œè¿™æ®µæ—¶é—´ä¸å¤ªèƒ½å¬æ­Œäº†ã€‚\n\n---\n\né¢˜ç›®åˆ†äº«ç»§ç»­è§[è®¡æ•°æ‚é¢˜](/post/count-misc-questions)ã€‚\n\n--- \n\n[é£æ‰¬çš„å°é¸Ÿæœ¬çºª](https://www.luogu.com.cn/blog/tibrella/fei-yang-di-xiao-niao-ben-ji)\n\n---\n\nç¯®çƒåŸºæœ¬ä¸ä¼šæ‰“äº†ï¼Œç°åœ¨å¹²ä»€ä¹ˆéƒ½è·ŸåŠèº«ä¸é‚ä¸€æ ·ä¸åè°ƒã€‚\n\n---\n\nåšå®¢çš„ MathJax ç»ˆäºè®©å’±ç»™ä¿®å¥½äº†ï¼Œæ”¹äº†ä¸€ä¸‹ç›®å½•ç»“æ„ï¼ŒæŠŠ MathJax ç›¸å…³çš„æ–‡ä»¶æ‰”åˆ°äº†å’Œè¯„è®ºåŒçº§çš„ `plugins` ç›®å½•ä¸‹ï¼Œç„¶åä»¿ç…§ä¸€åˆ€æ–©ç»™ waline/valine å†™çš„åŠ è½½è„šæœ¬ç»™ MathJax è´ºäº†ä¸€ä»½ã€‚\n\nç°åœ¨å¯èƒ½å‡ºç°çš„é—®é¢˜æ˜¯æ‰“å¼€æŸä¸€ä¸ªé¡µé¢æ˜¯ç™½è‰²çš„ï¼ŒåŸå› æœªçŸ¥ï¼Œåˆ·æ–°å°±å¥½äº†ã€‚\n\nå¯¹äº†ï¼Œæˆ‘ç¼–å†™çš„ MathJax åŠ è½½è„šæœ¬æ˜¯ä½¿ç”¨åŸé…ç½®æ–‡ä»¶ä¸­çš„ cdn é€‰é¡¹çš„ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒé€‰é¡¹å¤±æ•ˆä»€ä¹ˆçš„é—®é¢˜ã€‚æœ¬ç«™ç°åœ¨ä½¿ç”¨æœ€æ–°çš„ MathJax 4.0.0-beta.3 ç‰ˆæœ¬ã€‚","tags":["é—²è¯"],"categories":["é—²è¯"]},{"title":"2023.8.17 é—²è¯","path":"/post/diary-2023-08-17/","content":"é¦–å…ˆä¸€ä¸ªå–œæŠ¥ï¼Œä¸¤å¤©æ—¶é—´æŠŠåšå®¢è¿ç§»åˆ° Hexo ä¸Šäº†ï¼Œæ›´å¥½çš„æ˜¯ï¼Œå¾ˆå¤šä¸œè¥¿éƒ½æœ‰å›½å†… CDN æ”¯æŒï¼Œæ‰€ä»¥ä½ è®¿é—®æœ¬åšå®¢ä¸ä¼šå¤ªæ…¢ã€‚\n\n~~ä¸å¤ªå¥½çš„æ˜¯ï¼Œç”±äº InstantClick çš„ä¸€äº›ä¸œè¥¿æ²¡ææ˜ç™½ï¼Œå¯¹ JSX è¿˜ä¸å¤Ÿç†Ÿæ‚‰ï¼Œå¯¼è‡´ä½ ä»æœ¬ç«™æŸä¸€ä¸ªé¡µé¢è½¬åˆ°å¦ä¸€ä¸ªé¡µé¢çš„æ—¶å€™ä¼šå¯¼è‡´æ•°å­¦å¤±æ•ˆã€‚åŒæ—¶é¦–é¡µæ‘˜è¦ä¸Šçš„ $\\LaTeX$ å¯èƒ½ä¼šç‚¸ã€‚~~ ä¿®å¥½äº†ã€‚\n\nè¿™ä¸ªä¸»é¢˜å®åœ¨å¤ªå¼ºäº†ï¼Œå¾ˆå¤šè‡ªå®šä¹‰æ ‡ç­¾ï¼Œè¿˜æœ‰æ—¶é—´è½´å’Œé¡¹ç›®æ–‡æ¡£æ”¯æŒï¼Œåˆšåˆšç»™ linux-tikogasa å†™äº†ä¸ªä»‹ç»ï¼Œå¯ä»¥ç‚¹å‡»é¡µé¢åº•éƒ¨çš„æ–‡æ¡£å­—æ ·è¿›å…¥ã€‚æ—¶é—´è½´è¿›å…¥æ–¹æ³•åŒç†ã€‚\n\n---\n\nå†æ¥ä¸€ä¸ªå–œæŠ¥ï¼Œç»è¿‡ 2 å¤©çš„ç­‰å¾…ï¼Œæˆ‘ä¹°çš„æ™¶æŒ¯åˆ°äº†ã€‚ç„¶åç»è¿‡ä¸€ä¸­åˆå’Œæ™šä¸Šä¸€å°æ—¶çš„æŠ˜è…¾ï¼ŒæˆåŠŸè®©ç”µè„‘æ£€æµ‹åˆ°äº†å•ç‰‡æœºçš„ä¿¡æ¯ã€‚ä¸å¾—ä¸è¯´ï¼Œè¿™æ–¹é¢æ•™ç¨‹è¿˜æ˜¯å¤ªå°‘äº†ï¼Œè¿‡ä¸¤å¤©å†™ä¸€ä¸ªåŸºç¡€å®‰è£…çš„æ–‡æ¡£ã€‚\n\nä¸‹ä¸€æ­¥æ˜¯ç”¨ sdcc ç¼–å†™ç¨‹åºï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¿™ä¸ª RGB ç¯ç¯æ²¡æœ‰æ–‡æ¡£å•Šï¼Œå¯æ¶ã€‚\n\n---\n\næ¨æ­Œã€‚\n\nã€Šäº¡éœŠã€‹ â€”â€” ã‚ã‚ˆï¼Œä¸“è¾‘ã€Šãƒ€ã‚¤ãƒŠãƒã‚¤ãƒˆã€‹ã€‚\n\néå¸¸å¥½çš„æ…µæ‡’æ„Ÿï¼Œå¯èƒ½æ˜¯å› ä¸ºé•¿æ—¶é—´ç¼ºä¹ç¡çœ ç²¾ç¥ç´§å¼ å¯¼è‡´å–œæ¬¢è¿™ç§æ„Ÿè§‰çš„å§ï¼ˆç¬‘ï¼‰ã€‚\n\n---\n\né¢˜ç›®åˆ†äº«å¯ä»¥çœ‹[è®¡æ•°æ‚é¢˜](/post/count-misc-questions)","tags":["é—²è¯"],"categories":["é—²è¯"]},{"title":"è®¡æ•°æ‚é¢˜","path":"/post/count-misc-questions/","content":"éƒ¨åˆ†é¢˜ç›®æ¥è‡ªè¿™ä¸ªé¢˜å•ã€‚Luogu P6075 [JSOI 2015] å­é›†é€‰å–é¦–å…ˆï¼Œå‘ç°å¯ä»¥æŠŠå…ƒç´ å•ç‹¬æ‹å‡ºæ¥è€ƒè™‘ï¼Œå‡è®¾å¯¹äºä¸€ä¸ªå…ƒç´ æ¥è¯´æœ‰ $x$ ç§æ”¾ç½®æ–¹æ¡ˆï¼Œåˆ™ç­”æ¡ˆä¸º $x^n$ã€‚ç»§ç»­è½¬åŒ–é¢˜æ„ã€‚å¯¹äº $A_{i,j}$ï¼Œå®ƒå¿…é¡»æ˜¯å®ƒå·¦è¾¹é›†åˆçš„å­é›†ï¼Œä¹Ÿå¾—æ˜¯ä¸Šè¾¹é›†åˆçš„å­é›†ã€‚  ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœ $A_{i,j}$ åŒ…å«å…ƒç´  $x$ï¼Œåˆ™åœ¨å®ƒæ­£ä¸Šæ–¹ã€å·¦ä¸Šæ–¹ã€å·¦ä¾§çš„æ‰€æœ‰é›†åˆéƒ½åŒ…å« $x$ã€‚ï¼ˆå½¢å¼åŒ–æ¥è¯´ï¼Œå³ $A_{a,b},1\\leqslant a \\leqslant i,1\\leqslant b \\leqslant j$ å‡åŒ…å« $x$ï¼‰ç„¶åæƒ³è±¡ä¸€ç§åˆæ³•æ–¹æ¡ˆï¼Œå®¹æ˜“å‘ç°æ¯ç§æ–¹æ¡ˆå°±ç›¸å½“äºæŠŠæ•´ä¸ªä¸‰è§’å½¢åˆ†æˆä¸¤åŠï¼Œå·¦ä¸Šä¸€åŠå³ä¸‹ä¸€åŠã€‚æ¯ä¸¤ç§æ–¹æ¡ˆä¸åŒå½“ä¸”ä»…å½“å·¦ä¸Šå³ä¸‹çš„åˆ†ç•Œçº¿ä¸åŒã€‚äºæ˜¯æˆ‘ä»¬å°±èƒ½å¾ˆè½»æ¾åœ°æ±‚æ–¹æ¡ˆæ•°äº†ï¼Œå³ä¸€ä¸ªåˆ†ç•Œçº¿ä»å·¦ä¸‹èµ°åˆ°å³ä¸Šçš„æ–¹æ¡ˆã€‚æ¯ä¸€æ­¥å¯ä»¥å‘å·¦æˆ–è€…å‘å³èµ°ï¼Œå³ $2^k$ã€‚å¿«é€Ÿå¹‚å³å¯ã€‚Luogu P6146 [USACO 20 FEB] Help Yourself G é¦–å…ˆä¸ºäº†åˆ’åˆ†æœªæ±‚è§£å’Œå·²æ±‚è§£çš„éƒ¨åˆ†ï¼Œæˆ‘ä»¬éœ€è¦æŠŠçº¿æ®µæŒ‰ç…§å·¦ç«¯ç‚¹æ’åºã€‚ç»™ä¸€ä¸ªä¸æ’åºä¼šé‡åˆ°é”™è¯¯çš„ä¾‹å­ï¼š```plaintext---- 1  ------3 --------- 2```ç”¨ä¸‹é¢çš„åšæ³•åšçš„è¯ï¼Œå…ˆç®— $1,3$ å’Œå…ˆç®— $1,2$ æ˜¯ä¸ä¸€æ ·çš„ï¼Œå¯ä»¥è‡ªå·±ä½“ä¼šä¸€ä¸‹ã€‚ç„¶åè®¾ $f_i$ ä¸ºå‰ $i$ ä¸ªçº¿æ®µçš„ç­”æ¡ˆã€‚ä¸ºä»€ä¹ˆåªæœ‰ä¸€ç»´ï¼Ÿå› ä¸ºå®¹æ˜“å‘ç°å­é›†è¿™ä¸ªä¸œè¥¿å¾ˆéš¾ç”¨æ¥åˆ’åˆ†é˜¶æ®µã€‚å¦å¤–å‰é¢çš„æ’åºå·²ç»ä½¿å¾—è¿™ç§çŠ¶æ€åˆ’åˆ†æ˜¯å”¯ä¸€çš„äº†ã€‚è€ƒè™‘å¦‚ä½•æ¨å‡º $f_i$ã€‚$f_i$ çš„ç­”æ¡ˆç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š- å‰ $i-1$ ä¸ªçº¿æ®µçš„ç­”æ¡ˆ $f_{i-1}$- å‰é¢æ‰€æœ‰å­é›†åŠ ä¸Šç¬¬ $i$ æ¡çº¿æ®µçš„ç­”æ¡ˆã€‚å‘ç°åè€…å®é™…ä¸Šä¹Ÿæ˜¯åˆ†ä¸¤éƒ¨åˆ†çš„ï¼š- æ–°å¢çš„è¿é€šå—ï¼ˆå¤æ‚åº¦ï¼‰- é™¤å»æ–°å¢ï¼Œä¹Ÿå°±æ˜¯åŸæœ‰çš„å¤æ‚åº¦ $f_{i-1}$å¥½äº†ï¼Œé‚£ä¹ˆæ–°å¢çš„è¿é€šå—æ€ä¹ˆç®—ï¼Ÿå®é™…ä¸Šå°±æ˜¯ä¸ç¬¬ $i$ æ¡çº¿æ®µä¸ç›¸äº¤çš„å‰ $i-1$ æ¡çº¿æ®µçš„å­é›†çš„æ•°é‡ã€‚ä¸ºå•¥å‘¢ï¼Ÿ  é‚£æˆ‘ä»¬å¯ä»¥æŠŠå‰ $i-1$ æ¡çº¿æ®µçš„å­é›†åˆ†ä¸¤ç±»ï¼šä¸ $i$ ç›¸äº¤ä¸ä¸ç›¸äº¤ã€‚æ˜¾ç„¶ç›¸äº¤çš„å­é›†ä¸ä¼šè´¡çŒ®ç­”æ¡ˆï¼Œä¸ç›¸äº¤çš„å­é›†ä¼šä¸”ä»…ä¼šè´¡çŒ® $1$ çš„ç­”æ¡ˆã€‚ç„¶åé—®é¢˜å°±è½¬åŒ–ä¸ºï¼šå¯¹å‰ $i-1$ æ¡çº¿æ®µä¸çº¿æ®µ $i$ ä¸ç›¸äº¤çš„å­é›†è®¡æ•°ã€‚  å®¹æ˜“å‘ç°å°±æ˜¯ä¸çº¿æ®µ $i$ ä¸ç›¸äº¤çš„æ‰€æœ‰çº¿æ®µé›†åˆ $\\mathbb X$ çš„å­é›†æ•°é‡ï¼Œè®¡æ•°å°±æ˜¯ $2^{\\lvert \\mathbb X \\rvert}$å¾—åˆ°é€’æ¨å¼ï¼š$$f_i = 2f_{i-1}+2^{\\lvert \\mathbb X \\rvert}$$$\\mathbb X$ çš„å¤§å°æˆ‘ä»¬å¯ä»¥é¢„å¤„ç†å‡ºæ¥ï¼šç»Ÿè®¡æ¯ä¸€ä¸ªå³ç«¯ç‚¹å‡ºç°çš„æ¬¡æ•° $s_i$ï¼Œç„¶ååšä¸€ä¸ªå‰ç¼€å’Œï¼Œæœ€å $s_{i-1}$ å°±æ˜¯ä¸è¦†ç›–ç‚¹ $i$ çš„çº¿æ®µæ•°é‡ã€‚ç”¨å¿«é€Ÿå¹‚ä¼˜åŒ–ï¼Œå¤æ‚åº¦ $\\operatorname{O}(n\\log n+n\\log n)$ï¼Œå¦‚æœç”¨å…‰é€Ÿå¹‚å¯ä»¥å¹²åˆ° $\\operatorname{O}(n\\log n+n+\\sqrt n)$ã€‚P6008 [USACO 20 JAN] Cave Paintings P é¦–å…ˆå‘ç°ç­”æ¡ˆå°±æ˜¯æŠŠæ¯ä¸ªè¿é€šå—çš„æ–¹æ¡ˆæ•°ä¹˜èµ·æ¥ã€‚é‚£å¯¹äºä¸€ä¸ªè¿é€šå—æ€ä¹ˆç®—ç­”æ¡ˆï¼Ÿä¸€ä¸ªæ¯”è¾ƒè›‹ç–¼çš„äº‹å®æ˜¯ï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ªè¿é€šå—ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½ä¿è¯å®ƒæ¯ä¸ªéƒ¨åˆ†çš„æ°´ä½æ˜¯ä¸€æ ·çš„ï¼Œæ¯”å¦‚ä¸‹é¢è¿™ä¸ªä¾‹å­ï¼š```######## #### ## ## # ```æ˜¾ç„¶å·¦å³ä¾§åœ¨åˆ†å‰²å¼€çš„æ—¶å€™å¯ä»¥æ°´ä½é«˜åº¦ä¸åŒã€‚é‚£æˆ‘ä»¬èƒ½ä¸èƒ½å¯¹åˆ†å‰²å¼€çš„ä¸¤å—åˆ†åˆ«ç®—å‘¢ï¼Ÿç­”æ¡ˆæ˜¯ä¸è¡Œï¼Œå› ä¸ºè¿é€šå™¨åŸç†ã€‚```######### ## ## ## # ```åˆä¸­ç‰©ç†å¯çŸ¥ï¼Œå·¦å³ä¸¤ä¾§æ°´ä½å¿…é¡»ä¸€æ ·é«˜ã€‚æ‰€ä»¥æˆ‘ä»¬éœ€è¦åŠ¨æ€ç»´æŠ¤è¿™ä¸ªå…³ç³»ï¼Œç”¨å•¥å‘¢ï¼Ÿå¹¶æŸ¥é›†ã€‚åˆå§‹åŒ–æ¯ä¸ªæ ¼å­ç­”æ¡ˆä¸º 1ï¼Œç„¶åå¯¹äºæ¯ä¸ªè¿é€šå—ä»ä¸‹å¾€ä¸Šæ¶¨æ°´ï¼Œè¿‡ç¨‹å¦‚ä¸‹ï¼š- æŠŠè¿™ä¸€è¡Œç›¸é‚»çš„èƒ½æ”¾æ°´çš„ä½ç½®è¿åœ¨ä¸€èµ·ï¼Œè¡¨ç¤ºä»–ä»¬å¿…é¡»æ˜¯ä¸€ä¸ªæ°´ä½çš„ã€‚- éå†è¯¥è¡Œæ¯ä¸€ä¸ªç©ºä½ï¼Œå¦‚æœè¿™ä¸ªä½ç½®ä¸‹é¢ä¹Ÿæ˜¯ç©ºä½ä¸”äºŒè€…ç›®å‰æ²¡æœ‰ç›¸è¿ï¼Œé‚£ä¹ˆå½“å‰ä½ç½®æ–¹æ¡ˆæ•° `*=` æ­£ä¸‹æ–¹ä¸€æ ¼æ–¹æ¡ˆæ•°ï¼ŒåŒæ—¶æŠŠä¸¤ä¸ªæ ¼å­ç›¸è¿ï¼Œè¡¨ç¤ºä¸¤ä¸ªè¿é€šå—æ¥åœ¨ä¸€èµ·äº†ã€‚- éå†è¯¥è¡Œæ¯ä¸€ä¸ªç©ºä½ï¼Œæ¯é‡åˆ°ä¸€ä¸ªè¿é€šå—ï¼ˆ`find(x) == x`ï¼‰å°±æŠŠè¯¥æ ¼æ–¹æ¡ˆæ•°åŠ ä¸€ã€‚ æœ€åç”¨å‰é¢æåˆ°è¿‡çš„åˆ¤æ–­è¿é€šå—çš„æ–¹å¼æŠŠç­”æ¡ˆä¹˜èµ·æ¥å°±å¥½äº†ã€‚Luogu P1350 è½¦çš„æ”¾ç½® åŒæ ·æ˜¯è“é¢˜ï¼Œä½†æ˜¯æ¯”ä¸Šä¸€é“æ°´å¤šäº†ã€‚æ¯ä¸€è¡Œæ¯ä¸€åˆ—éƒ½åªèƒ½æ”¾ä¸€ä¸ªæ£‹å­ï¼Œé‚£ç›´æ¥ä»ä¸Šå¾€ä¸‹éå†è¡Œï¼ŒåŒæ—¶æšä¸¾æ”¾å‡ é¢—æ£‹å­é€’æ¨è®¡æ•°å³å¯ã€‚å…·ä½“æ¥è¯´ï¼Œè®¾ $f_{i,j}$ ä¸ºå‰ $i$ è¡Œæ”¾äº† $j$ ä¸ªæ£‹å­çš„æ–¹æ¡ˆæ•°é‡ï¼Œåˆ™è½¬ç§»æ–¹ç¨‹å¦‚ä¸‹ï¼š$$f_{i,j} = f_{i-1,j} + f_{i-1,j-1} (len-j+1)$$å…¶ä¸­ $len$ æ˜¯è¡Œé•¿åº¦ã€‚è®°å¾—æŠŠ $f_{0\\sim b+d, 0}$ è®¾ä¸º $1$ã€‚Luogu P3223 [HNOI 2012] æ’é˜Ÿ åŸºæœ¬ä¸Šæ˜¯çº¯æ•°å­¦é¢˜ã€‚å¤§æ¦‚è®¡æ•°é¢˜å¯ä»¥åˆ†ä¸¤ç§å¤§æ–¹å‘æ€è€ƒï¼šæ­£æ¨ã€å®¹æ–¥ã€‚è€Œå®¹æ–¥ä¹Ÿå¤§æ¦‚åˆ†ä¸¤ç§ï¼šæ‰‹åŠ¨å®¹æ–¥å’Œå¥—å¼å­åæ¼”ã€‚æƒ³ç›´æ¥æ‹†åˆ†ç®—ï¼Œæ„Ÿè§‰æ˜¯ä¸€ä¸ªéå¸¸æ¶å¿ƒéš¾æƒ³çš„åˆ†ç±»è®¨è®ºã€‚é€’æ¨ï¼Œè®¾ $f_{n,m}$ ä¸º $n$ ç”·ç”Ÿ $m$ å¥³ç”Ÿçš„æ–¹æ¡ˆæ•°ï¼Œå‘ç°æ¨ä¸äº†ã€‚é‚£å°±æ‰‹åŠ¨å®¹æ–¥ã€‚  å®¹æ˜“å‘ç°æŠŠè€å¸ˆçš„é™åˆ¶æ‰”æ‰ä¹‹åæ˜¯å¯ä»¥è½»æ¾ç®—å‡ºæ¥ç­”æ¡ˆçš„ï¼š$A^m_m A^{n+2}_{n+2} \\binom{n+3}m$ï¼Œå³æŠŠè€å¸ˆå½“æˆç”·ç”Ÿéšä¾¿æ”¾ç½®ï¼Œç„¶ååœ¨ä»–ä»¬ä¸­é—´çš„ç©ºéš™ä¸­é€‰å‡ºæ¥ $m$ ä¸ªç”¨æ¥æ”¾å¥³ç”Ÿã€‚ç„¶åä¸åˆæ³•æ–¹æ¡ˆï¼Œå³ä¸¤ä¸ªè€å¸ˆé åœ¨ä¸€èµ·çš„æ–¹æ¡ˆï¼ŒæŠŠä¸¤ä¸ªè€å¸ˆç»‘åœ¨ä¸€èµ·å½“ä¸€ä¸ªç”·ç”Ÿæ±‚å‡ºæ¥æ‰€æœ‰åˆæ³•æ–¹æ¡ˆå³å¯ã€‚åˆ«å¿˜äº†ä¸¤ä¸ªè€å¸ˆé¡ºåºå¯ä»¥å˜ï¼Œæ‰€ä»¥åŠ ä¸€ä¸ª $A^2_2$ã€‚æœ€ç»ˆç­”æ¡ˆï¼š$A^m_m A^{n+2}_{n+2} \\binom{n+3}m - A^m_m A^{n+1}_{n+1}\\binom {n+2}m A^2_2$ä¸ºå•¥è¯´åŸºæœ¬ä¸Šæ˜¯çº¯æ•°å­¦é¢˜è€Œä¸æ˜¯å®Œå…¨çš„æ•°å­¦é¢˜ï¼Ÿå› ä¸ºè¿™é¢˜éœ€è¦æ‰“é«˜ç²¾ã€‚ç„¶åæˆ‘ç”¨ python å†™çš„ï¼Œpython æ•´æ•°é™¤æ³•è¿”å›æµ®ç‚¹å€¼ï¼Œæ‰€ä»¥è¦å¼ºåˆ¶æ•´é™¤ï¼Œå³ä½¿ç”¨ `//`ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œç®— $\\binom nm$ï¼š```pythonimport mathdef binom(n, m) -> int: if n < m: return 0 else: return math.factorial(n)//math.factorial(m)//math.factorial(n-m)```[CSP-S 2019] Emiya å®¶ä»Šå¤©çš„é¥­æŒºéš¾çš„é¢˜ã€‚é¦–å…ˆæˆ‘ä»¬å¯ä»¥æŠŠé€‰èœçœ‹æˆä»æ–¹é˜µé‡Œé¢é€‰æ•°ï¼Œæ¯è¡Œåªèƒ½é€‰ä¸€ä¸ªï¼Œæ¯åˆ—æœ€å¤šé€‰ $\\lfloor \\frac k2 \\rfloor$ ä¸ªã€‚å¦‚æœæˆ‘ä»¬åˆ†åˆ—æ¥è€ƒè™‘ï¼Œå‘ç°åˆæ³•çš„åˆ—æœ‰å¾ˆå¤šï¼Œä½†æ˜¯ä¸åˆæ³•çš„åˆ—åªä¼šå‡ºç°ä¸€ä¸ªã€‚ï¼ˆæ˜¾ç„¶é€‰çš„æ•°è¶…è¿‡æ€»æ•°ä¸€åŠçš„åˆ—åªä¼šæœ‰ä¸€ä¸ªå§ï¼‰  æ¢å¥è¯è¯´ï¼Œå¦‚æœæˆ‘ä»¬æ­£ç€ç®—ï¼Œè®°å½•åˆæ³•æ–¹æ¡ˆæ€»æ•°ï¼Œæ˜¯ä¸€ä»¶éå¸¸å›°éš¾çš„äº‹æƒ…ï¼Œå› ä¸ºæ¯ä¸€åˆ—çš„åˆæ³•æƒ…å†µæˆ‘ä»¬éƒ½è¦è®°å½•ã€‚ä½†æ˜¯ç›¸å¯¹çš„ï¼Œå¯¹äºä¸åˆæ³•æ–¹æ¡ˆè®¡æ•°ï¼Œæˆ‘ä»¬å¯ä»¥æšä¸¾ä¸åˆæ³•çš„åˆ—è¿›è¡Œé€’æ¨ã€‚å½“æˆ‘ä»¬ä¿è¯è¿™ä¸€åˆ—ä¸åˆæ³•æ—¶ï¼Œå…¶ä»–åˆ—ä¸€å®šåˆæ³•ï¼Œè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨è®°å¤ªå¤šçŠ¶æ€äº†ã€‚æšä¸¾åˆ°ç¬¬ $col$ è¡Œï¼Œè®¾ $f(col)_{i,j,k}$ ä¸ºç¬¬ $col$ åˆ—ä¸ºä¸åˆæ³•åˆ—ï¼Œå‰ $i$ è¡Œï¼Œç¬¬ $col$ è¡Œé€‰äº† $j$ ä¸ªæ•°ï¼Œå…¶ä»–è¡Œé€‰äº† $k$ ä¸ªæ•°çš„æ–¹æ¡ˆæ•°é‡ï¼Œ$s_{i}$ ä¸ºç¬¬ $i$ è¡Œ $a$ çš„æ€»å’Œï¼Œåˆ™æœ‰è½¬ç§»æ–¹ç¨‹ï¼š$$f_{i,j,k} = f_{i-1,j,k}+f_{i-1,j-1,k}\\cdot a_{i,col}+f_{i-1,j,k-1}\\cdot (s_i-a_{i,col})$$ç„¶åä¸åˆæ³•æ–¹æ¡ˆæ•°å³ $\\sum_{j>k} f(col)_{n,j,k}$å¤æ‚åº¦ $\\Theta(mn^3)$ï¼Œæƒ³åŠæ³•å‡å°‘çŠ¶æ€ã€‚æ ¹æ®åˆšæ‰ä¸åˆæ³•æ–¹æ¡ˆæ•°çš„è®¡ç®—ï¼Œæˆ‘ä»¬å‘ç°ï¼Œä¸€ä¸ªæ–¹æ¡ˆä¸åˆæ³•ï¼Œå½“ä¸”ä»…å½“æœ‰ä¸€åˆ—é€‰çš„æ•°å¤§äºå…¶ä»–åˆ—é€‰çš„æ•°ä¹‹å’Œã€‚æ¢å¥è¯è¯´ï¼Œåˆšæ‰å¯¹ä¸åˆæ³•æ–¹æ¡ˆæ•°çš„ç»Ÿè®¡ï¼ŒåŸºäº $j>k$ è¿™ä¸ªæ¡ä»¶ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥åªè®°å½• $j-k$ è¿™ä¸ªä¸œè¥¿å‘¢ï¼Ÿè®¾ $f(col)_{i,j}$ ä¸ºç¬¬ $col$ åˆ—ä¸ºä¸åˆæ³•åˆ—ï¼Œå‰ $i$ è¡Œï¼Œå½“å‰è¡Œé€‰çš„æ•°æ¯”åˆ«çš„è¡Œå¤š $j$ ä¸ªçš„æ€»æ–¹æ¡ˆæ•°ï¼Œè½¬ç§»æ–¹ç¨‹å’Œä¸Šé¢çš„å·®ä¸å¤šï¼š$$f_{i,j} = f_{i-1,j} + f_{i,j-1}\\cdot a_{i,col} + f_{i,j+1}\\cdot(s_i-a_{i,col})$$ä¸åˆæ³•æ–¹æ¡ˆæ•°ï¼š$\\sum_{j>0} f(col)_{n,j}$å®¹æ˜“å‘ç°è¿™ä¸ªä¸œè¥¿å¯èƒ½æ˜¯è´Ÿæ•°ï¼Œæ‰€ä»¥å®ç°çš„æ—¶å€™è¦ç»™ $j$ è¿™ä¸€ç»´åŠ ä¸€ä¸ª $n$ã€‚ç„¶åæ˜¯è®¡ç®—æ€»æ–¹æ¡ˆæ•°ï¼Œè®¾ $g_{i,j}$ ä¸ºå‰ $i$ è¡Œé€‰äº† $j$ ä¸ªæ•°çš„æ–¹æ¡ˆæ•°ï¼Œè½¬ç§»æ–¹ç¨‹ï¼š$$g_{i,j} = g_{i-1,j} + g_{i-1,j-1} \\cdot s_i$$æœ€ç»ˆç­”æ¡ˆï¼š$\\sum_{i=1}^n g_{n,i} - \\sum_{col=1}^m\\sum_{j>0}^n  f(col)_{n,j}$Luogu P3214 [HNOI 2011] å¡å†œé¢˜æ„è¦æ±‚é€‰å–å­é›†æœ‰ä¸‰æ¡é™åˆ¶ï¼š  - éç©º- é€‰å‡ºçš„å­é›†ä¸¤ä¸¤ä¸åŒ- æ‰€æœ‰å…ƒç´ çš„å‡ºç°æ¬¡æ•°ä¸ºå¶æ•°è½¬åŒ– 1ï¼šå°†â€œå­é›†â€è½¬åŒ–ä¸ºâ€œäºŒè¿›åˆ¶æ•°â€ï¼Œç„¶åé€‰å–å­é›†å˜æˆä» $0,1\\dots 2^n-1$ ä¸ªæ•°é‡Œé¢é€‰å‡º $m$ ä¸ªï¼Œç„¶åé™åˆ¶å°±å˜æˆäº†ï¼š  - è¿™äº›æ•°ä¸ç­‰äº $0$- è¿™äº›æ•°å¼‚æˆ–å’Œä¸º $0$- è¿™äº›æ•°ä¸¤ä¸¤ä¸åŒè½¬åŒ– 2ï¼šç­”æ¡ˆæ˜¯â€œæ— åºâ€çš„æ–¹æ¡ˆæ•°ï¼Œæˆ‘ä»¬å‘ç°è¿™ä¸ª $m$ ä¸ªæ•°æ— åºçš„æ–¹æ¡ˆæ•°ä¹˜ä¸€ä¸ªæ’åˆ— $A_m^m$ å°±æ˜¯æœ‰åºçš„æ–¹æ¡ˆæ•°ï¼Œæ˜¾ç„¶åè€…æ¯”è¾ƒå®¹æ˜“åˆ’åˆ†é˜¶æ®µï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç®—å‡ºæœ‰åºçš„æ–¹æ¡ˆæ•°å†é™¤ä»¥ $A_m^m$ã€‚ç„¶åæˆ‘ä»¬å‘ç°è¿™ä¸Šé¢å‡ æ¡é™åˆ¶æŒºéš¾åŒæ—¶è®°å½•å¹¶é€’æ¨çš„ï¼Œé‚£æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¸€ä¸‹æ’é™¤ä¸åˆæ³•æ–¹æ¡ˆã€‚è®¾ $f_i$ ä¸ºé€‰ $i$ ä¸ªæ•°çš„æ–¹æ¡ˆæ•°ï¼Œå…ˆè€ƒè™‘ç¬¬äºŒæ¡é™åˆ¶ã€‚åœ¨è¿™æ¡é™åˆ¶ä¸‹ï¼Œå½“ $1\\sim i-1$ è¿™äº›æ•°é€‰å®Œä¹‹åï¼Œç¬¬ $i$ ä¸ªæ•°æ˜¯ç¡®å®šçš„ã€‚æ¢å¥è¯è¯´ï¼Œæ»¡è¶³ç¬¬äºŒæ¡é™åˆ¶çš„æ–¹æ¡ˆæ•°ï¼Œå³ä¸ºå‰ $i-1$ ä¸ªæ•°éšæ„é€‰æ‹©çš„æ–¹æ¡ˆæ•°ï¼ˆéç©ºï¼‰ï¼š$A_{2^n-1}^{i-1}$ã€‚ç„¶åè€ƒè™‘ç¬¬ä¸€æ¡é™åˆ¶ï¼Œå‘ç°ç¬¬ $i$ ä¸ªé›†åˆä¸ºç©ºä¸”æ€»å¼‚æˆ–å’Œä¸º $0$ï¼ŒæŠŠç¬¬ $i$ ä¸ªæ•°ï¼ˆç©ºï¼‰å»æ‰ä¾ç„¶åˆæ³•ã€‚ä¸æ»¡è¶³ç¬¬ä¸€æ¡é™åˆ¶çš„æ–¹æ¡ˆæ•°å³ $f_{i-1}$ã€‚æœ€åè€ƒè™‘ç¬¬ä¸‰æ¡æ€§è´¨ï¼šå‡è®¾ç¬¬ $i$ ä¸ªæ•°ä¸å‰é¢ç¬¬ $j$ ä¸ªæ•°ç›¸åŒäº†ï¼Œé‚£ä¹ˆè¿™ä¸ªç¬¬ $i$ ä¸ªæ•°æœ‰ $2^n-1-(i-2)$ ç§å–å€¼ï¼Œè¿™ä¸ªç¬¬ $j$ ä¸ªæ•°çš„ä½ç½®æœ‰ $i-1$ ç§å¯èƒ½æ€§ã€‚é™¤æ­¤ä»¥å¤–çš„åœ°æ–¹åˆæ³•ï¼ˆå‰é¢å·²ç»ä¿è¯å¼‚æˆ–å’Œä¸º $0$ äº†ï¼Œç°åœ¨å†å¼‚æˆ–ä¸¤ä¸ªç›¸åŒçš„æ•°ç»“æœä¸å˜ï¼‰ä¸”é•¿åº¦ä¸º $i-2$ã€‚å› æ­¤ä¸æ»¡è¶³è¿™ä¸ªè¦æ±‚çš„æ–¹æ¡ˆæ•°æœ‰ $f_{i-2}(2^n-1-(i-2))(i-1)$ç„¶åå°±å¯ä»¥é€’æ¨æ±‚è§£äº†ï¼Œ$f_i = A_{2^n-1}^{i-1} - f_{i-1} - f_{i-2}(2^n-1-(i-2))(i-1)$ï¼Œç­”æ¡ˆæ˜¯ $f_m$ã€‚$A_{2^n-1}^{i-1}$ å¯ä»¥é¢„å¤„ç†ï¼Œ$A_{2^n-1}^1 = 2^n-1$ï¼Œå‰©ä¸‹çš„æŒ¨ä¸ªä¹˜å°±å¥½äº†ã€‚é¢„å¤„ç†åˆ° $m$ å³å¯ã€‚CF 932 E~~æ¨¡æ‹Ÿèµ›å†™ä¸åŠ¨é¢˜äº†è¿‡æ¥å†™è¿™ç©æ„æŒºåˆç†çš„å§~~åŸé¢˜æ„æ˜¯ç»™å®š $\\lvert \\mathbb S\\rvert,k$ï¼Œæ±‚ $\\sum_{\\mathbb T\\subseteq \\mathbb S} \\lvert \\mathbb T \\rvert ^ k$ã€‚ç„¶åæˆ‘ä»¬å‘ç°è¿™ä¸ªä¸œè¥¿åªä¸ $\\mathbb {S,T}$ çš„å¤§å°æœ‰å…³ï¼Œæ‰€ä»¥æ”¹ä¸ºæšä¸¾å¤§å°ï¼Œuè®¾ $n = \\mathbb S$ï¼ŒåŸå¼åŒ–ä¸ºï¼š$$\\sum_{i=1}^n \\binom ni i^k$$æŠŠ $i^k$ ç”¨ç»„åˆæ„ä¹‰å¹²æ‰ã€‚å‘ç°è¿™ç©æ„å°±æ˜¯ $k$ ä¸ªä¸åŒå°çƒæ”¾è¿› $i$ ä¸ªä¸åŒç›’å­çš„æ–¹æ¡ˆæ•°ã€‚ç»§ç»­ç»„åˆæ„ä¹‰åˆ†æï¼Œä¸Šé¢é‚£ä¸ªå¼å­ç›¸å½“äºæ˜¯ï¼šä» $n$ ä¸ªç›’å­é‡Œé€‰å‡º $i$ ä¸ªç›’å­ï¼Œç„¶åæŠŠ $k$ ä¸ªå°çƒæ”¾åœ¨è¿™ $i$ ä¸ªç›’å­é‡Œé¢çš„æ–¹æ¡ˆæ•°ã€‚~~ç»§ç»­å‘ç°~~å‘ç°è¿™ $k$ ä¸ªå°çƒæœ€å¤šåªèƒ½æ”¾æ»¡ $k$ ä¸ªç›’å­ï¼Œæ‰€ä»¥æˆ‘ä»¬è½¬å¤´å»æšä¸¾â€œå“ªäº›ç›’å­æœ‰å°çƒâ€ã€‚è®¾ $f_{i,j}$ ä¸ºä» $n$ ä¸ªç›’å­é€‰å‡º $j$ ä¸ªï¼Œ$i$ ä¸ªå°çƒæ”¾å…¥è¿™ $j$ ä¸ªç›’å­ï¼Œç›’å­éç©ºçš„æ–¹æ¡ˆæ•°ï¼Œç„¶åæˆ‘ä»¬è¦æ±‚çš„ä¸œè¥¿å°±å˜æˆäº†ï¼š$$\\sum_{i=1}^k f_{k,i} 2^{n-i}$$ï¼ˆç¡®å®š $j$ ä¸ªç›’å­è¦æ”¾å…¥å°çƒä¹‹åï¼Œå‰©ä¸‹ $n-j$ ä¸ªå°çƒå¯èƒ½ä¼šè¢«é€‰å…¥æœ€åˆé€‰çš„ $i$ ä¸ªç›’å­ä¸­ä¹Ÿæœ‰å¯èƒ½ä¸è¢«é€‰å…¥ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ª $2^{n-i}$ï¼‰ã€‚$k \\leqslant 5\\times 10^3$ï¼Œ$\\Theta(k^2)$ èƒ½è¿‡ã€‚$i$ ä¸ªå°çƒæ”¾å…¥ $j$ ä¸ªç›’å­ï¼Œç›’å­éç©ºçš„æ–¹æ¡ˆæ•°ï¼Œç›¸å½“äº $i$ ä¸ªå…ƒç´ è¢«åˆ’åˆ†æˆ $j$ ä¸ªéç©ºå­é›†çš„æ–¹æ¡ˆæ•°ï¼Œè”æƒ³åˆ°ç¬¬äºŒç±»æ–¯ç‰¹æ—æ•°ã€‚åˆå› ä¸ºé€‰å‡ºæ¥çš„ $j$ ä¸ªç›’å­ä¸ä¸€å®šæ˜¯å“ªå‡ ä¸ªï¼Œè€Œä¸”ä¸¤ä¸¤ä¸åŒï¼Œæˆ‘ä»¬è¿˜å¾—ä¹˜è¿›å»ä¸€ä¸ªæ’åˆ—ã€‚å³ $f_{k,i} = {k \\brace i}A_n^i$ï¼Œæœ€ç»ˆç­”æ¡ˆå³ä¸ºï¼š$$\\sum_{i=1}^k {k \\brace i} A_n^i 2^{n-i}$$ç¬¬äºŒç±»æ–¯ç‰¹æ—æ•°å¯ä»¥ $\\Theta(k^2)$ é¢„å¤„ç†ï¼Œé€’æ¨å¼ä¸º ${i \\brace j} = {i-1 \\brace j-1}+j{i-1 \\brace j}$ã€‚$A_n^i$ å®é™…ä¸Šå°±æ˜¯ $n$ çš„ä¸‹é™å¹‚ï¼Œè¿™ç©æ„ä¹Ÿæ˜¯ç›´æ¥é¢„å¤„ç†åˆ° $A_n^k$ å°±å¥½ã€‚åé¢çš„ $2^{n-i}$ å¯ä»¥ç”¨å¿«é€Ÿå¹‚æˆ–è€…å…‰é€Ÿå¹‚ã€‚å…‰é€Ÿå¹‚æ²¡å•¥å¤ªå¤§å¿…è¦ï¼Œæ¯•ç«Ÿå¤æ‚åº¦ç“¶é¢ˆä¸åœ¨è¿™ã€‚CF 1850 Gæ„Ÿè§‰è¿™é¢˜æ²¡å•¥å¿…è¦æ”¾ï¼Œæ¯•ç«Ÿ CF 1500ï¼Œä½†æ˜¯æˆ‘å†™çš„ $\\Theta(n \\log n)$ å¤§æ¦‚ç®—æ˜¯å¸¸æ•°æ¯”è¾ƒå°çš„ç‰ˆæœ¬å§ã€‚å‘ç°æ»¡è¶³è¦æ±‚çš„ä¸¤ä¸ªç‚¹åªæœ‰å››ç§å¯èƒ½ï¼š- æ¨ªåæ ‡ç›¸ç­‰- çºµåæ ‡ç›¸ç­‰- æ¨ªçºµåæ ‡å’Œç›¸ç­‰- æ¨ªçºµåæ ‡å·®ç›¸ç­‰æ‰€ä»¥æˆ‘ä»¬æŠŠæ‰€æœ‰ç‚¹æŒ‰ç…§ä¸Šé¢å››ä¸ªå…ƒç´ ä½œä¸ºå…³é”®å­—æ’åºå››æ¬¡ï¼Œæ¯æ¬¡åˆ†åˆ«ç»Ÿè®¡ç›¸ç­‰çš„ä¸ªæ•° $x$ï¼Œè®©ç­”æ¡ˆåŠ ä¸Š $x(x-1)$ å°±å¥½äº†ã€‚æ„Ÿè§‰æ¯”ä»–ä»¬å†™çš„ `std::map` åšæ³•å¸¸æ•°è¦å°ã€‚CF 1485 Fç®€åŒ–é¢˜æ„ç»™å®šæ•°ç»„ $b$ï¼Œå¯¹åˆæ³•çš„ $a$ è®¡æ•°ã€‚  åˆæ³•çš„ $a$ å³ $\\forall i \\in [1,n],b_i = a_i$ æˆ– $b_i = \\sum_{j=1}^i a_j$ æˆ‘ä»¬ä¸€ä¸ªä¸€ä¸ªæ•°å¡«ï¼Œå‘ç°å¯¹äºæ¯ä¸€ä¸ª $a_i$ï¼Œæœ‰ä¸¤ç§å¯èƒ½ï¼š- $a_i = b_i$- $a_i = b_i - \\sum_{j=1}^{i-1}a_i$ç„¶åè®¾ $f_s$ ä¸ºå½“å‰å’Œç­‰äº $s$ çš„æ–¹æ¡ˆæ•°ã€‚ç„¶åä¸Šé¢ä¸¤ä¸ªå¯èƒ½å°±å˜æˆäº†ï¼š- $f_{x+b_i} = f_{x}$- $f_{b_i} = \\sum_{j\\in \\mathbb Z} f_j$å‘ç°ï¼Œç¬¬ä¸€ä¸ªæ“ä½œå°±æ˜¯æŠŠæ•´ä¸ªæ•°ç»„å‘å³ç§»åŠ¨äº† $b_i$ï¼Œæ‰€ä»¥æˆ‘ä»¬åªéœ€è¦è®°å½•ä¸€ä¸‹åç§»é‡æ¯æ¬¡åŠ ä¸€ä¸ª $b_i$ å°±å®Œæˆäº† $\\Theta(1)$ è½¬ç§»ã€‚  ç¬¬äºŒä¸ªå®é™…ä¸Šç­‰äºä¸€ä¸ªä½ç½®å‰é¢æ‰€æœ‰å…ƒç´ çš„å’Œï¼Œ$f_x$ å˜æˆäº† $ans$ï¼Œç„¶ååŸæ¥çš„ $f_x$ æ²¡äº†ï¼Œäºæ˜¯ $ans = ans - f_x + ans$ã€‚å€¼åŸŸå¾ˆå¤§ï¼Œæ‰€ä»¥è¦ç”¨ `std::map` æˆ–è€… `std::unordered_map`ï¼Œåè€…éœ€è¦é‡å†™å“ˆå¸Œå‡½æ•°ã€‚ç¤ºä¾‹ä»£ç  child:codeblock```cppcin >> n;for (i32 i = 1; i <= n; ++ i) cin >> b[i];f.clear();i32 ans = f[0] = 1, delta = 0;for (i32 i = 1; i <= n; ++ i) { delta += b[i]; i32 add = (ans - f[b[i] - delta] + mod) % mod; f[b[i] - delta] = ans; ans = (ans + add) % mod;}cout << ans << '\\n';```CF 449 Dç®€åŒ–é¢˜æ„ç»™å®šæ•°ç»„ $a$ï¼Œä» $a$ é€‰å‡ºéç©ºå­é›†ä½¿å…¶æŒ‰ä½ä¸å’Œç»“æœä¸º $0$ã€‚æ±‚æ–¹æ¡ˆæ•°è®¾ $f_s$ ä¸ºä¸å’Œä¸º $s$ çš„æ–¹æ¡ˆæ•°ï¼Œ$g_s$ ä¸ºä¸å’Œæ˜¯ $s$ çš„è¶…é›†çš„æ–¹æ¡ˆæ•°ã€‚æ˜¾ç„¶ $f$ åšé«˜ç»´åç¼€å’Œå°±å¾—åˆ°äº† $g$ã€‚ä½†æ˜¯å‘ç°è¿™ä¸ª $f$ å’Œ $g$ éƒ½ä¸å¥½ç›´æ¥æ±‚ï¼Œç„¶åå‘ç°å¦‚æœè®¾ $h_s$ ä¸ºæ•°åˆ—ä¸­ $s$ çš„è¶…é›†çš„æ•°é‡ï¼Œé‚£ä¹ˆ $g_s = 2^{h_s} - 1$ï¼ˆä»è¿™äº›è¶…é›†é‡Œé¢éšä¾¿å‡ ä¸ªå–å¹¶é›†ï¼Œæ˜¾ç„¶ç»“æœä¸€å®šä»ç„¶æ˜¯ $s$ çš„è¶…é›†ï¼‰ã€‚ç„¶åç»§ç»­å‘ç°ï¼Œ$h_s$ å¯ä»¥å¯¹ $s$ è®¡æ•°ä¹‹åç›´æ¥é«˜ä½åç¼€å’Œå¾—åˆ°ã€‚æ€»ä½“æµç¨‹ï¼šå…ˆå¯¹ $s$ ç”¨æ¡¶è®¡æ•°ï¼Œç„¶åé«˜ç»´åç¼€å’Œï¼Œç„¶å $g_s = 2^{h_s} - 1$ï¼Œç„¶åå¯¹ $g$ åç€ï¼ˆåŠ æ³•å˜å‡æ³•ï¼‰åšä¸€éé«˜ç»´åç¼€å’Œå°±å¥½äº†ã€‚ç¤ºä¾‹ä»£ç  child:codeblock```cppi32 f[N];i32 n;constexpr i32 mod = 1e9+7;constexpr i32 s = (1 << 20) - 1;void sos(const i64& x) { for (i32 i = 0; i < 20; ++ i) for (i32 j = s; j >= 0; -- j) if((j & (1 << i)) == 0) f[j] = (f[j] + f[j  (1 << i)] * x % mod + mod) % mod; // SOS DP}int main() { std::ios::sync_with_stdio(false); cin.tie(nullptr); cout.tie(nullptr); i32 x; cin >> n; for (i32 i = 1; i <= n; ++ i) { cin >> x; ++f[x]; } sos(1); for (i32 i = 0; i <= s; ++ i) f[i] = binpow(f[i]) - 1; sos(-1); cout << f[0]; return 0;}```","tags":["ç»„åˆæ•°å­¦","è®¡æ•°"],"categories":["é¢˜è§£"]},{"title":"è«æ¯”ä¹Œæ–¯åæ¼”","path":"/post/mobius/","content":"è¯·å…ˆå»[åˆç­‰æ•°è®º](/post/elementary-number-theory)å­¦ä¹ ä¸€äº›å¸¸ç”¨è®°å·ã€‚\n\n## è«æ¯”ä¹Œæ–¯å‡½æ•°\n\n$\\mu(n)$\n\n- $\\mu(1)=1$\n- å¯¹ $n$ è¿›è¡Œè´¨å› æ•°åˆ†è§£ï¼š\n  - åˆ†è§£åæœ‰ç›¸åŒçš„è´¨å› æ•°ï¼š$\\mu(n) = 0$\n  - åˆ†è§£åæ— ç›¸åŒçš„è´¨å› æ•°ï¼Œæœ‰ $k$ ä¸ªä¸åŒçš„è´¨å› æ•°ï¼š$\\mu(n)=(-1)^k$ \n\n### æ€§è´¨\n\n- $n\\in\\mathbb{N^*},\\sum_{d\\mid n}\\mu(d) = [n=1]$\n\n## è«æ¯”ä¹Œæ–¯åæ¼”\n\nè‹¥æœ‰ $g(n) = \\sum_{d\\mid n} f(d)$ï¼Œåˆ™æœ‰ $f(n) = \\sum_{d\\mid n} f(d)\\mu(\\frac nd)$\n\næ˜¾ç„¶æ˜¯ç‹„åˆ©å…‹é›·å·ç§¯å½¢å¼å•Šï¼Œæ‰€ä»¥å¯ä»¥ç®€åŒ–ä¸€ä¸‹ã€‚\n\n$$\ng(n) = \\sum_{d\\mid n} f(d) \\to f = g * \\mu\n$$\n\n### è¯æ˜\n\næˆ‘ä»¬çŸ¥é“ï¼Œè«æ¯”ä¹Œæ–¯å‡½æ•°æœ‰ä¸€ä¸ªæ€§è´¨ï¼š$n\\in\\mathbb{N^*},\\sum_{d\\mid n}\\mu(d) = [n=1]$ï¼Œæ¢æˆç‹„åˆ©å…‹é›·å·ç§¯çš„å½¢å¼å³æ˜¯ $\\mu * I = \\epsilon$ã€‚\n\nç„¶åå¼€å§‹è¯æ˜ï¼š\n\nå·²çŸ¥ï¼š\n\n$$\ng(n) = \\sum _{d\\mid n}f(d)\n$$\n\næ¢æˆç‹„åˆ©å…‹é›·å·ç§¯å½¢å¼ï¼Œå†åœ¨ä¸¤è¾¹åŒæ—¶å·ä¸€ä¸ª $\\mu$\n\n$$\n\\begin{aligned}\ng &= f * I \\newline\ng * \\mu &= f * I * \\mu\n\\end{aligned}\n$$\n\nåˆ©ç”¨ç»“åˆå¾‹å’Œä¸Šé¢çš„æ€§è´¨å°±å¯ä»¥è¯æ˜å®Œæˆäº†ã€‚\n\n$$\n\\begin{aligned}\ng * \\mu &= f * (I * \\mu) \\newline\ng * \\mu &= f * \\epsilon \\newline\ng * \\mu &= f\n\\end{aligned}\n$$","tags":["æ•°è®º","è«æ¯”ä¹Œæ–¯åæ¼”"],"categories":["æ•°å­¦"]},{"title":"2023.8.10 é—²è¯","path":"/post/diary-2023-08-10/","content":"åœ¨å››æœºæˆ¿å°è¯•äº†ä¸€ä¸‹åŒæ˜¾ç¤ºå™¨ï¼ˆç¬”è®°æœ¬+æœºæˆ¿æ˜¾ç¤ºå™¨ï¼‰\n\næœºæˆ¿å±å¹•æ˜¯çœŸå¤§ï¼Œä½†æ˜¯ dpi å¤ªä½äº†ã€‚å°†è¿‘ 1.5 å€çš„å°ºå¯¸äºæˆ‘çš„ç¬”è®°æœ¬ï¼Œä½†æ˜¯ dpi æˆ‘çš„ç¬”è®°æœ¬æ˜¯æœºæˆ¿æ˜¾ç¤ºå™¨çš„ 1.25 å€ï¼Œå®é™…è§‚æ„Ÿè¦å·®çš„å¾ˆå¤šã€‚\n\næ‰€ä»¥è¯´å•Šï¼Œæ‹¯æ•‘å­—ä½“æ¸²æŸ“çš„æœ€å¥½æ–¹å¼è¿˜æ˜¯æ¢é«˜ dpi æ˜¾ç¤ºå±ã€‚\n\nä½†æ˜¯æˆ‘è§‰å¾—å¾®è½¯é›…é»‘çœŸæ˜¯ä¸€å¨å¤§ä¾¿ã€‚\n\n---\n\nå­¦ä¹  [jijidawang](https://www.cnblogs.com/CDOI-24374) å’Œ [crimson000](www.cnblogs.com/crimsonawa) è¿›è¡Œä¸€ä¸ªæ¨æ­Œã€‚\n\nMY Heart Rate â€”â€” ã‚ã‚ˆï¼Œä¸“è¾‘ï¼šæ£®ç¾…ä¸‡è±¡ã€Šã‚·ãƒ³ã‚¯ãƒ­2ã€‹\n\nayo ç‰›é€¼ï¼Œæ²¡å¾—è¯´ã€‚\n\nè¿™é¦–æ­Œæ€»èƒ½å¸¦æ¥ä¸€äº›è½»æ¾çš„æ„Ÿè§‰å‘¢ï¼Œæƒ³å¿…æ˜¯ç¼–æ›²çš„æ—¶å€™è€ƒè™‘åˆ°çµæ¢¦æ—¥å¸¸çš„æ— èŠå¿ƒæƒ…å§ï¼ˆç¬‘ï¼‰\n\nå¦å¤–ï¼ŒHeart Rate ç”¨æ¯”è¾ƒ Japanglish çš„å£éŸ³è¯»çš„è¯ï¼Œåº”è¯¥èƒ½å‘ç°è¿™æ˜¯ ã¯ãã‚Œã„ï¼ˆHakureiï¼‰çš„è°éŸ³ã€‚\n\n---\n\næ”¹å¤©éœ€è¦æŠŠ dotfile åˆ†äº«ä¸€ä¸‹äº†ï¼Œè¿˜æœ‰å®‰è£…æŒ‡å—çš„å‘æ²¡å¡«\n\npacman å®åœ¨æ˜¯å¤ªå¥½ç”¨äº†\n\n---\n\næ”¹äº† T2ï¼Œå› ä¸ºè¿™é¢˜èƒ½ä½“ç°å‡ºæ¥é•¿æ—¶é—´æ‘†çƒ‚è®©æˆ‘çš„æ€ç»´è„±ç¦»äº†â€œOIâ€ã€‚\n\n[é¢˜é¢](https://www.luogu.com.cn/problem/P7165)\n\né¦–å…ˆçœ‹åˆ°é¢˜ç›®è¦æ±‚æ–­ä¸¤æ¡è¾¹ï¼Œåº”å½“èƒ½å¤Ÿç«‹åˆ»æƒ³åˆ°æš´åŠ›ï¼š$n^2$ æšä¸¾ä¸¤æ¡è¾¹ã€‚\n\nä½†æ˜¯æˆ‘ä»–å¦ˆæ²¡æƒ³åˆ°ï¼Œæˆ‘ç›´æ¥æ‰¾çš„é‡å¿ƒï¼Œå¯¼è‡´è¿™é¢˜å°±ç®—ä¸ç»‘åŒ…æˆ‘ä¹Ÿå°±è¿‡äº†ä¸€ä¸ªç‚¹ã€‚\n\næšä¸¾åº”å½“æ˜¯æœ€åŸºæœ¬çš„ä¸œè¥¿ï¼Œä½†æ˜¯æˆ‘æ²¡æƒ³åˆ°ï¼Œè¯´æ˜æˆ‘çŠ¶æ€è¿˜æ²¡å›æ¥ã€‚  \nå¸Œæœ›èƒ½å°½å¿«å§ã€‚\n\nç„¶åèµ°å‘ç„å­¦ä¹±æã€‚\n\nè¿™é¢˜æ˜¾ç„¶ä¸æ˜¯è®©ä½ æ‰¾åˆ°ä¸€ä¸ªç‚¹ç„¶åä¹±æå‡ºåˆ†å‰²æ–¹æ¡ˆçš„ï¼Œå› ä¸ºè¦æ–­ä¸¤æ¡è¾¹ï¼Œæ‰€ä»¥æ‰¾ä¸€ä¸ªç‚¹çš„æ–¹å¼åº”å½“æ’é™¤ã€‚\n\nè€ƒè™‘æšä¸¾ä¸€æ¡è¾¹ï¼Œå¦ä¸€æ¡è¾¹ç”¨æ ¹å·æˆ–è€… $\\log$ çš„æ—¶é—´å¤æ‚åº¦æå‡ºæ¥ã€‚\n\nè€ƒè™‘å½“ä½ æšä¸¾æ–­æ‰ä¸€æ¡è¾¹çš„æ—¶å€™ï¼Œä¹Ÿå°±æ˜¯æ‹å‡ºæ¥äº†ä¸€æ£µå­æ ‘ï¼Œæ ‘çš„å‰©ä¸‹çš„éƒ¨åˆ†æ€ä¹ˆé€‰æ¯”è¾ƒåˆé€‚ï¼Ÿæ˜¾ç„¶æ˜¯æŠŠå®ƒä»¬åˆ‡æˆä¸€åŠã€‚\n\näºæ˜¯å¤§ä½“æ€è·¯å½¢æˆï¼šdfsï¼Œåˆ°æ¯ä¸ªèŠ‚ç‚¹çš„æ—¶å€™å°†è¿™æ£µæ ‘ä»å½“å‰èŠ‚ç‚¹çš„çˆ¶è¾¹æ–­å¼€ï¼Œç„¶åå½¢æˆäº†ä¸¤æ£µæ ‘ï¼Œå½¢å¦‚ Archlabs çš„ logoã€‚\n\n![](https://pic.imgdb.cn/item/64d4f0d01ddac507cc618df0)\n\nå¼€ä¸¤ä¸ª `std::multiset<int>` ç»´æŠ¤ dfs è¿‡ç¨‹ä¸­éå†è¿‡çš„æ‰€æœ‰å­æ ‘çš„å¤§å°ã€‚\n\nä¸ºå•¥æ˜¯ä¸¤ä¸ªå‘¢ï¼Œå¯¹äº $u$ çš„çˆ¶èŠ‚ç‚¹ï¼Œå…¶ $siz$ æ˜¯åŒ…å« $siz_u$ çš„ï¼Œæ‰€ä»¥å¯¹äº $u$ çš„ç¥–å…ˆèŠ‚ç‚¹çš„ $siz$ éœ€è¦å•ç‹¬ç»´æŠ¤ä¸€ä¸ªé›†åˆã€‚\n\nç„¶åå¯¹äºè¿™ä¸¤ç§å­æ ‘ï¼Œåˆ†åˆ«åˆ©ç”¨ `std::multiset<int>::lower_bound` æ‰¾åˆ°æœ€æ¥è¿‘è¯¥æ ‘ä¸€åŠå¤§å°çš„å­æ ‘ï¼Œç„¶åæ¯”å¤§å°æ›´æ–°ç­”æ¡ˆã€‚å¤§äºå°äºä¸çŸ¥é“å“ªä¸ªæ›´æ¥è¿‘çš„è¯ï¼Œä¸¤ä¸ªéƒ½åˆ¤ä¸€ä¸‹å°±å®Œäº‹äº†ã€‚\n\n---\n\ntho å’Œ thuï¼Œä¸€ä¸ªéƒ½å»ä¸äº†ï¼Œè¿™å°±æ˜¯ç‹¬å±äºæˆ‘çš„æ‚²ä¼¤å§ã€‚\n\n--- \n\né—²è¯ä¸å¤Ÿå¤šï¼Œä»¥åæ”¹è¿›ã€‚","tags":["é—²è¯"],"categories":["é—²è¯"]},{"title":"ï¼ˆè½¬è½½ï¼‰ä»€ä¹ˆæ˜¯ P é—®é¢˜ã€NP é—®é¢˜å’Œ NPC é—®é¢˜","path":"/post/p-np-npc/","content":"[åŸæ–‡ä¼ é€é—¨](https://www.matrix67.com/blog/archives/7084)ï¼Œæœ¬äººå¯¹å…¶è¿›è¡Œäº†æ ¼å¼ä¸Šçš„æ”¹åŠ¨ã€‚\n\nè¿™æˆ–è®¸æ˜¯ä¼—å¤š OIer æœ€å¤§çš„è¯¯åŒºä¹‹ä¸€ã€‚\nä½ ä¼šç»å¸¸çœ‹åˆ°ç½‘ä¸Šå‡ºç°â€œè¿™æ€ä¹ˆåšï¼Œè¿™ä¸æ˜¯ NP é—®é¢˜å—â€ã€â€œè¿™ä¸ªåªæœ‰æœäº†ï¼Œè¿™å·²ç»è¢«è¯æ˜æ˜¯ NP é—®é¢˜äº†â€ä¹‹ç±»çš„è¯ã€‚ä½ è¦çŸ¥é“ï¼Œå¤§å¤šæ•°äººæ­¤æ—¶æ‰€è¯´çš„ NP é—®é¢˜å…¶å®éƒ½æ˜¯æŒ‡çš„ NPC é—®é¢˜ã€‚ä»–ä»¬æ²¡æœ‰ææ¸…æ¥š NP é—®é¢˜å’Œ NPC é—®é¢˜çš„æ¦‚å¿µã€‚NP é—®é¢˜å¹¶ä¸æ˜¯é‚£ç§â€œåªæœ‰æœæ‰è¡Œâ€çš„é—®é¢˜ï¼ŒNPC é—®é¢˜æ‰æ˜¯ã€‚å¥½ï¼Œè¡Œäº†ï¼ŒåŸºæœ¬ä¸Šè¿™ä¸ªè¯¯è§£å·²ç»è¢«æ¾„æ¸…äº†ã€‚ä¸‹é¢çš„å†…å®¹éƒ½æ˜¯åœ¨è®²ä»€ä¹ˆæ˜¯ P é—®é¢˜ï¼Œä»€ä¹ˆæ˜¯ NP é—®é¢˜ï¼Œä»€ä¹ˆæ˜¯ NPC é—®é¢˜ï¼Œä½ å¦‚æœä¸æ˜¯å¾ˆæ„Ÿå…´è¶£å°±å¯ä»¥ä¸çœ‹äº†ã€‚æ¥ä¸‹æ¥ä½ å¯ä»¥çœ‹åˆ°ï¼ŒæŠŠ NP é—®é¢˜å½“æˆæ˜¯ NPC é—®é¢˜æ˜¯ä¸€ä¸ªå¤šå¤§çš„é”™è¯¯ã€‚\n\nè¿˜æ˜¯å…ˆç”¨å‡ å¥è¯ç®€å•è¯´æ˜ä¸€ä¸‹æ—¶é—´å¤æ‚åº¦ã€‚æ—¶é—´å¤æ‚åº¦å¹¶ä¸æ˜¯è¡¨ç¤ºä¸€ä¸ªç¨‹åºè§£å†³é—®é¢˜éœ€è¦èŠ±å¤šå°‘æ—¶é—´ï¼Œè€Œæ˜¯å½“é—®é¢˜è§„æ¨¡æ‰©å¤§åï¼Œç¨‹åºéœ€è¦çš„æ—¶é—´é•¿åº¦å¢é•¿å¾—æœ‰å¤šå¿«ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºé«˜é€Ÿå¤„ç†æ•°æ®çš„è®¡ç®—æœºæ¥è¯´ï¼Œå¤„ç†æŸä¸€ä¸ªç‰¹å®šæ•°æ®çš„æ•ˆç‡ä¸èƒ½è¡¡é‡ä¸€ä¸ªç¨‹åºçš„å¥½åï¼Œè€Œåº”è¯¥çœ‹å½“è¿™ä¸ªæ•°æ®çš„è§„æ¨¡å˜å¤§åˆ°æ•°ç™¾å€åï¼Œç¨‹åºè¿è¡Œæ—¶é—´æ˜¯å¦è¿˜æ˜¯ä¸€æ ·ï¼Œæˆ–è€…ä¹Ÿè·Ÿç€æ…¢äº†æ•°ç™¾å€ï¼Œæˆ–è€…å˜æ…¢äº†æ•°ä¸‡å€ã€‚ä¸ç®¡æ•°æ®æœ‰å¤šå¤§ï¼Œç¨‹åºå¤„ç†èŠ±çš„æ—¶é—´å§‹ç»ˆæ˜¯é‚£ä¹ˆå¤šçš„ï¼Œæˆ‘ä»¬å°±è¯´è¿™ä¸ªç¨‹åºå¾ˆå¥½ï¼Œå…·æœ‰ $\\Theta(1)$ çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¹Ÿç§°å¸¸æ•°çº§å¤æ‚åº¦ï¼›æ•°æ®è§„æ¨¡å˜å¾—æœ‰å¤šå¤§ï¼ŒèŠ±çš„æ—¶é—´ä¹Ÿè·Ÿç€å˜å¾—æœ‰å¤šé•¿ï¼Œè¿™ä¸ªç¨‹åºçš„æ—¶é—´å¤æ‚åº¦å°±æ˜¯ $\\Theta(n)$ï¼Œæ¯”å¦‚æ‰¾ $n$ ä¸ªæ•°ä¸­çš„æœ€å¤§å€¼ï¼›è€Œåƒå†’æ³¡æ’åºã€æ’å…¥æ’åºç­‰ï¼Œæ•°æ®æ‰©å¤§ $2$ å€ï¼Œæ—¶é—´å˜æ…¢ $4$ å€çš„ï¼Œå±äº $\\Theta(n^2)$ çš„å¤æ‚åº¦ã€‚è¿˜æœ‰ä¸€äº›ç©·ä¸¾ç±»çš„ç®—æ³•ï¼Œæ‰€éœ€æ—¶é—´é•¿åº¦æˆå‡ ä½•é˜¶æ•°ä¸Šæ¶¨ï¼Œè¿™å°±æ˜¯ $\\Theta(a^n)$ çš„æŒ‡æ•°çº§å¤æ‚åº¦ï¼Œç”šè‡³ $\\Theta(n!)$ çš„é˜¶ä¹˜çº§å¤æ‚åº¦ã€‚ä¸ä¼šå­˜åœ¨ $\\Theta(2n^2)$ çš„å¤æ‚åº¦ï¼Œå› ä¸ºå‰é¢çš„é‚£ä¸ªâ€œ$2$â€æ˜¯ç³»æ•°ï¼Œæ ¹æœ¬ä¸ä¼šå½±å“åˆ°æ•´ä¸ªç¨‹åºçš„æ—¶é—´å¢é•¿ã€‚åŒæ ·åœ°ï¼Œ$\\Theta(n^3+n^2)$ çš„å¤æ‚åº¦ä¹Ÿå°±æ˜¯ $\\Theta(n^3)$ çš„å¤æ‚åº¦ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¼šè¯´ï¼Œä¸€ä¸ª $\\Theta(0.01n^3)$ çš„ç¨‹åºçš„æ•ˆç‡æ¯” $\\Theta(100n^2)$ çš„æ•ˆç‡ä½ï¼Œå°½ç®¡åœ¨ $n$ å¾ˆå°çš„æ—¶å€™ï¼Œå‰è€…ä¼˜äºåè€…ï¼Œä½†åè€…æ—¶é—´éšæ•°æ®è§„æ¨¡å¢é•¿å¾—æ…¢ï¼Œæœ€ç»ˆ $\\Theta(n^3)$ çš„å¤æ‚åº¦å°†è¿œè¿œè¶…è¿‡ $\\Theta(n^2)$ã€‚æˆ‘ä»¬ä¹Ÿè¯´ï¼Œ$\\Theta(n^{100})$ çš„å¤æ‚åº¦å°äº $\\Theta(1.01^n)$ çš„å¤æ‚åº¦ã€‚  \nå®¹æ˜“çœ‹å‡ºï¼Œå‰é¢çš„å‡ ç±»å¤æ‚åº¦è¢«åˆ†ä¸ºä¸¤ç§çº§åˆ«ï¼Œå…¶ä¸­åè€…çš„å¤æ‚åº¦æ— è®ºå¦‚ä½•éƒ½è¿œè¿œå¤§äºå‰è€…ï¼šä¸€ç§æ˜¯ $\\Theta(1),\\Theta(\\log n),\\Theta(n^a)$ ç­‰ï¼Œæˆ‘ä»¬æŠŠå®ƒå«åšå¤šé¡¹å¼çº§çš„å¤æ‚åº¦ï¼Œå› ä¸ºå®ƒçš„è§„æ¨¡ $n$ å‡ºç°åœ¨åº•æ•°çš„ä½ç½®ï¼›å¦ä¸€ç§æ˜¯ $\\Theta(a^n)$ å’Œ $\\Theta(n!)$ å‹å¤æ‚åº¦ï¼Œå®ƒæ˜¯éå¤šé¡¹å¼çº§çš„ï¼Œå…¶å¤æ‚åº¦è®¡ç®—æœºå¾€å¾€ä¸èƒ½æ‰¿å—ã€‚å½“æˆ‘ä»¬åœ¨è§£å†³ä¸€ä¸ªé—®é¢˜æ—¶ï¼Œæˆ‘ä»¬é€‰æ‹©çš„ç®—æ³•é€šå¸¸éƒ½éœ€è¦æ˜¯å¤šé¡¹å¼çº§çš„å¤æ‚åº¦ï¼Œéå¤šé¡¹å¼çº§çš„å¤æ‚åº¦éœ€è¦çš„æ—¶é—´å¤ªå¤šï¼Œå¾€å¾€ä¼šè¶…æ—¶ï¼Œé™¤éæ˜¯æ•°æ®è§„æ¨¡éå¸¸å°ã€‚\n\nè‡ªç„¶åœ°ï¼Œäººä»¬ä¼šæƒ³åˆ°ä¸€ä¸ªé—®é¢˜ï¼šä¼šä¸ä¼šæ‰€æœ‰çš„é—®é¢˜éƒ½å¯ä»¥æ‰¾åˆ°å¤æ‚åº¦ä¸ºå¤šé¡¹å¼çº§çš„ç®—æ³•å‘¢ï¼Ÿå¾ˆé—æ†¾ï¼Œç­”æ¡ˆæ˜¯å¦å®šçš„ã€‚æœ‰äº›é—®é¢˜ç”šè‡³æ ¹æœ¬ä¸å¯èƒ½æ‰¾åˆ°ä¸€ä¸ªæ­£ç¡®çš„ç®—æ³•æ¥ï¼Œè¿™ç§°ä¹‹ä¸ºâ€œä¸å¯è§£é—®é¢˜â€ï¼ˆUndecidable Decision Problemï¼‰ã€‚The Halting Problem å°±æ˜¯ä¸€ä¸ªè‘—åçš„ä¸å¯è§£é—®é¢˜ï¼Œåœ¨æˆ‘çš„ Blog ä¸Šæœ‰è¿‡ä¸“é—¨çš„ä»‹ç»å’Œè¯æ˜[^1]ã€‚å†æ¯”å¦‚ï¼Œè¾“å‡ºä» $1$ åˆ° $n$ è¿™ $n$ ä¸ªæ•°çš„å…¨æ’åˆ—ã€‚ä¸ç®¡ä½ ç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œä½ çš„å¤æ‚åº¦éƒ½æ˜¯é˜¶ä¹˜çº§ï¼Œå› ä¸ºä½ æ€»å¾—ç”¨é˜¶ä¹˜çº§çš„æ—¶é—´æ‰“å°å‡ºç»“æœæ¥ã€‚æœ‰äººè¯´ï¼Œè¿™æ ·çš„â€œé—®é¢˜â€ä¸æ˜¯ä¸€ä¸ªâ€œæ­£è§„â€çš„é—®é¢˜ï¼Œæ­£è§„çš„é—®é¢˜æ˜¯è®©ç¨‹åºè§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œè¾“å‡ºä¸€ä¸ªâ€œYESâ€æˆ–â€œNOâ€ï¼ˆè¿™è¢«ç§°ä¸ºåˆ¤å®šæ€§é—®é¢˜ï¼‰ï¼Œæˆ–è€…ä¸€ä¸ªä»€ä¹ˆä»€ä¹ˆçš„æœ€ä¼˜å€¼ï¼ˆè¿™è¢«ç§°ä¸ºæœ€ä¼˜åŒ–é—®é¢˜ï¼‰ã€‚é‚£ä¹ˆï¼Œæ ¹æ®è¿™ä¸ªå®šä¹‰ï¼Œæˆ‘ä¹Ÿèƒ½ä¸¾å‡ºä¸€ä¸ªä¸å¤§å¯èƒ½ä¼šæœ‰å¤šé¡¹å¼çº§ç®—æ³•çš„é—®é¢˜æ¥ï¼šHamilton å›è·¯ã€‚é—®é¢˜æ˜¯è¿™æ ·çš„ï¼šç»™ä½ ä¸€ä¸ªå›¾ï¼Œé—®ä½ èƒ½å¦æ‰¾åˆ°ä¸€æ¡ç»è¿‡æ¯ä¸ªé¡¶ç‚¹ä¸€æ¬¡ä¸”æ°å¥½ä¸€æ¬¡ï¼ˆä¸é—æ¼ä¹Ÿä¸é‡å¤ï¼‰æœ€ååˆèµ°å›æ¥çš„è·¯ï¼ˆæ»¡è¶³è¿™ä¸ªæ¡ä»¶çš„è·¯å¾„å«åš Hamilton å›è·¯ï¼‰ã€‚è¿™ä¸ªé—®é¢˜ç°åœ¨è¿˜æ²¡æœ‰æ‰¾åˆ°å¤šé¡¹å¼çº§çš„ç®—æ³•ã€‚äº‹å®ä¸Šï¼Œè¿™ä¸ªé—®é¢˜å°±æ˜¯æˆ‘ä»¬åé¢è¦è¯´çš„ NPC é—®é¢˜ã€‚\n\nä¸‹é¢å¼•å…¥ P ç±»é—®é¢˜çš„æ¦‚å¿µï¼šå¦‚æœä¸€ä¸ªé—®é¢˜å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªèƒ½åœ¨å¤šé¡¹å¼çš„æ—¶é—´é‡Œè§£å†³å®ƒçš„ç®—æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªé—®é¢˜å°±å±äº P é—®é¢˜ã€‚P æ˜¯è‹±æ–‡å•è¯å¤šé¡¹å¼çš„ç¬¬ä¸€ä¸ªå­—æ¯ã€‚å“ªäº›é—®é¢˜æ˜¯ P ç±»é—®é¢˜å‘¢ï¼Ÿé€šå¸¸ NOI å’Œ NOIP ä¸ä¼šå‡ºä¸å±äº P ç±»é—®é¢˜çš„é¢˜ç›®ã€‚æˆ‘ä»¬å¸¸è§åˆ°çš„ä¸€äº›ä¿¡æ¯å¥¥èµ›çš„é¢˜ç›®éƒ½æ˜¯ P é—®é¢˜ã€‚é“ç†å¾ˆç®€å•ï¼Œä¸€ä¸ªç”¨ç©·ä¸¾æ¢æ¥çš„éå¤šé¡¹å¼çº§æ—¶é—´çš„è¶…æ—¶ç¨‹åºä¸ä¼šæ¶µç›–ä»»ä½•æœ‰ä»·å€¼çš„ç®—æ³•ã€‚  \næ¥ä¸‹æ¥å¼•å…¥ NP é—®é¢˜çš„æ¦‚å¿µã€‚è¿™ä¸ªå°±æœ‰ç‚¹éš¾ç†è§£äº†ï¼Œæˆ–è€…è¯´å®¹æ˜“ç†è§£é”™è¯¯ã€‚åœ¨è¿™é‡Œå¼ºè°ƒï¼ˆå›åˆ°æˆ‘ç«­åŠ›æƒ³æ¾„æ¸…çš„è¯¯åŒºä¸Šï¼‰ï¼ŒNP é—®é¢˜ä¸æ˜¯é P ç±»é—®é¢˜ã€‚NP é—®é¢˜æ˜¯æŒ‡å¯ä»¥åœ¨å¤šé¡¹å¼çš„æ—¶é—´é‡ŒéªŒè¯ä¸€ä¸ªè§£çš„é—®é¢˜ã€‚NP é—®é¢˜çš„å¦ä¸€ä¸ªå®šä¹‰æ˜¯ï¼Œå¯ä»¥åœ¨å¤šé¡¹å¼çš„æ—¶é—´é‡ŒçŒœå‡ºä¸€ä¸ªè§£çš„é—®é¢˜ã€‚æ¯”æ–¹è¯´ï¼Œæˆ‘ RP å¾ˆå¥½ï¼Œåœ¨ç¨‹åºä¸­éœ€è¦æšä¸¾æ—¶ï¼Œæˆ‘å¯ä»¥ä¸€çŒœä¸€ä¸ªå‡†ã€‚ç°åœ¨æŸäººæ‹¿åˆ°äº†ä¸€ä¸ªæ±‚æœ€çŸ­è·¯å¾„çš„é—®é¢˜ï¼Œé—®ä»èµ·ç‚¹åˆ°ç»ˆç‚¹æ˜¯å¦æœ‰ä¸€æ¡å°äº $100$ ä¸ªå•ä½é•¿åº¦çš„è·¯çº¿ã€‚å®ƒæ ¹æ®æ•°æ®ç”»å¥½äº†å›¾ï¼Œä½†æ€ä¹ˆä¹Ÿç®—ä¸å‡ºæ¥ï¼Œäºæ˜¯æ¥é—®æˆ‘ï¼šä½ çœ‹æ€ä¹ˆé€‰æ¡è·¯èµ°å¾—æœ€å°‘ï¼Ÿæˆ‘è¯´ï¼Œæˆ‘ RP å¾ˆå¥½ï¼Œè‚¯å®šèƒ½éšä¾¿ç»™ä½ æŒ‡æ¡å¾ˆçŸ­çš„è·¯å‡ºæ¥ã€‚ç„¶åæˆ‘å°±èƒ¡ä¹±ç”»äº†å‡ æ¡çº¿ï¼Œè¯´å°±è¿™æ¡å§ã€‚é‚£äººæŒ‰æˆ‘æŒ‡çš„è¿™æ¡æŠŠæƒå€¼åŠ èµ·æ¥ä¸€çœ‹ï¼Œå˜¿ï¼Œç¥äº†ï¼Œè·¯å¾„é•¿åº¦ $98$ï¼Œæ¯” $100$ å°ã€‚äºæ˜¯ç­”æ¡ˆå‡ºæ¥äº†ï¼Œå­˜åœ¨æ¯” $100$ å°çš„è·¯å¾„ã€‚åˆ«äººä¼šé—®ä»–è¿™é¢˜æ€ä¹ˆåšå‡ºæ¥çš„ï¼Œä»–å°±å¯ä»¥è¯´ï¼Œå› ä¸ºæˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªæ¯” $100$ å°çš„è§£ã€‚åœ¨è¿™ä¸ªé¢˜ä¸­ï¼Œæ‰¾ä¸€ä¸ªè§£å¾ˆå›°éš¾ï¼Œä½†éªŒè¯ä¸€ä¸ªè§£å¾ˆå®¹æ˜“ã€‚éªŒè¯ä¸€ä¸ªè§£åªéœ€è¦ $\\Theta(n)$ çš„æ—¶é—´å¤æ‚åº¦ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘å¯ä»¥èŠ± $\\Theta(n)$ çš„æ—¶é—´æŠŠæˆ‘çŒœçš„è·¯å¾„çš„é•¿åº¦åŠ å‡ºæ¥ã€‚é‚£ä¹ˆï¼Œåªè¦æˆ‘ RP å¥½ï¼ŒçŒœå¾—å‡†ï¼Œæˆ‘ä¸€å®šèƒ½åœ¨å¤šé¡¹å¼çš„æ—¶é—´é‡Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚æˆ‘çŒœåˆ°çš„æ–¹æ¡ˆæ€»æ˜¯æœ€ä¼˜çš„ï¼Œä¸æ»¡è¶³é¢˜æ„çš„æ–¹æ¡ˆä¹Ÿä¸ä¼šæ¥éª—æˆ‘å»é€‰å®ƒã€‚è¿™å°±æ˜¯ NP é—®é¢˜ã€‚å½“ç„¶æœ‰ä¸æ˜¯ NP é—®é¢˜çš„é—®é¢˜ï¼Œå³ä½ çŒœåˆ°äº†è§£ä½†æ˜¯æ²¡ç”¨ï¼Œå› ä¸ºä½ ä¸èƒ½åœ¨å¤šé¡¹å¼çš„æ—¶é—´é‡Œå»éªŒè¯å®ƒã€‚ä¸‹é¢æˆ‘è¦ä¸¾çš„ä¾‹å­æ˜¯ä¸€ä¸ªç»å…¸çš„ä¾‹å­ï¼Œå®ƒæŒ‡å‡ºäº†ä¸€ä¸ªç›®å‰è¿˜æ²¡æœ‰åŠæ³•åœ¨å¤šé¡¹å¼çš„æ—¶é—´é‡ŒéªŒè¯ä¸€ä¸ªè§£çš„é—®é¢˜ã€‚å¾ˆæ˜¾ç„¶ï¼Œå‰é¢æ‰€è¯´çš„ Hamilton å›è·¯æ˜¯ NP é—®é¢˜ï¼Œå› ä¸ºéªŒè¯ä¸€æ¡è·¯æ˜¯å¦æ°å¥½ç»è¿‡äº†æ¯ä¸€ä¸ªé¡¶ç‚¹éå¸¸å®¹æ˜“ã€‚ä½†æˆ‘è¦æŠŠé—®é¢˜æ¢æˆè¿™æ ·ï¼šè¯•é—®ä¸€ä¸ªå›¾ä¸­æ˜¯å¦ä¸å­˜åœ¨ Hamilton å›è·¯ã€‚è¿™æ ·é—®é¢˜å°±æ²¡æ³•åœ¨å¤šé¡¹å¼çš„æ—¶é—´é‡Œè¿›è¡ŒéªŒè¯äº†ï¼Œå› ä¸ºé™¤éä½ è¯•è¿‡æ‰€æœ‰çš„è·¯ï¼Œå¦åˆ™ä½ ä¸æ•¢æ–­å®šå®ƒâ€œæ²¡æœ‰ Hamilton å›è·¯â€ã€‚  \nä¹‹æ‰€ä»¥è¦å®šä¹‰ NP é—®é¢˜ï¼Œæ˜¯å› ä¸ºé€šå¸¸åªæœ‰ NP é—®é¢˜æ‰å¯èƒ½æ‰¾åˆ°å¤šé¡¹å¼çš„ç®—æ³•ã€‚æˆ‘ä»¬ä¸ä¼šæŒ‡æœ›ä¸€ä¸ªè¿å¤šé¡¹å¼åœ°éªŒè¯ä¸€ä¸ªè§£éƒ½ä¸è¡Œçš„é—®é¢˜å­˜åœ¨ä¸€ä¸ªè§£å†³å®ƒçš„å¤šé¡¹å¼çº§çš„ç®—æ³•ã€‚ç›¸ä¿¡è¯»è€…å¾ˆå¿«æ˜ç™½ï¼Œä¿¡æ¯å­¦ä¸­çš„å·ç§°æœ€å›°éš¾çš„é—®é¢˜â€”â€”â€œNP é—®é¢˜â€ï¼Œå®é™…ä¸Šæ˜¯åœ¨æ¢è®¨ NP é—®é¢˜ä¸ P ç±»é—®é¢˜çš„å…³ç³»ã€‚\n\nå¾ˆæ˜¾ç„¶ï¼Œæ‰€æœ‰çš„ P ç±»é—®é¢˜éƒ½æ˜¯ NP é—®é¢˜ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œèƒ½å¤šé¡¹å¼åœ°è§£å†³ä¸€ä¸ªé—®é¢˜ï¼Œå¿…ç„¶èƒ½å¤šé¡¹å¼åœ°éªŒè¯ä¸€ä¸ªé—®é¢˜çš„è§£â€”â€”æ—¢ç„¶æ­£è§£éƒ½å‡ºæ¥äº†ï¼ŒéªŒè¯ä»»æ„ç»™å®šçš„è§£ä¹Ÿåªéœ€è¦æ¯”è¾ƒä¸€ä¸‹å°±å¯ä»¥äº†ã€‚å…³é”®æ˜¯ï¼Œäººä»¬æƒ³çŸ¥é“ï¼Œæ˜¯å¦æ‰€æœ‰çš„ NP é—®é¢˜éƒ½æ˜¯ P ç±»é—®é¢˜ã€‚æˆ‘ä»¬å¯ä»¥å†ç”¨é›†åˆçš„è§‚ç‚¹æ¥è¯´æ˜ã€‚å¦‚æœæŠŠæ‰€æœ‰ P ç±»é—®é¢˜å½’ä¸ºä¸€ä¸ªé›†åˆ $\\mathbb P$ ä¸­ï¼ŒæŠŠæ‰€æœ‰ NP é—®é¢˜åˆ’è¿›å¦ä¸€ä¸ªé›†åˆ $\\mathbb {NP}$ ä¸­ï¼Œé‚£ä¹ˆï¼Œæ˜¾ç„¶æœ‰ $\\mathbb P \\in \\mathbb {NP}$ã€‚ç°åœ¨ï¼Œæ‰€æœ‰å¯¹ NP é—®é¢˜çš„ç ”ç©¶éƒ½é›†ä¸­åœ¨ä¸€ä¸ªé—®é¢˜ä¸Šï¼Œå³ç©¶ç«Ÿæ˜¯å¦æœ‰ $P=NP$ï¼Ÿé€šå¸¸æ‰€è°“çš„â€œNP é—®é¢˜â€ï¼Œå…¶å®å°±ä¸€å¥è¯ï¼šè¯æ˜æˆ–æ¨ç¿» $P=NP$ã€‚  \nNP é—®é¢˜ä¸€ç›´éƒ½æ˜¯ä¿¡æ¯å­¦çš„å·…å³°ã€‚å·…å³°ï¼Œæ„å³å¾ˆå¼•äººæ³¨ç›®ä½†éš¾ä»¥è§£å†³ã€‚åœ¨ä¿¡æ¯å­¦ç ”ç©¶ä¸­ï¼Œè¿™æ˜¯ä¸€ä¸ªè€—è´¹äº†å¾ˆå¤šæ—¶é—´å’Œç²¾åŠ›ä¹Ÿæ²¡æœ‰è§£å†³çš„ç»ˆæé—®é¢˜ï¼Œå¥½æ¯”ç‰©ç†å­¦ä¸­çš„å¤§ç»Ÿä¸€å’Œæ•°å­¦ä¸­çš„æ­Œå¾·å·´èµ«çŒœæƒ³ç­‰ã€‚  \nç›®å‰ä¸ºæ­¢è¿™ä¸ªé—®é¢˜è¿˜â€œå•ƒä¸åŠ¨â€ã€‚ä½†æ˜¯ï¼Œä¸€ä¸ªæ€»çš„è¶‹åŠ¿ã€ä¸€ä¸ªå¤§æ–¹å‘æ˜¯æœ‰çš„ã€‚äººä»¬æ™®éè®¤ä¸ºï¼Œ$P=NP$ ä¸æˆç«‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤šæ•°äººç›¸ä¿¡ï¼Œå­˜åœ¨è‡³å°‘ä¸€ä¸ªä¸å¯èƒ½æœ‰å¤šé¡¹å¼çº§å¤æ‚åº¦çš„ç®—æ³•çš„ NP é—®é¢˜ã€‚äººä»¬å¦‚æ­¤åšä¿¡ $P\\neq NP$ æ˜¯æœ‰åŸå› çš„ï¼Œå°±æ˜¯åœ¨ç ”ç©¶ NP é—®é¢˜çš„è¿‡ç¨‹ä¸­æ‰¾å‡ºäº†ä¸€ç±»éå¸¸ç‰¹æ®Šçš„ NP é—®é¢˜å«åš NP-å®Œå…¨é—®é¢˜ï¼Œä¹Ÿå³æ‰€è°“çš„ NPC é—®é¢˜ã€‚C æ˜¯è‹±æ–‡å•è¯â€œå®Œå…¨â€çš„ç¬¬ä¸€ä¸ªå­—æ¯ã€‚æ­£æ˜¯ NPC é—®é¢˜çš„å­˜åœ¨ï¼Œä½¿äººä»¬ç›¸ä¿¡ $P\\neq NP$ã€‚ä¸‹æ–‡å°†èŠ±å¤§é‡ç¯‡å¹…ä»‹ç» NPC é—®é¢˜ï¼Œä½ ä»ä¸­å¯ä»¥ä½“ä¼šåˆ° NPC é—®é¢˜ä½¿ $P=NP$ å˜å¾—å¤šä¹ˆä¸å¯æ€è®®ã€‚\n\nä¸ºäº†è¯´æ˜ NPC é—®é¢˜ï¼Œæˆ‘ä»¬å…ˆå¼•å…¥ä¸€ä¸ªæ¦‚å¿µâ€”â€”çº¦åŒ–ï¼ˆReducibilityï¼Œæœ‰çš„èµ„æ–™ä¸Šå«â€œå½’çº¦â€ï¼‰ã€‚  \nç®€å•åœ°è¯´ï¼Œä¸€ä¸ªé—®é¢˜ A å¯ä»¥çº¦åŒ–ä¸ºé—®é¢˜ B çš„å«ä¹‰å³æ˜¯ï¼Œå¯ä»¥ç”¨é—®é¢˜ B çš„è§£æ³•è§£å†³é—®é¢˜ Aï¼Œæˆ–è€…è¯´ï¼Œé—®é¢˜ A å¯ä»¥â€œå˜æˆâ€é—®é¢˜ Bã€‚ã€Šç®—æ³•å¯¼è®ºã€‹ä¸Šä¸¾äº†è¿™ä¹ˆä¸€ä¸ªä¾‹å­ã€‚æ¯”å¦‚è¯´ï¼Œç°åœ¨æœ‰ä¸¤ä¸ªé—®é¢˜ï¼šæ±‚è§£ä¸€ä¸ªä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹å’Œæ±‚è§£ä¸€ä¸ªä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹ã€‚é‚£ä¹ˆæˆ‘ä»¬è¯´ï¼Œå‰è€…å¯ä»¥çº¦åŒ–ä¸ºåè€…ï¼Œæ„å³çŸ¥é“å¦‚ä½•è§£ä¸€ä¸ªä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹é‚£ä¹ˆä¸€å®šèƒ½è§£å‡ºä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹ã€‚æˆ‘ä»¬å¯ä»¥å†™å‡ºä¸¤ä¸ªç¨‹åºåˆ†åˆ«å¯¹åº”ä¸¤ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½æ‰¾åˆ°ä¸€ä¸ªâ€œè§„åˆ™â€ï¼ŒæŒ‰ç…§è¿™ä¸ªè§„åˆ™æŠŠè§£ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹ç¨‹åºçš„è¾“å…¥æ•°æ®å˜ä¸€ä¸‹ï¼Œç”¨åœ¨è§£ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹çš„ç¨‹åºä¸Šï¼Œä¸¤ä¸ªç¨‹åºæ€»èƒ½å¾—åˆ°ä¸€æ ·çš„ç»“æœã€‚è¿™ä¸ªè§„åˆ™å³æ˜¯ï¼šä¸¤ä¸ªæ–¹ç¨‹çš„å¯¹åº”é¡¹ç³»æ•°ä¸å˜ï¼Œä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹çš„äºŒæ¬¡é¡¹ç³»æ•°ä¸º $0$ã€‚æŒ‰ç…§è¿™ä¸ªè§„åˆ™æŠŠå‰ä¸€ä¸ªé—®é¢˜è½¬æ¢æˆåä¸€ä¸ªé—®é¢˜ï¼Œä¸¤ä¸ªé—®é¢˜å°±ç­‰ä»·äº†ã€‚åŒæ ·åœ°ï¼Œæˆ‘ä»¬å¯ä»¥è¯´ï¼ŒHamilton å›è·¯å¯ä»¥çº¦åŒ–ä¸º TSP é—®é¢˜ï¼ˆTravelling Salesman Problemï¼Œæ—…è¡Œå•†é—®é¢˜ï¼‰ï¼šåœ¨ Hamilton å›è·¯é—®é¢˜ä¸­ï¼Œä¸¤ç‚¹ç›¸è¿å³è¿™ä¸¤ç‚¹è·ç¦»ä¸º $0$ï¼Œä¸¤ç‚¹ä¸ç›´æ¥ç›¸è¿åˆ™ä»¤å…¶è·ç¦»ä¸º $1$ï¼Œäºæ˜¯é—®é¢˜è½¬åŒ–ä¸ºåœ¨ TSP é—®é¢˜ä¸­ï¼Œæ˜¯å¦å­˜åœ¨ä¸€æ¡é•¿ä¸º $0$ çš„è·¯å¾„ã€‚Hamilton å›è·¯å­˜åœ¨å½“ä¸”ä»…å½“ TSP é—®é¢˜ä¸­å­˜åœ¨é•¿ä¸º $0$ çš„å›è·¯ã€‚  \nâ€œé—®é¢˜ A å¯çº¦åŒ–ä¸ºé—®é¢˜ Bâ€æœ‰ä¸€ä¸ªé‡è¦çš„ç›´è§‚æ„ä¹‰ï¼šB çš„æ—¶é—´å¤æ‚åº¦é«˜äºæˆ–è€…ç­‰äº A çš„æ—¶é—´å¤æ‚åº¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œé—®é¢˜ A ä¸æ¯”é—®é¢˜ B éš¾ã€‚è¿™å¾ˆå®¹æ˜“ç†è§£ã€‚æ—¢ç„¶é—®é¢˜ A èƒ½ç”¨é—®é¢˜ B æ¥è§£å†³ï¼Œå€˜è‹¥ B çš„æ—¶é—´å¤æ‚åº¦æ¯” A çš„æ—¶é—´å¤æ‚åº¦è¿˜ä½äº†ï¼Œé‚£ A çš„ç®—æ³•å°±å¯ä»¥æ”¹è¿›ä¸º B çš„ç®—æ³•ï¼Œä¸¤è€…çš„æ—¶é—´å¤æ‚åº¦è¿˜æ˜¯ç›¸åŒã€‚æ­£å¦‚è§£ä¸€å…ƒäºŒæ¬¡æ–¹ç¨‹æ¯”è§£ä¸€å…ƒä¸€æ¬¡æ–¹ç¨‹éš¾ï¼Œå› ä¸ºè§£å†³å‰è€…çš„æ–¹æ³•å¯ä»¥ç”¨æ¥è§£å†³åè€…ã€‚  \nå¾ˆæ˜¾ç„¶ï¼Œçº¦åŒ–å…·æœ‰ä¸€é¡¹é‡è¦çš„æ€§è´¨ï¼šçº¦åŒ–å…·æœ‰ä¼ é€’æ€§ã€‚å¦‚æœé—®é¢˜ A å¯çº¦åŒ–ä¸ºé—®é¢˜ Bï¼Œé—®é¢˜ B å¯çº¦åŒ–ä¸ºé—®é¢˜ Cï¼Œåˆ™é—®é¢˜ A ä¸€å®šå¯çº¦åŒ–ä¸ºé—®é¢˜ Cã€‚è¿™ä¸ªé“ç†éå¸¸ç®€å•ï¼Œå°±ä¸å¿…é˜è¿°äº†ã€‚\nç°åœ¨å†æ¥è¯´ä¸€ä¸‹çº¦åŒ–çš„æ ‡å‡†æ¦‚å¿µå°±ä¸éš¾ç†è§£äº†ï¼šå¦‚æœèƒ½æ‰¾åˆ°è¿™æ ·ä¸€ä¸ªå˜åŒ–æ³•åˆ™ï¼Œå¯¹ä»»æ„ä¸€ä¸ªç¨‹åº A çš„è¾“å…¥ï¼Œéƒ½èƒ½æŒ‰è¿™ä¸ªæ³•åˆ™å˜æ¢æˆç¨‹åº B çš„è¾“å…¥ï¼Œä½¿ä¸¤ç¨‹åºçš„è¾“å‡ºç›¸åŒï¼Œé‚£ä¹ˆæˆ‘ä»¬è¯´ï¼Œé—®é¢˜ A å¯çº¦åŒ–ä¸ºé—®é¢˜ Bã€‚  \nå½“ç„¶ï¼Œæˆ‘ä»¬æ‰€è¯´çš„â€œå¯çº¦åŒ–â€æ˜¯æŒ‡çš„å¯â€œå¤šé¡¹å¼åœ°â€çº¦åŒ–ï¼ˆPolynomial-time Reducibleï¼‰ï¼Œå³å˜æ¢è¾“å…¥çš„æ–¹æ³•æ˜¯èƒ½åœ¨å¤šé¡¹å¼çš„æ—¶é—´é‡Œå®Œæˆçš„ã€‚çº¦åŒ–çš„è¿‡ç¨‹åªæœ‰ç”¨å¤šé¡¹å¼çš„æ—¶é—´å®Œæˆæ‰æœ‰æ„ä¹‰ã€‚\n\nå¥½äº†ï¼Œä»çº¦åŒ–çš„å®šä¹‰ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼Œä¸€ä¸ªé—®é¢˜çº¦åŒ–ä¸ºå¦ä¸€ä¸ªé—®é¢˜ï¼Œæ—¶é—´å¤æ‚åº¦å¢åŠ äº†ï¼Œé—®é¢˜çš„åº”ç”¨èŒƒå›´ä¹Ÿå¢å¤§äº†ã€‚é€šè¿‡å¯¹æŸäº›é—®é¢˜çš„ä¸æ–­çº¦åŒ–ï¼Œæˆ‘ä»¬èƒ½å¤Ÿä¸æ–­å¯»æ‰¾å¤æ‚åº¦æ›´é«˜ï¼Œä½†åº”ç”¨èŒƒå›´æ›´å¹¿çš„ç®—æ³•æ¥ä»£æ›¿å¤æ‚åº¦è™½ç„¶ä½ï¼Œä½†åªèƒ½ç”¨äºå¾ˆå°çš„ä¸€ç±»é—®é¢˜çš„ç®—æ³•ã€‚å†å›æƒ³å‰é¢è®²çš„ P å’Œ NP é—®é¢˜ï¼Œè”æƒ³èµ·çº¦åŒ–çš„ä¼ é€’æ€§ï¼Œè‡ªç„¶åœ°ï¼Œæˆ‘ä»¬ä¼šæƒ³é—®ï¼Œå¦‚æœä¸æ–­åœ°çº¦åŒ–ä¸Šå»ï¼Œä¸æ–­æ‰¾åˆ°èƒ½â€œé€šåƒâ€è‹¥å¹²å° NP é—®é¢˜çš„ä¸€ä¸ªç¨å¤æ‚çš„å¤§ NP é—®é¢˜ï¼Œé‚£ä¹ˆæœ€åæ˜¯å¦æœ‰å¯èƒ½æ‰¾åˆ°ä¸€ä¸ªæ—¶é—´å¤æ‚åº¦æœ€é«˜ï¼Œå¹¶ä¸”èƒ½â€œé€šåƒâ€æ‰€æœ‰çš„ NP é—®é¢˜çš„è¿™æ ·ä¸€ä¸ªè¶…çº§ NP é—®é¢˜ï¼Ÿç­”æ¡ˆå±…ç„¶æ˜¯è‚¯å®šçš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå­˜åœ¨è¿™æ ·ä¸€ä¸ª NP é—®é¢˜ï¼Œæ‰€æœ‰çš„ NP é—®é¢˜éƒ½å¯ä»¥çº¦åŒ–æˆå®ƒã€‚æ¢å¥è¯è¯´ï¼Œåªè¦è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ NP é—®é¢˜éƒ½è§£å†³äº†ã€‚è¿™ç§é—®é¢˜çš„å­˜åœ¨éš¾ä»¥ç½®ä¿¡ï¼Œå¹¶ä¸”æ›´åŠ ä¸å¯æ€è®®çš„æ˜¯ï¼Œè¿™ç§é—®é¢˜ä¸åªä¸€ä¸ªï¼Œå®ƒæœ‰å¾ˆå¤šä¸ªï¼Œå®ƒæ˜¯ä¸€ç±»é—®é¢˜ã€‚è¿™ä¸€ç±»é—®é¢˜å°±æ˜¯ä¼ è¯´ä¸­çš„ NPC é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯ NP-å®Œå…¨é—®é¢˜ã€‚NPC é—®é¢˜çš„å‡ºç°ä½¿æ•´ä¸ª NP é—®é¢˜çš„ç ”ç©¶å¾—åˆ°äº†é£è·ƒå¼çš„å‘å±•ã€‚æˆ‘ä»¬æœ‰ç†ç”±ç›¸ä¿¡ï¼ŒNPC é—®é¢˜æ˜¯æœ€å¤æ‚çš„é—®é¢˜ã€‚å†æ¬¡å›åˆ°å…¨æ–‡å¼€å¤´ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œäººä»¬æƒ³è¡¨è¾¾ä¸€ä¸ªé—®é¢˜ä¸å­˜åœ¨å¤šé¡¹å¼çš„é«˜æ•ˆç®—æ³•æ—¶åº”è¯¥è¯´å®ƒâ€œå±äº NPC é—®é¢˜â€ã€‚æ­¤æ—¶ï¼Œæˆ‘çš„ç›®çš„ç»ˆäºè¾¾åˆ°äº†ï¼Œæˆ‘å·²ç»æŠŠ NP é—®é¢˜å’Œ NPC é—®é¢˜åŒºåˆ«å¼€äº†ã€‚åˆ°æ­¤ä¸ºæ­¢ï¼Œæœ¬æ–‡å·²ç»å†™äº†è¿‘ 5000 å­—äº†ï¼Œæˆ‘ä½©æœä½ è¿˜èƒ½çœ‹åˆ°è¿™é‡Œæ¥ï¼ŒåŒæ—¶ä¹Ÿä½©æœä¸€ä¸‹è‡ªå·±èƒ½å†™åˆ°è¿™é‡Œæ¥ã€‚\n\nNPC é—®é¢˜çš„å®šä¹‰éå¸¸ç®€å•ã€‚åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸¤ä¸ªæ¡ä»¶çš„é—®é¢˜å°±æ˜¯ NPC é—®é¢˜ã€‚é¦–å…ˆï¼Œå®ƒå¾—æ˜¯ä¸€ä¸ª NP é—®é¢˜ï¼›ç„¶åï¼Œæ‰€æœ‰çš„ NP é—®é¢˜éƒ½å¯ä»¥çº¦åŒ–åˆ°å®ƒã€‚è¯æ˜ä¸€ä¸ªé—®é¢˜æ˜¯ NPC é—®é¢˜ä¹Ÿå¾ˆç®€å•ã€‚å…ˆè¯æ˜å®ƒè‡³å°‘æ˜¯ä¸€ä¸ª NP é—®é¢˜ï¼Œå†è¯æ˜å…¶ä¸­ä¸€ä¸ªå·²çŸ¥çš„ NPC é—®é¢˜èƒ½çº¦åŒ–åˆ°å®ƒï¼ˆç”±çº¦åŒ–çš„ä¼ é€’æ€§ï¼Œåˆ™ NPC é—®é¢˜å®šä¹‰çš„ç¬¬äºŒæ¡ä¹Ÿå¾—ä»¥æ»¡è¶³ï¼›è‡³äºç¬¬ä¸€ä¸ª NPC é—®é¢˜æ˜¯æ€ä¹ˆæ¥çš„ï¼Œä¸‹æ–‡å°†ä»‹ç»ï¼‰ï¼Œè¿™æ ·å°±å¯ä»¥è¯´å®ƒæ˜¯ NPC é—®é¢˜äº†ã€‚  \næ—¢ç„¶æ‰€æœ‰çš„ NP é—®é¢˜éƒ½èƒ½çº¦åŒ–æˆ NPC é—®é¢˜ï¼Œé‚£ä¹ˆåªè¦ä»»æ„ä¸€ä¸ª NPC é—®é¢˜æ‰¾åˆ°äº†ä¸€ä¸ªå¤šé¡¹å¼çš„ç®—æ³•ï¼Œé‚£ä¹ˆæ‰€æœ‰çš„ NP é—®é¢˜éƒ½èƒ½ç”¨è¿™ä¸ªç®—æ³•è§£å†³äº†ï¼ŒNP ä¹Ÿå°±ç­‰äº P äº†ã€‚å› æ­¤ï¼Œç»™ NPC æ‰¾ä¸€ä¸ªå¤šé¡¹å¼ç®—æ³•å¤ªä¸å¯æ€è®®äº†ã€‚å› æ­¤ï¼Œå‰æ–‡æ‰è¯´ï¼Œâ€œæ­£æ˜¯ NPC é—®é¢˜çš„å­˜åœ¨ï¼Œä½¿äººä»¬ç›¸ä¿¡ $P\\neq NP$â€ã€‚æˆ‘ä»¬å¯ä»¥å°±æ­¤ç›´è§‚åœ°ç†è§£ï¼ŒNPC é—®é¢˜ç›®å‰æ²¡æœ‰å¤šé¡¹å¼çš„æœ‰æ•ˆç®—æ³•ï¼Œåªèƒ½ç”¨æŒ‡æ•°çº§ç”šè‡³é˜¶ä¹˜çº§å¤æ‚åº¦çš„æœç´¢ã€‚\n\né¡ºä¾¿è®²ä¸€ä¸‹ NP-Hard é—®é¢˜ã€‚NP-Hard é—®é¢˜æ˜¯è¿™æ ·ä¸€ç§é—®é¢˜ï¼Œå®ƒæ»¡è¶³ NPC é—®é¢˜å®šä¹‰çš„ç¬¬äºŒæ¡ä½†ä¸ä¸€å®šè¦æ»¡è¶³ç¬¬ä¸€æ¡ï¼ˆå°±æ˜¯è¯´ï¼ŒNP-Hard é—®é¢˜è¦æ¯” NPC é—®é¢˜çš„èŒƒå›´å¹¿ï¼‰ã€‚NP-Hard é—®é¢˜åŒæ ·éš¾ä»¥æ‰¾åˆ°å¤šé¡¹å¼çš„ç®—æ³•ï¼Œä½†å®ƒä¸åˆ—å…¥æˆ‘ä»¬çš„ç ”ç©¶èŒƒå›´ï¼Œå› ä¸ºå®ƒä¸ä¸€å®šæ˜¯ NP é—®é¢˜ã€‚å³ä½¿ NPC é—®é¢˜å‘ç°äº†å¤šé¡¹å¼çº§çš„ç®—æ³•ï¼ŒNP-Hard é—®é¢˜æœ‰å¯èƒ½ä»ç„¶æ— æ³•å¾—åˆ°å¤šé¡¹å¼çº§çš„ç®—æ³•ã€‚äº‹å®ä¸Šï¼Œç”±äº NP-Hard æ”¾å®½äº†é™å®šæ¡ä»¶ï¼Œå®ƒå°†æœ‰å¯èƒ½æ¯”æ‰€æœ‰çš„ NPC é—®é¢˜çš„æ—¶é—´å¤æ‚åº¦æ›´é«˜ä»è€Œæ›´éš¾ä»¥è§£å†³ã€‚\n\nä¸è¦ä»¥ä¸º NPC é—®é¢˜æ˜¯ä¸€çº¸ç©ºè°ˆã€‚NPC é—®é¢˜æ˜¯å­˜åœ¨çš„ã€‚ç¡®å®æœ‰è¿™ä¹ˆä¸€ä¸ªéå¸¸å…·ä½“çš„é—®é¢˜å±äº NPC é—®é¢˜ã€‚ä¸‹æ–‡å³å°†ä»‹ç»å®ƒã€‚  \nä¸‹æ–‡å³å°†ä»‹ç»é€»è¾‘ç”µè·¯é—®é¢˜ã€‚è¿™æ˜¯ç¬¬ä¸€ä¸ª NPC é—®é¢˜ã€‚å…¶å®ƒçš„ NPC é—®é¢˜éƒ½æ˜¯ç”±è¿™ä¸ªé—®é¢˜çº¦åŒ–è€Œæ¥çš„ã€‚å› æ­¤ï¼Œé€»è¾‘ç”µè·¯é—®é¢˜æ˜¯ NPC ç±»é—®é¢˜çš„â€œé¼»ç¥–â€ã€‚  \né€»è¾‘ç”µè·¯é—®é¢˜æ˜¯æŒ‡çš„è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼šç»™å®šä¸€ä¸ªé€»è¾‘ç”µè·¯ï¼Œé—®æ˜¯å¦å­˜åœ¨ä¸€ç§è¾“å…¥ä½¿è¾“å‡ºä¸º Trueã€‚  \nä»€ä¹ˆå«åšé€»è¾‘ç”µè·¯å‘¢ï¼Ÿä¸€ä¸ªé€»è¾‘ç”µè·¯ç”±è‹¥å¹²ä¸ªè¾“å…¥ï¼Œä¸€ä¸ªè¾“å‡ºï¼Œè‹¥å¹²â€œé€»è¾‘é—¨â€å’Œå¯†å¯†éº»éº»çš„çº¿ç»„æˆã€‚çœ‹ä¸‹é¢ä¸€ä¾‹ï¼Œä¸éœ€è¦è§£é‡Šä½ é©¬ä¸Šå°±æ˜ç™½äº†ã€‚\n\n```\nâ”Œâ”€â”€â”€â”€â”\nâ”‚IN 1â”œâ”€â”€â”  â”Œâ”€â”€â”€â”€â”\nâ””â”€â”€â”€â”€â”˜  â””â”€â†’â”¤    â”‚\n           â”‚ or â”œâ†’â”€â”€â”€â”\nâ”Œâ”€â”€â”€â”€â”  â”Œâ”€â†’â”¤    â”‚    â”‚  â”Œâ”€â”€â”€â”€â”\nâ”‚IN 2â”œâ”€â”€â”˜  â””â”€â”€â”€â”€â”˜    â””â”€â†’â”¤    â”‚\nâ””â”€â”€â”€â”€â”˜                  â”‚ ANDâ”œâ”€â”€â†’OUT\n                  â”Œâ”€â”€â”€â”€â†’â”¤    â”‚\nâ”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”    â”‚     â””â”€â”€â”€â”€â”˜\nâ”‚IN 3â”œâ”€â†’â”¤NOT â”œâ”€â†’â”€â”€â”˜\nâ””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜\n```\n\nè¿™æ˜¯ä¸ªè¾ƒç®€å•çš„é€»è¾‘ç”µè·¯ï¼Œå½“è¾“å…¥ 1ã€è¾“å…¥ 2ã€è¾“å…¥ 3 åˆ†åˆ«ä¸º Trueã€Trueã€False æˆ– Falseã€Trueã€False æ—¶ï¼Œè¾“å‡ºä¸º Trueã€‚\næœ‰è¾“å‡ºæ— è®ºå¦‚ä½•éƒ½ä¸å¯èƒ½ä¸º True çš„é€»è¾‘ç”µè·¯å—ï¼Ÿæœ‰ã€‚ä¸‹é¢å°±æ˜¯ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚\n\n```\nâ”Œâ”€â”€â”€â”€â”\nâ”‚IN 1â”œâ†’â”€â”  â”Œâ”€â”€â”€â”€â”\nâ””â”€â”€â”€â”€â”˜  â””â”€â†’â”¤    â”‚\n           â”‚AND â”œâ”€â†’â”\n        â”Œâ”€â†’â”¤    â”‚  â”‚\n        â”‚  â””â”€â”€â”€â”€â”˜  â”‚ â”Œâ”€â”€â”€â”€â”\n        â”‚          â””â†’â”¤    â”‚\nâ”Œâ”€â”€â”€â”€â”  â”‚            â”‚AND â”œâ”€â†’OUT\nâ”‚IN 2â”œâ†’â”€â”¤ â”Œâ”€â”€â”€â”€â”   â”Œâ†’â”¤    â”‚\nâ””â”€â”€â”€â”€â”˜  â””â†’â”¤NOT â”œâ†’â”€â”€â”˜ â””â”€â”€â”€â”€â”˜\n          â””â”€â”€â”€â”€â”˜\n```\n\nä¸Šé¢è¿™ä¸ªé€»è¾‘ç”µè·¯ä¸­ï¼Œæ— è®ºè¾“å…¥æ˜¯ä»€ä¹ˆï¼Œè¾“å‡ºéƒ½æ˜¯ Falseã€‚æˆ‘ä»¬å°±è¯´ï¼Œè¿™ä¸ªé€»è¾‘ç”µè·¯ä¸å­˜åœ¨ä½¿è¾“å‡ºä¸º True çš„ä¸€ç»„è¾“å…¥ã€‚\nå›åˆ°ä¸Šæ–‡ï¼Œç»™å®šä¸€ä¸ªé€»è¾‘ç”µè·¯ï¼Œé—®æ˜¯å¦å­˜åœ¨ä¸€ç§è¾“å…¥ä½¿è¾“å‡ºä¸º Trueï¼Œè¿™å³é€»è¾‘ç”µè·¯é—®é¢˜ã€‚\né€»è¾‘ç”µè·¯é—®é¢˜å±äº NPC é—®é¢˜ã€‚è¿™æ˜¯æœ‰ä¸¥æ ¼è¯æ˜çš„ã€‚å®ƒæ˜¾ç„¶å±äº NP é—®é¢˜ï¼Œå¹¶ä¸”å¯ä»¥ç›´æ¥è¯æ˜æ‰€æœ‰çš„ NP é—®é¢˜éƒ½å¯ä»¥çº¦åŒ–åˆ°å®ƒï¼ˆä¸è¦ä»¥ä¸º NP é—®é¢˜æœ‰æ— ç©·å¤šä¸ªå°†ç»™è¯æ˜é€ æˆä¸å¯é€¾è¶Šçš„å›°éš¾ï¼‰ã€‚è¯æ˜è¿‡ç¨‹ç›¸å½“å¤æ‚ï¼Œå…¶å¤§æ¦‚æ„æ€æ˜¯è¯´ä»»æ„ä¸€ä¸ª NP é—®é¢˜çš„è¾“å…¥å’Œè¾“å‡ºéƒ½å¯ä»¥è½¬æ¢æˆé€»è¾‘ç”µè·¯çš„è¾“å…¥å’Œè¾“å‡ºï¼ˆæƒ³æƒ³è®¡ç®—æœºå†…éƒ¨ä¹Ÿä¸è¿‡æ˜¯ä¸€äº› 0 å’Œ 1 çš„è¿ç®—ï¼‰ï¼Œå› æ­¤å¯¹äºä¸€ä¸ª NP é—®é¢˜æ¥è¯´ï¼Œé—®é¢˜è½¬åŒ–ä¸ºäº†æ±‚å‡ºæ»¡è¶³ç»“æœä¸º True çš„ä¸€ä¸ªè¾“å…¥ï¼ˆå³ä¸€ä¸ªå¯è¡Œè§£ï¼‰ã€‚\n\næœ‰äº†ç¬¬ä¸€ä¸ª NPC é—®é¢˜åï¼Œä¸€å¤§å † NPC é—®é¢˜å°±å‡ºç°äº†ï¼Œå› ä¸ºå†è¯æ˜ä¸€ä¸ªæ–°çš„ NPC é—®é¢˜åªéœ€è¦å°†ä¸€ä¸ªå·²çŸ¥çš„ NPC é—®é¢˜çº¦åŒ–åˆ°å®ƒå°±è¡Œäº†ã€‚åæ¥ï¼ŒHamilton å›è·¯æˆäº† NPC é—®é¢˜ï¼ŒTSP é—®é¢˜ä¹Ÿæˆäº† NPC é—®é¢˜ã€‚ç°åœ¨è¢«è¯æ˜æ˜¯ NPC é—®é¢˜çš„æœ‰å¾ˆå¤šï¼Œä»»ä½•ä¸€ä¸ªæ‰¾åˆ°äº†å¤šé¡¹å¼ç®—æ³•çš„è¯æ‰€æœ‰çš„ NP é—®é¢˜éƒ½å¯ä»¥å®Œç¾è§£å†³äº†ã€‚å› æ­¤è¯´ï¼Œæ­£æ˜¯å› ä¸º NPC é—®é¢˜çš„å­˜åœ¨ï¼Œ$P=NP$ å˜å¾—éš¾ä»¥ç½®ä¿¡ã€‚$P=NP$ é—®é¢˜è¿˜æœ‰è®¸å¤šæœ‰è¶£çš„ä¸œè¥¿ï¼Œæœ‰å¾…å¤§å®¶è‡ªå·±è¿›ä¸€æ­¥çš„æŒ–æ˜ã€‚æ”€ç™»è¿™ä¸ªä¿¡æ¯å­¦çš„å·…å³°æ˜¯æˆ‘ä»¬è¿™ä¸€ä»£çš„ç»ˆæç›®æ ‡ã€‚ç°åœ¨æˆ‘ä»¬éœ€è¦åšçš„ï¼Œè‡³å°‘æ˜¯ä¸è¦æŠŠæ¦‚å¿µå¼„æ··æ·†äº†ã€‚\n\n[^1]: ç¼–è€…æ³¨ï¼šå³åœæœºé—®é¢˜ã€‚å¤§ä½“æ¥è¯´å°±æ˜¯åˆ¤æ–­ä¸€ä¸ªç¨‹åºæ˜¯å¦æ˜¯æ­»å¾ªç¯ã€‚æœ¬æ–‡åŸä½œè€…åšå®¢çš„è¯æ˜ï¼š[ä¼ é€é—¨](https://www.matrix67.com/blog/archives/55)","categories":["æ‚æ–‡"]},{"title":"2023.8.5 é—²è¯","path":"/post/diary-2023-08-05/","content":">Dear all,\n>\n>It is with a heavy heart that we have to inform you that Bram Moolenaar passed away on 3 August 2023.\næˆ‘ä»¬ä¸å¾—ä¸æ€€ç€æ²‰é‡çš„å¿ƒæƒ…é€šçŸ¥æ‚¨ï¼Œå¸ƒæ‹‰å§†Â·ç©†ä¼¦çº³å°”äº 2023 å¹´ 8 æœˆ 3 æ—¥å»ä¸–ã€‚\n>\n>Bram was suffering from a medical condition that progressed quickly over the last few weeks.\nå¸ƒæ‹‰å§†æ‚£æœ‰ä¸€ç§ç–¾ç—…ï¼Œåœ¨è¿‡å»å‡ å‘¨é‡Œç—…æƒ…è¿…é€ŸåŠ æ·±ã€‚\n>\n>Bram dedicated a large part of his life to VIM and he was very proud of the VIM community that you are all part of.\nBram å°†ä»–ç”Ÿå‘½ä¸­çš„å¤§éƒ¨åˆ†æ—¶é—´å¥‰çŒ®ç»™äº† VIMï¼Œä»–ä¸ºä½ ä»¬æ‰€åœ¨çš„ VIM ç¤¾åŒºæ„Ÿåˆ°éå¸¸è‡ªè±ªã€‚\n>\n>We as family are now arranging the funeral service of Bram which will take place in The Netherlands and will be held in the Dutch lanuage. The extact date, time and place are still to be determined.\nä½œä¸ºå®¶äººï¼Œæˆ‘ä»¬ç°åœ¨æ­£åœ¨å®‰æ’å¸ƒæ‹‰å§†çš„è‘¬ç¤¼ã€‚è¯¥è‘¬ç¤¼å°†åœ¨è·å…°ä»¥è·å…°è¯­ä¸¾è¡Œã€‚å…·ä½“æ—¥æœŸã€æ—¶é—´å’Œåœ°ç‚¹å¾…å®šã€‚\n>\n>Should you wish to attend his funeral then please send a message to funer...@gmail.com. This email address can also be used to get in contact with the family regarding other matters, bearing in the mind the situation we are in right now as family.\nå¦‚æœæ‚¨æƒ³å‚åŠ ä»–çš„è‘¬ç¤¼ï¼Œè¯·ç»™ ï¼ˆä¸€ä¸ªç™»å½•æ‰èƒ½çœ‹åˆ°çš„é‚®ç®±åœ°å€ï¼‰ å‘é€é‚®ä»¶ã€‚è€ƒè™‘åˆ°æˆ‘ä»¬ç°åœ¨ä½œä¸ºå®¶äººçš„å¤„å¢ƒï¼Œè¿™ä¸ªç”µå­é‚®ä»¶åœ°å€ä¹Ÿå¯ä»¥ç”¨æ¥ä¸å®¶äººå°±å…¶ä»–äº‹é¡¹å–å¾—è”ç³»ã€‚\n>\n>With kind regards,\nThe family of Bram Moolenaar\n\nVim ä¹‹çˆ¶äº 2023.8.3 å»ä¸–ã€‚\n\næ€»æœ‰è¿™æ ·çš„ä¸€å¤©çš„ï¼ŒVim èƒ½å¤ŸæŒºè¿‡å®ƒå¤šä¸ªæ›¾ç»çš„ä¸»è¦å¼€å‘è€…çš„ç¦»ä¸–ï¼Œå®é™…ä¸Šè¯´æ˜äº† Vim æœ¬èº«çš„ä¼˜ç§€æ€§ã€‚\n\nä½†æ˜¯ï¼Œå½“ Linus è„±ç¦»äº† Linux çš„å¼€å‘å‘¢ï¼Ÿç–«æƒ…æ—¶çœ‹è§ Linus çˆ†å–·å†…æ ¸é‚®ä»¶åˆ—è¡¨é‡Œçš„ç–«è‹—é˜´è°‹è®ºè€…ï¼Œå…¶ä»–æ—¶å€™ä¹Ÿæ€»èƒ½çœ‹è§ä»–å¯¹å¾…ä¸è§„èŒƒä¸åˆé€‚çš„ patch åšå†³çš„æ€åº¦ï¼Œè¿™ç¡®å®è®© Linux Kernel ä»“åº“è¶³å¤Ÿçš„å¥åº·ã€‚ä½†æ˜¯äººæ€»å½’è¦ç¦»å¼€çš„ã€‚\n\näººä¸–å¤ªæ— å¸¸äº†ã€‚æ„Ÿè§‰å’Œ [Arch Linux ç¤¾åŒºä¸€ä½è´¡çŒ®è€…çš„å»ä¸–](https://archlinux.org/news/in-memory-of-jonathon-fernyhough/)è¿˜æ²¡æœ‰å¤šä¹…å•Š...\n\nçœ‹ä¸€çœ¼æ–°é—»ï¼Œå°±åœ¨å»å¹´çš„ 2 æœˆä»½ï¼ŒBram Moolenaar çš„å¥½å‹ï¼ŒVim çš„é‡è¦å¼€å‘è€…&å®£ä¼ è€…ä¹‹ä¸€ Sven Guckes å› è„‘ç˜¤å»ä¸–ï¼Œå½“æ—¶ Bram Moolenaar è¿˜è¯´è¦ç”¨ Vim 9 æ¥çºªå¿µä»–ã€‚\n\næƒ³æˆä¸ºä»–ä»¬é‚£æ ·çš„äººï¼Œå°½åŠ›åœ°åœ¨ä¸–ç•Œä¸Šç•™ä¸‹ä¸€äº›ä¸œè¥¿ã€‚äºæ˜¯é€€å½¹å‰çš„æˆ‘çªç„¶åŠªåŠ›å†™åšå®¢ä¸€æ ·ã€‚\n\nå‰©ä¸‹çš„æ—¶é—´...å¤šé™ªé™ªå®¶äººæœ‹å‹å§ã€‚\n\n----\n\n**AGC013D**\n\né¦–å…ˆå‘ç°ï¼Œä¸€ä¸ªå–çƒçš„åºåˆ—å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªåˆæ³•çš„æ“ä½œæ–¹æ¡ˆã€‚\n\nèƒ½ä¸èƒ½ç›´æ¥æ“ä½œæ–¹æ¡ˆè®¡æ•°ï¼Ÿå‘ç°ä¸èƒ½ã€‚ä¸ºä»€ä¹ˆï¼Ÿ\n\nä»€ä¹ˆæ—¶å€™å–çƒåºåˆ—ä¸åŒï¼Ÿä»…å½“**æ¯æ¬¡æ‹¿å‡ºçš„çƒ**ä¸åŒã€‚\n\nä»€ä¹ˆæ—¶å€™æ“ä½œæ–¹æ¡ˆä¸åŒï¼Ÿå³ä½¿å–çƒåºåˆ—æ˜¯ç›¸åŒçš„ï¼Œå¦‚æœæœ€åˆé»‘ç™½çƒæ•°é‡ä¸åŒï¼Œä¹Ÿç®—ä¸åŒçš„æ“ä½œæ–¹æ¡ˆã€‚\n\nè®¾ç™½çƒæ•°é‡ä¸º $n$ã€‚\n\nå¯¹äºä¸€ä¸ªå–çƒåºåˆ—ï¼Œå®ƒå¯¹åº”å“ªäº›ä¸œè¥¿å‘¢ï¼Ÿ\n\næŠŠæ“ä½œè¿‡ç¨‹ä¸­ç™½çƒæ•°é‡çš„å˜åŒ–ç”»å‡ºæŠ˜çº¿å›¾ï¼š\n![](https://cdn.luogu.com.cn/upload/image_hosting/ox2813ev.png)\n\næ˜¾ç„¶ä¸€ä¸ªæ“ä½œæ–¹æ¡ˆå¯¹åº”ä¸€æ¡æŠ˜çº¿ã€‚\n\né‚£ä¹ˆè®©åˆå§‹çš„ $n$ å˜åŒ–ä¸€ä¸‹ï¼Œå°±ç›¸å½“äºè®©è¿™ä¸ªæŠ˜çº¿ä¸Šä¸‹ç§»åŠ¨ã€‚\n\nå‘ä¸Šç§»åŠ¨åˆ°å¤´å°±æ˜¯æŠ˜çº¿è§¦ç¢°äº† $n$ï¼Œå‘ä¸‹ç§»åŠ¨åˆ°å¤´å°±æ˜¯æŠ˜çº¿è§¦ç¢°äº† $0$ã€‚\n\nå‘ç°ä¸€ä¸ªå–çƒåºåˆ—å¯¹åº”ä¸”ä»…å¯¹åº”ä¸€ä¸ªæŠ˜çº¿è§¦åº•çš„æ“ä½œæ–¹æ¡ˆã€‚\n\näºæ˜¯å¯ä»¥ç›´æ¥ç»Ÿè®¡è§¦åº•æ–¹æ¡ˆæ•°ã€‚\n\nå…·ä½“ï¼šè®¾ $f_{i,j,0/1}$ ä¸ºç¬¬ $i$ æ¬¡å–çƒï¼Œç®±å­é‡Œæœ‰ $j$ ä¸ªç™½çƒï¼Œæ˜¯/å¦è§¦è¿‡åº•çš„æ–¹æ¡ˆæ•°ã€‚\n\nåˆå§‹åŒ–ç›´æ¥\n\n```cpp\nfor (i32 i = 0; i <= n; ++i)\n    f[0][i][i == 0] = 1;\n```\nå°±è¡Œã€‚\n\nè½¬ç§»çœ‹å…”é˜Ÿåšå®¢å§ã€‚\n\n[ä»£ç ](https://www.luogu.com.cn/record/119213073)","tags":["é—²è¯"],"categories":["é—²è¯"]},{"title":"KMP è¯¦è§£","path":"/post/KMP/","content":"ä»Šå¤©æ˜¯ 8 æœˆ 4 æ—¥å–µï¼Œè·ç¦»é€€å½¹è¿˜æœ‰ 3 ä¸ªæœˆå·¦å³å–µã€‚  å†™å­—ç¬¦ä¸²çš„æ—¶å€™æ„Ÿè§‰çªç„¶æ‚Ÿäº†ï¼Œäºæ˜¯æ¥å†™ç¬”è®°ã€‚å‰ç¼€å‡½æ•°å®é™…ä¸Šçœ‹äº† OI Wiki æ‰çŸ¥é“æœ‰è¿™ä¸ªåè¯â€¦â€¦ä½†æ˜¯ä¹Ÿåº”è¯¥æœ‰ï¼Œå› ä¸º KMP åªæ˜¯ä¸€ä¸ªåŒ¹é…ç®—æ³•ã€‚å®šä¹‰çº¦å®šï¼šä¸ºäº†æ–¹ä¾¿è¡¨ç¤ºï¼Œæ­¤å¤„å­—ç¬¦ä¸²ä¸‹æ ‡ä» $1$ å¼€å§‹ï¼›å¯¹äºä¸² $X$ï¼Œ$X(i,j)$ è¡¨ç¤ºæˆªå– $X$ çš„ $[i,j]$ æ®µã€‚å¯¹äºä¸² $S$ï¼Œå…¶å‰ç¼€å‡½æ•° $P$ ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œ$P_i$ è¡¨ç¤º $S(1,i)$ è¿™æ®µå‰ç¼€å­—ç¬¦ä¸²çš„æœ€é•¿ borderï¼ˆä¸åŒ…å« $S(1,i)$ æœ¬èº«ï¼‰ã€‚å‘ƒï¼Œä»€ä¹ˆæ˜¯ borderï¼Ÿç®€å•æ¥è¯´ï¼Œä¸² $X$ çš„ä¸€ä¸ª border å°±æ˜¯ $X$ çš„ä¸€å¯¹ç›¸ç­‰çš„å‰ç¼€åç¼€ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œè®¾ $X = \\texttt{abcssfabc}$ï¼Œåˆ™ $\\texttt{abc}$ æ˜¯ $X$ çš„ä¸€ä¸ª borderã€‚åŒæ ·çš„ï¼Œå¯¹äº $\\texttt{abbabba}$ æ¥è¯´ï¼Œå­˜åœ¨ä¸‰ä¸ª borderï¼Œå³ $\\texttt{a},\\texttt{abba},\\texttt{abbabba}$[^1]ã€‚å¥½äº†ï¼Œç°åœ¨æˆ‘ä»¬è®¾ $S=\\texttt{abcabc}$ï¼Œå°è¯•ä¸€ä¸‹æ±‚ $S$ çš„å‰ç¼€å‡½æ•°ï¼Ÿå¦‚æœä¸Šé¢çš„æ¦‚å¿µä½ è¿˜æ²¡æœ‰ç†è§£ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒä¸‹å›¾ã€‚äºæ˜¯ï¼Œ$S$ çš„å‰ç¼€å‡½æ•°åˆ™ä¸º $\\left[0,0,0,1,2,3\\right]$æ€§è´¨é‡åˆ° border ç›¸å…³è¦å¯¹â€œè·³ borderâ€æ•æ„Ÿä¸€äº›ã€‚å•¥å«è·³ border å‘¢ï¼Ÿæ‹¿ $\\texttt{abbabba}$ æ¥ä¸¾ä¾‹å­ï¼Œå‡è®¾å…¶å‰ç¼€å‡½æ•°ä¸º $P$ï¼Œå®¹æ˜“æ±‚å¾— $P=[0,0,0,1,2,3,4]$ã€‚  æœ«å°¾çš„ $P_7 = 4$ï¼Œä»£è¡¨çš„æ˜¯ $\\texttt{abba}$ è¿™ä¸ª borderã€‚ç„¶åå°±å‡ºç°äº†ä¸€ä¸ªç¥å¥‡çš„äº‹æƒ…ï¼šå¦‚æœæŠŠè¯¥ä¸²æ‰€æœ‰åˆæ³•çš„ border æŒ‰ç…§é•¿åº¦æ’åºï¼Œåˆ™ $\\texttt{abba}$ çš„ä¸Šä¸€ä¸ª border å°±æ˜¯ $\\text a$ã€‚é‚£è¿™ä¸ª $\\texttt a$ æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå°±æ˜¯ $P_{P_7}$ ä»£è¡¨çš„ border å–µã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æœ $X$ çš„å‰ç¼€å‡½æ•° $P$ å·²çŸ¥ï¼Œåˆ™ï¼šä»¤ $m\\gets X.length$ï¼Œåå¤è®© $m \\gets P_m$ï¼Œåˆ™èƒ½å¤ŸæŒ‰é•¿åº¦ä»å¤§åˆ°å°éå†å®ŒåŸä¸²æ‰€æœ‰çš„åˆæ³• borderã€‚è¿™å°±æ˜¯æ‰€è°“â€œè·³ borderâ€ã€‚çº¿æ€§é€’æ¨æ±‚å‰ç¼€å‡½æ•°å®é™…ä¸Šå¦‚æœå‰é¢çš„ä¸œè¥¿ä½ éƒ½æ˜ç™½äº†ï¼Œè¿™ä¸ªéƒ¨åˆ†æ˜¯å¯ä»¥è½»æ¾æƒ³å‡ºæ¥çš„ã€‚ä»¥é˜²ä¸‡ä¸€ï¼Œæˆ‘è¿˜æ˜¯å†™ä¸€ä»½æ€è€ƒè¿‡ç¨‹ã€‚å‡è®¾ç›®å‰ä½ç½®æ˜¯ $i$ï¼Œ$i-1$ ä»¥åŠä¹‹å‰çš„ $P$ éƒ½å·²çŸ¥ï¼Œå†ä»¤ $j\\gets P_{i-1}$ï¼Œæƒ³åŠæ³•é€’æ¨æ±‚å‡º $P_i$ã€‚å¦‚æœçº¢è‰²éƒ¨åˆ†æ˜¯ $S(1,i)$ çš„åˆæ³• border ä¸”é•¿åº¦ä¸ä¸º $1$ï¼Œåˆ™è“è‰²éƒ¨åˆ†å¿…ç„¶æ˜¯ $S(1,i-1)$ çš„åˆæ³• borderã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥æšä¸¾ $S(1,i-1)$ çš„æ‰€æœ‰åˆæ³• borderï¼Œçœ‹çœ‹èƒ½ä¸èƒ½æ¥ä¸Š $S_i$ è¿™ä¸ªå­—æ¯å½¢æˆ $S(1,i)$ çš„ borderã€‚éå† border å¯ä»¥é‡‡ç”¨ä¸Šé¢è¯´è¿‡çš„è·³ border å®ç°ã€‚ç”±äºè¿™ä¸ªè¿‡ç¨‹æ˜¯ä»é•¿åˆ°çŸ­éå†ï¼Œå› æ­¤æ‰¾åˆ°çš„åˆæ³• border å¿…ç„¶æ˜¯æœ€é•¿çš„åˆæ³• borderã€‚äºæ˜¯å¯ä»¥åå¤ä½¿ $j \\gets P_j$ ç›´åˆ° $S(1,j+1)$ æˆä¸º $S(1,i)$ çš„åˆæ³• borderã€‚ç»†èŠ‚è§ä»£ç å®ç°ã€‚ä»£ç å®ç°ä¸­è®¤ä¸ºä¸‹æ ‡ä» $0$ å¼€å§‹ï¼Œ`nxt` æ•°ç»„å³ä¸º $P$ã€‚```cppvoid get_nxt(string& str) { for (int i = 1, j = 0; i < str.size(); ++i) { while (j && str[i - 1] != str[j]) j = nxt[j];  // å¦‚æœ border ä¸åˆæ³•å°±è·³ï¼Œç›´åˆ°æ²¡ border ä¸ºæ­¢ if (str[i - 1] == str[j]) ++j;  /* å®é™…ä¸Šä¸Šé¢å¾ªç¯å®Œä¹‹åçš„ j å¯èƒ½æ˜¯åˆæ³• border çš„ç»“å°¾ä¹Ÿæœ‰å¯èƒ½æ˜¯æ— è§£ï¼ˆ0ï¼‰ï¼ŒåŒæ—¶å¦‚æœ border åˆ æ³•ï¼Œéœ€è¦ +1ï¼ˆå› ä¸ºè·³ border çš„æ—¶å€™è·³çš„æ˜¯ä¹‹å‰çš„ borderï¼‰*/ nxt[i] = j; }}```color:cyan è¯æ˜å£èƒ¡ä¸€ä¸ªã€‚æ¯æ¬¡ $j$ æŒ‡é’ˆæœ€å¤šå³ç§» $1$ï¼Œé™¤æ­¤ä»¥å¤– $j$ æŒ‡é’ˆåªä¼šå·¦ç§»ã€‚  å®¹æ˜“å‘ç°å³ç§»æœ€å¤š $\\Theta(n)$ æ¬¡ï¼Œåˆ™å·¦ç§»ä¹Ÿä¸ä¼šè¶…è¿‡ $\\Theta(n)$ æ¬¡ã€‚  è®¡ç®—å‰ç¼€å‡½æ•°çš„è¿‡ç¨‹åªæ¶‰åŠ $j$ æŒ‡é’ˆçš„å·¦ç§»å³ç§»ï¼Œæ‰€ä»¥å¤æ‚åº¦ $\\Theta(n)$ã€‚KMP å­—ç¬¦ä¸²åŒ¹é…ç®—æ³•æ€»çš„æ¥è¯´ï¼šå€ŸåŠ©å‰ç¼€å‡½æ•°å®ç°æ—¶ç©ºå¤æ‚åº¦å‡ä¸º $\\operatorname{O}(n+m)$ çš„å­—ç¬¦ä¸²åŒ¹é…ã€‚è¿‡ç¨‹å’Œä¸Šé¢é€’æ¨å‰ç¼€å‡½æ•°å·®ä¸å¤šã€‚å…·ä½“æ¥è®²ï¼Œä¸ºä»€ä¹ˆè¦å€ŸåŠ©å‰ç¼€å‡½æ•°å‘¢ï¼Ÿå‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ–‡æœ¬ä¸² $S$ï¼Œä¸€ä¸ªæ¨¡å¼ä¸² $T$ï¼Œæ¥ä¸‹æ¥éœ€è¦æ‰¾å‡º $S$ ä¸­ $T$ å‡ºç°çš„æ‰€æœ‰ä½ç½®ã€‚ä¸€æ—¦åˆ° $T$ çš„ $i$ è¿™ä¸ªä½ç½®åŒ¹é…å¤±è´¥ï¼Œæˆ‘ä»¬éš¾é“ä¸€å®šå°±è¦è¿”å› $T_1$ ä»å¤´åŒ¹é…å—ï¼Ÿå¹¶ä¸æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ $T(1,i)$ çš„ border æ¥å‡å°‘åŒ¹é…æ¬¡æ•°ã€‚border çš„å®šä¹‰æ˜¯â€œç›¸ç­‰çš„å‰ç¼€å’Œåç¼€â€ï¼Œé‚£ $T(1,i)$ çš„è¿™ä¸ªåç¼€åŒ¹é…æˆåŠŸï¼Œå…¶å¯¹åº”çš„å‰ç¼€ä¹Ÿä¸€å®šèƒ½åŒ¹é…æˆåŠŸï¼Œåªéœ€è¦ä»è¿™ä¸ªå‰ç¼€ç»“æŸçš„ä½ç½®ç»§ç»­åŒ¹é…å³å¯ã€‚åšäº†ä¸ªåŠ¨ç”»ï¼šä»£ç ï¼š```cppfor (int i = 0, j = 0; i < s.size(); ++i) { while (j && s[i] != t[j]) j = nxt[j]; if (s[i] == t[j]) ++j; if (j == t.size()) // åŒ¹é…æˆåŠŸ cout << i - (int)t.size() + 2 << '\\n'; // ç­”æ¡ˆè¦æ±‚}```[^1]: border åœ¨èƒ½ä¸èƒ½åŒ…å«åŸä¸²è¿™æ–¹é¢æ²¡æœ‰æƒå¨å®šä¹‰ï¼Œå®é™…ä¸Š border è¿™ä¸ªæ¦‚å¿µå°±åªæ˜¯æœ‰ä¸€éƒ¨åˆ†äººåœ¨ç”¨ï¼Œä»…ç”¨äºç†è§£ã€‚","tags":["KMP","exKMP"],"categories":["å­—ç¬¦ä¸²"]},{"title":"äºŒé¡¹å¼åæ¼”","path":"/post/binomial-inversion/","content":"## å®šä¹‰\n\nç›´æ¥ç»™å‡ºå¼å­ï¼š\n\n$$\ng_i=\\sum_{k\\geqslant i}\\binom ki f_k \\rightarrow f_i=\\sum_{k\\geqslant i}\\binom ki (-1)^{k-i}g_k\n$$\n\nçœ‹èµ·æ¥ä¸çŸ¥é“å’‹ç”¨ï¼Ÿå¾…ä¼šå†è¯´ï¼Œæˆ‘ä»¬å…ˆè¯æ˜ã€‚\n\n## è¯æ˜\n\n### å‰ç½®çŸ¥è¯†\n\n[ç»„åˆæ•°å­¦å¸¸ç”¨è®°å·](/post/basic-combinatorics#å¸¸ç”¨è®°å·)\n\n[äºŒé¡¹å¼å®šç†](/post/basic-combinatorics#äºŒé¡¹å¼å®šç†)\n\n### æ­£æ–‡\n\nå·²çŸ¥ï¼š$g_i=\\sum_{k\\geqslant i}\\binom ki f_k$  \næ±‚è¯ï¼š$f_i=\\sum_{k\\geqslant i}\\binom ki (-1)^{k-i}g_k$\n\næŠŠæ±‚è¯å³è¾¹é‚£ä¸ªå¼å­å•ç‹¬æ‹¿å‡ºæ¥ï¼Œæƒ³åŠæ³•æŠŠå®ƒå¯¼æˆ $f_i$ã€‚\n\n$$\n\\begin{aligned}\n&\\sum_{k\\geqslant i}\\binom ki (-1)^{k-i}g_k \\newline\n=&\\sum_{k\\geqslant i}\\binom ki (-1)^{k-i} \\sum_{j\\geqslant k}\\binom jk f_j\n\\end{aligned}\n$$\n\næŠŠç¬¬äºŒä¸ªæ±‚å’Œå·ä»¥åŠ $f_j$ æŒªåŠ¨ä¸€ä¸‹ï¼Œæ„Ÿæ€§ç†è§£ä¸€ä¸‹ï¼Œå‘ç°æœ€åæ¯ä¸€é¡¹å‡ºç°çš„æ¬¡æ•°è¿˜æ˜¯ä¸å˜çš„ï¼Œæ‰€ä»¥æ­£ç¡®ã€‚\n\n$$\n\\begin{aligned}\n&\\sum_{k\\geqslant i}\\binom ki (-1)^{k-i} \\sum_{j\\geqslant k}\\binom jk f_j \\newline\n=&\\sum_{j\\geqslant i}f_j \\sum_{j\\geqslant k \\geqslant i}\\binom jk \\binom ki (-1)^{k-i} \\newline\n=&\\sum_{j\\geqslant i}f_j \\sum_{j\\geqslant k \\geqslant i}\\frac{j!k!}{k!(j-k)!i!(k-i)!} (-1)^{k-i} \\newline\n=&\\sum_{j\\geqslant i}f_j\\frac{j!}{i!}\\sum_{j\\geqslant k \\geqslant i}\\frac 1{(j-k)!(k-i)!} (-1)^{k-i}\n\\end{aligned}\n$$\n\nå±•å¼€ä¹‹åä¸çŸ¥é“æ€ä¹ˆå¾€ä¸‹ç®—äº†ï¼Œæƒ³åŠæ³•æŠŠé‚£ä¸ªå¤§åˆ†å¼åŒ–æˆç‚¹ä»€ä¹ˆï¼Œæ¯”å¦‚äºŒé¡¹å¼ï¼ˆç»„åˆæ•°ï¼‰ã€‚\n\nä¸Šä¸‹åŒä¹˜ $(j-i)!$ï¼Œç„¶å $(j-k)=[(j-i)-(k-i)]$ï¼Œç„¶åå°±å¯ä»¥è½»æ¾åŒ–æˆç»„åˆæ•°å½¢å¼ç»§ç»­å¾€ä¸‹å¯¼å…¬å¼äº†ã€‚\n\n$$\n\\begin{aligned}\n&\\sum_{j\\geqslant i}f_j\\frac{j!}{i!} \\sum_{j\\geqslant k \\geqslant i}\\frac 1{(j-k)!(k-i)!} (-1)^{k-i} \\newline\n=&\\sum_{j\\geqslant i}f_j\\frac{j!}{i!} \\sum_{j\\geqslant k \\geqslant i}\\frac {(j-i)!}{[(j-i)-(k-i)]!(k-i)!(j-i)!} (-1)^{k-i} \\newline\n=&\\sum_{j\\geqslant i}f_j\\frac{j!}{i!} \\sum_{j\\geqslant k \\geqslant i}\\frac {\\binom{j-i}{k-i}}{(j-i)!} (-1)^{k-i} \\newline\n\\end{aligned}\n$$\n\næ¢ä¸ªå½¢å¼\n\n$$\n\\sum_{j\\geqslant i}f_j\\frac{j!}{i!} \\cdot \\frac{\\sum_{j\\geqslant k \\geqslant i } \\binom{j-i}{k-i} (-1)^{k-i}}{(j-i)!}\n$$\n\nå¤§åˆ†å¼ä¸Šé¢çš„åˆ†æ¯å¯ä»¥ç”¨ [äºŒé¡¹å¼å®šç†](/post/basic-combinatorics#äºŒé¡¹å¼å®šç†) å¤„ç†æ‰ã€‚æƒ³ä¸å‡ºæ¥å¯ä»¥ç›´æ¥çœ‹ä¸‹é¢å¼å­ã€‚\n\n$$\n\\begin{aligned}\n&\\sum_{j\\geqslant i}f_j\\frac{j!}{i!} \\cdot \\frac{\\sum_{j\\geqslant k \\geqslant i } \\binom{j-i}{k-i} (-1)^{k-i}}{(j-i)!} \\newline\n=&\\sum_{j\\geqslant i}f_j\\frac{j!}{i!} \\cdot \\frac{(1-1)^{j-i}}{(j-i)!}\n\\end{aligned}\n$$\n\nå³ä¸‹æ–¹çš„åˆ†æ¯å’Œå·¦ä¾§åˆ†æ•°æ‰”ä¸€èµ·æ˜¯ä¸€ä¸ªéå¸¸å…¸å‹çš„ç»„åˆæ•°ã€‚\n\n$$\n\\begin{aligned}\n&\\sum_{j\\geqslant i}f_j\\frac{j!}{i!} \\cdot \\frac{(1-1)^{j-i}}{(j-i)!} \\newline\n=&\\sum_{j\\geqslant i}f_j\\binom ji 0^{j-i}\n\\end{aligned}\n$$\n\næ³¨æ„ï¼Œåœ¨ç»„åˆæ•°å­¦ä¸­ï¼Œ$0^0=1$ã€‚  \näºæ˜¯å¾ˆå®¹æ˜“åœ°å‘ç°ï¼Œæ±‚å’Œå·å³è¾¹çš„å¼å­å€¼éé›¶ï¼Œå½“ä¸”ä»…å½“ $i=j$ã€‚\n\näºæ˜¯å°±å‡ºæ¥äº†ï¼š\n\n$$\n\\begin{aligned}\n&\\sum_{j\\geqslant i}f_j\\binom ji 0^{j-i}\\newline\n=&f_i\\binom ii 0^0 \\newline\n=&f_i\n\\end{aligned}\n$$\n\nè¯æ¯•ã€‚\n\n## ä¾‹é¢˜\n\n### åˆ†ç‰¹äº§\n\n[é¢˜ç›®é“¾æ¥](https://www.luogu.com.cn/problem/P5505)\n\n#### é¢˜æ„\n\n$m$ ç§ç‰¹äº§ï¼Œ$n$ ä¸ªäººï¼Œæ¯ç§ç‰¹äº§ $s_i$ ä¸ªã€‚\n\näººæœ‰æ ‡å·ï¼Œä¸¤ä¸ªç‰¹äº§ç›¸åŒå½“ä¸”ä»…å½“å…¶ç§ç±»ç›¸åŒã€‚\n\næ±‚è®©æ¯ä¸ªäººéƒ½æ‹¿åˆ°è‡³å°‘ä¸€ä»½ç‰¹äº§çš„åˆ†é…æ–¹æ¡ˆæ€»æ•°ï¼Œç­”æ¡ˆå¯¹ $10^9+7$ å–æ¨¡ã€‚\n\n#### é¢˜è§£\n\né¦–å…ˆï¼Œè®°ä½å¼€å¤´ç»™ä½ çš„å¼å­ã€‚\n\nç„¶åæŠŠä¸‹é¢çš„ä¸œè¥¿çœ‹ä¸€éï¼Œè¿™åº”è¯¥æ˜¯äºŒé¡¹å¼åæ¼”çš„åŸºæœ¬å¥—è·¯ã€‚\n\nå¤§ä½“ä¸Šè®¾ä¸¤ä¸ªä¸œè¥¿ï¼Œ$g_i$ å’Œ $f_i$ã€‚è¿™é‡Œè®¾ $g_i$ ä¸º**é’¦å®š** $i$ ä¸ªäººä¸æ»¡è¶³è¦æ±‚ï¼ˆå³æ²¡æœ‰ç‰¹äº§ï¼‰ï¼Œå…¶ä»–äººéšæ„åˆ†é…ï¼ˆå¯èƒ½ä¹Ÿæ²¡æœ‰ï¼‰çš„æ–¹æ¡ˆæ•°ï¼Œç„¶å $f_i$ ä¸º**æ°å¥½** $i$ ä¸ªäººæ²¡æœ‰ç‰¹äº§ï¼Œå…¶ä»–äººéƒ½æœ‰ç‰¹äº§çš„æ–¹æ¡ˆæ€»æ•°ã€‚\n\nç„¶åæ¨¡ä»¿æ¡ä»¶å¼ï¼Œç”¨ $f_i$ è¡¨ç¤º $g_i$ã€‚\n\nå®¹æ˜“å‘ç°ï¼š\n\n1. å¯¹äº $g_i$ï¼Œæ¯ä¸€ä¸ª $f_j,j\\in [i,n]$ éƒ½ä¸€å®šè¢«åŒ…å«åœ¨é‡Œé¢ã€‚\n2. å¯¹äºæ¯ä¸€ä¸ªåŒ…å«åœ¨é‡Œé¢çš„ $f_j$ï¼Œè¢«é’¦å®šçš„é›†åˆä¼šä¸åŒï¼Œä¸€å…±æœ‰ $\\binom ji$ ä¸ªï¼Œæ‰€ä»¥æ¯ä¸ª $f_j$ è¢«ç®—äº† $\\binom ji$ æ¬¡ã€‚\n\nç»¼ä¸Šï¼Œ$g_i = \\sum_{j=i}^n \\binom ji f_j$ã€‚\n\näºŒé¡¹å¼åæ¼”çš„å¸¸è§å…¥æ‰‹ç‚¹å°±æ˜¯è®¾ $g,f$ã€‚å…¶ä¸­ $g_i$ è¡¨ç¤ºé’¦å®šé›†åˆä¸­ $i$ ä¸ªå…ƒç´ æ»¡è¶³/ä¸æ»¡è¶³è¦æ±‚ï¼Œå…¶ä»–ä¸ç®¡ï¼›$f_i$ è¡¨ç¤ºé›†åˆä¸­æ°å¥½ $i$ ä¸ªå…ƒç´ æ»¡è¶³/ä¸æ»¡è¶³è¦æ±‚ï¼ˆæ˜¯å¦æ»¡è¶³ä¸ $g$ ä¸€è‡´ï¼‰ã€‚åœ¨æ­¤ä¹‹åç”¨ $f_i$ è¡¨ç¤º $g_i$ï¼ŒäºŒé¡¹å¼åæ¼”ä¹‹åé—®é¢˜å°±å˜åŒ–æˆäº†æ±‚ $g$ã€‚\n\nç„¶åå¤§åŠ›äºŒé¡¹å¼åæ¼”ï¼Œå¥—ä¸€ä¸‹å¼å­å°±èƒ½å¾—å‡ºæ¥ï¼š\n\n$$\nf_i = \\sum_{j=i}^n \\binom ji g_j (-1)^{j-i}\n$$\n\nç­”æ¡ˆå°±æ˜¯æ°å¥½æ²¡æœ‰ä¸åˆæ³•å…ƒç´ çš„æ–¹æ¡ˆæ€»æ•°ï¼Œäºæ˜¯ï¼š\n\n$$\n\\begin{aligned}\nans &= f_0 \\newline\n&= \\sum_{j=0}^n \\binom j0 g_j (-1)^{j-0} \\newline\n&= \\sum_{j=0}^n g_j (-1)^j\n\\end{aligned}\n$$\n\né—®é¢˜è¢«è½¬åŒ–æˆäº†æ±‚ $g$ã€‚\n\nå‡è®¾ç›®å‰æ­£åœ¨æ±‚ $g_i$ï¼Œæ˜¾ç„¶åªéœ€è¦æœ‰ $n-i$ ä¸ªäººéœ€è¦è€ƒè™‘ã€‚ç”±äºå‰©ä¸‹ $i-1$ æ˜¯é’¦å®šä¸åˆæ³•çš„ï¼Œæˆ‘ä»¬ä¸ç”¨è€ƒè™‘ï¼›ä½†æ˜¯éå¸¸é­”æ³•çš„äº‹æƒ…æ¥äº†ï¼šç”±äºè¿™ $n-i$ ä¸ªäººæ˜¯éšä¾¿æ’åˆ—çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠç‰¹äº§éšæ„åˆ†å‘å°±è¡Œã€‚\n\næ€ä¹ˆä¸ªéšæ„åˆ†å‘æ³•ï¼Ÿå¯¹äºæ¯ä¸€ç§ç‰¹äº§ $x$ï¼Œå¯ä»¥è½¬åŒ–ä¸ºï¼šæœ‰ $s_x$ ä¸ªæ— æ ‡å·å°çƒï¼Œè£…è¿› $n-i$ ä¸ªæœ‰æ ‡å·ç›’å­é‡Œçš„æ–¹æ¡ˆæ•°ã€‚ç›´æ¥æ’æ¿æ³•è§£å†³å°±å¥½å•¦ï¼æ˜¾ç„¶æœ‰ $s_x-1$ ä¸ªç©ºï¼Œé™¤æ­¤ä»¥å¤–ï¼Œç›’å­å¯ä»¥ä¸ºç©ºï¼Œæ‰€ä»¥å°±æ˜¯ $s_x-1$ åŠ  $n-i$ ä¸ªç©ºï¼Œæ’ $n-i-1$ ä¸ªæ¿çš„æ–¹æ¡ˆæ•°ï¼Œå³ $\\binom{s_x-1+n-i}{n-i-1}$ã€‚\n\næ¯ä¸€ç§ç‰¹äº§çš„åˆ†é…æ–¹æ¡ˆæ•°äº’ä¸å½±å“ï¼Œæ‰€ä»¥ä¹˜èµ·æ¥ï¼›åŒæ—¶ $n$ ä¸ªäººé‡Œé¢é€‰å‡ºæ¥ $i$ ä¸ªé’¦å®šä¸åˆæ³•ï¼Œå†ä¹˜ä¸€ä¸ª $\\binom ni$ï¼Œå³ï¼š\n\n$$\ng_i = \\binom ni \\prod_{j=1}^m \\binom{s_x-1+n-i}{n-i-1}\n$$\n\nç„¶åä»£å…¥ä¸Šé¢è®¡ç®—ç­”æ¡ˆçš„å¼å­ç®—å°±å®Œäº†ã€‚\n\n#### ä»£ç \n\n```cpp\n#include <iostream>\n\nusing std::cin;\nusing std::cout;\n\nnamespace tkgs {\n    using i32 = int;\n    using i64 = long long;\n    const i64 mod = 1e9 + 7;\n\n#define N 1005\n#define NUM 2005\n    namespace mat {\n        i64 x, y, tmp;\n        void exgcd(const i64& a, const i64& b) {\n            if (!b) {\n                x = 1, y = 0;\n            } else {\n                exgcd(b, a % b);\n                tmp = x;\n                x = y;\n                y = tmp - a / b * y;\n            }\n        }\n\n        i64 inv(const i64& a, const i64& b) {\n            exgcd(a, b);\n            return x;\n        }\n\n        i64 fact[NUM], ifact[NUM];\n\n        void init() {\n            const i32 n = 2000;\n            fact[0] = ifact[0] = 1;\n            for (i32 i = 1; i <= n; ++i)\n                fact[i] = fact[i - 1] * i % mod;\n            ifact[n] = inv(fact[n], mod);\n            for (i32 i = n - 1; i; --i)\n                ifact[i] = ifact[i + 1] * (i + 1) % mod;\n        }\n\n        i64 getC(i32 a, i32 b) {\n            if (a < b)\n                return 0;\n            else\n                return fact[a] * ifact[b] % mod * ifact[a - b] % mod;\n        }\n    }  // namespace mat å®ç°äº†åˆå§‹åŒ–é˜¶ä¹˜ä¸é˜¶ä¹˜é€†å…ƒï¼Œæ±‚ç»„åˆæ•°\n\n    i32 s[N], n, m;\n\n    i64 g(i64 i) {\n        i64 res = 1;\n        for (i32 j = 1; j <= m; ++j)\n            res = res * mat::getC(s[j] + n - i - 1, n - i - 1) % mod;\n        res = res * mat::getC(n, i) % mod;\n        return res;\n    }\n\n    void main() {\n        cin >> n >> m;\n        for (i32 i = 1; i <= m; ++i)\n            cin >> s[i];\n        mat::init();\n        i64 ans = 0;\n        for (i32 j = 0; j < n; ++j)\n            (ans += g(j) * ((j & 1) ? -1 : 1)) %= mod;\n        cout << (ans % mod + mod) % mod;\n    }\n}  // namespace tkgs\n\nint main() {\n    tkgs::main();\n    return 0;\n}\n```\n\n### [ABC309G](/post/abc309g-solution)","tags":["ç»„åˆæ•°å­¦","å®¹æ–¥","äºŒé¡¹å¼åæ¼”"],"categories":["æ•°å­¦"]},{"title":"ABC309G Ban Permutation é¢˜è§£","path":"/post/abc309g-solution/","content":"## å‰ç½®çŸ¥è¯†\n\n- äºŒé¡¹å¼åæ¼”ï¼ˆä»¥åä¼šè¡¥ä¸Šç¬”è®°çš„ï¼ï¼‰\n- çŠ¶å‹ DP\n\n## ç¬¦å·çº¦å®š\n\n$\\lor$ ä¸ºé€»è¾‘æˆ–ï¼Œç›¸å½“äº C++ ä¸­çš„ `|` è¿ç®—ç¬¦ã€‚\n\n## é¢˜æ„ç®€åŒ–\n\næ±‚ $n$ çš„æ’åˆ— $P$ çš„æ–¹æ¡ˆæ•°ï¼Œè¦æ±‚ $\\lvert P_i - i \\rvert \\geqslant X$ã€‚\n\n## åˆ†æ\n\næ’åˆ—é—®é¢˜æœ‰ç‚¹æŠ½è±¡ï¼Œäºæ˜¯æœ‰å¥—è·¯ï¼šæŠŠä¸€ä¸ªæ’åˆ—çœ‹æˆ $n\\times n$ çš„æ£‹ç›˜ä¸Šæ”¾è½¦çš„æ–¹æ¡ˆâ€”â€”æ•°å­— $p_i$ åœ¨ $i$ çš„ä½ç½®ä¸Šï¼Œç›¸å½“äºæ£‹ç›˜çš„ $(i,p_i)$ ä½ç½®æ”¾äº†ä¸€ä¸ªè½¦ã€‚æ˜¾ç„¶ $i,p_i$ éƒ½ä¸ä¼šé‡å¤ï¼Œæ‰€ä»¥æ­£ç¡®ã€‚\n\nç„¶åå‘ç°æ˜¯ä¸ªè®¡æ•°é¢˜ï¼Œç»™å‡ºäº†**ä¸åˆæ³•**çš„æ¡ä»¶ï¼Œè€Œä¸”æ¡ä»¶ä¸ä½ç½®ç›¸å…³ï¼Œå¾€äºŒé¡¹å¼åæ¼”æ–¹å‘æ€è€ƒã€‚\n\næŒ‰ç…§å¥—è·¯ï¼Œè®¾ $g_i$ ä¸ºé’¦å®š $i$ ä¸ªæ•°ä¸åˆæ³•ï¼Œå…¶ä»–éšä¾¿æ’çš„æ–¹æ¡ˆæ•°ï¼Œ$f_i$ ä¸ºæ°å¥½ $i$ ä¸ªæ•°ä¸åˆæ³•çš„æ–¹æ¡ˆæ•°ã€‚å‘ç°æ¯ä¸ª $g_i$ åŒ…å« $f_j,j\\in[i,n]$ï¼Œç„¶åæ¯æ¬¡é€‰æ‹©ä¸åŒçš„ $i$ ä¸ªæ•°è¿›è¡Œé’¦å®šï¼Œæ‰€ä»¥ä¸€ä¸ª $f_j$ è¦ç®— $\\binom ji$ æ¬¡ã€‚äºæ˜¯æœ‰ï¼š\n\n$$\ng_i=\\sum_{j=i}^n f_i \\binom ji\n$$\n\nè„¸ä¸Šéƒ½å†™ä¸ŠäºŒé¡¹å¼åæ¼”è¿™äº”ä¸ªå­—äº†ï¼Œå¥—ä¸€ä¸‹å¼å­ï¼Œæœ‰ï¼š\n\n$$\nf_i = \\sum_{j=i}^n(-1)^{j-i}\\binom ji g_j\n$$\n\nç­”æ¡ˆå³ä¸ºï¼š\n\n$$\n\\begin{aligned}\nans &= f_0 \\newline\n    &= \\sum_{j=0}^n(-1)^{j-0}\\binom j0 g_j \\newline\n    &= \\sum_{j=0}^n(-1)^j g_j\n\\end{aligned}\n$$\n\nè€ƒè™‘æ€ä¹ˆæ±‚ $g_i$ã€‚\n\nå›è¿‡å¤´æ¥çœ‹ä¸åˆæ³•çš„æ¡ä»¶ï¼š$\\lvert P_i - i \\rvert < X$ï¼Œè½¬åŒ–ä¸º $P_i$ è¿™ä¸ªæ£‹å­ä¸èƒ½æ”¾åœ¨ $[i-X+1,i+X-1]$ è¿™äº›æ¨ªè¡Œä¸Šã€‚\n\nå‘ç° $X\\leqslant 5$ï¼Œéå¸¸å°ï¼Œä¹Ÿè®¸å¯ä»¥çŠ¶å‹ï¼Ÿç»“åˆä¸Šé¢çš„è½¬åŒ–ï¼Œå¦‚æœè¦çŠ¶å‹çš„è¯ï¼ŒçŠ¶æ€å¯ä»¥ç›´æ¥è¡¨ç¤º $[i-X+1,i+X-1]$ ä¸­ä¸åˆæ³•æ£‹å­çš„é›†åˆã€‚\n\nç„¶å DP çŠ¶æ€è®¾è®¡å°±æœ‰äº†ï¼ˆè¿™é‡Œæˆ‘ä»¬å¼€å‡ºæ¥ä¸€ä¸ªæ–°çš„ $f$ æ•°ç»„ï¼‰ï¼š$f_{i,j,s}$ è¡¨ç¤ºæ£‹ç›˜å‰ $i$ è¡Œï¼Œæ”¾äº† $j$ ä¸ªä¸åˆæ³•æ£‹å­ï¼ŒçŠ¶æ€ä¸º $s$ çš„æ–¹æ¡ˆæ•°é‡ã€‚\n\næ€ä¹ˆè½¬ç§»ï¼Ÿå‡è®¾å½“å‰æ˜¯ $f_{i,j,s}$ï¼Œç„¶ååˆ†ç±»è®¨è®ºï¼š\n\n- ä¸æ”¾æ–°çš„ä¸åˆæ³•æ£‹å­ã€‚\n  å‘ç°è¿™ç§æƒ…å†µä¸‹è½¬ç§»åˆ° $i+1$ æ—¶ï¼Œæ–°çŠ¶æ€å°±æ˜¯ $s$ å³ç§»ä¸€ä½ï¼Œå³ $2^{-1}s$ã€‚\n  ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬è®¾è¿™ä¸ªçŠ¶æ€ä¸º $ns$ï¼Œè¡¨ç¤ºä»€ä¹ˆéƒ½ä¸æ”¾æ—¶è½¬ç§»åˆ° $i+1$ æ—¶çš„çŠ¶æ€ã€‚\n  è½¬ç§»æ–¹ç¨‹ä¹Ÿå°±ç®€å•äº†ï¼š$f_{i,j,ns} \\gets (f_{i,j,ns}+f_{i,j,s})$\n- æ”¾æ–°çš„ä¸åˆæ³•æ£‹å­ã€‚\n  å¯ä»¥æšä¸¾ä¸€ä¸‹è¿™ä¸ªä¸åˆæ³•æ£‹å­èƒ½æ”¾åˆ°çš„ä½ç½®ï¼ˆå°±æ˜¯ $[i-X+1,i+X-1]$ åŒºé—´çš„ç©ºä½ï¼‰ï¼Œç›´æ¥è½¬ç§»å³å¯ã€‚ä½†æ˜¯æ³¨æ„ï¼Œå½“å‰è¦åšçš„æ˜¯å‘åè½¬ç§»ï¼Œæ‰€ä»¥åº”å½“æšä¸¾çš„æ˜¯ $ns$ è¿™ä¸ªçŠ¶æ€çš„ç©ºä½ã€‚å‡è®¾ $p$ æ˜¯ä¸€ä¸ªç©ºä½ï¼Œåˆ™æœ‰è½¬ç§»æ–¹ç¨‹ï¼š$f_{i,j,(ns\\lor 2^p)} \\gets (f_{i,j,(ns\\lor 2^p)}+f_{i,j,s})$ã€‚\n\nå¯¹äº $g_i$ï¼Œç”±äºæ˜¯é’¦å®šäº† $i$ ä¸ªä½ç½®ä¸åˆæ³•ï¼Œå…¶ä»–ä½ç½®éšä¾¿æ’ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹ $f_{n,i,s}$ æšä¸¾ $s$ æ±‚å’Œä¹‹åï¼Œè¿˜è¦ä¹˜ä¸€ä¸ª $(n-i)!$ æ»¡è¶³â€œå‰©ä¸‹ä½ç½®éšä¾¿æ’åˆ—â€çš„è¦æ±‚ã€‚\n\næŒ‰ç…§å‰é¢ $ans$ çš„å¼å­æ±‚å’Œå³å¯ã€‚\n\næ—¶é—´å¤æ‚åº¦ $\\operatorname\\Theta(4^Xn^2)$ã€‚\n\nCode:\n\n```rust\nuse std::io;\n\nfn valid(pos: usize, i: usize, n: usize, x: usize) -> bool {\n    ((i + pos + 1 - x) <= n && (i + pos + 1 - x) > 0) as bool\n}\n\nfn main() {\n    const MD: usize = 998244353;\n    const N: usize = 205;\n    const ST: usize = 600;\n    let mut input = String::new();\n    io::stdin().read_line(&mut input).unwrap();\n    let mut s = input.trim().split(' ');\n\n    let n: usize = s.next().unwrap().parse().unwrap();\n    let x: usize = s.next().unwrap().parse().unwrap();\n\n    let mut f = [[[0; ST]; N]; N];\n\n    let mxst: usize = (1 << ((x << 1) - 2 + 1)) - 1; // åŒºé—´é•¿åº¦æœ¬æ¥æ˜¯ (x << 1) - 2ï¼Œä½†æ˜¯è¿˜è¦åŒ…å« i æœ¬èº«ï¼Œæ‰€ä»¥ + 1\n\n    f[0][0][0] = 1;\n    for i in 1..=n {\n        for j in 0..=i - 1 {\n            for s in 0..=mxst {\n                let ns: usize = s >> 1;\n                f[i][j][ns] = (f[i][j][ns] + f[i - 1][j][s]) % MD;\n                for p in 0..=(x << 1) - 2 {\n                    if ((1 << p) & ns) == 0 && valid(p, i, n, x) {\n                        f[i][j + 1][ns | (1 << p)] =\n                            (f[i][j + 1][ns | (1 << p)] + f[i - 1][j][s]) % MD\n                    }\n                }\n            }\n        }\n    }\n\n    let mut fact = [0; N];\n    fact[0] = 1;\n    for i in 1..=n {\n        fact[i] = fact[i - 1] * i % MD;\n    }\n\n    let mut ans: i64 = 0;\n    for i in 0..=n {\n        for s in 0..=mxst {\n            if i & 1 == 1 {\n                ans -= (f[n][i][s] * fact[n - i] % MD) as i64;\n            } else {\n                ans += (f[n][i][s] * fact[n - i] % MD) as i64;\n            }\n            ans %= MD as i64;\n        }\n    }\n    ans = (ans % MD as i64 + MD as i64) % MD as i64;\n    println!(\"{}\", ans);\n}\n```","tags":["ç»„åˆæ•°å­¦","å®¹æ–¥","äºŒé¡¹å¼åæ¼”"],"categories":["é¢˜è§£"]},{"title":"AMD P-STATE æŠ˜è…¾å†ç¨‹","path":"/post/amd-p-state-honor/","content":"## ä»‹ç»\n\n> `amd-pstate` æ˜¯ AMD CPU æ€§èƒ½æ‰©å±•é©±åŠ¨ç¨‹åºï¼Œå®ƒåœ¨ Linux å†…æ ¸çš„ç°ä»£ AMD APU å’Œ CPU ç³»åˆ—ä¸Šå¼•å…¥äº†æ–°çš„ CPU é¢‘ç‡æ§åˆ¶æœºåˆ¶ã€‚æ–°æœºåˆ¶åŸºäºåä½œå¤„ç†å™¨æ€§èƒ½æ§åˆ¶ (CPPC)ï¼Œå®ƒæä¾›æ¯”ä¼ ç»Ÿ ACPI ç¡¬ä»¶ P-States æ›´ç²¾ç»†çš„é¢‘ç‡ç®¡ç†ã€‚å½“å‰çš„ AMD CPU/APU å¹³å°ä½¿ç”¨ ACPI P-states é©±åŠ¨ç¨‹åºæ¥ç®¡ç† CPU é¢‘ç‡å’Œæ—¶é’Ÿï¼Œä»…åœ¨ 3 ä¸ª P-states ä¸­åˆ‡æ¢ã€‚ CPPC å–ä»£äº† ACPI P-states æ§ä»¶ï¼Œå¹¶å…è®¸ Linux å†…æ ¸ä½¿ç”¨çµæ´»ã€ä½å»¶è¿Ÿçš„æ¥å£ç›´æ¥å°†æ€§èƒ½æç¤ºä¼ è¾¾ç»™ç¡¬ä»¶ ï¼ˆæ‘˜è‡ª [Kernel Docs](https://www.kernel.org/doc/html/latest/admin-guide/pm/amd-pstate.html#:~:text=amd-pstate%20is%20the%20AMD%20CPU%20performance%20scaling%20driver,grain%20frequency%20management%20than%20legacy%20ACPI%20hardware%20P-States.)ï¼‰\n\n## æŠ˜è…¾\n\nè¿™ç©æ„æ”¯æŒ AMD ZEN 2 å’Œæ›´æ–°ç‰ˆæœ¬ï¼Œæˆ‘çš„è£è€€æœ¬ä½¿ç”¨ R7-4800Hï¼Œç†è®ºä¸Šå¯ä»¥è·‘ï¼Œäºæ˜¯æŒ‰ç…§ [Aya çš„åšå®¢](https://note.ay1.us/#/15-amd-cpufreq) æ·»åŠ äº†å†…æ ¸å‚æ•°\n\n```SHELL\n$ zfs set org.zfsbootmenu:commandline=\"rw amd_pstate=passive\" zroot/ROOT\n```\n\nç„¶åå°±æ²¡ç®¡äº†ã€‚\n\næœ‰ä¸€å¤©å¿˜è®°ä»å“ªé‡Œåˆçœ‹è§äº† AMD P-Stateï¼Œç„¶åå‘ç°ä¸€ä¸ªéªŒè¯æ–¹æ³•ï¼Œè·‘äº†ä¸€ä¸‹ï¼š\n\n```bash\n$ cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_driver\n\nacpi-cpufreq\n```\n\næˆ‘å»ï¼Œè¿™æˆ‘å¯å¿ä¸äº†ã€‚äºæ˜¯æˆ‘å…ˆæ£€æŸ¥å†…æ ¸ module æœ‰æ²¡æœ‰ AMD P-State å­˜åœ¨ï¼Œç»“æœæ˜¯æ²¡æœ‰ã€‚ä½†æ˜¯æ£€æŸ¥å†…æ ¸ config\n\n```bash\n$ zcat /proc/config.gz | grep PSTATE\n\nCONFIG_X86_AMD_PSTATE=y\n```\n\né‚£å¾—äº†ï¼Œè¿™ç©æ„éƒ½ built-in äº†å’‹å¯èƒ½ä¸å­˜åœ¨ï¼Ÿäºæ˜¯æ£€æŸ¥æ—¥å¿—ï¼š\n\n```bash\n$ journalctl -b 0 | grep pstate\n```\n\n~~ç»è¿‡ç¾¤å‹æé†’ï¼Œæˆ‘ä½¿ç”¨ç¿»è¯‘å‘ç°ç¬¬ä¸€æ¬¡è®¾ç½®çš„ passive å¯èƒ½å‡ºäº†äº›å¹½çµå­—ç¬¦å¯¼è‡´æ— æ³•è¯†åˆ«ï¼Œå†è®¾ç½®ä¸€æ¬¡æ‰å‡ºç°äº†æ ¹æœ¬é—®é¢˜~~\n\nå¾—åˆ°\n\n```log\n_CPC object is not present in SBIOS\n```\n\nå“ˆå“ˆè£è€€æ“ä½ å¦ˆçš„ï¼Œè¿™é—®é¢˜ä¸å°±ä¸€çœ¼é¡¶é’ˆäº†ï¼Ÿå‚»é€¼å‚å•†çš„å‚»é€¼ä¸»æ¿åˆæ²¡æœ‰æŠŠ CPPC çš„é€‰é¡¹ç•™ç»™æˆ‘è‡ªå·±è®¾ç½®æã€‚\n\ntg ç¾¤é‡Œï¼š  \næˆ‘ï¼šå¥½åƒæ˜¯ç¡¬ä»¶çš„é—®é¢˜ï¼Œå‚»é€¼è£è€€ã€‚  \nç¾¤å‹ï¼šè¯•è¯• [Smokeless_UMAF](https://github.com/DavidS95/Smokeless_UMAF)ï¼Ÿdiscussion é‡Œæœ‰ CPPC ç›¸å…³çš„ä¸œè¥¿ã€‚\n\néšåæˆ‘æƒ³èµ·æ¥å½“æ—¶ç”¨ Smokeless_UMAF æŠŠå‚»é€¼è£è€€è®¾ç½®çš„ 512M æ˜¾å­˜å¹²åˆ° 4G çš„è¿‡ç¨‹ï¼Œå¿ƒæƒ³è¿™ç©æ„ä¹Ÿèƒ½è®¾ç½®ï¼Ÿäº‹å®ä¸Šï¼Œæ˜¯çš„ã€‚\n\næˆ‘æ‰‹ä¸Šæœ‰ä¸€ä¸ªç°æˆçš„ ventoy ç›˜ï¼Œäºæ˜¯ç›´æ¥æ‹¿æ¥ä½¿ç”¨ï¼Œæ‰”è¿›å» [ä¸º ventoy æå‰åˆ¶ä½œå¥½çš„ img é•œåƒ](https://github.com/mio-19/UniversalAMDFormBrowser-Ventoy) å°±èƒ½å¯åŠ¨äº†ã€‚\n\nå¦å¤–æé†’ä¸€å¥ï¼ŒUMAF åŸºäºä¸€ä¸ªæ¼æ´ï¼Œè¿™ä¸ªæ¼æ´è²Œä¼¼è”æƒ³åœ¨å»å¹´ä¸‰æœˆä»½å°±ä¿®å¤äº†ï¼Œæ‰€ä»¥ä¸ä¸€å®šèƒ½æ­£å¸¸å¯åŠ¨ã€‚è›¤è›¤ï¼Œä½†æ˜¯å‚»é€¼è£è€€å·²ç»ä¸‰å¹´æ²¡æ›´æ–°è¿‡ä»»ä½•é©±åŠ¨äº†ï¼Œæ‰€ä»¥æˆ‘æ€•ä¸ªåŠï¼Œç›´æ¥å¼€å¹²ã€‚  \nåŒæ—¶ï¼Œè¿™ç©æ„ä¸å¼€æºï¼Œæ¶æ„ä»£ç å­˜åœ¨å¯èƒ½æ€§å¾…è®®ï¼Œä½†æ˜¯åˆ©ç”¨æ¼æ´ Hack ä¸»æ¿è®¾ç½®è‚¯å®šæœ‰å˜ç –çš„é£é™©å­˜åœ¨ã€‚å› æ­¤ USE AT YOUR OWN RISKã€‚æœ‰æ¡ä»¶çš„å»ºè®®å¤‡ä»½ä¸€ä¸‹ BIOSï¼ˆæœ‰åˆ·å†™å·¥å…·çš„æƒ…å†µä¸‹ï¼‰ï¼Œæˆ–è€…ç›´æ¥ä¹°~~å…­ä¸ƒä¸ª~~ BIOS èŠ¯ç‰‡ï¼Œåäº†ç›´æ¥æ¢ä¸Šã€‚\n\nä½†æ˜¯æˆ‘ç”µè„‘å¤ªå†·é—¨äº†ï¼Œæ²¡æœ‰å–çš„ï¼Œæ‰‹ä¸Šè¿˜æ²¡æœ‰åˆ·å†™å·¥å…·ï¼Œä½†æ˜¯ä¿ä¿®æœŸå†…ï¼Œå¤§ä¸äº†é€å›å»ä¿®ï¼Œæˆ‘è¿˜æœ‰æœºæˆ¿ç”µè„‘å¯ä»¥ç”¨ã€‚\n\næŒ‰ç…§ [discussion #29](https://github.com/DavidS95/Smokeless_UMAF/discussions/29#discussioncomment-6143331) çš„åšæ³•ï¼Œè¿›å…¥ Device Manager - AMD CBS - NBIO - SMU pageï¼Œå¯ç”¨ CPPCï¼Œç›´æ¥ä¸€è·¯ esc å‡ºæ¥ï¼Œå®ƒä¼šæé†’ä½ é€‰æ‹©æ˜¯å¦ä¿å­˜ï¼Œä¿å­˜åä¼šç›´æ¥é‡å¯ã€‚\n\nå†æ¬¡\n\n```bash\n$ cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_driver\n\namd-pstate\n```\n\nå°±è¿™æ ·ï¼Œæ²¡äº†ï¼Œæ„Ÿè°¢é˜…è¯»ã€‚","tags":["å†…æ ¸"],"categories":["Linux"]},{"title":"AC è‡ªåŠ¨æœº","path":"/post/ac-automaton/","content":"çœŸçš„æ¯” KMP ç®€å•ï¼ï¼ˆæŒ‡å¥½ç†è§£ï¼‰\n\n## å‰ç½®çŸ¥è¯†\n\ntrie æ ‘ï¼ˆå¿…ä¼šï¼‰  \nKMPï¼ˆçŸ¥é“ä¸€ç‚¹æ€æƒ³å°±è¡Œï¼Œä¸ç”¨è¯¦ç»†å­¦ä¹ ï¼‰\n\n## ç”¨é€”\n\næˆ‘ä»¬çŸ¥é“ KMP èƒ½å¤Ÿ $\\operatorname{O}(|T|+|S|)$ åŒ¹é…å•ä¸ªæ–‡æœ¬ä¸² $T$ ä¸æ¨¡å¼ä¸² $S$ã€‚ä½†æ˜¯å¦‚æœæœ‰ $n \\leq 10^5$ ä¸ªæ¨¡å¼ä¸²ï¼ˆå°ä¸²ï¼‰åŒ¹é…ä¸€ä¸ªæ–‡æœ¬ä¸²ï¼ˆå¤§ä¸²ï¼‰å‘¢ï¼ŸAC è‡ªåŠ¨æœºèƒ½å¤Ÿåœ¨ $\\operatorname{O}(|T|+\\sum |S|)$ çš„å¤æ‚åº¦å†…æ±‚å‡ºæ¯ä¸€ä¸ªæ¨¡å¼ä¸²çš„å‡ºç°æ¬¡æ•°ã€‚\n\næ ¸å¿ƒæ€æƒ³å’Œ KMP ç›¸ä¼¼ï¼Œé™¤å»å¤šä½™çš„åŒ¹é…ï¼Œå³åœ¨å½“å‰åŒ¹é…çŠ¶æ€çš„åŸºç¡€ä¸Šè½¬ç§»ç€åŒ¹é…ã€‚ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æˆ‘è¯´äº†å•¥ï¼‰\n\n## åŸºæœ¬ç»“æ„\n\nå¤šä¸ªæ¨¡å¼ä¸²ï¼Œå…ˆå»é‡å‰ç¼€ï¼Œå»ºç«‹å‰ç¼€æ ‘ï¼ˆå³ trie æ ‘ï¼‰ã€‚\nå‡è®¾æˆ‘ä»¬å½“å‰æœ‰å››ä¸ªæ¨¡å¼ä¸²ï¼š$\\texttt{abc,ac,bc,bd}$\n\n![](https://pic.imgdb.cn/item/64813e2a1ddac507cc19c8df)\n\nå¯¹æ¯ä¸ªæ¨¡å¼ä¸²ç»ˆæ­¢å­—ç¬¦è®°å½•å…¶å‡ºç°çš„æ¬¡æ•°ä½œä¸ºå…¶åœ¨ trie æ ‘ä¸Šå¯¹åº”èŠ‚ç‚¹çš„æƒå€¼ï¼Œç„¶åéå†æ–‡æœ¬ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦ï¼Œåœ¨ trie æ ‘ä¸Šå‘ä¸‹èµ°ï¼Œ$ans$ åŠ ä¸Šå½“å‰ç‚¹çš„æƒå€¼ï¼Œå¦‚æœèµ°ä¸äº†äº†å°±æŠŠæ–‡æœ¬ä¸²çš„å½“å‰æŒ‡é’ˆå›è·³åˆ°ä¸Šä¸€ä¸ªæœ‰å¤šä¸ªå­èŠ‚ç‚¹çš„èŠ‚ç‚¹ï¼Œä» trie æ ‘æ ¹èŠ‚ç‚¹ç»§ç»­åŒ¹é…ã€‚ï¼ˆå½“ç„¶è¿™ä¸ªä¸é‡è¦ï¼Œç†è§£ä¸ç†è§£æ— æ‰€è°“ï¼‰ï¼ˆç†è§£ä¸äº†å°±è‡ªå·±åŒ¹é…ä¸€ä¸‹è¯•è¯•ï¼‰\n\nåˆå¹¶äº†ä¸€äº›æ¨¡å¼ä¸²çš„å‰ç¼€ï¼Œäºæ˜¯æœ‰äº†ä¸€å®šä¼˜åŒ–ï¼Œä½†æ˜¯ä¼˜åŒ–è¿˜ä¸å¤Ÿï¼Œè€ƒè™‘å¯¹åç¼€ä¼˜åŒ–ã€‚\n\n## fail è¾¹\n\n### å«ä¹‰\n\nAC è‡ªåŠ¨æœºçš„æ ¸å¿ƒå°±æ˜¯ fail è¾¹ã€‚\n\nfail è¾¹çš„å«ä¹‰ï¼šå¦‚æœ $u$ ç‚¹çš„ fail è¾¹æŒ‡å‘ $v$ï¼Œåˆ™ $v$ ç‚¹æ‰€ä»£è¡¨çš„å­—ç¬¦ä¸²[^1]æ˜¯ $u$ ç‚¹æ‰€ä»£è¡¨çš„å­—ç¬¦ä¸²çš„åç¼€ï¼Œä¸”å‰è€…æ˜¯é™¤åè€…è‡ªèº«ä»¥å¤–æ»¡è¶³è¦æ±‚çš„æœ€é•¿å­—ç¬¦ä¸²ã€‚\n\nå…ˆä¸ç®¡æ€æ ·å»º fail è¾¹ï¼ŒæŒ‰ç…§è¦æ±‚äººè„‘å»ºç«‹ä¸€ä¸‹ï¼Œå¦‚ä¸‹å›¾ï¼š\n\n![](https://pic.imgdb.cn/item/648140721ddac507cc1d77e5)\n\nç„¶åå‡è®¾æœ‰æ–‡æœ¬ä¸² $\\texttt{abc}$ï¼Œè¿›è¡ŒåŒ¹é…ã€‚\n\nä¸ºä»€ä¹ˆä¸Šä¸€æ¬¡åŒ¹é…çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ–‡æœ¬ä¸²çš„æŒ‡é’ˆå›è·³ï¼Ÿå› ä¸ºæ²¡æœ‰åŠæ³•é™¤å»åç¼€çš„å½±å“â€”â€”ä¸€ä¸ªæ¨¡å¼ä¸²æ˜¯å¦ä¸€ä¸ªæ¨¡å¼ä¸²çš„åç¼€ï¼Œæˆ–å‰è€…çš„ä¸€éƒ¨åˆ†æ˜¯åè€…çš„åç¼€ã€‚æ„å‘³ç€ï¼šåè€…åŒ¹é…å¤±è´¥ä¸ä»£è¡¨å‰è€…ä¹Ÿä¼šåŒ¹é…å¤±è´¥ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥è®°å½•ä¸€ä¸‹åˆæ³•åç¼€ï¼Œå¦‚æœåŒ¹é…å¤±è´¥å°±è·³åˆ°è‡ªå·±æœ€é•¿åç¼€æ‰€åœ¨èŠ‚ç‚¹ä¸Šï¼ˆæ²¡æœ‰çš„è¯å°±è·³æ ¹èŠ‚ç‚¹ï¼‰ï¼Œå®¹æ˜“å‘ç°è¿™æ ·ä¸€ç›´è·³ä¸‹å»ï¼Œèƒ½æŠŠæœ€å¼€å§‹çš„ä¸²çš„åˆæ³•åç¼€å…¨éƒ¨è·³å®Œï¼è¯´æ˜åç¼€çš„å½±å“å·²ç»æ’é™¤æ‰äº†ã€‚\n\nä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æŠŠæ²¡æœ‰åˆæ³•åç¼€çš„èŠ‚ç‚¹çš„ fail è¾¹æŒ‡å‘æ ¹èŠ‚ç‚¹ã€‚\n\n![](https://pic.imgdb.cn/item/6481466b1ddac507cc291a6d)\n\nå®é™…ä¸Šæ­¤æ—¶çš„ fail è¾¹çš„å«ä¹‰ï¼šæ— æ³•å‘ä¸‹ä¸€ä¸ªå­èŠ‚ç‚¹åŒ¹é…ï¼ˆæ²¡æœ‰å­èŠ‚ç‚¹æˆ–åŒ¹é…å¤±è´¥ï¼‰æ—¶è¦èµ°çš„è¾¹ã€‚\n\nåŠ¨ç”»æ¼”ç¤ºï¼š\n\n![](https://pic.imgdb.cn/item/64814ec31ddac507cc38599e)\n\n### å»ºç«‹\n\nBFS çš„è¿‡ç¨‹ã€‚\n\n1. ç¬¬ä¸€å±‚ï¼ˆæ ¹èŠ‚ç‚¹ä¸ºç¬¬é›¶å±‚ï¼‰çš„ fail å…¨éƒ¨æŒ‡å‘æ ¹èŠ‚ç‚¹[^2]ï¼Œå‹å…¥é˜Ÿåˆ—ã€‚\n\n2. å–å‡ºé˜Ÿå¤´ï¼Œéå†å­èŠ‚ç‚¹ï¼Œå¦‚æœå­èŠ‚ç‚¹å­˜åœ¨ï¼Œå‡è®¾è¿™ä¸ªå­èŠ‚ç‚¹ä»£è¡¨å­—ç¬¦ $c$ï¼Œå½“å‰èŠ‚ç‚¹ fail æŒ‡é’ˆæŒ‡å‘ $lf$ï¼Œ$lf$ çš„å­èŠ‚ç‚¹é›†åˆä¸º $son$ï¼Œåˆ™å°†å…¶ fail æŒ‡é’ˆæŒ‡å‘ $son_c$ã€‚\n\næ²¡äº†ã€‚\n\n## ä¼˜åŒ–\n\næˆ‘ä»¬ä¸€èˆ¬æŠŠ trie æ ‘çš„ä¸€ä¸ªèŠ‚ç‚¹çš„å„¿å­ç”¨é•¿åº¦ä¸º 26 çš„æ•°ç»„å­˜ä¸‹ï¼Œå¯¼è‡´éå†å­èŠ‚ç‚¹çš„æ—¶å€™ä¼šéå†åˆ°å‚»é€¼ç©ºèŠ‚ç‚¹ã€‚\n\nå¯¹äºå½“å‰èŠ‚ç‚¹çš„ç©ºå­èŠ‚ç‚¹æŒ‡é’ˆï¼Œå¯ä»¥ç›´æ¥æŒ‡å‘å½“å‰ fail æŒ‡é’ˆæŒ‡å‘çš„èŠ‚ç‚¹çš„å­èŠ‚ç‚¹é›†åˆä¸­ï¼Œå¯¹åº”çš„å­èŠ‚ç‚¹ã€‚\n\nå‚è€ƒä»£ç ï¼š\n\n```cpp\nvoid build() {\n    std::queue<i32> q;\n    for (i32 i = 0; i < 26; ++i)\n        if (trie[0].son[i]) q.push(trie[0].son[i]);\n    while (!q.empty()) {\n        i32 nod = q.front(), lfail = trie[q.front()].fail; // å½“å‰èŠ‚ç‚¹å’Œå½“å‰èŠ‚ç‚¹çš„ fail èŠ‚ç‚¹\n        q.pop();\n        for (i32 i = 0; i < 26; ++i) {\n            i32& to = trie[nod].son[i];\n            if (to) {\n                trie[to].fail = trie[lfail].son[i];\n                q.push(to);\n            } else\n                to = trie[lfail].son[i]; // èŠ‚ç‚¹ä¸ºç©º\n        }\n    }\n}\n```\n\n[^1]: å­—å…¸æ ‘ä¸Šé™¤æ ¹èŠ‚ç‚¹å¤–çš„æ¯ä¸€ä¸ªèŠ‚ç‚¹åˆ°æ ¹çš„è·¯å¾„éƒ½ä»£è¡¨ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚\n[^2]: æ¨¡æ‹Ÿä¸€ä¸‹ä¼šå‘ç°ï¼šå¦‚æœ fail è¿˜æŒ‰ç…§æ­£å¸¸æƒ…å†µå®šä¹‰æ¥å»ºçš„è¯ä¼šæ­»å¾ªç¯ã€‚","tags":["AC è‡ªåŠ¨æœº"],"categories":["å­—ç¬¦ä¸²"]},{"title":"SPOJ 4060 é¢˜è§£","path":"/post/spoj-4060-solution/","content":"## é¢˜æ„\n\nç»™å®šä¸€å®šæ•°é‡çš„çŸ³å­ï¼Œä¸¤ä¸ªäººæŠ›ç¡¬å¸ï¼ŒæŠ›åˆ°æ­£é¢åˆ™æ‹¿èµ°ä¸€é¢—çŸ³å­ï¼Œå¦åˆ™ä»€ä¹ˆéƒ½ä¸åšã€‚æ‹¿èµ°æœ€åä¸€é¢—çŸ³å­çš„äººèƒœåˆ©ã€‚  \nå·²çŸ¥çŸ³å­æ•°é‡ï¼Œå‡è®¾åŒæ–¹éƒ½é‡‡ç”¨æœ€ä¼˜æ–¹æ¡ˆï¼Œä¸¤ä¸ªäººåˆ†åˆ«æŠ›åˆ°è‡ªå·±æƒ³è¦çš„é‚£ä¸€é¢çš„æ¦‚ç‡åˆ†åˆ«ä¸º $0.5 \\leqslant q,p < 1$ ~~è¿™ä¸å”¯ç‰©~~ï¼Œæ±‚å…ˆæ‰‹çš„è·èƒœæ¦‚ç‡ã€‚\n\n## é¢˜è§£\n\nè¦ç‚¹ï¼šå¯¹æ¦‚ç‡çš„ç†Ÿæ‚‰ç¨‹åº¦ï¼Œå¯¹ DP çš„ç†Ÿç»ƒç¨‹åº¦ï¼Œå¥‡æ€ªçš„ç¼©å°æ•°æ®èŒƒå›´çš„æ–¹æ³•\n\né¦–å…ˆè€ƒè™‘ç›´æ¥ç¡¬ç®—ï¼Œå‘ç°å¸Œæœ›æ·å¾—çš„é¢ä¼šå˜åŒ–ï¼Œæ²¡æ³•ç›´æ¥ç®—ï¼Œè€ƒè™‘ DPã€‚\n\n### è®¾è®¡çŠ¶æ€\n\n- è¡¨ç¤ºå‡ºå½“å‰åˆ°è¾¾ç¬¬å‡ é¢—çŸ³å­\n- è¡¨ç¤ºå‡ºå½“å‰è°æ‹¿çŸ³å­\n\näºæ˜¯å¾—åˆ°çŠ¶æ€ï¼š$f_{i,0/1}$ è¡¨ç¤º $i$ ä¸ªçŸ³å­ï¼Œç¬¬ $1$ æˆ–ç¬¬ $2$ ä¸ªäººè·èƒœçš„æ¦‚ç‡\n\næ˜¾ç„¶ $f_{0,0}$ å’Œ $f_{0,1}$ æ˜¯ä¸¤ç§ç¡®å®šç»“æœï¼Œåˆ™æ¦‚ç‡åˆ†åˆ«ä¸º $1,0$ã€‚äºæ˜¯è€ƒè™‘å€’æ¨ã€‚\n\nçœ‹æ¦‚ç‡çš„å–å€¼ï¼Œè¯´æ˜åªè¦æˆ‘ä»¬å¸Œæœ›æŠ›åˆ°ä¸€ä¸ªé¢ï¼ŒæŠ›åˆ°è¿™ä¸ªé¢æ¦‚ç‡å°±ä¼šæ›´å¤§ã€‚  \nç”±äºå¾ˆå®¹æ˜“åˆ¤æ–­å‡ºå½“å‰çŠ¶æ€ä¸‹åº”è¯¥å¸Œæœ›å–å¾—/ä¸å–å¾—çŸ³å­ï¼ˆé€šè¿‡å‰ä¸€ä¸ªçŠ¶æ€çš„æ¦‚ç‡å¤§å°ï¼‰ï¼Œæ‰€ä»¥ä¸ç”¨å•ç‹¬è¡¨ç¤ºå‡ºå¸Œæœ›å–å¾—/ä¸å–å¾—çŸ³å­ã€‚\n\nçŠ¶æ€æ˜¯å¦å¯è¡Œï¼Ÿæ ¹æ® lzp å¤§ä½¬çš„æ•™è¯²ï¼Œæˆ‘ä»¬éœ€è¦åˆ¤æ–­è¯¥çŠ¶æ€ï¼š\n\n- æ˜¯å¦èƒ½è¡¨ç¤ºå•ç‹¬çŠ¶æ€ï¼šæ˜¾ç„¶å¯ä»¥ï¼Œä¸Šé¢è§£é‡Šè¿‡äº†ã€‚\n- æ˜¯å¦å¯é€’æ¨ï¼šç›´è§‰æ˜¯å¯ä»¥é€’æ¨ï¼Œä½†æ˜¯éœ€è¦åˆ—æŸ¿å­çœ‹ä¸€ä¸‹\n\n### è½¬ç§»æ–¹ç¨‹\n\nå¼€å§‹å†™æŸ¿å­ï¼š  \nå¸Œæœ›å–å¾—è¿™é¢—çŸ³å­ï¼ˆæ­£é¢ï¼‰ï¼š\n\n$$\n\\begin{aligned}\nf_{i,0} &= f_{i-1,1}\\cdot p + f_{i,1} \\cdot (1-p)\n\\newline\nf_{i,1} &= f_{i-1,0}\\cdot q + f_{i,0} \\cdot (1-q)\n\\end {aligned}\n$$\n\nå‘ç°è¿™ç©æ„æ²¡æ³•é€’æ¨ï¼Œä½†æ˜¯å‘ç°å¯ä»¥è¿ç”¨åˆä¸­äºŒå…ƒä¸€æ¬¡æ–¹ç¨‹çš„æ€è·¯ï¼Œä»£å…¥æ¶ˆå…ƒã€‚\n\n$$\n\\begin{aligned}\nf_{i,0} &= f_{i-1,1}\\cdot p + f_{i,1} \\cdot (1-p) \\newline\nf_{i,0} &= f_{i-1,1} \\cdot p + (f_{i-1,0}\\cdot q + f_{i,0} \\cdot (1-q))(1-p) \\newline\nf_{i,0} &= f_{i-1,1} \\cdot p + f_{i-1,0}\\cdot (1-p)q + f_{i,0} \\cdot (1-q)(1-p) \\newline\n(1-(1-q)(1-p))f_{i,0} &= f_{i-1,1} \\cdot p + f_{i-1,0}\\cdot (1-p)q \\newline\nf_{i,0} &= \\frac {p\\cdot f_{i-1,1} + (1-p)q\\cdot f_{i-1,0}}{1-(1-q)(1-p)}\n\\end{aligned}\n$$\n\nå‘ç°è¿™ç©æ„å°±å¯ä»¥é€’æ¨äº†ï¼Œå†ä¾ç…§åŒæ ·çš„æ–¹å¼èƒ½å¤Ÿåˆ—å‡º $f_{i,1}$ çš„è½¬ç§»æ–¹ç¨‹å’Œä¸å¸Œæœ›å–å¾—è¿™é¢—çŸ³å­çš„ä¸¤ä¸ªè½¬ç§»æ–¹ç¨‹ã€‚ä¸å†èµ˜è¿°è¿‡ç¨‹ï¼ˆåŸºæœ¬ä¸Šå’Œä¸Šé¢å®Œå…¨ä¸€æ ·ï¼‰ï¼Œç»™å‡ºæŸ¿å­\nå¸Œæœ›å–å¾—ï¼š\n\n$$\n\\begin{aligned}\nf_{i,0} &= \\frac {p\\cdot f_{i-1,1} + (1-p)q\\cdot f_{i-1,0}}{1-(1-q)(1-p)} \\newline\nf_{i,1} &= \\frac {q\\cdot f_{i-1,0} + (1-q)p\\cdot f_{i-1,1}}{1-(1-p)(1-q)}\n\\end {aligned}\n$$\n\nä¸å¸Œæœ›å–å¾—ï¼š\n\n$$\n\\begin{aligned}\nf_{i,0} = \\frac{p(1-q)\\cdot f_{i-1,0} + (1-p)\\cdot f_{i-1,1}}{1-qp} \\newline\nf_{i,1} = \\frac{q(1-p)\\cdot f_{i-1,1} + (1-q)\\cdot f_{i-1,0}}{1-qp}\n\\end{aligned}\n$$\n\nå¯¹æ¯”ä¸€ä¸‹å®¹æ˜“å‘ç°ï¼šå¸Œæœ›å–å¾—ä¸ä¸å¸Œæœ›å–å¾—çš„è½¬ç§»æ–¹ç¨‹ä¸­ï¼ŒåŒºåˆ«ä»…ä»…æ˜¯ $p,(1-p)$ å’Œ $q,(1-q)$ã€‚äºæ˜¯ï¼Œå½“å–çŸ³å­æ¯”ä¸å–çŸ³å­ä¼˜çš„æ—¶å€™ï¼ŒæŠŠ $p,q$ æŠŠ $1$ å‡ä¸€ä¸‹å°±è¡Œäº†ã€‚\n\näºæ˜¯ DP éƒ¨åˆ†è§£å†³ï¼Œå¤æ‚åº¦ $\\operatorname{O}(n)$\n\n### ä¼˜åŒ–\n\nä½†æ˜¯é¢˜ç›®ä¸­ $n$ çš„èŒƒå›´æ¯”è¾ƒç”³å¿…ï¼Œ$n \\leqslant 10^9-1$ï¼Œè¿˜æœ‰å¤šæµ‹ï¼Œæ˜¾ç„¶è¿‡ä¸äº†ã€‚æ€ä¹ˆåŠï¼Ÿå¼€å§‹è€ƒè™‘å‡å°‘é€’æ¨æ¬¡æ•°\n\n- â€œè‡ªèº«ç®€åŒ–ä¸“ä¸šç„ â€”â€” lzpâ€ çŸ©é˜µå¿«é€Ÿå¹‚ä¹‹ç±»çš„ä¼˜åŒ–...ä¸å¥½è¯„ä»·ï¼Œè½¬ç§»æ–¹ç¨‹è²Œä¼¼æœ‰ç‚¹å·¨å¤§ï¼›å•è°ƒé˜Ÿåˆ—æˆ–è€…æ–œç‡ï¼Ÿå·²ç»çº¿æ€§äº†ï¼Œè¿™ç§æ–¹æ³•è²Œä¼¼æ²¡å•¥ç”¨ã€‚\n- æ¦‚ç‡è¿˜å¯ä»¥è€ƒè™‘æ˜¯å¦ä¼šå‡ºç°**è¶‹äºç¨³å®š**çš„æƒ…å†µã€‚å¯ä»¥æ‰“è¡¨æµ‹ä¸€ä¸‹~~ï¼ˆæˆ–è€…æäº¤è¯•ä¸€ä¸‹ï¼‰~~ï¼Œ~~è¯•ä¸€ä¸‹å‘ç°ç¡®å®å¯ä»¥~~  \n  $n = \\min(n,100)$ å³å¯ã€‚\n\n### æ˜“é”™æç¤º\n\n1. è¦ç¡®å®šå¥½è‡ªå·±é€‰æ‹©çš„æ˜¯æ­£æ¨è¿˜æ˜¯é€†æ¨ã€‚ï¼ˆä»è¿™ä¸ªçŠ¶æ€æ¨åˆ°ä¸‹ä¸€ä¸ªçŠ¶æ€è¿˜æ˜¯ä»ä¸Šä¸€ä¸ªçŠ¶æ€æ¨åˆ°å½“å‰çŠ¶æ€ï¼‰ï¼Œæ¢å¥è¯è¯´ï¼Œæ³¨æ„ $i-1,i,i+1$ çš„åŒºåˆ«ã€‚\n2. è¦ç¡®å®šå¥½è‡ªå·±é€’æ¨ä½¿ç”¨çš„æ˜¯å“ªä¸€ä¸ªæŸ¿å­ï¼Œä¸è¦å†™åï¼ˆè°å› ä¸ºè¿™ä¸ªè°ƒäº†åŠå¤©æˆ‘ä¸è¯´\n\n## ç¤ºä¾‹ä»£ç \n\nä¸å¾—ä¸è¯´ rust æŸäº›æ–¹é¢æ¯” C++ ä¸¥æ ¼ï¼Œè¯»å…¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œä½†æ˜¯ä»å¦ä¸€æ–¹é¢æ¥è¯´éå¸¸äººæ€§åŒ–...\n\n```rust\nuse std::io;\n\nfn solution() {\n    let mut input = String::new();\n    io::stdin().read_line(&mut input).unwrap();\n    let mut lis = input.trim().split(' ');\n\n    let mut n: usize = lis.next().unwrap().parse().unwrap();\n    let p: f64 = lis.next().unwrap().parse().unwrap();\n    let q: f64 = lis.next().unwrap().parse().unwrap();\n\n    let mut f: [Vec<f64>; 2] = [Vec::new(), Vec::new()];\n\n    if n > 100 {\n        // æ¨åˆ°ç¬¬ 100 ä¸ªçŸ³å­å°±å¤Ÿäº†\n        n = 100;\n    }\n\n    f[0].push(0.0);\n    f[1].push(1.0);\n\n    for i in 1..=n {\n        let mut pnow = p;\n        let mut qnow = q;\n        if f[1][i - 1] > f[0][i - 1] {\n            // å¦‚æœä¸Šä¸€é¢—çŸ³å­ä¸åº”å½“è®©è‡ªå·±å–\n            // è¿™é‡Œå–ä¸å–ç­‰å·æ— æ‰€è°“\n            pnow = 1.0 - p;\n            qnow = 1.0 - q;\n        }\n        f[0].push(\n            (pnow * (1.0 - qnow) * f[0][i - 1] + (1.0 - pnow) * f[1][i - 1]) / (1.0 - pnow * qnow),\n        );\n        f[1].push(\n            (qnow * (1.0 - pnow) * f[1][i - 1] + (1.0 - qnow) * f[0][i - 1]) / (1.0 - pnow * qnow),\n        );\n    }\n\n    println!(\"{}\", f[0][n]);\n}\n\nfn main() {\n    let mut input = String::new();\n    io::stdin().read_line(&mut input).unwrap();\n    let mut s = input.trim().split(' ');\n    let mut t: i32 = s.next().unwrap().parse().unwrap();\n    while t != 0 {\n        solution();\n        t -= 1;\n    }\n}\n```","tags":["æ¦‚ç‡"],"categories":["é¢˜è§£"]},{"title":"æ¦‚ç‡æ‚é¢˜","path":"/post/probability-misc-questions/","content":"## [P4562 [JXOI2018]æ¸¸æˆ](https://www.luogu.com.cn/problem/P4562)\n\nç»™å®šåŒºé—´ $[l,r]$ï¼Œæ¯æ¬¡é€‰æ‹©ä¸€ä¸ªæœªé€‰æ‹©è¿‡çš„æ•°ï¼Œå°†è¿™ä¸ªæ•°ä»¥åŠå®ƒçš„æ‰€æœ‰å€æ•°æ ‡è®°ï¼Œæ¯ä¸€ç§æ–¹æ¡ˆå…¨éƒ¨æ ‡è®°æ‰€ç”¨æ¬¡æ•°è®°ä¸º $t$ï¼Œæ±‚æ‰€æœ‰å¯èƒ½ $t$ çš„å’Œã€‚\n\né¦–å…ˆæƒ³åˆ°æ¯æ¬¡å°†æ‰€æœ‰ç‚¹æ ‡è®°çš„å®è´¨ï¼Œå°±æ˜¯å°† $\\left[l,r\\right]$ ä¸­**æ²¡æœ‰**åœ¨**æ­¤åŒºé—´å†…**çš„**éè‡ªèº«çš„å› æ•°**çš„æ•°æ ‡è®°å®Œã€‚ç§°è¿™æ ·çš„æ•°ä¸ºå…³é”®æ•°ï¼Œè®¾å…³é”®æ•°æœ‰ $k$ ä¸ªï¼Œåˆ™å®é™…ä¸Šæ ‡è®°æ¬¡æ•°å°±æ˜¯**æœ€åä¸€ä¸ªå…³é”®æ•°**çš„ä½ç½®ã€‚\n\næœ€åä¸€ä¸ªå…³é”®æ•°çš„ä½ç½®...ä¸æ²¾å¤´ä¸æ²¾å°¾ï¼Œæ‰€ä»¥æ¢ä¸ªæ–¹å‘è€ƒè™‘â€”â€”æœ€åä¸€ä¸ªå…³é”®æ•°çš„ä½ç½®å¯ä»¥æ›¿æ¢ä¸º**å®ƒåé¢çš„éå…³é”®æ•°çš„æ•°é‡**ã€‚\n\nå®é™…ä¸Šï¼Œ$k$ ä¸ªå…³é”®æ•°æŠŠæ•´ä¸ªåŒºé—´åˆ†æˆäº† $k+1$ ä»½ã€‚è®¾åŒºé—´é•¿åº¦ä¸º $1$ï¼Œåˆ™ä¸€ä¸ªéå…³é”®æ•°åœ¨æœ€åä¸€æ®µåŒºé—´ä¸Šçš„æœŸæœ›å°±æ˜¯ $\\cfrac 1 {k+1}$ï¼ˆ$k+1$ ç§æƒ…å†µï¼Œæ¯ç§æƒ…å†µéƒ½åœ¨æ®µåŒºé—´ä¸Šï¼Œåªæœ‰ä¸€ç§æƒ…å†µåœ¨ç›®æ ‡åŒºé—´ä¸Šï¼‰ï¼Œ$n-k$ ä¸ªéå…³é”®ç‚¹åœ¨æœ€åä¸€æ®µåŒºé—´ä¸Šçš„æœŸæœ›å°±æ˜¯ $\\cfrac{n-k}{k+1}$ã€‚ï¼ˆæ³¨æ„è¿™é‡Œæ¦‚ç‡åˆ°æœŸæœ›çš„è½¬æ¢ï¼Œè¦æƒ³æƒ³ä¸ºä»€ä¹ˆæœŸæœ›æˆäº†æ±‚è§£ç›®æ ‡ï¼‰\n\näºæ˜¯ï¼Œæœ€åä¸€ä¸ªç‚¹çš„ä½ç½®çš„æœŸæœ›ï¼Œå³ $t$ çš„æœŸæœ›ä¸ºä¸‹å¼\n\n$$\n\\begin{aligned}\n&\\ \\ \\ \\ \\  n-\\cfrac{n-k}{k+1} \\newline\n&= \\cfrac{nk+n-n+k}{k+1} \\newline\n&= \\cfrac{(n+1)k}{k+1}\n\\end{aligned}\n$$\n\næ±‚æ‰€æœ‰å¯èƒ½çš„ $t$ çš„å€¼çš„å’Œï¼Œä¹˜ä¸€ä¸ªé˜¶ä¹˜å°±å¥½äº†ã€‚\n\n$$\n\\begin{aligned}\n&\\ \\ \\ \\ \\  \\cfrac{(n+1)k}{k+1}n! \\newline\n&= \\cfrac{k}{k+1}(n+1)!\n\\end{aligned}\n$$\n\nå–æ¨¡çš„è¯ï¼Œæ±‚å®Œé˜¶ä¹˜ $\\times k$ å†ä¹˜ä¸ª [é€†å…ƒ](/post/multi-inverse-element) å°±è¡Œäº†ã€‚\n\n## [P4284 [SHOI2014] æ¦‚ç‡å……ç”µå™¨](https://www.luogu.com.cn/problem/P4284)\n\nç»™å®šä¸€æ£µæ ‘ï¼Œæ¯æ¡è¾¹èƒ½å¯¼ç”µçš„æ¦‚ç‡ä¸º $p_i$ï¼Œæ¯ä¸ªç‚¹è‡ªå·±å¸¦ç”µçš„æ¦‚ç‡ä¸º $q_i$ï¼Œæ±‚å¸¦ç”µç‚¹ä¸ªæ•°çš„æœŸæœ›ã€‚\n\næ ¹æ®æœŸæœ›çš„çº¿æ€§æ€§ï¼Œè€ƒè™‘æ±‚æ¯ä¸ªç‚¹æœ‰ç”µçš„æœŸæœ›ã€‚å› ä¸ºåªæœ‰ $0,1$ ä¸¤ç§æƒ…å†µï¼Œå› æ­¤æ±‚æ¦‚ç‡å°±è¡Œäº†ã€‚\n\nè€ƒè™‘å•ä¸ªç‚¹æœ‰ç”µçš„æƒ…å†µï¼š\n\n- è‡ªå·±æœ‰ç”µ\n- å„¿å­æœ‰ç”µï¼Œå’Œå„¿å­è¿è¾¹å¯¼ç”µ\n- çˆ¶äº²æœ‰ç”µï¼Œå’Œçˆ¶äº²è¿è¾¹å¯¼ç”µ\n\nè®¾ $f_u$ ä¸ºç‚¹ $u$ å¸¦ç”µçš„æœŸæœ›ï¼š\n\n- ç¬¬ä¸€ç§æƒ…å†µçš„æ¦‚ç‡å°±æ˜¯ $q_u$ï¼Œæ‰€ä»¥ç›´æ¥ $f_u = q_u$ å°±è¡Œã€‚\n- ç¬¬äºŒç§æƒ…å†µéå¸¸åƒæ ‘å½¢ DP çš„æ ·å­ï¼Œå®¹æ˜“æƒ³åˆ°ä»å¶å­èŠ‚ç‚¹å‘ä¸Šæ¨å°±è¡Œã€‚\n  - è€ƒè™‘ä¸¤ä¸ªç‹¬ç«‹äº‹ä»¶å‘ç”Ÿå…¶ä¸­ä¸€ä»¶å³å¯çš„æ¦‚ç‡ï¼š $P(A+B)=P(A)+(1-P(A))P(B)$ï¼Œå³ $A$ äº‹ä»¶çš„æ¦‚ç‡ $+$ $(B$ äº‹ä»¶ $+$ $A$ äº‹ä»¶æœªå‘ç”Ÿ $)$ çš„æ¦‚ç‡ã€‚\n  - è¿›è¡Œ dfsï¼Œå›æº¯çš„æ—¶å€™ç»Ÿè®¡ï¼š\n    - è®¾å½“å‰ç‚¹ä¸º $u$ï¼Œå„¿å­ä¸º $v$ï¼Œåˆ™æœ‰ $f_u = f_u + (1-f_u)p_{u,v}f_v$\n- ç¬¬ä¸‰ç§æƒ…å†µå®é™…ä¸Šä¹Ÿæ˜¯æ ‘å½¢ DPï¼Œåªä¸è¿‡å˜æˆäº†æ­£æ¨ï¼Œä» $u$ è®¡ç®—å¯¹ $v$ çš„è´¡çŒ®ã€‚\n  - å‡è®¾å½“å‰åˆ°è¾¾ $u$ï¼Œä¸” $f_u$ å·²ç»ç®—å¥½äº†ï¼Œè€ƒè™‘å¦‚ä½•æŠŠè´¡çŒ®ä¼ ç»™ $f_v$ã€‚\n  - å®¹æ˜“æƒ³åˆ° $u$ èƒ½è´¡çŒ®ç»™ $v$ ç”µæµçš„é‚£éƒ¨åˆ†æ¦‚ç‡ï¼Œå®é™…ä¸Šæ˜¯ $f_u$ æ‰”æ‰ $v$ è¿™æ£µå­æ ‘çš„éƒ¨åˆ†ã€‚\n  - æ¢å¥è¯è¯´ï¼Œè´¡çŒ® $=$ $u$ æœ‰ç”µçš„æ¦‚ç‡ $-$ $u$ ä¸è€ƒè™‘ $v$ çš„æœ‰ç”µçš„æ¦‚ç‡ï¼Œå†ä¹˜è¾¹çš„æ¦‚ç‡ä¹‹ç±»çš„å¸¸æ•°å³å¯ã€‚\n  - è®¾ $\\langle u,v \\rangle=e$ï¼Œ$u$ ä¸è€ƒè™‘ $v$ çš„æœ‰ç”µçš„æ¦‚ç‡ä¸º $g_u$ï¼Œ$v$ åªè€ƒè™‘ä¸‹æ–¹æ¥ç”µæœ‰ç”µçš„æ¦‚ç‡ä¸º $l_v$ï¼Œæœ‰æŸ¿å­ï¼š\n    $$\n    \\begin{aligned}\n    f_u &= g_u + l_vp_e(1-g_u) \\newline\n    f_u &= g_u + l_vp_e-l_vp_eg_u \\newline\n    f_u - l_vp_e &= g_u(1-l_vp_e) \\newline\n    g_u &= \\cfrac {f_u-l_vp_e}{1-l_vp_e} \\newline\n    f_u - g_u &= f_u - \\cfrac {f_u-l_vp_e}{1-l_vp_e}\n    \\end{aligned}\n    $$\n  - è€ƒè™‘å®Œ $u$ æœ‰ç”µçš„è´¡çŒ®ï¼Œä¹˜ä¸€ä¸‹è¾¹çš„æ¦‚ç‡å’Œ $v$ æ²¡ç”µçš„æ¦‚ç‡å°±è¡Œäº†\n    $$\n    f_v = f_v + (1-f_v)\\cdot p_e \\cdot(f_u - \\cfrac {f_u-l_vp_e}{1-l_vp_e})\n    $$\n\næŸ¿å­æ¨å®Œäº†ï¼Œå†™ä¸¤ä¸ª dfs ç®—ç­”æ¡ˆå³å¯ã€‚\n\n## SPOJ 4060 KPGAME\n\n[ä¼ é€é—¨](/post/spoj-4060-solution)\n\n## CF 1316 F\n\nåˆæ˜¯ä¸€ä¸ªé‡é‡çº§é¢˜ç›®ã€‚\n\né¦–å…ˆæˆ‘ä»¬å‘ç°ä»–è¿™ä¸ªæ•°åˆ—æ˜¯å‡çš„ï¼Œå› ä¸ºæ±‚æƒå€¼çš„æ—¶å€™æ˜¯â€œæ’åºâ€åå†æ±‚ï¼Œå­åºåˆ—ä¹Ÿä¸éœ€è¦è¿ç»­ï¼Œæ‰€ä»¥æˆ‘ä»¬ç›´æ¥æŠŠå®ƒå½“ä¸€ä¸ªæ•°çš„é›†åˆåšï¼Œä¸éœ€è¦ç»´æŠ¤ä»–ä»¬åœ¨åŸæ•°åˆ—ä¸­çš„é¡ºåºã€‚ä¸‹é¢æ‰€è¯´çš„ä¸‹æ ‡éƒ½æ˜¯æ’åºåçš„ä¸‹æ ‡ã€‚\n\nå¥½ï¼Œæ¥ä¸‹æ¥è€ƒè™‘ä¸€ä¸ªç‚¹å¯¹å¯¹æœŸæœ›çš„è´¡çŒ®ã€‚  \nå‡è®¾æœ‰ç‚¹å¯¹ $a_i,a_j,i<j$ï¼Œæ˜¾ç„¶æƒå€¼çš„è´¡çŒ®æ˜¯ $a_ia_j$ã€‚  \nç„¶åæ¥çœ‹æ¦‚ç‡ï¼Œç”±äºæ˜¯ç›¸é‚»çš„ï¼Œæ‰€ä»¥èƒ½éšä¾¿æŒ‘é€‰çš„åªæœ‰ $i$ å·¦è¾¹ï¼Œ$j$ å³è¾¹çš„ç‚¹ï¼Œæ€»å…±æœ‰ $(i-1)+(m-j)$ ä¸ªï¼Œæ»¡è¶³ä¸¤ä¸ªç‚¹ç›¸é‚»çš„å­åºåˆ—æ•°é‡å³ä¸º $2^{(i-1)+(m-j)}$ï¼Œè€Œå­åºåˆ—çš„æ€»æ•°æœ‰ $2^n$ ä¸ªã€‚å› æ­¤ï¼Œè¿™ä¸¤ä¸ªç‚¹ç›¸é‚»çš„æ¦‚ç‡ä¸ºï¼š\n\n$$\n\\frac {2^{(i-1)+(m-j)}}{2^n} = \\frac {1}{2^{n-i+1-j-n}} = \\frac 1{2^{j-i+1}}\n$$\n\näºæ˜¯å¾—å‡ºç‚¹å¯¹ $a_i,a_j,i<j$ å¯¹æœŸæœ›çš„è´¡çŒ®ï¼š$\\frac {a_ia_j}{2^{j-i+1}}$ã€‚\n\nç„¶åç»™å®šä¸€ä¸ªæ•°åˆ—ï¼Œå…¶æƒå€¼çš„æœŸæœ›ç›´æ¥æšä¸¾ç‚¹å¯¹è®¡ç®—å°±æ˜¯ç­”æ¡ˆï¼š$\\sum_{i=1}^n \\sum_{j=i+1}^n \\frac {a_ia_j}{2^{j-i+1}}$ã€‚\n\nä½†æ˜¯è¿™ç©æ„å¸¦å•ç‚¹ä¿®æ”¹ï¼Œç›´æ¥ç”¨è¿™ä¸ªå¼å­çš„è¯å°±æ˜¯ä¸€ä¸ªéå¸¸ä¼˜ç§€çš„ $\\Theta(qn^2)$ çš„åšæ³•ã€‚\n\nå•ç‚¹ä¿®æ”¹ã€‚è€ƒè™‘åˆ†æ²»ã€‚\n\næŠŠä¸€ä¸ªåºåˆ—åˆ†æˆä¸¤æ®µï¼š$[1,m],[m+1,n]$ï¼Œé‚£å®ƒçš„è´¡çŒ®å¯ä»¥åˆ†æˆä¸‰éƒ¨åˆ†ï¼š\n\n- $[1,m]$ çš„è´¡çŒ®\n- $[m+1,n]$ çš„è´¡çŒ®\n- è·¨è¶Šä¸¤ä¸ªåŒºé—´çš„ç‚¹å¯¹çš„è´¡çŒ®\n\nå‰ä¸¤ä¸ªå¯ä»¥åˆ†æ²»è§£å†³ï¼Œé—®é¢˜åœ¨äºç¬¬ä¸‰ä¸ªä¸œè¥¿ã€‚  \né¦–å…ˆè¿™ä¸ªä¸œè¥¿çš„å¼å­æ˜¯å¾ˆå¥½å†™çš„ï¼š$\\sum_{i=1}^m \\sum_{j=m+1}^n \\frac {a_ia_j}{2^{j-i+1}}$  \nä¸ºäº†åˆ†æ²»ï¼Œæˆ‘ä»¬å¾—æŠŠè¿™ä¸ªå¼å­æ‹†æˆå·¦å³ä¸¤åŠã€‚æ¬¸ï¼Œè¿™ $1\\sim m$ å’Œ $m+1\\sim n$ æ ¹æœ¬å°±æ²¡äº¤é›†ï¼Œé‚£å°±ç›´æ¥æ‹†å¼€å°±å¥½äº†ï¼\n\n$$\n\\begin{aligned}\n&\\ \\ \\ \\ \\ \\sum_{i=1}^m \\sum_{j=m+1}^n \\frac {a_ia_j}{2^{j-i+1}} \\newline\n&= \\sum_{i=1}^m \\sum_{j=m+1}^n \\frac {a_ia_j}{2^{j-m+m-i+1}} \\newline\n&= (\\sum_{i=1}^m \\frac {a_i}{2^{m-i+1}})(\\sum_{j=m+1}^n \\frac {a_j}{2^{j-m}})\n\\end{aligned}\n$$\n\nç„¶åæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥åˆ†æ²»è§£å†³äº†ã€‚\n\nè®¾ä¸€ä¸ªåŒºé—´çš„ç­”æ¡ˆä¸º $f$ï¼Œä¸Šé¢æ‹†æˆçš„ä¸¤ä¸ªéƒ¨åˆ†ä¸€ä¸ªæ˜¯ $ls$ ä¸€ä¸ªæ˜¯ $rs$ï¼Œ$len(x,y) = y-x+1$ è¡¨ç¤ºä¸€ä¸ªåŒºé—´çš„é•¿åº¦ã€‚\n\nå¯¹äºä¸€ä¸ªåŒºé—´ $[l,r]$ï¼Œæœ‰å¦‚ä¸‹ä¸€å †ä¸œè¥¿ï¼š\n\n$$\n\\begin{cases}\nf(i,i) = 0 \\newline\nls(i,i) = rs(i,i) = 1 \\newline\nf(l,r) = f(l,m) + f(m+1,r) + ls(l,m)rs(m+1,r)\\newline\nls(l,r) = ls(l,m) + \\frac {rs(m+1,r)}{2^{len(l,m)}} \\newline\nrs(l,r) = rs(m+1,r) + \\frac {rs(l,m)}{2^{len(m+1,r)}}\n\\end{cases}\n$$\n\næœ€ç»ˆç­”æ¡ˆæ˜¯ $f(1,n)$ã€‚\n\nè¿™æ ·çš„åˆ†æ²»ï¼Œæœ€ç»ˆå¤æ‚åº¦æ˜¯ $\\Theta(qn)$ çš„ï¼Œè¿˜æ˜¯ä¸å¤Ÿã€‚\n\nè¿™ä¸ªåˆ†æ²»å®é™…ä¸Šå¾ˆå®¹æ˜“ç”¨çº¿æ®µæ ‘ç»´æŠ¤ï¼Œä½†æ˜¯ä¿®æ”¹æƒå€¼æ€ä¹ˆåŠï¼Ÿç­”æ¡ˆæ˜¯ä½¿ç”¨æƒå€¼çº¿æ®µæ ‘ã€‚\n\næˆ‘ä»¬å°†è¯¢é—®ç¦»çº¿ä¸‹æ¥ï¼ŒæŠŠåŸæ•°åˆ—å’Œè¯¢é—®ä¸­çš„æ•°å­—å…¨éƒ¨ç¦»æ•£åŒ–ï¼Œç„¶åå­˜åˆ°æƒå€¼çº¿æ®µæ ‘é‡Œé¢,**è¿™æ ·æ˜¾ç„¶å°±æŠŠæ’åºçš„éƒ¨åˆ†åšå®Œäº†**ã€‚  \nç„¶åå¯¹äºæ¯ä¸ªçº¿æ®µæ ‘èŠ‚ç‚¹ï¼Œç»´æŠ¤å½“å‰åŒºé—´é‡Œé¢çš„**æœ‰æ•ˆç‚¹ä¸ªæ•°**ï¼Œä»¥åŠä¸Šé¢é‚£ä¸€å †ä¸œè¥¿ï¼Œä½†æ˜¯ $len$ å°±å¯ä»¥æ›¿æ¢æˆåˆšæ‰æåˆ°çš„ç‚¹æ•°äº†ã€‚\n\n`push_up` å°±ç”¨ä¸Šé¢çš„å¼å­å°±å¥½ã€‚\n\nè¿™æ ·çš„åšæ³•æ—¶é—´å¤æ‚åº¦ä¸º $\\Theta(n+q\\log n)$ï¼Œéå¸¸èƒ½è¿‡ã€‚\n\nä½†æ˜¯å¦ä¸€ä¸ªç»†èŠ‚çš„ç‚¹æ¥äº†ï¼šç¦»æ•£åŒ–ã€‚ç”±äºä¸¤ä¸ªç›¸åŒçš„æ•°ä½œä¸ºç‚¹å¯¹ä¹Ÿä¼šäº§ç”Ÿè´¡çŒ®ï¼Œæ‰€ä»¥åœ¨ç¦»æ•£åŒ–çš„æ—¶å€™ç»™ä»–ä»¬åˆ†é…ä¸åŒçš„ç¼–å·ã€‚","tags":["æ¦‚ç‡"],"categories":["é¢˜è§£"]},{"title":"æœ€å¤§æµè¦ç‚¹","path":"/post/ff-network-maxflow/","content":"## ä»€ä¹ˆæ˜¯æœ€å¤§æµé—®é¢˜\n\næ€»ä½“æ˜¯ä¸€å¼ æœ‰å‘å›¾ï¼Œå®šä¸€ä¸ªæºç‚¹ï¼Œä¸€ä¸ªæ±‡ç‚¹ã€‚å•ä½æ—¶é—´å†…æºç‚¹èƒ½æµå‡ºæ— é™æ°´ï¼Œæ±‡ç‚¹èƒ½æ¥å—æ— é™æ°´ã€‚å›¾ä¸­æ¯æ¡è¾¹ç›¸å½“äºä¸€ä¸ªå•ä½æ—¶é—´æµé‡æœ‰é™çš„ç®¡é“ã€‚\n\næœ€å¤§æµé—®é¢˜ï¼šå•ä½æ—¶é—´å†…æ±‡ç‚¹æœ€å¤šèƒ½æ¥æ”¶åˆ°å¤šå°‘æ°´æµï¼Ÿ\n\n## è§£æ³•\n\nè€ƒè™‘è´ªå¿ƒå»åšï¼šåå¤ dfs æ‰¾åˆ°ä»èƒ½æµæ°´çš„ä¸€æ¡ä»æºç‚¹åˆ°æ±‡ç‚¹çš„è·¯å¾„ï¼Œè·¯å¾„ä¸­æ¯ä¸ªè¾¹çš„å®¹é‡å‡å»è·¯å¾„çš„æœ€å°å®¹é‡ï¼ˆæ°´ç®¡æ¨¡å‹èƒ½æµå¤šå°‘æ˜¾ç„¶å—æœ€å°å®¹é‡é™åˆ¶å§...ï¼‰ã€‚  \nä½†æ˜¯å¥½åƒä¸å¤ªå¯¹ï¼Œæœ‰å¯èƒ½å½“å‰çš„ä¸€ä¸ªæµè®©å®ƒä»å¦ä¸€ä¸ªè·¯å¾„æµå‡ºå»æ›´åˆé€‚ï¼Œå€Ÿé‰´åæ‚”è´ªå¿ƒçš„æ€æƒ³ï¼Œæˆ‘ä»¬å¯ä»¥ç»™æ¯æ¡è¾¹åŠ ä¸€æ¡åå‘è¾¹ã€‚å½“ä¸€æ¡è¾¹çš„å®¹é‡è¢«å æ®äº† $f$ æ—¶ï¼Œå…¶å®¹é‡å‡å» $f$ï¼Œç„¶åç»™å®ƒçš„åå‘è¾¹åŠ ä¸Š $f$ã€‚\n\n![](https://pic.imgdb.cn/item/6496477d1ddac507cce1334e.jpg)\n\nä¸Šé¢åªæ˜¯ç®€å•ä»‹ç»äº†ä¸€ä¸‹å¢å¹¿è·¯çš„ä¸»è¦æ€æƒ³ï¼Œä¸‹é¢æ˜¯ä¸‰ç§å…·ä½“çš„æ±‚æ³•ã€‚\n\n\nOI ä¸­ç½‘ç»œæµè²Œä¼¼ä¸éœ€è¦å»ç®¡ä»–çš„å¤æ‚åº¦ä¹‹ç±»ï¼Œå°¤å…¶æ˜¯æœ€å¤§æµï¼Œå¡ Dinic çš„é¢˜å¯èƒ½åªæœ‰ HLPP æ¨¡æ¿é¢˜é‚£ä¸€é“ã€‚\n\nä¸»è¦æ˜¯æ„Ÿæ€§ç†è§£ï¼Œé‡ç‚¹éƒ½åœ¨å»ºæ¨¡ã€‚\n\n\n### EK\n\nä¸ä¼šï¼Œä¸Šç•Œ $\\operatorname{O}(nm^2)$ï¼Œæ‡’å¾—å­¦äº†\n\n\n### Dinic\n\næ¨èç»“åˆè¿™ä¸ªåšå®¢çœ‹ï¼šhttps://www.cnblogs.com/SYCstudio/p/7260613.html\n\nç»§ç»­ä¸Šé¢çš„è´ªå¿ƒæƒ³æ³•\n\næ¯ä¸€æ¬¡ dfs å¯èƒ½å¾—éå†æ•´å¼ å›¾ï¼Œåªæ‰¾åˆ° 1 æ¡å¢å¹¿è·¯ï¼Œæ„Ÿè§‰ä¸å¤ªå€¼ã€‚\n\nè€ƒè™‘å¤šè·¯å¢å¹¿ã€‚\n\ndfs æ¯æ¬¡ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼šå½“å‰ç‚¹ç¼–å·å’Œæµè¿‡æ¥äº†å¤šå°‘æµé‡\n\nåŸæ¥çš„ dfs è¿‡ç¨‹ï¼š\n\n1. åˆ¤æ–­å½“å‰æ˜¯å¦åˆ°è¾¾æ±‡ç‚¹ï¼Œå¦‚æœåˆ°è¾¾æ±‡ç‚¹ï¼Œè¿”å›å½“å‰æµé‡ã€‚\n2. å¦åˆ™æšä¸¾æœ‰æµé‡çš„è¾¹ï¼Œç»§ç»­ dfsã€‚\n3. dfs å¦‚æœè¿”å›æ­£æ•°ï¼Œè¯´æ˜æ‰¾åˆ°ä¸€æ¡å¢å¹¿è·¯ï¼Œè¿”å›ã€‚\n\næˆ‘ä»¬å®é™…ä¸Šå¯ä»¥åœ¨ç¬¬ 3 æ­¥æ‰¾åˆ°å¢å¹¿è·¯æ—¶ä¸ç«‹å³åœæ­¢ï¼Œè€Œæ˜¯å°†å½“å‰æµé‡å‡å» dfs è¿”å›çš„æµé‡ï¼Œè¡¨ç¤ºæœ‰è¿™ä¹ˆå¤šçš„æ°´å·²ç»æµå‡ºå»äº†ã€‚ç„¶åç»§ç»­æšä¸¾è¾¹ï¼Œæšä¸¾å®Œæ¯•/å½“å‰æµé‡å‡åˆ° 0 åˆ™åœæ­¢ã€‚\n\nè²Œä¼¼ä¼šæ­»å¾ªç¯ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ bfs åˆ†å±‚ã€‚æ¯æ¬¡ bfs ä»æºç‚¹å¼€å§‹ï¼Œåªèµ°æœ‰æµé‡çš„è¾¹ï¼Œä¸€ä¸ªç‚¹çš„æ·±åº¦ä¸ºåˆ°æºç‚¹çš„æœ€çŸ­è·ç¦»ã€‚å¦‚æœå›¾ä¸è¿é€šï¼Œè¯´æ˜æ‰¾ä¸åˆ°å¢å¹¿è·¯äº†ã€‚\n\nå¦‚æœå›¾è¿é€šï¼Œåˆ™åå¤ dfsã€‚å‘ä¸‹ä¸€ä¸ªç‚¹æœç´¢çš„å‰ææ˜¯ä¸‹ä¸€ä¸ªç‚¹çš„æ·±åº¦ -1 ç­‰äºå½“å‰ç‚¹æ·±åº¦ã€‚\n\nç„¶ååŠ ä¸€ä¸ªå½“å‰å¼§ä¼˜åŒ–ï¼šdfs å¯èƒ½åå¤åˆ°è¾¾åŒä¸€ä¸ªç‚¹ï¼Œè€Œè¿™ä¸ªç‚¹çš„æŸäº›è¾¹å¯èƒ½å·²ç»è¢«å¢å¹¿è¿‡äº†ã€‚å› æ­¤åœ¨ç¬¬ä¸€æ¬¡åˆ°è¾¾è¯¥ç‚¹çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥æŠŠé“¾å¼å‰å‘æ˜Ÿçš„ fir[nod] ä¿®æ”¹ä¸ºå½“å‰å¢å¹¿è¿‡ä½†æ˜¯è¿˜å¯èƒ½ç»§ç»­å¢å¹¿çš„è¾¹â€”â€”ä¹‹å‰çš„è¾¹å¢å¹¿è¿‡ï¼Œæµé‡æ²¡è·‘å®Œï¼Œè¯´æ˜èµ°é‚£æ¡è¾¹å·²ç»æ‰¾ä¸åˆ°å¢å¹¿è·¯äº†ã€‚\n\næ¯æ¬¡åˆ†å±‚æƒ…å†µéƒ½ä¸ä¸€æ ·ï¼Œæ‰€ä»¥å¼€ä¸€ä¸ª cur æ•°ç»„å½“ fir æ•°ç»„ç”¨ï¼Œæ¯æ¬¡åˆ†å±‚å°† cur æ•°ç»„çš„æ¯ä¸ªå€¼éƒ½åˆå§‹åŒ–æˆåŸ fir æ•°ç»„çš„å€¼ã€‚\n\nç¤ºä¾‹ä»£ç ï¼š\n\n```cpp\nstruct edge {\n    i64 u, v;\n    edge *nex, *opp;\n    i64 w;\n} graph[M];\nedge* tot = graph;\nedge *fir[N], *cur[N];\ni64 depth[N];\ni64 n, m, s, t; // ç‚¹æ•°ï¼Œè¾¹æ•°ï¼Œæºç‚¹ï¼Œæ±‡ç‚¹\nqueue<i64> q;\nvoid add(i64 a, i64 b, i64 c) {\n    ++tot;\n    tot->u = a;\n    tot->v = b;\n    tot->w = c;\n    tot->opp = tot + 1;\n    tot->nex = fir[a];\n    fir[a] = tot;\n\n    // åå‘è¾¹\n    ++tot;\n    tot->u = b;\n    tot->v = a;\n    tot->w = 0;\n    tot->opp = tot - 1;\n    tot->nex = fir[b];\n    fir[b] = tot;\n};\n\nbool bfs() {\n    while (q.size())\n        q.pop();\n    // memset(depth, 0, sizeof depth);\n    cur[s] = fir[s];\n    for (int i = 1; i <= n; ++i)\n        depth[i] = 0;\n\n    depth[s] = 1;\n    q.push(s);\n    while (q.size()) {\n        i64 idx = q.front();\n        q.pop();\n        for (edge* e = fir[idx]; e; e = e->nex) {\n            if (e->w > 0 && !depth[e->v]) {  // è¯¥è¾¹å®¹é‡å¤§äºé›¶ä¸”è¿˜æ²¡æœ‰è¢«è®¾ç½®æ·±åº¦\n                depth[e->v] = depth[idx] + 1;\n                q.push(e->v);\n                cur[e->v] = fir[e->v]; // å½“å‰å¼§ä¼˜åŒ–\n            }\n        }\n    }\n\n    if (!depth[t]) return false;\n    return true;\n}\n\ni64 dfs(i64 nod, i64 val) {\n    if (nod == t) return val;  // è¾¹ç•Œå³åˆ°è¾¾æ±‡ç‚¹\n\n    i64 res = 0;\n    for (edge* e = cur[nod]; e && val; e = e->nex) {\n        cur[nod] = e;\n        if (depth[nod] + 1 == depth[e->v] && e->w) {  // ç¬¬ä¸€ä¸ªæ¡ä»¶åˆ¤æ–­åˆ†å±‚å›¾ï¼Œç¬¬äºŒä¸ªæ¡ä»¶åˆ¤æ–­è¾¹çš„æ®‹é‡\n            i64 tmp = dfs(e->v, min(val, e->w));\n            if (tmp > 0) {  // æ‰¾åˆ°å¢å¹¿è·¯\n                e->w -= tmp;\n                e->opp->w += tmp;\n                res += tmp;\n                val -= tmp;\n                // return res;\n            } else if (!tmp)\n                depth[e->v] = -1;\n        }\n    }\n    return res;\n}\n\ni64 dinic() {\n    i64 res = 0;\n    i64 d = 0;\n    while () {\n        while (d = dfs(s, (i64)LLONG_MAX)) {\n            res += d;\n        }\n    }\n    return res;\n}\n```\n\n## ISAP\n\nTODO\n<!-- Dinic éœ€è¦ bfs å’Œ dfs å¥½å¤šæ¬¡ï¼Œæœ‰æ²¡æœ‰åŠæ³•èƒ½å¤ŸåŠ¨æ€ç»´æŠ¤ dep æ•°ç»„è€Œä¸ç”¨å†æ¬¡ bfs åˆ†å±‚ï¼Ÿ \n\nå›é¡¾æ•´ä¸ª dinic è¿‡ç¨‹ï¼Œæ„Ÿæ€§ç†è§£ä¸€ä¸‹ dep æ•°ç»„çš„å˜åŒ–ï¼Œå‘ç°ç›¸å½“äºé™¤äº†æºç‚¹ä»¥å¤–çš„ç‚¹åœ¨ä¸æ–­è¿œç¦»æºç‚¹ -->","tags":["ç½‘ç»œæµ","æœ€å¤§æµ"],"categories":["å›¾è®º"]},{"title":"é…å¯¹å †åŸºæœ¬ä»‹ç»","path":"/post/pairing-heap/","content":"é£å¿«çš„å¯å¹¶å †\n\n## æ—¶é—´å¤æ‚åº¦\n\nè¿˜æ²¡æœ‰å®Œå…¨ä¸¥æ ¼çš„è¯æ˜ï¼Œä½†ä¸€èˆ¬è®¤ä¸ºé…å¯¹å †æ—¶é—´å¤æ‚åº¦å¦‚ä¸‹ï¼š  \nåˆ é™¤å †é¡¶å‡æ‘Š $\\operatorname{O}(\\log n)$  \næ’å…¥å…ƒç´  $\\operatorname{O}(1)$ \nåˆå¹¶ $\\operatorname{O}(1)$  \n\nè²Œä¼¼è¿™ä¸ªå¯èƒ½æ¯”æ–æ³¢é‚£å¥‘å †å¿«ï¼ˆ\n\n## èŠ‚ç‚¹å­˜å‚¨\n\né…å¯¹å †ä¸æ˜¯ä¸€ä¸ªäºŒå‰æ ‘ï¼Œä¸€èˆ¬é‡‡ç”¨â€œå·¦å„¿å­å³å…„å¼Ÿâ€è¡¨ç¤ºæ³•ï¼Œä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨è‡ªå·±ç¬¬ä¸€ä¸ªå„¿å­ä¸å³ä¾§ç¬¬ä¸€ä¸ªå…„å¼Ÿã€‚  \næœ‰ç‚¹æŠ½è±¡ï¼Ÿå®é™…ä¸Šç›¸å½“äºæ¯ä¸€ä¸ªèŠ‚ç‚¹çš„å„¿å­ä½¿ç”¨é“¾è¡¨ç»´æŠ¤ï¼Œç„¶åè¯¥èŠ‚ç‚¹è¿ç€ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚  \n![å­˜å‚¨](https://pic1.imgdb.cn/item/64688453e03e90d874db5ef4.jpg)\n\nä»£ç å°±éå¸¸å¥½å†™äº†  \n```cpp\nstruct Node {\n\tint val;\n\tNode *child, *nex; // ç¬¬ä¸€ä¸ªå„¿å­ï¼Œä¸‹ä¸€ä¸ªå…„å¼Ÿ\n};\n```\n\n## åˆå¹¶ä¸¤ä¸ªå †\n\næ¯”è¾ƒæ ¹èŠ‚ç‚¹å¤§å°ï¼ŒæŠŠæ ¹èŠ‚ç‚¹å¤§çš„å †ç›´æ¥æ”¹æˆæ ¹èŠ‚ç‚¹å°çš„å †æ ¹èŠ‚ç‚¹çš„å„¿å­å³å¯ã€‚  \nå›¾ç¤ºä¸­è¿˜æ˜¯ä½¿ç”¨æ ‘æœ¬èº«å½¢æ€ã€‚\n\n![åˆå¹¶](https://pic1.imgdb.cn/item/64688720e03e90d874def660.jpg)\n\n```cpp\nNode* meld(Node* x, Node* y) {  // ä¼ å…¥ä¸¤ä¸ªæ ¹èŠ‚ç‚¹\n\tif (x == null) // null ä¸ºç©ºèŠ‚ç‚¹\n\t\treturn y;\n\telse if (y == null)\n\t\treturn x;\n\tif (x->val < y->val) { // x æ¯” y å°ï¼Œy å½“ x çš„å„¿å­\n\t\ty->nex = x->child; // æ—§å„¿å­æ˜¯æ–°å„¿å­çš„å…„å¼Ÿ\n\t\tx->child = y; // æ–°å„¿å­æ˜¯ç¬¬ä¸€ä¸ªå„¿å­\n\t\treturn x;\n\t} else {\n\t\tx->nex = y->child;\n\t\ty->child = x;\n\t\treturn y;\n\t}\n}\n```\n\n## æ’å…¥æ–°èŠ‚ç‚¹\n\næ–°å»ºèŠ‚ç‚¹ï¼Œç„¶åå½“æˆä¸¤ä¸ªå †åˆå¹¶å³å¯ã€‚\n```cpp\nvoid push(int x) {\n\tNode* y = new_node(); // è·å–æ–°èŠ‚ç‚¹\n\ty->val = x;\n\tif (root == null) // å½“å‰å †ä¸ºç©ºçš„è¯ï¼Œæ–°èŠ‚ç‚¹ä¸ºæ ¹\n\t\troot = y;\n\telse\n\t\troot = meld(root, y); // å¦åˆ™å½“æˆä¸¤ä¸ªå †åˆå¹¶\n}\n```\n\n## å¼¹å‡ºå †é¡¶\n\nè²Œä¼¼è¦å†™å®Œäº†ï¼Œä½†æ˜¯å‰é¢å‡ ä¸ªæ“ä½œéƒ½æ²¡æœ‰å¯¹å †çš„æ€§è´¨è¿›è¡Œç»´æŠ¤ï¼Œå› æ­¤é‡å¤´æˆåœ¨è¿™ä¸ªéƒ¨åˆ†...  \n\nåˆ é™¤æ ¹èŠ‚ç‚¹ä¹‹åï¼Œé‡åˆ°çš„æ˜¯åŸæ¥çš„å­èŠ‚ç‚¹ä»¬ç»„æˆçš„æ£®æ—ï¼Œæƒ³åŠæ³•æŠŠå®ƒä»¬åˆå¹¶åˆ°ä¸€èµ·ã€‚  \næœ‰äº†ä¸Šé¢çš„åˆå¹¶æ“ä½œï¼Œå¾ˆå®¹æ˜“æƒ³åˆ°å°†è¿™äº›æ£®æ—é‡Œçš„æ ‘ä¸€æ£µä¸€æ£µåˆå¹¶çš„æ–¹æ³•ï¼Œä½†æ˜¯è¿™æ ·æ—¶é—´å¤æ‚åº¦å°±å¥” $\\operatorname{O}(n)$ å»äº†ï¼Œå› ä¸ºæ¯æ¬¡åˆ é™¤æ ¹èŠ‚ç‚¹éƒ½åªæ˜¯å•çº¯åœ°æŠŠå­èŠ‚ç‚¹æ¯”è¾ƒä¸€éï¼Œéå¸¸ç¼“æ…¢ã€‚  \näºæ˜¯è¯´åˆ°äº†è¯¥æ•°æ®ç»“æ„åç§°çš„ç”±æ¥â€”â€”â€œé…å¯¹â€ã€‚  \næˆ‘ä»¬æŠŠè¿™ä¸ªæ£®æ—ä¸¤ä¸¤é…å¯¹ä¹‹åå†åˆå¹¶æˆä¸€ä¸ªæ–°å †ï¼Œäºæ˜¯ç†æƒ³çŠ¶æ€ä¸‹ï¼Œå¤šæ¬¡åˆ é™¤æ ¹ç»“ç‚¹ï¼Œæ–°æ ¹èŠ‚ç‚¹çš„å­èŠ‚ç‚¹æ•°é‡å°†ä¸º $2$ï¼Œå‡æ‘Šæ—¶é—´å¤æ‚åº¦å¤§çº¦æ˜¯ $\\operatorname{O}(\\log n)$ çš„ã€‚\n\nå›¾ç¤ºè¿‡ç¨‹ï¼š  \n![å¼¹å‡ºå †é¡¶](https://pic1.imgdb.cn/item/64688db3e03e90d874e6d98a.jpg)\n\né¦–å…ˆå®ç°ä¸€ä¸ªç”¨äºé…å¯¹çš„å‡½æ•°ã€‚  \n```cpp\nNode* merges(Node* x) {\n\tif (x == null || x->nex == null) return x;  // x ä¸ºç©ºæˆ–è€… x æ²¡æœ‰ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹\n\tNode* y = x->nex;                           // y æ˜¯ x çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿ\n\tNode* c = y->nex;                           // c æ˜¯å†ä¸‹ä¸€ä¸ªå…„å¼Ÿ\n\tx->nex = y->nex = null;                     // æ‹†æ•£\n\treturn meld(merges(c), meld(x, y));         // x ä¸ y é…å¯¹åœ¨ä¸€èµ·ï¼Œå‰©ä¸‹çš„ç»§ç»­é…å¯¹\n}\n```\nç„¶åå¼¹å‡ºå †é¡¶çš„æ“ä½œå°±å¾ˆå¥½å†™äº†ã€‚  \n```cpp\nvoid pop() {\n\tNode* t = merges(root->child);\n\tremove(root);\n\troot = t;\n}\n```\n\n## æ¨¡æ¿\n```cpp\nusing i64 = long long;\n\n#define __SIZ 2000006\n\nstruct Node {\n    i64 val;\n    Node *child, *nex;\n} tree[__SIZ], *rubbish_bin[__SIZ]; // ææ—©åˆ†é…å†…å­˜ï¼Œnew å¤ªæ…¢äº†\nNode *null = tree, *tot = tree;\ni64 bintop;\n\nclass pairing_heap {\n    Node* root;\n\n    Node* new_node() {\n        Node* nod;\n        if (bintop)\n            nod = rubbish_bin[bintop--]; // åƒåœ¾å›æ”¶\n        else\n            nod = ++tot;\n        nod->child = null;\n        nod->nex = null;\n        return nod;\n    }\n\n    void remove(Node* x) {\n        rubbish_bin[++bintop] = x;\n    }\n\n    Node* meld(Node* x, Node* y) {  // åˆå¹¶ä¸¤ä¸ªå †\n        if (x == null)\n            return y;\n        else if (y == null)\n            return x;\n        if (x->val < y->val) {\n            y->nex = x->child;\n            x->child = y;\n            return x;\n        } else {\n            x->nex = y->child;\n            y->child = x;\n            return y;\n        }\n    }\n\n    Node* merges(Node* x) {\n        if (x == null || x->nex == null) return x;  // x ä¸ºç©ºæˆ–è€… x æ²¡æœ‰ä¸‹ä¸€ä¸ªå…„å¼ŸèŠ‚ç‚¹\n        Node* y = x->nex;                           // y æ˜¯ x çš„ä¸‹ä¸€ä¸ªå…„å¼Ÿ\n        Node* c = y->nex;                           // c æ˜¯ä¸‹ä¸€ä¸ªå…„å¼Ÿ\n        x->nex = y->nex = null;                     // æ‹†æ•£\n        return meld(merges(c), meld(x, y));         // x ä¸ y é…å¯¹åœ¨ä¸€èµ·ï¼Œå‰©ä¸‹çš„ç»§ç»­é…å¯¹\n    }\n\npublic:\n    pairing_heap() {\n        root = null;\n    }\n    void push(i64 x) {\n        Node* y = new_node();\n        y->val = x;\n        if (root == null)\n            root = y;\n        else\n            root = meld(root, y);\n    }\n    i64 top() {\n        return root->val;\n    }\n    void pop() {\n        Node* t = merges(root->child);\n        remove(root);\n        root = t;\n    }\n} q;\n\n```","tags":["å †"],"categories":["æ•°æ®ç»“æ„"]},{"title":"çº¿æ€§ä»£æ•°","path":"/post/basic-linear-algebra/","content":"## å‘é‡\n>ç±»æ¯”ä¸€ç»´æ•°ç»„    â€”â€” zzz\n\nåˆ†ä¸ºè¡Œå‘é‡ä¸åˆ—å‘é‡ã€‚  \nè¡Œå‘é‡å½¢å¦‚ $\\left[ 1,2,3 \\right]$  \nåˆ—å‘é‡å½¢å¦‚ $\\left[ \\begin{array}{l} 1 \\newline 2 \\newline 3\\newline 4 \\end{array} \\right]$  \nå®é™…ä¸Šé«˜ä¸­ whk é‡Œé¢çš„å‘é‡æ˜¯äºŒç»´å‘é‡ï¼ŒOI ä¸­ç”¨çš„å‘é‡å¤§éƒ¨åˆ†ä¸ºå¤šç»´å‘é‡ï¼Œæ•°ç»„ä¸­æ¯ä¸€ä¸ªå…ƒç´ å°±æ˜¯ä¸€ç»´çš„åæ ‡ã€‚  \nè¿ç®—çš„å‰æå¾ˆå®¹æ˜“æƒ³åˆ°ï¼šåŒç»´åº¦ï¼Œä¹Ÿå°±æ˜¯â€œæ•°ç»„â€é•¿åº¦å¾—ä¸€æ ·é•¿ã€‚\n\nåŠ æ³•ï¼šåˆ†é‡åˆ†åˆ«ç›¸åŠ  $[a,b,c]+[a,b,c]=[2a,2b,2c]$  \nå‡æ³•ï¼šåŠ æ³•é€†è¿ç®—ã€‚  \næ•°ä¹˜ï¼šæŠŠç³»æ•°ä¹˜åˆ°åˆ†é‡ä¸Š $3[a,b,c]=[3a,3b,3c]$  \næ•°é‡ç§¯ï¼ˆå†…ç§¯/ç‚¹ä¹˜ï¼‰ï¼šåˆ†é‡åˆ†åˆ«ç›¸ä¹˜å¹¶ç›¸åŠ ï¼Œé¡¾åæ€ä¹‰ï¼Œå¾—åˆ°ä¸€ä¸ªæ•°å€¼ $[a,b] \\cdot [c,d] = ac+bd$  \nå‘é‡ç§¯ï¼ˆå¤–ç§¯/å‰ä¹˜ï¼‰ï¼šå®é™…ä¸Šæ²¡åµç”¨ï¼Œ~~æ‰€ä»¥æˆ‘ä¸ä¼š~~  \n\n## çº¿æ€§åŸº\nçº¿æ€§ä»£æ•°ä¸­çš„å®šä¹‰ï¼š$\\mathbf V$ ä¸­çš„æå°çº¿æ€§æ— å…³å‘é‡é›†åˆ $\\{\\mathbf a,\\mathbf b,\\mathbf c\\dots \\}$ èƒ½å¤Ÿè¡¨ç¤ºå‡º $\\mathbf V$ ä¸­æ‰€æœ‰å‘é‡ã€‚  \nåœ¨ OI ä¸­ä½¿ç”¨çš„çº¿æ€§åŸºä¸ä¸Šé¢å®šä¹‰ç•¥æœ‰ä¸åŒï¼š\n\n### å¼‚æˆ–çº¿æ€§åŸº\n\nç»™å®šä¸€æ•°åˆ— $a$ï¼Œå…¶çº¿æ€§åŸº $s$ æ˜¯æ»¡è¶³ä»¥ä¸‹æ€§è´¨çš„æ•°åˆ—ï¼š\n\n1. $a$ ä¸­ä»»æ„ä¸€ä¸ªæ•°éƒ½å¯ä»¥ç”¨ $s$ ä¸­çš„æ•°å¼‚æˆ–å¾—åˆ°\n2. $s$ ä¸­ä»»æ„ä¸€äº›æ•°å¼‚æˆ–å’Œä¸ä¸º $0$\n3. $s$ é‡Œé¢çš„æ•°ä¸ªæ•°ä¸€å®šï¼Œå¹¶ä¸”åœ¨æ»¡è¶³æ€§è´¨ $1$ çš„æ¡ä»¶ä¸‹æ•°æœ€å°‘\n\nå¦‚æœè¿˜æ˜¯ä¸èƒ½ç†è§£ï¼Œåˆ«å¿˜äº†çº¿æ€§åŸº**ä¸ä¸€å®š**æ˜¯åŸæ•°åˆ—çš„å­é›†ã€‚","tags":["å‘é‡","çº¿æ€§ä»£æ•°","çŸ©é˜µ","çº¿æ€§åŸº"],"categories":["æ•°å­¦"]},{"title":"æ¦‚ç‡è®ºåŸºç¡€","path":"/post/basic-probability/","content":"## åŸºæœ¬æ¦‚å¿µ\n\näº‹ä»¶è¿ç®—\n$A+B:=A\\cup B$ ï¼Œç›¸å½“äºæˆ–è¿ç®—  \n$AB:=A\\cap B$ ï¼ŒåŒæ—¶å‘ç”Ÿ\n\n## æ¡ä»¶æ¦‚ç‡\n\n- æ¡ä»¶æ¦‚ç‡ï¼š$A$ å‘ç”Ÿçš„å‰æä¸‹ $B$ å‘ç”Ÿçš„æ¦‚ç‡ï¼Œè¡¨ç¤ºä¸º $P(B\\mid A):=\\cfrac{P(AB)}{P(A)}$\n- å…¨æ¦‚ç‡å…¬å¼ï¼š$B$ ä¾èµ–äºä¸€å †äº‹ä»¶ $A_1\\dots A_n$ çš„å…¶ä¸­ä¸€ä¸ªï¼Œåˆ™ $P(B)=\\sum^n_{i=1} P(A_i)P(B\\mid A_i)$\n\n- è´å¶æ–¯å…¬å¼ï¼š$P(A\\mid B) = \\cfrac{P(B\\mid A)P(A)}{P(B)}$\n  å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªæ¡ä»¶æ¦‚ç‡çš„æ¨å¯¼\n  $$\n  \\begin{aligned}\n  \\frac{P(B\\mid A)P(A)}{P(B)} &= \\cfrac{\\cfrac{P(AB)}{P(A)} P(A)}{P(B)} \\newline\n  &= \\frac{P(AB)}{P(B)} \\newline\n  &= P(A\\mid B)\n  \\end{aligned}\n  $$\n\n- è‹¥ $P(AB) = P(A)P(B)$ åˆ™ $A,B$ äº’ä¸ºç‹¬ç«‹äº‹ä»¶ï¼Œäºæ˜¯ $P(B\\mid A) = P(B)$\n\n## éšæœºå˜é‡\n\nåªä»‹ç»ç¦»æ•£å‹éšæœºå˜é‡ã€‚\n\nç¦»æ•£å‹éšæœºå˜é‡ $X$ï¼Œå¯ä»¥ç†è§£ä¸º $X$ æœ‰æœ‰é™ç§å–å€¼ï¼Œä¸”æ¯ä¸ªå–å€¼éƒ½æœ‰ä¸€ä¸ªæ¦‚ç‡ã€‚æ¢å¥è¯è¯´ï¼Œ$X$ çš„å–å€¼æ˜¯ä¸€ä¸ªæœ‰é™çš„é›†åˆï¼Œé›†åˆé‡Œé¢æ¯ä¸€ä¸ªå€¼éƒ½æœ‰ä¸€ä¸ªæ¦‚ç‡ï¼Œ$X$ æŒ‰ç…§æ¦‚ç‡å–å€¼ã€‚\n\néšæœºå˜é‡ç‹¬ç«‹æ€§ï¼šå¯¹äºä¸¤ä¸ªç‹¬ç«‹å˜é‡ $X Y$ï¼Œæœ‰ $P(X=x_i, Y=y_i) = P(X=x_i)P(Y=y_i)$ ï¼ˆ$,$ è¡¨ç¤º**ä¸”**ï¼‰    \nå€’è¿‡æ¥ä¹Ÿæ˜¯æ­£ç¡®çš„ã€‚\n\n## æœŸæœ›\nä¸€ä¸ªéšæœºå˜é‡å–å€¼å¯¹æ¦‚ç‡çš„åŠ æƒå¹³å‡æ•°ã€‚  \n$E(X) = \\sum_i x_ip_i$ï¼Œ$x_i$ ä»£è¡¨å¯èƒ½çš„å–å€¼ï¼Œ$p_i$ ä»£è¡¨å–å€¼å¯¹åº”çš„æ¦‚ç‡ã€‚\n\næœŸæœ›çš„çº¿æ€§æ€§ï¼š$E(aX+b)=aE(X)+b$  \næˆ‘ä»¬å¯ä»¥è®¾ $X$ çš„æ„ä¹‰ä¸ºå‡åŒ€éª°å­å¯èƒ½æ·å‡ºçš„ç‚¹æ•°ï¼Œäºæ˜¯ä¸Šé¢çš„ä¸œè¥¿å°±å¯ä»¥è½»æ¾æ„Ÿæ€§ç†è§£äº†~\n\néšæœºç‹¬ç«‹å˜é‡çš„ä¹˜ç§¯ï¼š$E(XY)=E(X)E(Y)$","tags":["æ¦‚ç‡"],"categories":["æ•°å­¦"]},{"title":"ç»„åˆæ•°å­¦åŸºç¡€","path":"/post/basic-combinatorics/","content":"## åŸºç¡€æ’åˆ—ç»„åˆ\n\n~~å®é™…ä¸Šä¸»è¦è¿˜æ˜¯ç»„åˆ~~\n\n### å¸¸ç”¨è®°å·\n\n- $n \\in \\mathbb N,n!:= 1\\times 2\\times 3\\times \\dots \\times (n-1) \\times n$ ç§°ä¸ºéè´Ÿæ•´æ•° $n$ çš„é˜¶ä¹˜ï¼Œç‰¹æ®Šåœ°ï¼Œ$0! =1$ã€‚\n- $n,m\\in \\mathbb N,n\\geqslant m, \\binom{n}{m}=\\frac{n!}{m!(n-m)!} \\text{ a.k.a } C^m_n$ è¡¨ç¤º $n$ ä¸ªæ•°ä¸­æ— åºåœ°é€‰ $m$ ä¸ªæ•°çš„æ–¹æ¡ˆæ•°ã€‚\n- $n,m\\in \\mathbb N,n\\geqslant m, {n \\brack m} \\text{ a.k.a } s(n,m),s_u(n,m)$ ç§°ä½œç¬¬ä¸€ç±»æ— ç¬¦å·æ–¯ç‰¹æ—æ•°ï¼Œè¡¨ç¤º $n$ ä¸ªæ•°ä¸­æ’æˆ $m$ ä¸ªåœ†æ’åˆ—çš„æ–¹æ¡ˆæ•°~~ä¸çŸ¥é“ä»€ä¹ˆæ˜¯åœ†æ’åˆ—~~\n- $n,m\\in \\mathbb N,n\\geqslant m, {n \\brace m} \\text{ a.k.a } S(n,m)$ ç§°ä½œç¬¬äºŒç±»æ–¯ç‰¹æ—æ•°ï¼Œå³ $n$ ä¸ªä¸¤ä¸¤ä¸åŒçš„æ•°åˆ†æˆ $m$ ä¸ªäº’ä¸åŒºåˆ†çš„éç©ºé›†åˆçš„æ–¹æ¡ˆæ•°\n\n### é¢„å¤„ç†ç»„åˆæ•°\n\n#### é€’æ¨æ³•\n\nç»„åˆæ•°é€’æ¨ï¼š$\\tbinom{n}{m} = \\tbinom{n-1}{m-1} + \\tbinom{n-1}{m}$  \nè¯æ˜ï¼šå¯¹äºè¿˜éœ€è¦é€‰ $j$ ä¸ªï¼Œè¿˜å‰© $i$ ä¸ªæ²¡é€‰çš„æƒ…å†µï¼Œåˆ™å¯¹äºä¸€ä¸ªè‹¹æœæ¥è¯´ï¼Œä¸é€‰å®ƒçš„æ–¹æ¡ˆæ•°ä¸º $\\tbinom{i-1}{j}$ï¼Œé€‰å®ƒçš„æ–¹æ¡ˆæ•°ä¸º $\\tbinom{i-1}{j-1}$ã€‚\n\n#### é˜¶ä¹˜æ³•\n\né—®é¢˜ï¼šç»™å®š $p$ ä¸å¤šç»„ $a,b$ ï¼Œæ±‚ $\\tbinom{a}{b} \\bmod p$ã€‚\n\nè®¾ $fact_i = i! \\bmod p,infact_i = fact_i^{-1}\\pmod p$ï¼Œæ ¹æ®[é€†å…ƒ](/post/multi-inverse-element)çš„æ€§è´¨å¯å¾—\n\n$$\n\\begin{aligned}\n\\binom{a}{b} &= \\frac{a!}{b!(a-b)!}\\newline\n&= \\frac{form_a \\cdot inform_b}{(a-b)!}\\newline\n&= form_a \\cdot inform_b \\cdot inform_{a-b}\n\\end{aligned}\n$$\n\n## äºŒé¡¹å¼å®šç†\n\näºŒé¡¹å¼å°±æ˜¯åªæœ‰ä¸¤ä¸ªé¡¹çš„å¤šé¡¹å¼ï¼Œå¦‚ $a+b$\n\näºŒé¡¹å¼å®šç†å¦‚ä¸‹ï¼š\n\n$$\n(x+y)^n = \\sum^n_{k=0} \\binom nk x^{n-k}y^k\n$$\n\nå¯ä»¥åˆ©ç”¨ç»„åˆæ–¹æ³•è¯æ˜ï¼š  \nå‡è®¾æœ‰ $n$ ä¸ª $(x+y)$ ç›¸ä¹˜ï¼Œç”±å¤šé¡¹å¼ä¹˜æ³•çš„æ³•åˆ™å¯ä»¥çŸ¥é“ï¼Œå¯¹äº $x^ky^{n-k}$ è¿™ä¸€é¡¹æ¥è¯´ï¼ˆå®¹æ˜“æƒ³åˆ° $x,y$ çš„æŒ‡æ•°å’Œä¸º $n$ï¼‰ï¼Œå®ƒæ¥è‡ªäº $n$ ä¸ªæ‹¬å·ä¸­çš„ $k$ ä¸ª $x$ ä¸å‰©ä¸‹ $n-k$ ä¸ªæ‹¬å·ä¸­çš„ $n-k$ ä¸ª $y$ï¼Œä¹Ÿå°±æ˜¯è¯´â€œ$n$ ä¸ªæ‹¬å·ä¸­é€‰ $k$ ä¸ª $x$ çš„æ–¹æ¡ˆæ•°â€å°±æ˜¯è¯¥é¡¹çš„ç³»æ•°ï¼Œå³ $\\binom nk$ã€‚\n\n## å¢å¡æ–¯å®šç†\n\nä¸‹æ–¹ $p$ å‡ä¸ºè´¨æ•°\n\n$$\n\\binom nm \\bmod p = \\binom { \\lfloor n/p \\rfloor } {\\lfloor m/p \\rfloor} \\binom {n\\bmod p}{m \\bmod p}\\bmod p\n$$\n\n### å¼•ç†\n\n$$\n(a+b)^p \\equiv a^p+b^p \\pmod p\n$$\n\nè¯æ˜ï¼šè€ƒè™‘ $\\tbinom pk$ ï¼Œæ˜“å¾—åˆ°$\\binom pk = \\frac{p!}{n!(p-n)!}$ï¼Œè¿™ç©æ„ $\\bmod p$ åŸºæœ¬ä¸Šæ˜¯ $0$ ï¼Œäºæ˜¯æˆ‘ä»¬å¼€å§‹æŠŠå®ƒæ‰”åˆ°ä¸Šé¢ [äºŒé¡¹å¼å®šç†](#äºŒé¡¹å¼å®šç†) é‡Œé¢æƒ³ã€‚  \nåˆ†ä¸¤ç§æƒ…å†µ\n\n- $n \\neq p$ ä¸” $n\\neq1$\n  æ­¤æ—¶ $p$ æ²¡æ³•è¢«åˆ†æ¯ä»»ä½•ä¸€ä¸ªå› æ•°æ•´é™¤ï¼Œå› æ­¤ä¸€å®šä¼šåœ¨å€¼ä¸­è¢«ä¿ç•™ä¸‹æ¥ï¼Œåˆ™è¯¥å¼è¢« $p$ æ•´é™¤\n- $n=p$ æˆ– $n=1$\n  å®¹æ˜“å¾—åˆ°æ­¤æ—¶è¯¥å¼å€¼ä¸º $1$\n\näºæ˜¯æˆ‘ä»¬å°±æŠŠäºŒé¡¹å¼å®šç†ä¸­çš„æ‰€æœ‰é¡¹è®¨è®ºå®Œäº†ã€‚\n\n$$\n(x+y)^p = \\binom p 0 x^p + \\binom p1 x^{p-1}y^1 + \\dots + \\binom {p}{p-1}x^{p-(p-1)}y^{p-1} + \\binom pp y^p\n$$\n\næ ¹æ®ä¸Šé¢çš„è®¨è®ºï¼Œå·¦å³ä¸¤è¾¹çš„ä¸¤é¡¹ç³»æ•°ä¸º $1$ï¼Œå…¶ä½™è¢« $p$ æ•´é™¤ï¼Œä¹Ÿå°±æ˜¯è¢«æ¨¡æ‰äº†ï¼Œäºæ˜¯æœ€åå‰©ä¸‹ï¼š\n\n$$\n(x+y)^p=x^p+y^p\n$$\n\n### è¯æ˜\n\n[å¼•ç†](#å¼•ç†) æ¨å¯¼çš„è¿‡ç¨‹ä¸­æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥æŠŠå®ƒç”¨åœ¨å¤šé¡¹å¼èº«ä¸Š\n\nè€ƒè™‘ä¸€ä¸ªäºŒé¡¹å¼ $(1+x)^n \\bmod p$ï¼Œè®¾ $n = kp+r$ï¼Œåˆ™åœ¨ $\\bmod p$ æ„ä¹‰ä¸‹æœ‰ï¼š\n\n$$\n\\begin{aligned}\n(1+x)^n &= (1+x)^{kp}(1+x)^r \\newline\n&= (1+x^p)^k(1+x)^r \\newline\n&= (1+x^p)^{\\lfloor n/p \\rfloor}(1+x)^{n\\bmod p}\n\\end{aligned}\n$$\n\nç”¨äºŒé¡¹å¼å®šç†æ‹†å¼€çš„è¯ï¼Œå¯ä»¥è§‚å¯Ÿä¸€ä¸‹è¿™ä¸ªå¼å­çš„å†…éƒ¨ç»“æ„\n\n$$\n(1+x)^n = \\binom n0 x^1 + \\binom{n}{1}x^2+\\dots+\\binom n{n-1}x^{n-1} + \\binom nn x^n\n$$\n\nç°åœ¨æˆ‘ä»¬çš„ç›®æ ‡æ˜¯æ±‚ $\\binom nm$ï¼Œå®é™…ä¸Šåœ¨ä¸Šé¢çš„å¼å­é‡Œå°±æ˜¯ $x^m$ çš„ç³»æ•°ã€‚  \næƒ³åŠæ³•ä»å‰é¢æ¨å¯¼å‡ºæ¥çš„ä¸œè¥¿è¡¨ç¤º $x^m$ çš„ç³»æ•°ï¼Œè¿™é‡Œé‡‡ç”¨ç±»ä¼¼çš„åŠæ³•ï¼ŒæŠŠ $m$ æ‹†å¼€ä¸º $\\lfloor m/p \\rfloor p + (m \\bmod p)$ï¼Œäºæ˜¯ç›®æ ‡è½¬åŒ–ä¸º**å¦‚ä½•åœ¨æœ€ä¸Šé¢çš„å¼å­ä¸­æ‰¾åˆ° $x$ ç›¸ä¹˜è¡¨ç¤ºå‡ºå·¦ä¾§çš„æ¬¡æ•°**ã€‚  \nåˆ†å¼€è€ƒè™‘è´¡çŒ®ï¼Œ$\\lfloor m/p \\rfloor p$ åªèƒ½ä» $(1+x^p)^{\\lfloor n/p \\rfloor}$ å¤„å¾—åˆ°è´¡çŒ®ï¼Œå› ä¸ºè¿™ç©æ„æ˜¾ç„¶æ˜¯ä¸ª $p$ çš„å€æ•°ï¼Œè€Œå¦å¤–åŠè¾¹å¼å­ä¸­ $n \\bmod p$ ç»å¯¹å°äº $p$ã€‚  \näºæ˜¯æˆ‘ä»¬ä¹Ÿå°±è€ƒè™‘åˆ°äº† $m\\bmod p$ çš„è´¡çŒ®åº”å½“ä» $n \\bmod p$ ä¸­æ¥ï¼Œå› ä¸º $\\lfloor n/p \\rfloor > p$ã€‚  \nè¿™æ ·å°±æ‰¾åˆ°äº†å¯¹ $\\binom nm$ çš„æ€»è´¡çŒ®ï¼Œä» $n \\bmod p$ ä¸­é€‰ $m \\bmod p$ ä¸ªï¼Œå¦å¤–åŠè¾¹åŒç†ï¼Œåˆ™ä¸º\n\n$$\n\\binom nm \\bmod p = \\binom { \\lfloor n/p \\rfloor } {\\lfloor m/p \\rfloor} \\binom {n\\bmod p}{m \\bmod p}\\bmod p\n$$","tags":["ç»„åˆæ•°å­¦"],"categories":["æ•°å­¦"]},{"title":"æ¨¡æ„ä¹‰ä¸‹çš„ä¹˜æ³•é€†å…ƒ","path":"/post/multi-inverse-element/","content":"è‡ªå­¦é€†å…ƒ...\n\n## å®šä¹‰\n\nOI ä¸­å¸¸ç”¨â€œé€†å…ƒâ€ä½œâ€œæ¨¡æ„ä¹‰ä¸‹çš„ä¹˜æ³•é€†å…ƒâ€ã€‚\n$$\nax\\equiv 1 \\pmod b\n$$\nåˆ™ $x$ ä¸ºæ¨¡ $b$ æ„ä¹‰ä¸‹çš„ $a$ çš„é€†å…ƒï¼Œè®°ä½œ $a^{-1}$ ã€‚  \né€šä¿—æ¥è®²ï¼Œ$a\\cdot a^{-1} \\bmod b = 1$ \n\n## ç”¨é€”\n\n~~å…ˆè®²ç”¨é€”å†è¯´æ±‚æ³•ï¼Ÿ~~\n\nå¯¹äº $\\frac ab$ï¼Œæƒ³è¦å¯¹ç»“æœå–æ¨¡ï¼Œä½†æ˜¯å®é™…ä¸Š $\\frac ab \\bmod p \\neq \\frac {a\\bmod p}{b \\bmod p}$   \néš¾é“æ²¡æœ‰åŠæ³•äº†å—ï¼Ÿ  \nå¹¶ä¸æ˜¯ã€‚  \n\nè®¾ $b^{-1}$ ä¸º $b \\bmod p$ æ„ä¹‰ä¸‹çš„é€†å…ƒï¼Œåˆ™æœ‰\n$$\n\\frac ab \\bmod p = a\\cdot b^{-1}\n$$\n## æ±‚å•ä¸ªé€†å…ƒ\n\n### æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•\næ­¤æ³•ç›¸å¯¹äºå¿«é€Ÿå¹‚æ¥è¯´ï¼Œé™åˆ¶å°‘ï¼Œå¸¸æ•°å°ï¼Œå› æ­¤æ¯”è¾ƒä¼˜ï¼Œä¸å†å†™å¿«é€Ÿå¹‚æ³•ã€‚~~å®é™…ä¸Šæ˜¯æˆ‘ä¸ä¼šå¿«é€Ÿå¹‚æ³•~~\n\nå®¹æ˜“å‘ç°ä¹˜æ³•é€†å…ƒå®šä¹‰å¼å°±æ˜¯ä¸€ä¸ªæ™®æ™®é€šé€šçš„åŒä½™æ–¹ç¨‹  \näºæ˜¯å¯ä»¥è½»æ¾ä½¿ç”¨æ‰©æ¬§æ±‚è§£  \nè¯¦è§ [åŒä½™æ–¹ç¨‹ä¸äºŒå…ƒä¸€æ¬¡ä¸å®šæ–¹ç¨‹](/post/exgcd)\n\n## çº¿æ€§æ±‚é€†å…ƒ\n\nç”±äºçº¿æ€§æ±‚ä»»æ„å¤šä¸ªæ•°é€†å…ƒè¿‡äºç®€å•ï¼Œæ‰€ä»¥ç›´æ¥è®°å½•è¿™ä¸ªè§£æ³•ã€‚\n\nè€ƒè™‘é€†å…ƒçš„å®šä¹‰ï¼Œå®¹æ˜“æƒ³åˆ°å¯¹äº $a^{-1}b^{-1}$ æ¥è¯´ï¼Œä¹˜ $a$ å³å¯æ¶ˆé™¤ $a^{-1}$ çš„å½±å“ï¼Œå³\n$$\na\\cdot a^{-1}b^{-1} \\bmod p = (a\\cdot a^{-1} \\bmod p)b^{-1} = b^{-1}\n$$\nä¸æ­¤åŒæ—¶ï¼Œä¸¤ä¸ªæ•°ç§¯çš„é€†å…ƒç­‰äºä¸¤ä¸ªæ•°é€†å…ƒçš„ç§¯  \nè¯æ˜ï¼š\n$$\n\\begin{aligned}\naa^{-1} \\bmod p &= 1\\newline\nbb^{-1} \\bmod p &= 1\\newline\naa^{-1} \\cdot bb^{-1} \\bmod p &= 1 \\newline\nab \\cdot a^{-1}b^{-1} \\bmod p &= 1 \\newline\n\\therefore (ab)^{-1} = a^{-1}b^{-1}\n\\end{aligned}\n$$\nå› æ­¤å¯¹äºä»»æ„æ•°åˆ— $a_1 \\dots a_n$ ï¼Œå¯ä»¥å…ˆæ±‚å‡ºå…¶å‰ç¼€ç§¯ $s_i$ ï¼Œç„¶ååˆ©ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—æ±‚ç´¯ç§¯çš„é€†å…ƒ $f_n = s_n^{-1}$ï¼Œç„¶åä»åå¾€å‰çº¿æ€§å¤æ‚åº¦æ±‚å‡ºå‰ç¼€ç§¯çš„é€†å…ƒ $f_{i-1} = f_ia_i \\bmod p$    ï¼Œæœ€åä»å‰å¾€åæ‰«ä¸€éæ±‚å‡ºæ¯ä¸ªæ•°çš„é€†å…ƒ $inv_i = s_{i-1}f_i$ å³å¯ã€‚\n\n```cpp\ni32 tmp;\n\nvoid exgcd(i32 a, i32 b, i32& x, i64& y) {\n    if (!b) {\n        x = 1, y = 0;\n        return;\n    }\n    exgcd(b, a % b, x, y);\n    tmp = x;\n    x = y;\n    y = tmp - (a / b) * y;\n}\n\n#define N 5000001\n\ni32 a[N], s[N], f[N];\ni64 n, p, k, ans, ktmp, y;\n\nint main() {\n    read(n, p, k);\n    s[0] = 1;\n    for (i32 i = 1; i <= n; ++i)\n        read(a[i]), s[i] = s[i - 1] % p * a[i] % p;\n    exgcd(s[n], p, f[n], y);\n    // write(p, '\\n');\n    for (i32 i = n - 1; i; --i) {\n        f[i] = f[i + 1] % p * a[i + 1] % p;\n    }\n    f[1] %= p;\n    ans = k * f[1] % p;\n    ktmp = k % p;\n    for (i32 i = 2; i <= n; ++i) {\n        f[i] = s[i - 1] % p * f[i] % p;\n        ktmp = (ktmp * k) % p;\n        ans = ((ans % p + ktmp * f[i]) % p + p) % p;\n    }\n    write(ans, '\\n');\n    \n    return 0;\n}\n```","tags":["æ•°è®º","åŒä½™"],"categories":["æ•°å­¦"]},{"title":"åŒä½™æ–¹ç¨‹ç»„","path":"/post/crt/","content":"åŒä½™æ–¹ç¨‹ç»„å½¢å¼å¦‚ä¸‹ï¼š\n$$\n\\begin{cases}\nx \\equiv a_1 \\pmod {n_1} \\newline\nx \\equiv a_2 \\pmod {n_2} \\newline\n\\dots \\newline\nx \\equiv a_k \\pmod {n_k}\n\\end{cases}\n$$\n\n## ä¸­å›½å‰©ä½™å®šç†\n\n### åŸç†\n\næœ¬ç®—æ³•ç”¨äºæ‰€æœ‰ $n_i$ ä¸¤ä¸¤äº’è´¨çš„æƒ…å†µã€‚\n\nå®é™…ä¸Šç±»ä¼¼æ„é€ ï¼Œå…ˆæŠŠ $n_1$ ç´¯ç§¯èµ·æ¥\n$$\nM = \\prod_{i=1}^k n_i\n$$\n$$\nM_i = \\frac M{n_i}\n$$\n\nå…ˆè€ƒè™‘å¦‚ä½•æ„é€ å‡ºä¸€ä¸ªåŒä½™æ–¹ç¨‹çš„ç‰¹è§£ï¼Œè®¾ $M_i ^{-1}$ ä¸º $M_i$ åœ¨ $\\bmod n_i$ æ„ä¹‰ä¸‹çš„é€†å…ƒ,æƒ³åˆ° $M_iM_i^{-1} = 1\\pmod {n_i}$ï¼Œäºæ˜¯æœ‰ $x = a_i M_i M_i^{-1}$ æ»¡è¶³æ–¹ç¨‹ $x \\equiv a_i \\pmod {n_i}$ ã€‚  \nè¿™å®é™…ä¸Šå°±æ˜¯ä¸Šé¢å®šä¹‰ $M_i$ ä¸ºè´¨æ•°çš„åŸå› ï¼šéœ€è¦ä¿è¯æœ‰é€†å…ƒå­˜åœ¨ã€‚\n\nè‡³äºè§£çš„åˆå¹¶ï¼ŒæŠŠ $x$ ç›¸åŠ å³å¯ã€‚å³ $\\sum_{i=1}^k a_iM_iM_i^{-1}$ã€‚é€šè§£å³ä¸º $nM+ \\sum_{i=1}^k a_iM_iM_i^{-1}, n\\in \\mathbb Z$ ã€‚ä¸ºä»€ä¹ˆèƒ½è¿™æ ·åˆå¹¶ï¼Ÿå› ä¸ºå¯¹äº $i,j,i\\neq j$ æ¥è¯´ï¼Œå¿…ç„¶å­˜åœ¨ $n_j \\mid M_i$ï¼Œå› ä¸º $n_i$ ä¸¤ä¸¤äº’è´¨ï¼Œ$M_i$ çš„å› å­åŒ…å« $n_j$ï¼Œå› æ­¤ä¸ä¼šå¯¹å·²ç»æ¨å‡ºæ¥çš„è§£é€ æˆä»»ä½•å½±å“ã€‚\n\né€šè§£æ–¹é¢ï¼šå®¹æ˜“æƒ³åˆ°ï¼ŒåŠ å‡ $nM$ ä¹Ÿä¸ä¼šå¯¹è§£çš„å¯è¡Œæ€§é€ æˆä»»ä½•å½±å“ã€‚\n\n### å®ç°\n\n```cpp\nllint ex_gcd(llint u, llint v, llint& x, llint& y) {\n    if (!v) {\n        x = 1, y = 0;\n        return u;\n    }\n\n    llint g = ex_gcd(v, u % v, x, y);\n    llint temp = x;     \n    x = y;\n    y = temp - u / v * y;\n    return g;\n}\n\nllint crt() {\n    llint tmp = 1, ans = 0;\n    for (int i = 1; i <= n; ++ i) tmp *= b[i];\n    for (int i = 1; i <= n; ++ i) {\n        llint m = tmp / b[i], x, y;\n        ex_gcd(m, a[i], x, y);\n        ans = (ans + n[i] * m * x % tmp) % tmp;\n    }\n    return (ans % tmp + tmp) % tmp;\n}\n```\n\n## æ‰©å±•ä¸­å›½å‰©ä½™å®šç†/åŒä½™æ–¹ç¨‹åˆå¹¶\n\n### åŸç†\n\nå½“ $n_i$ ä¸äº’è´¨çš„æ—¶å€™ï¼Œä¸Šé¢åšæ³•å°±ä¸å†é€‚ç”¨ï¼ˆä¸èƒ½ä¿è¯é€†å…ƒå­˜åœ¨ï¼‰ï¼Œæ­¤æ—¶æˆ‘ä»¬è€ƒè™‘é€ä¸€åˆå¹¶åŒä½™æ–¹ç¨‹ç»„ã€‚  \næ–¹æ³•æ˜¯ä½¿ç”¨ $\\operatorname{ex\\_gcd}$\n\nå‡è®¾æ–¹ç¨‹ç»„åªæœ‰ä¸¤ä¸ªæ–¹ç¨‹\n\n$$\n\\begin{cases}\nx \\equiv a_1 \\pmod{n_1} \\newline\nx \\equiv a_2 \\pmod{n_2} \\newline\n\\end{cases}\n$$\n\nå¯ä»¥å†™ä½œ\n\n$$\n\\begin{cases}\nx = a_1 + k_1n_1 \\newline\nx = a_2 + k_2n_2\n\\end{cases}\n$$\nåˆ™ $a_1 + k_1n_1 = a_2 + k_2n_2$ã€‚  \nç§»é¡¹ï¼Œå¾— $k_1n_1 - k_2n_2 = a_2-a_1$ ï¼Œæ¥ä¸‹æ¥æŒ‰ç…§æ‰©å±•æ¬§å‡ é‡Œå¾—çš„æ€è·¯æ¨å¯¼ã€‚  \nè®¾ $g = \\gcd(n_1,n_2)$ï¼Œè‹¥ä½¿ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•ï¼Œå¯ä»¥æ±‚å‡º $n_1k_1 + n_2(-k_2) = \\gcd(n_1,n_2)$ çš„ä¸€ç»„ç‰¹è§£ $k_1, k_2$ï¼Œå³ \n$$\n\\begin{aligned}\nn_1k_1 + n_2(-k_2) &= g \\newline\n(k_1 \\cdot \\frac{a_2-a_1}{g})n_1 + (-k_2 \\cdot \\frac{a_2-a_1}{g})n_2 &= a_2-a_1\n\\end{aligned}\n$$\næŠ½å‡ºåˆšæ‰è¡¨ç¤º $x$ çš„æ–¹ç¨‹ç»„çš„ä¸€æ¡ï¼Œå¾—åˆ° $x_0 = a_1 + k_1n_1$ï¼Œ$k_1$ çš„é€šè§£ä¸º $k_1 + \\cfrac{n_2}gp, p\\in \\mathbb Z$ï¼Œåˆ™\n$$\n\\begin{aligned}\nx &= a_1 + (k_1+\\cfrac{n_2}gp)n_1 \\newline\n&= n_1k_1 + a_1 + \\cfrac{n_1n_2}gp \\newline \n&= n_1k_1 + a_1 + \\operatorname{lcm}(n_1,n_2)\\cdot p\n\\end{aligned}\n$$\næ˜¾ç„¶æˆ‘ä»¬å¯ä»¥æŠŠè¿™ä¸ªç­‰å¼å†™æˆåŒä½™å¼çš„å½¢å¼ï¼ˆæ²¡å¿…è¦ï¼‰\n\n$$\n\\begin{aligned}\nx_0 &\\equiv x \\pmod {\\operatorname{lcm}(n_1,n_2)} \\newline\nx&\\equiv n_1k_1 + a_1  \\pmod {\\operatorname{lcm}(n_1,n_2)}\n\\end{aligned}\n$$\n$\\operatorname{lcm}(n_1,n_2),n_1k_1+a_1$ éƒ½æ˜¯å·²çŸ¥çš„ï¼Œå› æ­¤æ–¹ç¨‹å¯è§£ï¼Œåˆå¹¶å®Œæˆã€‚\n\n### å®ç°\n\n```cpp\n#define N 100005\n\ni128 ex_gcd(i128 a, i128 b, i128& x, i128& y) {\n    if (b) {\n        i128 tmp;\n        i128 g = ex_gcd(b, a % b, x, y);\n        tmp = x;\n        x = y;\n        y = tmp - a / b * y;\n        return g;\n    } else {\n        x = 1, y = 0;\n        return a;\n    }\n}\n\ni64 n;\ni128 a[N], m[N];  // a === x (mod m)\n\ni128 ex_crt() {\n    i128 k1, k2, a1, m1, a2, m2, c, gc, g;\n    a1 = a[1], m1 = m[1];\n    for (i64 i = 2; i <= n; ++i) {\n        a2 = a[i], m2 = m[i], c = ((a2 - a1) % m2 + m2) % m2;\n        g = ex_gcd(m1, m2, k1, k2);\n        gc = m2 / g;\n        k1 = k1 % gc * ((c / g) % gc) % gc;\n        a1 = k1 * m1 + a1;\n        m1 *= gc;\n        a1 = (a1 % m1 + m1) % m1;\n    }\n    return a1;\n}\n\nint main() {\n    read(n);\n    for (i64 i = 1; i <= n; ++i) {\n        read(m[i], a[i]);\n    }\n\n    write(ex_crt(), '\\n');\n    return 0;\n}\n```","tags":["æ•°è®º","åŒä½™"],"categories":["æ•°å­¦"]},{"title":"ç¦»æ•£å¯¹æ•°ï¼ˆBSGSï¼‰","path":"/post/bsgs/","content":"ç¦»æ•£å¯¹æ•°é—®é¢˜ï¼Œå³å·²çŸ¥ $a,b,p$ï¼Œæ±‚æ–¹ç¨‹ $a^x \\equiv b \\pmod p$ æœ€å°éè´Ÿæ•´æ•°è§£ã€‚\n\n## BSGS ç®—æ³•\n\n### åŸç†\næ€è€ƒæš´åŠ›åšæ³•ï¼Œå³æšä¸¾ $x$ ç›´åˆ°æ»¡è¶³æ–¹ç¨‹ï¼Œå¤æ‚åº¦ $\\operatorname{O}(p)$ \n\nBSGS ç±»ä¼¼ä¸€ç§åˆ†å—æ€æƒ³ï¼Œä¹Ÿæœ‰ç‚¹åƒæŠ˜åŠæœç´¢ï¼ˆ\n\né¦–å…ˆæŠŠ $x$ æ‹†å¼€ï¼Œæ‹†æˆ $km - r$ ï¼Œç„¶åè¿›è¡Œå˜æ¢ï¼š\n$$\n\\begin{aligned}\na^x &\\equiv b \\pmod p \\newline\na^{km-r} &\\equiv b \\pmod p \\newline\n\\frac {a^{km}}{a^r} & \\equiv b \\pmod p \\newline\na^{km} & \\equiv ba^r \\pmod p\n\\end{aligned}\n$$\nè¿™é‡Œçš„ $m$ æˆ‘ä»¬è®¾ä¸ºä¸€ä¸ªå›ºå®šå€¼ï¼Œç„¶ååˆ†åˆ«æšä¸¾ç­‰å¼ä¸¤è¾¹çš„ $k,r$ï¼Œå­˜å“ˆå¸Œè¡¨ï¼ˆæ˜ å°„ï¼‰ï¼Œç„¶ååŒ¹é…å³å¯ï¼Œå…¶ä¸­ $k \\in [0, \\cfrac pm], r \\in [0,m]$ ï¼Œå¤æ‚åº¦ $\\operatorname{O}(\\max(m,\\cfrac pm))$ ï¼Œåˆ™ $m=\\sqrt p$ æ—¶æœ€ä¼˜ï¼Œå¤æ‚åº¦æ˜¯ä¸€ä¸ªæ ¹å·ã€‚\n\n### å®ç°\n\n```cpp\nread(n, p);\nb = 10;\nn = n * 9 + 1;\n\nb = (b % p + p) % p;\nn = (n % p + p) % p;\n\nif (b == 0) {\n\tif (n == 0) output(1);\n\tfailed();\n}\nif (n == 1) {\n\toutput(0);\n}\nif (b == 1) {\n\tfailed();\n}\n\ni128 m = sqrt(p), z = n;\nfor (i128 i = 0; i < m; ++i) {\n\tmp[z] = i; // å­˜å‚¨çš„å®é™…ä¸Šæ˜¯æ¨¡æ•°æ‰€å¯¹åº”çš„æœ€å¤§ rï¼ˆä»å°åˆ°å¤§æšä¸¾ï¼ŒæŒ¨ä¸ªè¦†ç›–ï¼‰\n\tz = z * b % p;\n}\nz = binpow(b, m);\nfor (i128 i = 1, pian = z; i <= p / m + 10; ++i) {\n\tauto it = mp.find(z);\n\tif (it != mp.end()) {\n\t\toutput(m * i - it->second);\n\t}\n\tz = z * pian % p;\n}\nfailed();\n```","tags":["æ•°è®º","åŒä½™","BSGS"],"categories":["æ•°å­¦"]},{"title":"NOI Linux æŒ‡åŒ—","path":"/post/noi-linux-2-guide/","content":"ä»ç»ˆç«¯å¼€å§‹ä»€ä¹ˆæ˜¯ç»ˆç«¯ï¼Ÿå¯¹äºä¸€ä¸ªè®¡ç®—æœºæ¥è¯´ï¼Œè¾“å…¥è¾“å‡ºè®¾å¤‡æ˜¾ç„¶ä¸æ˜¯å¿…éœ€å“ï¼ˆè„±ç¦»ä½¿ç”¨çš„èŒƒç•´ï¼Œæ²¡æœ‰è¾“å…¥è¾“å‡ºè®¾å¤‡å®ƒä¹Ÿèƒ½é€šç”µæˆä¸ºä¸€ä¸ªå‰ç¥¥ç‰©ï¼‰ï¼Œè€Œæœ€åˆäººä»¬ä¸ºäº†ä¸è®¡ç®—æœºäº’åŠ¨ï¼Œå‘æ˜äº†ç»ˆç«¯ï¼Œå³äººç±»ç”¨æˆ·ä¸è®¡ç®—æœºäº¤äº’çš„è®¾å¤‡ã€‚å¯¹äºä¸€ä¸ªè®¡ç®—æœºæ“ä½œç³»ç»Ÿï¼Œå…¶è¿è¡Œè¿‡ç¨‹ä¸­æœ¬èº«å¹¶æ²¡æœ‰æ˜¾ç¤ºä»»ä½•ä¸œè¥¿ï¼Œæ‰€è°“æ¡Œé¢ç¯å¢ƒä¹‹ç±»åœ¨æ˜¾ç¤ºå™¨ä¸Šæ˜¾ç¤ºçš„ä¸œè¥¿éƒ½æ˜¯åè¯ï¼Œæœ€ç®€å•çš„è¾“å…¥è¾“å‡ºæ–¹å¼å³â€œæˆ‘è¾“å…¥æ–‡å­—ï¼Œè®¡ç®—æœºè¾“å‡ºæ–‡å­—â€ï¼Œäºæ˜¯å¼•å…¥ä»Šå¤©æˆ‘ä»¬æ‰€è¦é‡åˆ°çš„ç¬¬ä¸€ä¸ªæ¦‚å¿µï¼Œæˆ‘ç§°å…¶ä¸ºâ€œæ–‡å­—ç»ˆç«¯â€ï¼Œå³ä½ è¾“å…¥æ–‡å­—ï¼Œè®¡ç®—æœºè¾“å‡ºæ–‡å­—çš„åœ°æ–¹ã€‚å¯¹äºç°åœ¨æ¥è¯´ï¼Œä»¥å¾€å¥¢ä¾ˆçš„å›¾å½¢æ˜¾ç¤ºç°åœ¨å·²ç»æ»¡åœ°éƒ½æ˜¯ï¼Œä½†æ˜¯ä¸ºäº†è¿˜èƒ½ç”¨ä¸Šç®€å•å¿«æ·çš„æ–‡å­—ç»ˆç«¯çš„åŠŸèƒ½ï¼Œå‡ºç°äº†â€œç»ˆç«¯æ¨¡æ‹Ÿå™¨â€ï¼Œå®é™…ä¸Šå°±æ˜¯å¼€ä¸€ä¸ªå°é»‘çª—å£ï¼Œé‡Œé¢èƒ½å¤Ÿè¾“å…¥è¾“å‡ºï¼ˆç±»æ¯” CMDï¼‰ã€‚æ‰“å¼€ç»ˆç«¯åœ¨æ¡Œé¢æˆ–è€…æ–‡ä»¶ç®¡ç†å™¨ä¸­å³é”®ï¼Œç‚¹å‡»â€œåœ¨ç»ˆç«¯ä¸­æ‰“å¼€â€äºæ˜¯å‡ºç°äº†ä¸€ä¸ªå¦‚ä¸Šçš„çª—å£ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œé‡Œé¢è¿è¡Œä¸€ä¸ªè¢«ç§°ä¸ºâ€œShellâ€çš„è¿›ç¨‹ï¼Œè¿™é‡Œä¸å¤šä½œä»‹ç»ï¼Œç†è§£å®ƒèƒ½å¤Ÿè¾“å…¥è¾“å‡ºæ–‡å­—å°±è¡Œã€‚open:false ä»€ä¹ˆæ˜¯ SHELLï¼Ÿå‘ƒï¼Œç‚¹å¼€è¿™é‡Œå°±é»˜è®¤ä½ å·²ç»çŸ¥é“ç¼–å†™ç¨‹åºã€è¾“å…¥è¾“å‡ºä»€ä¹ˆçš„åŸºæœ¬æ¦‚å¿µäº†ã€‚SHELLï¼Œé¡¾åæ€ä¹‰ï¼Œæ˜¯ä¸€å±‚â€œå£³â€ã€‚å‰é¢è¯´åˆ°ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªâ€œç»ˆç«¯â€æ¥è¿›è¡Œäº¤äº’ï¼Œè€Œ SHELL å®ç°çš„ä¸œè¥¿å°±æ˜¯â€œè¾“å…¥â€ï¼Œå¤„ç†ï¼Œç„¶åâ€œè¾“å‡ºâ€ã€‚ç›¸å½“äºç»™æœºå™¨å¥—äº†ä¸€å±‚â€œå¯äº¤äº’â€çš„â€œå¤–å£³â€ã€‚å’Œç»ˆç«¯æ¨¡æ‹Ÿå™¨çš„åŒºåˆ«ï¼Ÿä½ æ˜¾ç„¶è¾“å…¥è¦æœ‰æ¥æºï¼Œè¾“å‡ºè¦æœ‰ç›®æ ‡ã€‚ç»ˆç«¯æ¨¡æ‹Ÿå™¨å°±ç›¸å½“äºä¸€ä¸ªå±å¹•ï¼Œä»–èƒ½æŠŠä½ é”®ç›˜é‡Œè¾“å…¥çš„ä¸œè¥¿æ‰”åˆ° SHELL é‡Œé¢ï¼Œç„¶åæŠŠ SHELL è¾“å‡ºçš„ä¸œè¥¿æ‰”åˆ°ä½ çš„çœ¼å‰ã€‚NOI Linuxï¼Œæˆ–è€…è¯´ Ubuntuï¼Œé»˜è®¤ä½¿ç”¨çš„ Shell æ˜¯ Bashã€‚åœ¨è¿™é‡Œä½ å¯ä»¥è¾“å…¥å‘½ä»¤ï¼Œåšåˆ°åˆ›å»ºæ–‡ä»¶ï¼Œä¿®æ”¹æ–‡ä»¶ï¼Œåˆ é™¤æ–‡ä»¶ç­‰åŸºæœ¬ä¸Šä½ åœ¨å›¾å½¢ç•Œé¢ä¸‹èƒ½åšçš„æ‰€æœ‰äº‹æƒ…ã€‚å…ˆ...ç®¡ç†æ–‡ä»¶ï¼Ÿåœ¨ Shell ä¸­ï¼Œ`.` è¡¨ç¤ºå½“å‰ç›®å½•ï¼Œ`..` è¡¨ç¤ºå½“å‰ç›®å½•çš„çˆ¶ç›®å½•ï¼Œ`/` è¡¨ç¤ºæ ¹ç›®å½•Linux ä¸‹åªæœ‰ä¸€ä¸ªæ ¹ç›®å½•ï¼Œä¸ä¼šåƒ Windows ä¸€æ ·ä¸åŒçš„ç›˜æœ‰ä¸åŒçš„æ ¹ç›®å½•ä¹Ÿå°±æ˜¯å¦‚ä¸‹Windows:```C:- - Windows - Program Files _ UsersD:- - Software - Documents _ Steam```Linux:```/ - - usr - bin - home - dev - etc .....```ç»å¯¹è·¯å¾„ï¼šèƒ½å”¯ä¸€ç¡®å®šçš„è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´ä»æ ¹ç›®å½•è¡¨ç¤ºçš„ç¡®å®šçš„ä½ç½®ï¼Œæ¯”å¦‚ `/usr/local/bin`ç›¸å¯¹è·¯å¾„ï¼šç›¸å¯¹äºæŸä¸€ç›®å½•çš„ä½ç½®ï¼Œæ¯”å¦‚å½“å‰ç›®å½•æ˜¯ `/usr/local/`ï¼Œ åˆ™ä¸Šé¢çš„è·¯å¾„å¯ä»¥è¡¨ç¤ºä¸º `bin` æˆ– `./bin`å…ˆæä¾›ç›¸åº”çš„å‘½ä»¤ï¼š```shell# è¿™æ˜¯ä¸€æ¡æ³¨é‡Šï¼ŒSHELL ä¸­ä½¿ç”¨äº•å·åšå•è¡Œæ³¨é‡Š# åˆ›å»ºæ–‡ä»¶å¤¹mkdir folder_name# åˆ›å»ºä¸€ä¸ª modmodwhr æ–‡ä»¶å¤¹mkdir modmodwhr# åˆ›å»ºç©ºæ–‡ä»¶touch filename# åˆ›å»ºä¸€ä¸ªåä¸º whrakioi çš„ç©ºæ–‡ä»¶touch whrakioi# è¿›å…¥ä¸€ä¸ªç›®å½•cd folder_name# å¦‚æœå½“å‰ç›®å½•ä¸‹æœ‰ä¸€ä¸ª hhyakioi æ–‡ä»¶å¤¹ï¼Œåˆ™å¯ä»¥é€šè¿‡è¿™ä¸ªå‘½ä»¤è¿›å…¥è¯¥æ–‡ä»¶å¤¹cd hhyakioi# æˆ–è€… . ä»£è¡¨å½“å‰ç›®å½•ï¼Œ./hhyakioi ç›¸å½“äºè¿›å…¥å½“å‰ç›®å½•ä¸‹çš„ hhyakioi æ–‡ä»¶å¤¹cd ./hhyakioi# è¿›å…¥ä¸Šä¸€çº§æ–‡ä»¶å¤¹cd ..# è¿›å…¥æ ¹ç›®å½•cd /# è¿›å…¥æŸç»å¯¹è·¯å¾„cd /usr/share# æœ€åä¸€ä¸ªæ åŠ ä¸åŠ æ— æ‰€è°“cd /usr/share/# å¤åˆ¶ä¸€ä¸ªæ–‡ä»¶åˆ°å¦ä¸€ä¸ªä½ç½®cp /path/to/file /path/to/direction# æŠŠ 1.cpp å¤åˆ¶åˆ° gjxakioi æ–‡ä»¶å¤¹cp 1.cpp gjxakioi/1.cpp# å¤åˆ¶æ–‡ä»¶å¤¹éœ€è¦æ·»åŠ  -r å‚æ•°cp folder_name gjxakioi/folder_name -r# ç§»åŠ¨ä¸€ä¸ªæ–‡ä»¶åˆ°å¦ä¸€ä¸ªä½ç½®ï¼ŒåŒæ—¶å¯ä»¥å½“é‡å‘½åç”¨mv path1 path2# é‡å‘½å 1.cpp ä¸º 2.cppmv 1.cpp 2.cpp# ç§»åŠ¨ 2.cpp åˆ° gjxakioi æ–‡ä»¶å¤¹mv 1.cpp gjxakioi/1.cpp```NOI Linux 2 çš„æ¯”èµ›ç¯å¢ƒä¸‹é»˜è®¤ç»™ä½ æŒ‚è½½ noip æ–‡ä»¶å¤¹å¹¶åœ¨ Linux æ¡Œé¢ä¸Šåˆ›å»ºå¿«æ·æ–¹å¼ï¼Œå› æ­¤å¦‚æœä½ åœ¨æ¡Œé¢ä¸Šè¿›å…¥ç»ˆç«¯ï¼Œåˆ™å¯ä»¥é€šè¿‡ä¸‹é¢çš„å‘½ä»¤è¿›å…¥ noip æ–‡ä»¶å¤¹```shellcd noip```æˆ–è€…```shellcd ./noip```å¼€å§‹å†™ä»£ç å§ï¼æƒ³ç¼–è¾‘ä¸‹æ–‡ä»¶ï¼Ÿå¦‚æœä½ åœ¨ Windows ä¸‹å†™å¥½äº†ä»£ç æƒ³è¦ç²˜è´´åˆ° Linux çš„æ–‡ä»¶é‡Œï¼Œåˆ™å¯ä»¥```shell# æ–°å»º a.cpp æ–‡ä»¶touch a.cpp# ä½¿ç”¨ nano ç¼–è¾‘å™¨ç¼–è¾‘ a.cpp æ–‡ä»¶nano a.cpp```nano æ˜¯ GNU çš„ä¸€æ¬¾ç®€æ˜“ç»ˆç«¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œç›¸å¯¹äº Vi/Vim æ¥è¯´æ›´é€‚åˆæ–°æ‰‹ä½¿ç”¨å¤åˆ¶äº† Windows çš„ä»£ç ä¹‹åï¼Œç¡®ä¿ VMware çš„å…±äº«å‰ªè´´æ¿å·²ç»æ‰“å¼€ï¼Œç„¶åæŒ‰ä¸‹ `Ctrl` + `Shift` + `V` ç²˜è´´ï¼Œç„¶åæŒ‰ä¸‹ `Ctrl` + `S` ä¿å­˜ï¼Œ`Ctrl` + `X` é€€å‡ºã€‚å½“ç„¶ï¼Œæœ‰å›¾å½¢åŒ–ç¼–è¾‘å™¨ä¾›ä½ ä½¿ç”¨```shell# ä½¿ç”¨é—­æº Visual Studio Code ç¼–è¾‘ a.cppcode a.cpp```åœ¨æ­¤ä¹‹åä½ å¯ä»¥é€šè¿‡ `cat` å‘½ä»¤[^1]éªŒè¯æ–‡ä»¶å†…å®¹```shellcat a.cpp```ç¼–è¯‘ C++ æºç GNU ç¼–è¯‘å¥—ä»¶GNU Compile Collection æ˜¯ GNU å¼€å‘çš„ä¸€å¥—ç¼–è¯‘å™¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬åªä½¿ç”¨ GNU C/C++ ç¼–è¯‘å™¨éƒ¨åˆ†ã€‚å¦ï¼šGNU è®¡åˆ’çš„ç›®æ ‡æ˜¯å¼€å‘å‡ºä¸€æ¬¾å®Œå…¨è‡ªç”±çš„æ“ä½œç³»ç»Ÿå’Œè½¯ä»¶ç”Ÿæ€ï¼Œè‡ªç”±è½¯ä»¶è¿åŠ¨è‡´åŠ›äºæ¨è¿›å…¨éƒ¨è½¯ä»¶çš„éšç§ä¿æŠ¤ä»¥åŠè‡ªç”±åŒ–ï¼Œè‡ªç”±è½¯ä»¶å±äºå…¨äººç±»ï¼Œè‡ªç”±è½¯ä»¶å¼€å‘è€…ä»¬ç•™ä¸‹çš„ä½œå“ä¸å­¦ä¹ èµ„æ–™æ˜¯ä¸æœ½çš„ï¼å¦‚æœä½ å¯¹è‡ªç”±è½¯ä»¶è¿åŠ¨æœ‰ç–‘é—®æˆ–æœ‰å…´è¶£ï¼Œå¯å‰å¾€ GNU å®˜æ–¹ç½‘ç«™ äº†è§£æ›´å¤šç›¸å…³å†…å®¹ã€‚å¼€å§‹ç¼–è¯‘```shellg++ grainrainisgod.cpp```è¿™ä¸ªå‘½ä»¤ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç¼–è¯‘ grainrainisgod.cpp æ–‡ä»¶ï¼Œç„¶åé»˜è®¤è¾“å‡ºä¸€ä¸ª a.out å¯æ‰§è¡Œæ–‡ä»¶[^2]ã€‚å¯æ˜¯æˆ‘æ‡’å¾—é‡å‘½åæ–‡ä»¶ï¼Œæ‰€ä»¥å¦‚ä½•æ‰§è¡Œè¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶çš„ä½ç½®å’Œåç§°å‘¢ï¼Ÿåªéœ€è¦åŠ  `-o /path/to/direction` å³å¯```shellg++ grainrainisgod.cpp -o grainrainisgod```å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åŠ å…¥å…¶ä»–æ¯”èµ›è¦æ±‚çš„ç¼–è¯‘é€‰é¡¹ï¼Œæ¯”å¦‚è¯´å¸ä¸ªæ°§ï¼ˆåŠ  `-O2` å‚æ•°ï¼‰```shellg++ grainrainisgod.cpp -o grainrainisgod -O2```å¼€å¯ç¼–è¯‘è­¦å‘Šç¼–è¯‘è­¦å‘Šåœ¨ç¼–è¯‘çš„ç¼–è¯‘é˜¶æ®µå’Œè­¦å‘Šé˜¶æ®µå‘å‡ºï¼Œèƒ½å¸®ä½ å‘ç°ä¸€äº›ä½çº§é—®é¢˜å’Œç®€å• UBï¼Œæ¯”å¦‚è‘—å UBï¼ˆä½†æ˜¯èŒå¦¹ OPTIM è¿˜æ˜¯çŠ¯äº†è¿™ä¸ªé—®é¢˜ï¼‰```cppa = a++ + ++a;```ç¼–è¯‘å™¨ä¼šå‘å‡ºè­¦å‘Š```logwarning: multiple unsequenced modifications to 'a' [-Wunsequenced] cout << a++ + ++a << endl;```è¿™æ ·çš„è­¦å‘Šå¯¹äºæ¯”èµ›é€‰æ‰‹æ¥è¯´è‚¯å®šæ˜¯è¶Šå¤šè¶Šå¥½è¶Šå…¨è¶Šå¥½ï¼Œæ‰€ä»¥éœ€è¦å¼€å¯å…¨éƒ¨è­¦å‘Šï¼Œå³æ·»åŠ  `-Wall` å‚æ•°```shellg++ grainrainisgod.cpp -o grainrainisgod -O2 -Wall```æ£€æŸ¥å†…å­˜é”™è¯¯ä»¥åŠæœªå®šä¹‰è¡Œä¸ºSanitizer æ˜¯è°·æ­Œå¼€å‘çš„ä¸€ä¸ªæ£€æµ‹ç¨‹åºé—®é¢˜çš„å¼€æºå¥—ä»¶ï¼Œä¸€èˆ¬é›†æˆåœ¨ gcc ä»¥åŠ clang ç¼–è¯‘å™¨ä¸­ã€‚ç›¸åº”çš„ï¼ŒMinGW-W64 å¹¶æ²¡æœ‰ä¸º Sanitizer åš Windows å…¼å®¹ï¼Œå› è€Œæ— æ³•åœ¨æ¯”èµ›ç¯å¢ƒ Windows ä½¿ç”¨ï¼ˆLLVM/Clang ç¼–è¯‘å™¨åŒ…å«çš„ Sanitizer æ”¯æŒ Windowsï¼ŒMSVC çš„ä¹Ÿæ”¯æŒä½†æ˜¯åªæœ‰ AddressSanitizerï¼‰ï¼ˆä½†æ˜¯æ˜¾ç„¶æ¯”èµ›ç¯å¢ƒæ²¡æœ‰è¿™ä¸¤ä¸ªç¼–è¯‘å™¨ï¼‰ï¼Œæ‰€ä»¥æ˜¾å¾— Linux ç¯å¢ƒéå¸¸é‡è¦ã€‚Address Sanitizer ç”¨äºæ£€æµ‹ç¨‹åºçš„å†…å­˜é”™è¯¯ï¼Œæ¯”å¦‚çˆ†æ ˆç­‰é—®é¢˜ã€‚ä½¿ç”¨æ–¹æ³•æ˜¯æ·»åŠ  `-fsanitize=address` é€‰é¡¹Undefined Behaviour Sanitizer ç”¨äºæ£€æµ‹ç¨‹åºçš„æœªå®šä¹‰è¡Œä¸ºï¼Œæ¯”å¦‚è®¿é—®ç©ºæŒ‡é’ˆï¼Œæ•°ç»„è¶Šç•Œè®¿é—®ç­‰é—®é¢˜ï¼Œä½¿ç”¨æ–¹æ³•æ˜¯æ·»åŠ  `-fsanitize=undefined` é€‰é¡¹ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸¤ä¸ª Sanitizer ä¼šæ˜¾è‘—æ‹–æ…¢ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼Œæ‰€ä»¥æ·»åŠ è¿™ä¸¤ä¸ªç¼–è¯‘é€‰é¡¹ç¼–è¯‘å‡ºæ¥çš„ç¨‹åºåœ¨è¿è¡Œæ—¶é—´å’Œå†…å­˜å ç”¨ä¸Šå‚è€ƒæ„ä¹‰ä¸å¤§ã€‚åŒæ—¶å¦‚æœåŠ¨æ€åˆ†é…å†…å­˜è¿‡å¤šå¯èƒ½ Address Sanitizer ä¼šæŠ½é£ï¼ŒUBSanitizer å€’æ˜¯é—®é¢˜ä¸å¤§ã€‚æ‰€ä»¥é…Œæƒ…ä½¿ç”¨ã€‚æ€»ç»“ï¼š```shellg++ grainrainisgod.cpp -o grainrainisgod -O2 -Wall -fsanitize=address -fsanitize=undefined```å¦‚ä¸Šæ˜¯æˆ‘èµ›æ—¶ç»å¸¸ä½¿ç”¨çš„ç¼–è¯‘å‘½ä»¤ã€‚æ‰§è¡Œå¯æ‰§è¡Œæ–‡ä»¶```shell./grainrainisgod````.` ï¼ˆå½“å‰ç›®å½•ï¼‰+ `/` ï¼ˆç›®å½•åˆ†éš”ç¬¦ï¼‰+ `grainrainisgod` å¯æ‰§è¡Œæ–‡ä»¶åç§°æ³¨æ„ï¼Œè¿™é‡Œä¸èƒ½ç›´æ¥è¾“å…¥æ–‡ä»¶åï¼Œå¿…é¡»åŠ ä¸Šè¡¨ç¤ºè·¯å¾„çš„ç¬¦å·ï¼ˆç›¸å¯¹å’Œç»å¯¹éƒ½è¡Œï¼Œæ­¤ä¸¾æ˜¯ä¸ºäº†ä¿è¯ä½ çŸ¥é“ä½ è¦æ‰§è¡Œçš„ç¨‹åºæ˜¯â€œå½“å‰ç›®å½•ä¸‹â€çš„â€œè¿™ä¸ªç¨‹åºâ€ï¼Œåˆ«æ‰§è¡Œæˆâ€œæé¬¼â€äº†ï¼‰ã€‚ç„¶åå°±å¯ä»¥å¿«ä¹åœ°è¾“å…¥äº†ã€‚æ³¨æ„ï¼šåœ¨è¿™ä¸ªç»ˆç«¯ä¸­å¤åˆ¶ä½¿ç”¨ `Ctrl`+`Shift`+ `C`ï¼Œç²˜è´´ä½¿ç”¨ `Ctrl`+`Shift`+` V``Ctrl` + `C` ç”¨äºç»ˆæ­¢å½“å‰æ­£åœ¨è¿è¡Œçš„ç¨‹åºï¼Œä¹Ÿå¯ä»¥åœ¨è¾“å…¥å‘½ä»¤æ‰“é”™å­—æ—¶ `Ctrl` + `C` é‡å¼€ä¸€è¡Œã€‚è¿›é˜¶ï¼šä¸€äº› bash æŒ‡ä»¤åˆšæ‰å·²ç»å­¦è¿‡ä¸€äº›å‘½ä»¤äº†ï¼Œæ¥ä¸‹æ¥å°†ä¼šæ•™ç»™å¤§å®¶æ›´å¤šçš„ bash ç›¸å…³çš„ä¸œè¥¿ã€‚å…³ç³»è¿ç®—ç¬¦- `command1 && command2`ï¼šå½“ `command1` æ‰§è¡ŒæˆåŠŸåæ‰ä¼šæ‰§è¡Œ `command2`ã€‚- `command1  command2`ï¼šå½“ `command1` æ‰§è¡Œå¤±è´¥æ—¶æ‰ä¼šæ‰§è¡Œ `command2`ã€‚ç„¶åç»™å‡ ä¸ªç»ƒä¹ é¢˜ï¼šå‘½ä»¤ `echo`ï¼šåé¢æ¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œä½œç”¨æ˜¯è¾“å‡ºè¿™ä¸ªå­—ç¬¦ä¸²ã€‚  ç¤ºä¾‹ï¼š`echo tibrellalaji`ï¼Œå›è½¦ï¼Œç»ˆç«¯å‡ºç°äº† `tibrellalaji` ä¸€ä¸²å­—ç¬¦ã€‚çŒœæµ‹ä»¥ä¸‹çš„å‘½ä»¤è¾“å‡ºç»“æœæ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¸€è¡Œä¸€é¢˜ï¼‰```shellecho 1 && echo 23echo 12  echo 3echhhooo 1234 echo 3woquzheshishenmezhiling && echo 123```ç­”æ¡ˆ child:codeblock open:false```shell# å¿½ç•¥æŠ¥é”™ä¿¡æ¯123123```å˜é‡èµ‹å€¼```shella=1```bash å˜é‡æ— éœ€å£°æ˜ï¼Œå¯ä»¥ç›´æ¥èµ‹å€¼ä¹‹åä½¿ç”¨ã€‚å˜é‡åè¦æ±‚å’Œ C++ å·®ä¸å¤šï¼š- å­—æ¯ã€æ•°å­—ã€ä¸‹åˆ’çº¿- æ•°å­—ä¸èƒ½å¼€å¤´ä½†æ˜¯èµ‹å€¼å’Œå¤§éƒ¨åˆ†è¯­è¨€æ˜¯ä¸åŒçš„ï¼šç­‰å·ä¸¤è¾¹ä¸èƒ½æœ‰ç©ºæ ¼ã€‚ä½ ä¸å¿…åœ¨ä¹ bash çš„å˜é‡ç±»å‹ã€‚ä½¿ç”¨å˜é‡åå‰åŠ  `$`ï¼Œä¸¤è¾¹å¯ä»¥åŠ å¤§æ‹¬å·ä¹Ÿå¯ä»¥ä¸åŠ ã€‚ç¤ºä¾‹ï¼š```bashmainpage=www.tibrella.spaceecho ${mainpage}echo $mainpageecho https://${mainpage}isgood```å®¹æ˜“å‘ç°å¤§æ‹¬å·çš„ä½œç”¨ï¼šåŒºåˆ†å˜é‡åçš„è¾¹ç•Œã€‚å¦‚æœä½ å†™çš„æ˜¯ `echo https://$mainpageisgood` çš„è¯åé¢å°±æ˜¯ç©ºçš„äº†ï¼Œå› ä¸º bash æŠŠ `mainpageisgood` è¯†åˆ«æˆäº†ä¸€ä¸ªå˜é‡åï¼Œè€Œè¿™ä¸ªå˜é‡ä¸å­˜åœ¨ï¼ˆä¹Ÿå°±æ˜¯ä¸ºç©ºï¼‰ã€‚è¾“å…¥è¾“å‡ºé‡å®šå‘ä¸ç®¡é“ç¬¦è¿™é‡Œæ˜¯é‡ç‚¹ï¼Œåœ¨ OI ä¸­å†™å¯¹æ‹è„šæœ¬å•¥çš„éå¸¸èƒ½ç”¨å¾—ä¸Šè¿™ä¸ªä¸œè¥¿ã€‚å‡è®¾æœ‰ä¸€ä¸ªæ–‡ä»¶å«åš `testfile`ï¼Œä¸€ä¸ªç¨‹åºå« `test`ï¼Œåˆ™ï¼šè¿˜è®°å¾—å—ï¼Ÿæ‰§è¡Œæ–‡ä»¶æ—¶å¿…é¡»åŠ  `./`ï¼Œå¦åˆ™ä¸èƒ½æ‰§è¡Œã€‚- `testfile < ./test`ï¼šå°† `test` çš„è¾“å…¥ï¼ˆ`stdin`ï¼‰é‡å®šå‘åˆ° `testfile`ï¼Œç›¸å½“äºåœ¨ä½ çš„ç¨‹åºä¸­åŠ å…¥äº† `freopen(\"testfile\",\"r\",stdin)`- `./test > testfile`ï¼šå°† `test` çš„è¾“å‡ºï¼ˆ`stdin`ï¼‰é‡å®šå‘åˆ° `testfile`ï¼Œç›¸å½“äºåœ¨ä½ çš„ç¨‹åºä¸­åŠ å…¥äº† `freopen(\"testfile\",\"w\",stdin)`ã€‚æ¢å¥è¯è¯´ï¼Œ`test` ç¨‹åºè¾“å‡ºçš„ä¸œè¥¿å°†ä¼šå†™å…¥åˆ° `testfile` ä¸­ã€‚- ä¸Šé¢ä¸¤ä¸ªå¯ä»¥åŒæ—¶ä½¿ç”¨ï¼Œæ¯”å¦‚ `joker.in < ./joker > joker.out`ï¼Œç›¸å½“äºç¨‹åºä¸­åŠ äº†ä¸¤è¡Œ `freopen`ã€‚ç„¶åæ˜¯ç®¡é“ç¬¦ï¼Œå®ƒä»£è¡¨æŠŠå‰ä¸€ä¸ªç¨‹åºçš„è¾“å‡ºé‡å®šå‘åˆ°åä¸€ä¸ªç¨‹åºçš„è¾“å…¥é‡Œé¢ã€‚- `cat testfile  ./test`ï¼šè¾“å‡º `filename` æ–‡ä»¶çš„å†…å®¹ï¼Œå¹¶æŠŠå…¶é‡å®šå‘åˆ° `test` ç¨‹åºçš„è¾“å…¥é‡Œé¢ã€‚ç­‰ä»·äº `testfile < ./test`ä¸ºå•¥ä»–å«ç®¡é“ç¬¦å‘¢ï¼Ÿç°åœ¨æˆ‘ä»¬å†™ä¸€ä¸ªè¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²å†è¾“å‡ºå®ƒçš„ç¨‹åºï¼š```cpp#include <string>#include <iostream>int main() { std::string s; std::cin >> s; std::cout << s; return 0;}```ç¼–è¯‘ä¸€ä¸‹ï¼š`g++ test.cxx -o test`ç„¶åæ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼š```bashecho pipe  ./test  ./test  ./test```æˆ‘ä»¬å‘ç°æœ€åçš„è¾“å‡ºæ˜¯ `pipe`ã€‚  æ˜¾ç„¶ï¼Œè¿™ç©æ„å°±åƒç®¡é“ï¼Œèƒ½æŠŠä¸åŒçš„æœºå™¨ï¼ˆç¨‹åºï¼‰çš„è¾“å…¥è¾“å‡ºè¿æ¥èµ·æ¥ã€‚ç¼–å†™ä¸€ä¸ª bash è„šæœ¬```shelltouch test.sh # åˆ›å»ºä¸€ä¸ª bash è„šæœ¬nano test.sh # ç¼–è¾‘è¿™ä¸ª bash è„šæœ¬```æ–‡ä»¶å†…å®¹ï¼š```bash#!/bin/bashecho Hello World````#!/bin/bash` è¡¨æ˜ä½ è¿™ä¸ª `test.sh` æ–‡ä»¶éœ€è¦ä½¿ç”¨ `/bin/bash` ç¨‹åºè¿è¡Œã€‚ï¼ˆå†™ `#!/bin/sh` ä¹Ÿè¡Œï¼Œè¿™é‡Œè®²çš„è¯­æ³•å’Œ sh/zsh æ˜¯å…¼å®¹çš„ï¼Œä½†æ˜¯ä½ äº²çˆ±çš„ NOI Linux åªæœ‰ `bash` å’Œ `sh`ï¼‰æŒ‰ä¸‹ `Ctrl` + `S` ä¿å­˜ï¼Œ`Ctrl` + `X` é€€å‡ºã€‚ç„¶åä½ éœ€è¦è®©è¿™ä¸ªæ–‡ä»¶å¯ä»¥è¢«æ‰§è¡Œï¼Œå³ç»™ä»–â€œè¢«æ‰§è¡Œâ€çš„æƒé™ï¼š```shellchmod +x test.sh```æ‰§è¡Œå¯ä»¥ç›´æ¥å½“å¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œã€‚```shell./test.sh```è¾“å‡ºï¼š```Hello World```[^1]: `cat filename` å³è¾“å‡º `filename` æ–‡ä»¶çš„å†…å®¹[^2]: Linux ä¸‹æ–‡ä»¶ç±»å‹çš„åˆ¤æ–­ä¸ Windows/DOS ç•¥æœ‰ä¸åŒã€‚ä¼—æ‰€å‘¨çŸ¥ï¼ŒWindows ä¸‹æ“ä½œç³»ç»Ÿé€šè¿‡æ‰©å±•ååˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºä½ æŠŠä»€ä¹ˆæ–‡ä»¶æ”¹æˆ `.docx` æ‰©å±•åï¼ŒWindows éƒ½ä¼šç”¨ Word æ‰“å¼€å®ƒã€‚ä½†æ˜¯ Linux ä¸€èˆ¬é€šè¿‡æ–‡ä»¶å¤´åˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ— è®ºä½ æŠŠå¯æ‰§è¡Œæ–‡ä»¶å‘½åæˆ `a.out` è¿˜æ˜¯ `a.docx` è¿˜æ˜¯ `a.jpg` ç”šè‡³æ²¡æœ‰æ‰©å±•åï¼Œè¾“å…¥ `.\\a.jpg` æˆ–ç›¸åº”å‘½ä»¤ä¹‹åç»ˆç«¯éƒ½ä¼šæŠŠå®ƒå½“ä½œå¯æ‰§è¡Œæ–‡ä»¶æ‰§è¡Œã€‚","tags":["NOI Linux"],"categories":["Linux"]},{"title":"æ›´æ”¹åšå®¢ä¸»é¢˜ä¹‹åçš„ä¸€äº›ç ´äº‹","path":"/post/blog-theme-movement/","content":">æœ€è¿‘å› ä¸ºåŸæ¥ [æˆ‘çš„ butterfly ä¸»é¢˜ fork](https://github.com/pinghigh/hexo-theme-butterfly/) å®åœ¨æ”¹ä¸åŠ¨äº†ï¼ˆå®é™…ä¸Šå› ä¸ºæˆ‘æ°´å¹³å¤ªå·®ï¼‰ï¼Œå¯¹äº pug ä»€ä¹ˆçš„ä¹Ÿä¸å¤ªæ‡‚ï¼ŒåŒæ—¶ç”±äºç•Œé¢è¿‡äºèŠ±å“¨çœ‹è…»äº†ï¼Œæƒ³æ¢ç‚¹åŠ¨æ€æ•ˆæœå°‘çš„è€Œåˆç›¸å¯¹ç®€å•çš„åšå®¢ä¸»é¢˜ã€‚  \nåˆå› ä¸ºä¹‹å‰å°±è§‚å¯Ÿè¿‡ hugo çš„ä¸»é¢˜åˆ—è¡¨ï¼Œhugo çš„ç‰¹ç‚¹æ˜¯å¿«ï¼Œå¤§éƒ¨åˆ†çš„ hugo ä¸»é¢˜ä¹Ÿéå¸¸ç®€æ´ï¼ˆæ¯”å¦‚ [c4096 çš„åšå®¢](https://c4096.cn/)æ‰€é‡‡ç”¨çš„ä¸»é¢˜ï¼‰ï¼Œå› æ­¤æˆ‘åˆåŒå’å•å» hugo theme åˆ—è¡¨æŒ‘äº†ä¸ªéå¸¸ç¬¦åˆæˆ‘å®¡ç¾ï¼ˆå¤§æ¦‚ï¼‰çš„ä¸»é¢˜ï¼Œå³ [stack](https://github.com/CaiJimmy/hugo-theme-stack)ã€‚\n>\n>æœ€ä¸€å¼€å§‹ç”¨ test ç•Œé¢æµ‹è¯•ä¸»é¢˜åŠŸèƒ½çš„æ—¶å€™ hugo çš„é€Ÿåº¦å°±æƒŠè‰³æˆ‘äº†ï¼Œå®åœ¨æ˜¯è¿‡äºè¿…é€Ÿï¼Œå’Œæˆ‘ä¹‹å‰æ‰€ç”¨çš„ hexo+butterfly çš„é€Ÿåº¦ç›¸æ¯”ï¼Œhugo è®©æˆ‘æ„Ÿè§‰åˆ°æ„å»ºäº†åˆå¥½åƒæ²¡æ„å»ºçš„æ„å»ºè¿‡ç¨‹ã€‚åŒæ—¶å®ƒçš„å³æ—¶ä¿®æ”¹å³æ—¶é¢„è§ˆåŠŸèƒ½ä¹Ÿå¾ˆå¥½ç”¨ï¼ˆä½†æ˜¯æœ‰çš„æ—¶å€™å¹¶ä¸èƒ½åšåˆ°å®Œå…¨åº”ç”¨æ–°ä¿®æ”¹ï¼‰ã€‚  \nä½†æ˜¯ä¸€èµ·åˆ°æ¥çš„é—®é¢˜ä¹Ÿå¾ˆå¤šï¼Œæ¯”å¦‚ stack ä¸»é¢˜çš„æ–‡æ¡£å¹¶ä¸æ˜¯å¾ˆå®Œå–„ï¼Œç›¸å¯¹äºæˆ‘çœ‹è¿‡çš„å¤§éƒ¨åˆ† hexo ä¸»é¢˜æ¥è¯´å¯èƒ½æ˜¯æœ€ä¸å®Œå–„çš„ï¼ˆä¸­è‹±æ–‡å€’æ˜¯æ— æ‰€è°“ï¼‰ï¼Œå› æ­¤æˆ‘éœ€è¦ä¸€è¾¹çœ‹æ–‡æ¡£ä¸€è¾¹çœ‹æºç ï¼Œè¿˜å¾—çœ‹ä¸»é¢˜çš„ç¤ºä¾‹ç«™ç‚¹çš„é…ç½®æ–‡ä»¶æ‰è®©æˆ‘çš„åšå®¢è·‘å‡ºæ­£å¸¸çš„æ ·å­ã€‚\n>\n>ä¸»é¢˜é…ç½®é—®é¢˜è¿˜ç®—å¥½è§£å†³ï¼Œå¯¹äºæˆ‘è¿™ä¸ª~~å•¥éƒ½ä¸æ‡‚è¿˜è´¼æŒ‘çš„~~äººæ¥è¯´ï¼Œæ”¹åŠ¨ä¸»é¢˜æ˜¯å¿…é¡»æœ‰çš„éƒ¨åˆ†ï¼Œä½†æ˜¯ hugo çš„ç¼–å†™ä¿®æ”¹ç»´æŠ¤ä¸»é¢˜çš„æ–‡æ¡£å’Œæ•™ç¨‹æ›´æ˜¯å°‘ä¹‹åˆå°‘äº†...å› æ­¤ç ”ç©¶äº†å¥½ä¹…ä¹Ÿæ²¡ç ”ç©¶å‡ºæ¥æ€ä¹ˆæ”¹ä»£ç å—æ ·å¼ï¼Œæ”¹é…è‰²ä¹Ÿæ²¡æˆåŠŸï¼Œä½†æ˜¯æŠŠæ·±æµ…è‰²ä»£ç å—èƒŒæ™¯å®½åº¦ä¸ç»Ÿä¸€çš„é—®é¢˜å€’æ˜¯è§£å†³äº†ï¼Œè¿˜å¾—å¯¹è¿™ä¸ªè¿›è¡Œè¿›ä¸€æ­¥æ›´æ”¹ã€‚å½“ç„¶ï¼Œä¸»é¢˜å…‹éš†ä¸‹æ¥çš„ç¬¬ä¸€æ­¥å°±æ˜¯ copyright->copyleftï¼Œç„¶åç»™ `&copy` æ‰ä¸ªå¤´ï¼Œæ–‡ç« è®¸å¯è¯æ”¹ä¸º FDL 1.3 æ‰ç»§ç»­åšæ¥ä¸‹æ¥çš„ä¿®æ”¹ã€‚\n>\n>å…³äºå†™é…ç½®ï¼Œæˆ‘æœ€å¼€å§‹é‡‡ç”¨çš„æ˜¯ç½‘ä¸Šå¾—åˆ°å¤§éƒ¨åˆ†å¥½è¯„çš„ toml æ ¼å¼ï¼Œæ®è¯´æ¯” yaml æ–°è¿˜å¥½ç”¨ï¼Œåœ¨æ­¤ä¹‹å‰å› ä¸º yaml çš„ç¼©è¿›é—®é¢˜æˆ‘ç—›è‹¦äº†å¾ˆé•¿æ—¶é—´ï¼Œä½†æ˜¯æŠ˜è…¾äº†å¥½ä¹… toml ä¹‹åæ„Ÿè§‰ toml æ›´ä¸å®¹æ˜“è¢«äººç±»ç†è§£ï¼ˆå¯èƒ½åªæœ‰æˆ‘ä¸ç†è§£ï¼‰ï¼Œç„¶åç”¨å·¥å…·å›åˆ°äº† yaml çš„æ€€æŠ±ï¼Œåœ¨æ­¤ä¹‹å‰ä¸ºäº†ç ”ç©¶ toml çš„ map æ˜ å°„è¯­æ³•ä¹‹ç±»çš„ä¸œè¥¿å·²ç»æŠ˜è…¾ä¸åŠ¨äº†...\n>\n>å…³äºæ¢è¡Œï¼Œç”±äºä¹‹å‰çš„ butterfly ä¸»é¢˜èƒ½å¤Ÿè‡ªåŠ¨æ¢è¡Œï¼Œä½†æ˜¯ stack ä¸»é¢˜é»˜è®¤ç”¨çš„æ˜¯ markdown çš„æ¢è¡Œè§„åˆ™ï¼Œå³è¡Œå°¾åŒç©ºæ ¼æˆ–å›è½¦ä¸¤æ¬¡ä¸ºä¸€ä¸ªæ¢è¡Œï¼Œäºæ˜¯æˆ‘åšæ–‡åŸºæœ¬ä¸Šéƒ½ç‚¸äº†ï¼Œä¼šæ‰¾æ—¶é—´ä¿®ï¼ˆé€ƒ\n\nå›åˆ° hexo äº†ï¼ŒåŸå› å¾ˆå¤šã€‚\n\n- hugo å¯¹æ’ä»¶æ”¯æŒè¾ƒå°‘ï¼Œè„šæ³¨ä¹‹ç±»çš„åŠ å¼ºéœ€è¦æˆ‘è‡ªå·±å®ç°ã€‚ ~~ç”±äºå®ç°ä¸äº†å°±ç›´æ¥ç”¨äº† littlefoot~~ ~~å®é™…ä¸Š littlefoot ä¹Ÿæ²¡é…å¥½~~\n- hugo å¯¹ç¬¬ä¸‰æ–¹æ¸²æŸ“å™¨æ”¯æŒç¨‹åº¦ä¸é«˜ï¼Œæƒ³ç”¨ pandoc ä¹‹ç±»çš„ç”¨ä¸äº†ï¼ˆtoc ä¼šæœ‰é—®é¢˜ï¼‰ã€‚\n- hugo è¯­æ³•æŒºè¯¡å¼‚çš„ã€‚\n- goldmark å†™ $\\LaTeX$ è¯­æ³•çš„æ—¶å€™æ¢è¡Œè¦å››ä¸ªåæ–œæ ï¼Œä¸¤ä¸ªåæ–œæ ä¼šè¢«è½¬ä¹‰è€Œæ— æ³•æ¢è¡Œã€‚\n- hugo çŸ­ç å†™ä¸æ˜ç™½ï¼Œæ–‡ä»¶ç›®å½•æŒºè¿·æƒ‘çš„ã€‚\n- hugo module æ–‡æ¡£ä¹ŸæŒºç¼ºä¹çš„ï¼Œæƒ³è‡ªå·±å†™ä¹Ÿå†™ä¸åŠ¨ã€‚\n\nç„¶åé€‰äº†å¾ˆå¤šä¸»é¢˜ï¼Œæœ€ç»ˆå‘ç°å¦‚æœæˆ‘æ—©ç”¨äº† [ä¸€åˆ€æ–©](https://yidaozhan.top) fork çš„ [stellaris](https://github.com/YidaozhanYa/hexo-theme-stellaris) ä¸»é¢˜ï¼Œæˆ‘èƒ½å°‘èµ°ä¸€å¹´å¼¯è·¯ã€‚\n\n- åšå®¢å†…æ”¯æŒç»™è‡ªå·±é¡¹ç›®è®¾ç«‹ä¸€ä¸ªæ–‡æ¡£ä¸“æ \n- æœ‰å¾ˆå¤šç§æ ‡ç­¾å¯ä»¥ä½¿ç”¨ï¼Œä¿æ´»ä½†ä¸é™äºæç¤ºæ¡†ï¼Œæ—¶é—´çº¿ç­‰\n- ç¾ä¸½çš„ fluent é£æ ¼\n- ä½¿ç”¨ React + JSXï¼Œè¿™æ„å‘³ç€æˆ‘å¯ä»¥è¾ƒä½æˆæœ¬åœ°ä¿®æ”¹è¿™ä¸ªä¸»é¢˜ï¼ˆç›¸å¯¹äºä»¥å‰çš„ pug å’Œ ejs æ¥è¯´ï¼Œè¿™ä¸ªèµ·ç æˆ‘ä¼šä¸€ç‚¹ï¼Œè€Œä¸”æ•™ç¨‹ä¹ŸæŒºå¤šï¼‰\n- æ€§èƒ½è¾ƒå¥½ã€‚æ ·å¼ä¸ç®—å¤ªå°‘ï¼Œä½†æ˜¯ç›¸å¯¹äº butterfly ç­‰ä¸»é¢˜ï¼Œè¿™ä¸ªä¸»é¢˜åœ¨æˆ‘æœºæˆ¿ç”µè„‘ä¸Šè¿˜æ˜¯éå¸¸æµç•…çš„ã€‚\n\nä½†æ˜¯æœ€åˆè¿˜æ˜¯é‡åˆ°äº†ä¸€äº›é—®é¢˜ï¼Œè¿˜å¥½å¯ä»¥ç›´æ¥æŠ„ä¸€åˆ€æ–©çš„é…ç½®ã€‚\n\nä½†æ˜¯éœ€è¦ä¸å°‘æ›´æ”¹ï¼Œæ¯”å¦‚ CDN ä¹‹ç±»ã€‚ï¼ˆè‚¯å®šä¸èƒ½ç”¨ä»–æœ‹å‹ç»™ä»–æ•´çš„ CDN å•Šï¼‰\n\nValine è²Œä¼¼æŒºè¿‡æ—¶çš„äº†ï¼Œtwikoo é»˜è®¤æ ·å¼æ‰”è¿™é‡ŒæŒºä¸‘çš„ï¼Œç„¶åå°±ç›´æ¥é…äº†ä¸ª Waline æ‰”ä¸Šå»äº†ã€‚  \n\nç”¨ JSX åŠ å…¥äº† MathJax æ”¯æŒï¼ŒåŒæ—¶ä¸ºäº†æ›´å¥½çš„æ•°å­¦æ”¯æŒç”¨ä¸Šäº† pandoc æ¸²æŸ“å™¨ã€‚~~ä¸çŸ¥é“ä¸ºå•¥è¿›å…¥å¦ä¸€ä¸ªé¡µé¢ä¹‹åæ•°å­¦å°±å¯„äº†ï¼Œæ‰€ä»¥å¦‚æœæŸä¸€ä¸ªé¡µé¢çš„æ•°å­¦ç”¨ä¸äº†è¯·ä½ åˆ·æ–°~~ åŸºæœ¬ä¸Šä¿®å¥½äº†ï¼Œç…§ç€ä¸€åˆ€æ–©ç»™è¯„è®ºå†™çš„åŠ è½½æ–¹å¼æŠ„äº†ä¸€éã€‚","tags":["åšå®¢"],"categories":["æ‚é¡¹"]},{"title":"é’›åˆé‡‘ä¼çš„åƒåœ¾åœº","path":"/post/misc-note/","content":"## ArchLinux æ·»åŠ è¯ä¹¦ï¼ˆæ„Ÿè°¢ [Marisa](https://yjacks.github.io/)ï¼‰\n```SHELL\nsudo trust anchor --store myCA.crt\n```\n\n## Grub æç¤º `/usr/share/grub/grub-mkconfig_lib: ç¬¬ 237 è¡Œï¼šprintf: â€œ$â€ï¼šæ— æ•ˆæ ¼å¼å­—ç¬¦`\n\nåœ¨è‹±æ–‡ç¯å¢ƒä¸‹ `grub-mkconfig` å³å¯\n\n```SHELL\nenv LANG=en_US.UTF-8 sudo grub-mkconfig -o /boot/grub/grub.cfg\n```\n\n## gcc ç¼–è¯‘æç¤º `ç¼–è¯‘å™¨å†…éƒ¨é”™è¯¯ï¼šFile size limit exceeded signal terminated program as`\n\nç¼–è¯‘çš„æ—¶å€™çˆ†å†…å­˜äº†\n\nå¯èƒ½æ˜¯ä½ ç”¨äº†å½¢å¦‚\n\n```cpp\nbool a[100000010] = {1,1};\n```\n\nçš„è¯­å¥è¿›è¡Œåˆå§‹åŒ–ã€‚  \nè¿™ä¸ªè¯­å¥è™½ç„¶åªä¼šç»™ä½ çš„ $a_0, a_1$ èµ‹å€¼ï¼Œä½†æ˜¯åœ¨ç¼–è¯‘é¢„å¤„ç†å’Œç¨‹åºè¿è¡Œçš„è¿‡ç¨‹æ—¶ï¼Œå®ƒéƒ½ä¼šå°†æ•°ç»„å…¨éƒ¨å±•å¼€å†è¿›è¡Œèµ‹å€¼/åˆå§‹åŒ–\n\næ‰€ä»¥è¿˜æ˜¯è€è€å®å®èµ‹å€¼å§\n\n```cpp\nbool a[100000010];\na[0] = a[1] = 1;\n```\n\n## gcc ç¼–è¯‘æç¤º `relocation truncated to fit: R_X86_64_PC32 against '.bss'`\n\né™æ€æ•°ç»„çˆ†å†…å­˜äº†ï¼Œä¸€èˆ¬çš„è§£å†³æ–¹æ³•æ˜¯åŠ ç¼–è¯‘é€‰é¡¹\n\n```bash\ng++ test.cxx -o test -mcmodel=medium\n```\n\næˆ–è€…\n\n```bash\ng++ test.cxx -o test -mcmodel=large\n```\n\n~~å…¶å®æ¢ clang++ ç¼–è¯‘æœ‰çš„æ—¶å€™å°±èƒ½è¿‡~~ ~~ä½†æ˜¯æµ‹è¯„æœºè‚¯å®šè¿˜æ˜¯ gcc ï¼Œæ‰€ä»¥åº”è¯¥è€ƒè™‘ä¸‹è‡ªå·±æ˜¯ä¸æ˜¯å†™é”™æ•°äº†~~","tags":["Linux","note"],"categories":["Linux"]},{"title":"æ¨¡æ‹Ÿé€€ç«","path":"/post/simulated-annealing/","content":"æ¨¡æ‹Ÿé€€ç«ä¸æ˜¯æ¨¡æ‹Ÿé¢˜æ„ï¼Œä¹Ÿä¸ä¼šè®©ä½ é€€ç«ï¼ˆå¯èƒ½ä¼šè®©ä½ ä¸Šç«ï¼‰ï¼Œé¡¾åæ€ä¹‰ï¼Œè¿™ä¸ªç®—æ³•æ¨¡æ‹Ÿçš„æ˜¯â€œé€€ç«â€ çš„è¿‡ç¨‹ã€‚\n\n## åŸºæœ¬åŸç†\n\né€€ç«å³æ™¶ä½“å†·å´çš„è¿‡ç¨‹ï¼Œå°†ä¸€ä¸ªç‰©ä½“åŠ çƒ­åˆ°ä¸€å®šæ¸©åº¦åä½¿å…¶é€æ¸é™æ¸©ã€‚è€Œåœ¨ç‰©ç†ä¸­ï¼Œç‰©ä½“å†…èƒ½è¶Šé«˜ï¼Œå…¶ç²’å­éšæœºè¿åŠ¨å°±æ›´å‰§çƒˆï¼ŒçŠ¶æ€ä¹Ÿå°±è¶Šä¸ç¨³å®šã€‚ç‰©ä½“æ¸©åº¦é«˜æ—¶ï¼ŒçŠ¶æ€æœ€ä¸ç¨³å®šã€‚ä½¿é™æ¸©ï¼Œç²’å­è¿åŠ¨å˜æ…¢ï¼ŒçŠ¶æ€å°±è¶‹äºç¨³å®šã€‚å½“é™æ¸©é€Ÿåº¦è¿‡å¿«ï¼Œä¼šå¯¼è‡´ç²’å­æ¥ä¸åŠæ’åˆ—æˆç¨³å®šçš„åŸæœ‰çš„ç»“æ„ï¼Œä»è€Œå½¢æˆèƒ½é‡é«˜ä¸ç¨³å®šçš„éæ™¶ä½“ã€‚ç›¸å¯¹çš„ï¼Œå¦‚æœé™æ¸©é€Ÿåº¦è¶³å¤Ÿæ…¢ï¼Œç²’å­ä¼šæ¸è¶‹æœ‰åºï¼Œç›´è‡³å†…èƒ½å‡ä¸ºæœ€å°ï¼Œæ­¤æ—¶ç‰©ä½“å‘ˆç°ä¸ºæ™¶ä½“ã€‚\n\nä¸Šé¢ä¸¤æ®µæ‰€è¯´çš„â€œéæ™¶ä½“â€å¯ä»¥çœ‹ä½œâ€œå±€éƒ¨æœ€ä¼˜è§£â€ï¼Œè€Œå˜å›åŸæœ‰ç»“æ„çš„æ™¶ä½“åˆ™å¯ä»¥çœ‹ä½œâ€œæœ€ä¼˜è§£â€ã€‚\n\nå¤§ä½“æ¥è¯´ï¼Œæ¨¡æ‹Ÿé€€ç«å°±æ˜¯éšæœºè·³è§£ï¼Œæ¥å—æ›´ä¼˜çš„è§£ï¼ŒåŒæ—¶ä¸ºäº†é˜²æ­¢å±€éƒ¨æœ€ä¼˜è§£çš„é™·é˜±ï¼Œæ¦‚ç‡æ€§æ¥å—ä¸ä¼˜çš„è§£ï¼Œåè€…ç›¸å½“äºç‰©ç†è¿‡ç¨‹ä¸­ç²’å­çš„éšæœºè·³åŠ¨ï¼Œå®ƒå¸¦æ¥äº†æ™¶ä½“é™æ¸©ç»“æœçš„éšæœºæ€§ã€‚è€Œè·³éšæœºè§£çš„æ¬¡æ•°å¤šå°‘ï¼Œåˆ™ç›¸å½“äºé™æ¸©çš„é€Ÿåº¦ï¼Œé™æ¸©çš„é€Ÿåº¦è¶Šæ…¢ï¼Œæ™¶ä½“å›åˆ°åŸæœ‰ç»“æ„çš„å¯èƒ½æ€§æ›´é«˜ï¼Œä¹Ÿå°±ç›¸å½“äºè·³è§£çš„æ¬¡æ•°è¶Šå¤šï¼Œè·‘å‡ºæœ€ä¼˜è§£çš„å¯èƒ½æ€§æ›´é«˜ã€‚\n\nå…ˆæ”¾ä¸€å¼ å›¾æ„Ÿæ€§ç†è§£ä¸€ä¸‹\n\n![](https://pic.imgdb.cn/item/63f75151f144a01007973ad6.webp)\n\næœ‰ä¸€ä¸ªæ¯”è¾ƒæœ‰è¶£çš„æ¯”å–»\n\nçˆ¬å±±ç®—æ³•ï¼šä¸€ä¸ªå…”å­ä»ä¸€ä¸ªç‚¹å¾€é«˜çˆ¬ï¼Œçˆ¬åˆ°äº†ä¸€ä¸ªå±±é¡¶ï¼Œä½†æ˜¯ä¸çŸ¥é“è¿™ä¸ªå±±é¡¶æ˜¯ä¸æ˜¯ç ç©†æœ—ç›å³°  \næ¨¡æ‹Ÿé€€ç«ï¼šä¸€ä¸ªå…”å­å–é†‰äº†ä¹±è·³ï¼Œè·³åˆ°äº†æŸä¸ªå±±é¡¶ä¹Ÿè¦ç»§ç»­è·³åˆ°åˆ«çš„å±±å¡ï¼Œä½†æ˜¯å®ƒé€æ¸æ¸…é†’ï¼Œå‘æœ€é«˜ç‚¹è·³å»\n\næ„Ÿæ€§ç†è§£åæˆ‘ä»¬è¯¦ç»†è®²è§£ä¸€ä¸‹ç®—æ³•è¿‡ç¨‹ã€‚\n\n## ç®—æ³•è¿‡ç¨‹\n\nè®¾å®šå¥½â€œåˆå§‹è§£â€ï¼Œâ€œåˆå§‹æ¸©åº¦â€ä¸â€œä¸‹é™é€Ÿåº¦â€ï¼Œæ¯ä¸€æ¬¡â€œé™æ¸©â€éƒ½å¾—åˆ°ä¸€ä¸ªæ–°è§£ï¼Œäºæ˜¯å‡ºç°ä¸¤ç§æƒ…å†µï¼Œå³æ–°è§£ä¼˜äºæ—§è§£æˆ–ä¸ä¼˜äºæ—§è§£ã€‚ä¼˜äºæ—§è§£æ˜¾ç„¶æ˜¯è¦æ¥å—çš„ï¼Œä½†æ˜¯åªæ¥å—ä¼˜è§£å¯èƒ½åªèƒ½æ‰¾åˆ°å±€éƒ¨æœ€ä¼˜ï¼Œä¸çˆ¬å±±ç®—æ³•æ— å¼‚ï¼Œå› è€Œæˆ‘ä»¬å¯¹äºä¸€ä¸ªä¸ä¼˜çš„è§£è¿˜éœ€è¦è¿›ä¸€æ­¥å¤„ç†ã€‚\n\nè€Œè¿™ä¸€æ­¥å¤„ç†ï¼ˆå¯èƒ½æ˜¯ï¼‰æ¨¡æ‹Ÿé€€ç«çš„ç²¾é«“æ‰€åœ¨ï¼Œæ˜¯æŠŠè¿™ä¸ªéšæœºåŒ–ç®—æ³•å’Œçƒ­åŠ›å­¦/ç»Ÿè®¡åŠ›å­¦ç­‰è¿æ¥èµ·æ¥çš„éƒ¨åˆ†ï¼Œå³æ¥å—è¿™ä¸ªä¸ä¼˜è§£çš„æ¦‚ç‡ã€‚\n\næ‘˜è‡ªç»´åŸºç™¾ç§‘\n\n> ç»å°”å…¹æ›¼åˆ†å¸ƒæ˜¯çŠ¶æ€èƒ½é‡ä¸ç³»ç»Ÿæ¸©åº¦çš„æ¦‚ç‡åˆ†å¸ƒå‡½æ•°ï¼Œç»™å‡ºäº†ç²’å­å¤„äºç‰¹å®šçŠ¶æ€ä¸‹çš„æ¦‚ç‡\n\nå…¬å¼å³ä¸º\n\n$$\np_i = \\frac{1}{Q} e^{\\frac{-\\epsilon_i}{kT}}\n$$\n\næ­¤å¤„ $p_i$ æ˜¯çŠ¶æ€ $i$ çš„æ¦‚ç‡ï¼Œ$\\epsilon_i$ ä¸ºçŠ¶æ€ $i$ çš„èƒ½é‡ï¼Œ$k$ ä¸º Boltzmann å¸¸æ•°ï¼Œ$T$ ä¸ºæ¸©åº¦\n\nå•Šå½“ç„¶è¿™ä¸ªå¹¶ä¸æ˜¯æˆ‘ä»¬æ¥ä¸‹æ¥éœ€è¦ç”¨åˆ°çš„å‡†åˆ™ï¼Œåªæ˜¯å¼•å…¥ä¸€ä¸ªçƒ­åŠ›å­¦å¸¸é‡ï¼Œå³ Boltzmann å¸¸æ•°ã€‚åŒæ—¶ä¸‹é¢çš„å‡†åˆ™å¾ˆå¤§ç¨‹åº¦åŸºäºä¸Šé¢çš„ç»å°”å…¹æ›¼åˆ†å¸ƒï¼ˆå¯èƒ½æ˜¯ï¼Œæˆ‘ç›®æµ‹çš„\n\n> 1953 å¹´ Metropolis æå‡ºäº†è¿™æ ·ä¸€ä¸ªé‡è¦æ€§é‡‡æ ·çš„æ–¹æ³•ï¼Œå³è®¾ä»å½“å‰çŠ¶æ€ $i$ ç”Ÿæˆæ–°çŠ¶æ€ $j$ï¼Œè‹¥æ–°çŠ¶æ€çš„å†…èƒ½å°äºçŠ¶æ€ $i$ çš„å†…èƒ½ï¼Œå³ $E_j<E_i$ï¼Œåˆ™æ¥å—æ–°çŠ¶æ€ $j$ ä½œä¸ºæ–°çš„å½“å‰çŠ¶æ€ï¼›å¦åˆ™ï¼Œä»¥æ¦‚ç‡ $\\exp(\\frac{-(E_j-E_i)}{kT})$ æ¥å—çŠ¶æ€ $j$ï¼Œå…¶ä¸­ $k$ ä¸º Boltzmann å¸¸æ•°ã€‚\n\nä¸Šé¢çš„æ¦‚ç‡å…¬å¼ä¸­ $\\exp$ å³ $e$ çš„æŒ‡æ•°å‡½æ•°ï¼ŒåŒæ—¶ä¸¤ä¸ªçŠ¶æ€èƒ½é‡çš„å·® $E_j - E_i$ å¯ä»¥è¡¨ç¤ºä¸º $\\Delta E$ï¼Œåˆ™å¯ä»¥å†™å‡ºä¸€ä¸ªï¼ˆæˆ‘ï¼‰æ›´å®¹æ˜“ç†è§£çš„è¡¨è¾¾æ–¹å¼ï¼Œå³\n\n$$\np_j = e^\\frac{-\\Delta E}{kT} \n$$\n\næ€»çš„æ¥è¯´ï¼Œæ¦‚ç‡ $p_{new}$ å¯ä»¥è¡¨ç¤ºä¸º\n\n$$\np_{new} = \n\\begin{cases}\n1, & \\text{if } \\operatorname{E}(x_{new}) < \\operatorname{E}(x_{old}) \\newline\ne^\\frac{-\\Delta E}{kT} & \\text{if } \\operatorname{E}(x_{new}) \\geqslant \\operatorname{E}(x_{old})\n\\end{cases}\n$$\n\næ¦‚ç‡å¤„ç†å®Œäº†ï¼Œä¸»è¦ç®—æ³•éƒ¨åˆ†ä¹ŸåŸºæœ¬ä¸Šç»“æŸäº†ï¼Œä¸‹é¢æˆ‘ä»¬å¼•å…¥ä¸€é“ä¾‹é¢˜ã€‚\n\n## ä¾‹é¢˜\n\n#### [TJOI2010]åˆ†é‡‘å¸\n\n##### é¢˜ç›®æè¿°\n\nç°åœ¨æœ‰ $n$ æšé‡‘å¸ï¼Œå®ƒä»¬å¯èƒ½ä¼šæœ‰ä¸åŒçš„ä»·å€¼ï¼Œç¬¬ $i$ æšé‡‘å¸çš„ä»·å€¼ä¸º $v_i$ã€‚\n\nç°åœ¨è¦æŠŠå®ƒä»¬åˆ†æˆä¸¤éƒ¨åˆ†ï¼Œè¦æ±‚è¿™ä¸¤éƒ¨åˆ†é‡‘å¸æ•°ç›®ä¹‹å·®ä¸è¶…è¿‡ $1$ï¼Œé—®è¿™æ ·åˆ†æˆçš„ä¸¤éƒ¨åˆ†é‡‘å¸çš„ä»·å€¼ä¹‹å·®æœ€å°æ˜¯å¤šå°‘ï¼Ÿ\n\n##### è¾“å…¥æ ¼å¼\n\n**æœ¬é¢˜å•ä¸ªæµ‹è¯•ç‚¹å†…æœ‰å¤šç»„æµ‹è¯•æ•°æ®**ã€‚\n\nè¾“å…¥çš„ç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ­£æ•´æ•° $T$ï¼Œè¡¨ç¤ºè¯¥æµ‹è¯•ç‚¹å†…æ•°æ®ç»„æ•°ã€‚\n\nå¯¹äºæ¯ç»„æµ‹è¯•æ•°æ®çš„æ ¼å¼ä¸ºï¼š\n\næ¯ç»„æµ‹è¯•æ•°æ®å ä¸¤è¡Œã€‚\n\nç¬¬ä¸€è¡Œæ˜¯ä¸€ä¸ªæ•´æ•° $n$ï¼Œè¡¨ç¤ºé‡‘å¸çš„ä¸ªæ•°ã€‚\n\nç¬¬äºŒè¡Œæœ‰ $n$ ä¸ªæ•´æ•°ï¼Œç¬¬ $i$ ä¸ªæ•´æ•°è¡¨ç¤ºç¬¬ $i$ ä¸ªé‡‘å¸çš„ä»·å€¼ $v_i$ã€‚\n\n##### è¾“å‡ºæ ¼å¼\n\nå¯¹äºæ¯ç»„æ•°æ®è¾“å‡ºä¸€è¡Œä¸€ä¸ªæ•´æ•°è¡¨ç¤ºç­”æ¡ˆã€‚\n\n#### æ ·ä¾‹ #1\n\n###### æ ·ä¾‹è¾“å…¥ #1\n\n```\n2\n3\n2 2 4\n4\n1 2 3 6\n```\n\n###### æ ·ä¾‹è¾“å‡º #1\n\n```\n0\n2\n```\n\n## æç¤º\n\n#### æ•°æ®è§„æ¨¡ä¸çº¦å®š\n\n- å¯¹ $30\\%$ çš„æ•°æ®ï¼Œä¿è¯ $1 \\leq v_i \\leq 1000$\n- å¯¹äº $100\\%$ çš„æ•°æ®ï¼Œä¿è¯ $1 \\leq T \\leq 20$ï¼Œ$1 \\leq n \\leq 30$ï¼Œ$1 \\leq v_i \\leq 2^{30}$ã€‚\n\nTODO","tags":["éšæœºåŒ–","æ¨¡æ‹Ÿé€€ç«"],"categories":["ç®—æ³•"]},{"title":"ç»†èŒ é¢˜è§£","path":"/post/xijun-solution/","content":"## é¢˜æ„\n\nä¸€å¼ æœ‰å‘æ— ç¯å¸¦æƒå›¾ï¼Œæœ‰ä¸€ä¸ªåˆå§‹å€¼ $k$ï¼Œä»å…¥å£è¿›å…¥åæ¯è¿‡ä¸€æ¡è¾¹ $i$ åˆ™ $k = k \\times 2+w_i$ï¼ˆ$w_i$ ä¸ºè¾¹æƒï¼Œæœ‰æ­£æœ‰è´Ÿï¼‰ï¼Œè¦æ±‚ä»å…¥å£åˆ°å‡ºå£çš„è¿‡ç¨‹ä¸­å§‹ç»ˆ $k>0$ï¼Œæ±‚ä½¿æ–¹æ¡ˆå­˜åœ¨çš„æœ€å°åˆå§‹å€¼ $k$ã€‚\n\n## æ€è·¯\n\n~~ä¹‹å‰ä»€ä¹ˆç­”è¾©é¢˜é¢~~\n\nå…ˆå¿½ç•¥ $k$ ç»è¿‡ä¸€æ¡è¾¹æ—¶ç¿»å€ï¼Œåªè€ƒè™‘åŠ è¾¹æƒï¼Œå¦‚ä½•æ±‚å‡ºç­”æ¡ˆï¼Ÿç”±äºå›¾å¸¦è¾¹æƒï¼Œä¿è¯ä¸å‡ºç°ç¯ï¼ŒåŒæ—¶åˆ¤æ–­ä¸€ä¸ª $k$ å€¼æ˜¯å¦åˆæ³•çš„æ–¹å¼å®é™…ä¸Šæ˜¯è®¡ç®—ä¸€æ¡è·¯å¾„è¾¹æƒå’Œå¹¶ä¸ $k$ æ¯”è¾ƒï¼Œè”æƒ³åˆ°æœ€çŸ­/é•¿è·¯ã€‚\n\næ–°é¢˜é¢ä¸­æåˆ°åªéœ€**å­˜åœ¨**ä¸€ç§æ–¹æ¡ˆèƒ½è®©å‡ºå£ $k>0$ å³å¯ï¼Œæ˜¾ç„¶æ˜¯æœ€çŸ­è·¯ã€‚ä½†æ˜¯å¦‚æœä»èµ·ç‚¹æ±‚æœ€çŸ­è·¯è¿˜è¦è€ƒè™‘ $k$ çš„å½±å“ï¼Œå› æ­¤åå‘å»ºå›¾ï¼Œç»ˆç‚¹åˆå§‹å€¼è®¾ä¸º $1$ï¼Œä»ç»ˆç‚¹è·‘å³å¯ã€‚\n\nç”±äºè¾¹æƒæœ‰æ­£æœ‰è´Ÿï¼Œåªèƒ½è·‘ SPFAã€‚\n\nå†è€ƒè™‘ $k$ çš„å˜æ¢è¿˜æœ‰ä¸€ä¸ª $\\times 2$ï¼Œå› æ­¤è·‘åå‘çš„ SPFA æ¾å¼›è¾¹æ—¶éœ€è¦æŠŠæ–°ç®—å‡ºçš„ $dist_i$ å€¼é™¤ä»¥ $2$ã€‚\n\n## ä»£ç \n\n```cpp\n#include <bitset>\n#include <cstdio>\n#include <cstring>\n#include <queue>\n\n// æ¨¡æ¿å‡½æ•°å¯ä»¥å‚è€ƒåšæ–‡ https://blog.tibrella.space/post/2023-%E8%AF%AD%E8%A8%80%E7%89%B9%E6%80%A7%E6%9D%82%E8%B0%88%E4%B8%8E%E5%B8%B8%E6%95%B0%E4%BC%98%E5%8C%96/\ntemplate <typename Type>\nvoid read(Type& _x) {\n    _x = 0;\n    bool f;\n    char ch;\n    f = 0;\n    do {\n        ch = getchar();\n        if (ch == '-') f = 1;\n    } while (ch < 48 || ch > 57);\n    do {\n        _x = (_x << 3) + (_x << 1) + (ch ^ 48);\n        ch = getchar();\n    } while (ch > 47 && ch < 58);\n    _x = f ? -_x : _x;\n}\n\ntemplate <typename Type>\nType max(Type _a, Type _b) {\n    return _a > _b ? _a : _b;\n}\n\nusing std::bitset;\nusing std::queue;\n\n#define N 105\n\nstruct edge {\n    edge* nex;\n    int u, v, w;\n} graph[N * N];\nedge* fir[N];\nint dis[N];\nedge* idx = graph;\nint n;\n\nqueue<int> q;\nbitset<N> st;\n\nvoid add(int u, int v, int w) {\n    ++idx;\n    idx->u = u;\n    idx->v = v;\n    idx->w = w;\n    idx->nex = fir[u];\n    fir[u] = idx;\n}\n\nvoid spfa(int nod);\n\nint t1;\n\nint main() {\n    read(n);\n    for (int i = 1; i <= n; ++i) {\n        for (int j = 1; j <= n; ++j) {\n            read(t1);                // ä¸­è½¬å˜é‡\n            if (t1) add(j, i, -t1);  // åå‘å­˜å›¾\n        }\n    }\n\n    spfa(n);\n\n    printf(\"%d\", dis[1]);\n\n    return 0;\n}\n\nvoid spfa(int nod) {\n    st.reset();\n    memset(dis, 0x3f, sizeof dis);\n    dis[nod] = 1;\n    st[nod] = 1;\n    q.push(nod);\n\n    while (!q.empty()) {\n        nod = q.front();\n        q.pop();\n        st[nod] = 0;\n        for (edge* e = fir[nod]; e; e = e->nex) {\n            if (dis[e->v] > max(1, (dis[nod] + e->w + 1) / 2)) {  // +1 é˜²æ­¢é™¤æ³•å‘ä¸‹å–æ•´é€ æˆé”™è¯¯\n                dis[e->v] = max(1, (dis[nod] + e->w + 1) / 2);\n                if (!st[e->v]) {\n                    q.push(e->v);\n                    st[e->v] = 0;\n                }\n            }\n        }\n    }\n}\n\n```","tags":["SPFA"],"categories":["é¢˜è§£"]},{"title":"å€å¢æ±‚LCA/æœ€è¿‘å…±åŒç¥–å…ˆ","path":"/post/multiply-lca/","content":"å€å¢æ±‚ LCA æ˜¯ä¸€ç§~~ä¸å¤ª~~é«˜æ•ˆ[^1]çš„æ±‚ LCA ç®—æ³•ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $\\operatorname{O}(n \\log n) \\sim \\operatorname{O}(\\log n)$\n\n## åŸç†\n\n### åˆå§‹\n\nç»´æŠ¤ä¸€ä¸ª $fa_{i,x}$ è¡¨ç¤º $x$ å¾€æ ¹èŠ‚ç‚¹èµ° $2^i$ æ­¥åˆ°è¾¾çš„èŠ‚ç‚¹ã€‚\n\n* åˆå§‹åŒ–æ—¶ $fa_{0,x} = father_x$\n* æ›´æ–°ä¸º $fa_{i,x} = fa_{i-1,fa_{i-1,x}}$\n\n### æŸ¥è¯¢\n\nä¸­å¿ƒæ€æƒ³æ˜¯åˆ©ç”¨äºŒè¿›åˆ¶å‘ä¸Šè·³ã€‚  \nå‡è®¾ç›®å‰è¦æŸ¥è¯¢ a å·èŠ‚ç‚¹å’Œ b å·èŠ‚ç‚¹çš„ LCAï¼Œå°†è¾ƒæ·±èŠ‚ç‚¹è®¾ä¸ºaï¼Œè¾ƒæµ…è®¾ä¸ºbï¼Œå³ï¼š\n\n* é¦–å…ˆå°† a å‘ä¸Šè·³åˆ°å’Œ b åŒä¸€é«˜åº¦ï¼Œè‹¥æ­¤æ—¶ a = bï¼Œç›´æ¥è¿”å› b å³å¯ï¼Œå³ b ä¸º a çš„ä¸€ä¸ªç›´æ¥çˆ¶äº²ï¼ŒLCA ä¹Ÿä¸€å®šæ˜¯ bã€‚\n* å¦åˆ™å°†ä¸¤ä¸ªèŠ‚ç‚¹åŒæ—¶å¾€ä¸Šè·³ï¼Œ$i$ ä»å¤§åˆ°å°ï¼Œæ¯æ¬¡è·³ $2^i$ï¼Œè§„åˆ™å¦‚ä¸‹ï¼š\n    1. å¦‚æœè·³å®Œä¸¤ä¸ªèŠ‚ç‚¹ç›¸åŒï¼Œå³æ‰¾åˆ°äº†ä¸€ä¸ªå…±åŒç¥–å…ˆï¼Œåˆ™ä¸è·³ï¼Œå› ä¸ºæ­¤æ—¶**ä¸èƒ½ç¡®å®š**è¿™ä¸ªå…±åŒç¥–å…ˆæ˜¯ä¸æ˜¯**æœ€è¿‘çš„**ã€‚\n    2. å¦åˆ™å°±ç»§ç»­åŒæ—¶å¾€ä¸Šè·³ï¼Œæœ€ç»ˆè¿”å› $fa_{0,a}$ å³å¯ã€‚\n\n[^1]: ä¸å¦‚æ ‘å‰–å¥½æƒ³å¥½å†™ï¼Œä¹Ÿä¸å¦‚æ ‘å‰–å¿«ã€‚çœŸè¦é«˜æ•ˆçš„è¯ï¼Œå»ºè®®æ¬§æ‹‰åº RMQ å¤æ‚åº¦è§£å†³ã€‚","tags":["æ ‘","å€å¢"],"categories":["å›¾è®º"]},{"title":"C++ è¯­è¨€ç‰¹æ€§æ‚è°ˆä¸å¸¸æ•°ä¼˜åŒ–","path":"/post/cpp-misc-opt/","content":"èµ·å› æ˜¯å‘ç°å¾ˆå¤šåŒå­¦å¯¹å¸¸æ•°ä¼˜åŒ–å’Œè¯­å¥çš„æ‰§è¡Œæ•ˆç‡æœ‰è¯¯è§£ï¼ˆæˆ‘è‚¯å®šä¹Ÿæœ‰ï¼Œä½†æ˜¯æˆ‘å°½é‡æŠŠæˆ‘çŸ¥é“çš„æ­£ç¡®çš„å†™å‡ºæ¥ï¼‰ï¼Œå› æ­¤å†™ä¸€ç¯‡æ‚è°ˆåšä¸€ä¸ªè¯´æ˜ï¼ŒåŒæ—¶ä»‹ç»ä¸€äº›æ¯”è¾ƒæ–°çš„å¥½ç”¨çš„è¯­è¨€ç‰¹æ€§ï¼ˆC++14ï¼‰\n\n## `template` æ¨¡æ¿å…³é”®å­—\n\n### å‡½æ•°\n\n`template` é¡¾åæ€ä¹‰æ˜¯ç”¨æ¥åšæ¨¡æ¿çš„ï¼Œé‚£æ˜¯åšä»€ä¹ˆçš„æ¨¡æ¿å‘¢ï¼Ÿ\nä¸¾ä¸ªä¾‹å­ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬å†™ `max` å‡½æ•°æ›¿ä»£ `std::max` æ¥ä¼˜åŒ–çš„æ—¶å€™ï¼Œå†™å‡ºæ¥çš„å¤§æ¦‚é•¿ä¸‹é¢è¿™æ ·ï¼š\n\n```cpp\nint max(int a, int b) {\n    return a > b ? a : b;\n}\n```\n\nåœ¨è¿™ä¸‰è¡Œä»£ç ä¸­ï¼Œç¬¬ä¸€è¡Œå®šä¹‰äº† `max` çš„è¿”å›å€¼å’Œå‚æ•° `a` `b` çš„ç±»å‹ä¸º `int`ï¼Œæ˜¾ç„¶æ„å‘³ç€è¿™ä¸ªå‡½æ•°åªèƒ½æ¯”è¾ƒ `int` ç±»å‹çš„é‡ã€‚\n\né‚£ä¹ˆå¦‚æœæ—¢æƒ³è¦æ¯”è¾ƒ `int` åˆæƒ³è¦æ¯”è¾ƒ `long long` è¿˜æƒ³æ¯”è¾ƒ `char` ç­‰ç­‰ï¼Œå¦‚æœæŒ‰ä¼ ç»Ÿçš„å†™æ³•ï¼Œå°±æ˜¯ Ctrl+C Ctrl+V å†™å¥½å‡ ä¸ªæ¯”è¾ƒå‡½æ•°ï¼Œè¿˜å¾—é‡æ–°å‘½åï¼Œç”šæ˜¯éº»çƒ¦ã€‚\n\nè§‚å¯Ÿå†™å‡ºæ¥çš„å‡ ä¸ªå‡½æ•°ï¼Œè‚‰çœ¼å¯è§ä»–ä»¬çš„æœ¬è´¨åŒºåˆ«åªæœ‰è¿”å›å€¼ä¸å‚æ•°çš„ç±»å‹ã€‚é‚£ä¹ˆæœ‰æ²¡æœ‰ä¸€ç§ç±»ä¼¼æ¨¡æ¿çš„ä¸œè¥¿ï¼Œå†™ä¸€ä¸ªå‡½æ•°çš„ä¸»è¦éƒ¨åˆ†ä½œä¸ºæ¨¡æ¿ï¼Œè¿”å›å€¼ã€å˜é‡çš„ç±»å‹ç”±ç¼–è¯‘å™¨å†³å®šå‘¢ï¼Ÿ\n\nè¿™å°±æ˜¯ `template` çš„ä¸€å¤§ä½œç”¨ï¼Œä¹Ÿæ˜¯ OI ä¸­æœ€å¸¸ç”¨çš„æ–¹é¢ã€‚\n\nä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨å‡½æ•°å£°æ˜å‰é¢åŠ ä¸Š `template <typename T>`ï¼Œæ­¤å¤„ T å¯ä»¥æ˜¯éšä¾¿ä¸€ä¸ªå­—æ¯æˆ–è€…å•è¯ï¼Œåé¢å†™å‡½æ•°çš„æ—¶å€™æŠŠ `int` æ›¿æ¢æˆ `T` å³å¯ã€‚\n\n```cpp\ntemplate <typename T>\nT max(T a, T b) {\n    return a > b ? a : b;\n}\n```\n\næ­¤æ—¶çš„ `T` ç›¸å½“äºä¸€ä¸ªå˜é‡ç±»å‹ï¼Œå¦‚æœè¿™ä¸ªå‡½æ•°è¢«è°ƒç”¨ï¼Œç¼–è¯‘å™¨ä¼šç»™ä½ ç”Ÿæˆä¸€ä¸ªç¬¦åˆä¼ å…¥å‚æ•°çš„ç±»å‹çš„ `max` å‡½æ•°ã€‚\n\nå½“ç„¶äº†ï¼Œå¦‚æœæ˜¯ä¸€ä¸ªæ²¡æœ‰ä¼ å‚çš„å‡½æ•°ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½æŒ‡å®šå…¶ç±»å‹ã€‚  \nè¿™æ ·å†™ä¼šæŠ¥é”™ï¼š\n\n```cpp\ntemplate <typename T>\n T read() {\n\t T a;\n\t cin >> a;\n\t return a;\n }\n\nint a = read();\n```\n\nåŸå› æ˜¯æ²¡æœ‰ä¼ å‚è¿›å»ï¼Œç¼–è¯‘å™¨æ— æ³•æ¨æ–­æ¨¡æ¿å‡½æ•°çš„ç±»å‹ã€‚  \nç±»æ¯” [STL å®¹å™¨](/post/cpp-stl-container) ä¸­çš„ä½¿ç”¨æ–¹æ³•ï¼Œèƒ½ä¸èƒ½ç”¨å°–æ‹¬å·å¸¦ä¸€ä¸ªç±»å‹åç§°è¿›å»å‘¢ï¼Ÿå¯ä»¥çš„ã€‚\n\n```cpp\ntemplate <typename T>\n T read() {\n\t T a;\n\t cin >> a;\n\t return a;\n }\n\nint a = read<int>();\n```\n\nè¿™æ ·å†™å°±ä¸ä¼šæŠ¥é”™äº†\n\n### æ¨¡æ¿ç±»\n\nå’Œæ¨¡æ¿å‡½æ•°ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥æ³›åŒ–ç»“æ„ä½“ä¸­çš„ç±»å‹ã€‚\n\n```cpp\nstruct qwq {\n\tint age\n};\n```\n\n~~å­˜ç´«å¦ˆçš„å¹´é¾„~~å¯èƒ½ä¼šçˆ† `int`ï¼Œ~~å­˜é˜¿æ±‚çš„å¹´é¾„~~å¯èƒ½æµªè´¹ `long long` çš„ç©ºé—´ï¼Œäºæ˜¯å¯ä»¥ï¼š\n\n```cpp\ntemplate <class T>\nstruct qwq {\n\tT age;\n};\n\nqwq<int8_t> akyuu;\nqwq<__int128> yukari;\n```\n\nè¿™æ ·ï¼Œ`akyuu.age` çš„ç±»å‹å³æ˜¯ `int8_t`ï¼Œ`yukari.age` çš„ç±»å‹å³æ˜¯ `__int128`ã€‚\n\n### TODO: `...` å…³é”®å­—\n\n## åŸºäºèŒƒå›´çš„å¾ªç¯\n\nä¸è¿‡å¤šä»‹ç»äº†ï¼Œä¸»è¦åœ¨ STL é‡Œç”¨\n\n```cpp\nfor (auto i : container) {\n    std::cout << i << ' ';\n}\n```\n\n`container` ä¸ºå®¹å™¨çš„åç§°ï¼Œ`auto` æ˜¯ C++11 ä»¥åçš„ç±»å‹åç§°ï¼Œç¼–è¯‘æ—¶ç”±ç¼–è¯‘å™¨æ¨æ–­ã€‚\n\næ­¤å¤„ `auto` çš„æ•ˆæœå°±æ˜¯æŠŠ `i` çš„ç±»å‹è®¾ç½®ä¸º `container` çš„å…ƒç´ çš„ç±»å‹ã€‚å¦‚æœ `container` æ˜¯ `vector<int>` ï¼Œåˆ™ä¸Šé¢è¯­å¥çš„æ•ˆæœå°±æ˜¯éå† `container` çš„æ‰€æœ‰å…ƒç´ å¹¶è¾“å‡ºã€‚\n\næ­¤å¤–ï¼Œå¦‚æœæƒ³éå†çš„åŒæ—¶ä¿®æ”¹å®¹å™¨ä¸­çš„å…ƒç´ ï¼Œå¯ä»¥åœ¨ `i` å‰åŠ å–å€ç¬¦ `&` è¡¨ç¤ºå¼•ç”¨ï¼Œå¦‚ä¸‹\n\n```cpp\nfor (auto &i : container) {\n    i = 0;\n}\n```\n\nè¯¥æ®µä»£ç çš„æ•ˆæœå³ä¸ºéå†å®¹å™¨ `container`ï¼ŒåŒæ—¶æŠŠå…¶ä¸­æ‰€æœ‰å…ƒç´ èµ‹å€¼ä¸º `0`;\n\n## å‡½æ•°ç›¸å…³\n\n### Lambda è¡¨è¾¾å¼\n\nå®é™…ä¸Šå°±æ˜¯å®šä¹‰äº†ä¸€ä¸ªå‡½æ•°ã€‚\n\nåŸºæœ¬è¯­æ³•ï¼š\n\n```cpp\n[æ•è·](å‚æ•°){\n\t// some code...\n}\n```\n\næ•è·ä¸€èˆ¬æ²¡å•¥ç”¨ï¼Œç•™ç©ºå°±å¥½ã€‚\n\nLambda è¡¨è¾¾å¼åœ¨ C++ ä¸­æ˜¯ä¸€ä¸ªç±»å‹ï¼Œä½†æ˜¯ä¸èƒ½ç”¨ç±»å‹åå®šä¹‰ï¼Œæ‰€ä»¥ç”¨ `auto` å£°æ˜ã€‚  \nä¸¾ä¸ªä¾‹å­ï¼Œç¼–å†™ `max` å‡½æ•°ï¼š  \nåŸæ¥æ˜¯è¿™æ ·çš„\n\n```cpp\nint max(int a, int b) {\n\treturn a > b ? a : b;\n}\n```\n\nç”¨ Lambda è¡¨è¾¾å¼é•¿è¿™æ ·ï¼š\n\n```cpp\nauto max = [](int a, int b) { // æ•è·éƒ¨åˆ†ç•™ç©ºï¼Œä¼ å‚å’Œå†…éƒ¨å®ç°ä¸å˜\n\treturn a > b ? a : b;\n};\n```\n\nçœ‹èµ·æ¥è¿™ä¸¤ç§æ–¹å¼æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œç¡®å®æ˜¯è¿™æ ·ï¼Œä½†æ˜¯ Lambda è¿˜æœ‰ä¸€ä¸ªé‡è¦æ€§è´¨â€”â€”åŒ¿åã€‚\n\næ˜¾ç„¶ï¼ŒåŸæ¥å†™å‡½æ•°çš„æ—¶å€™å¿…é¡»è¦å£°æ˜ï¼Œå£°æ˜è¿™ä¸ªå‡½æ•°çš„åç§°ï¼Œè¿”å›å€¼ç±»å‹ï¼Œä¼ å‚ç±»å‹ï¼Œå†…éƒ¨å®ç°ã€‚  \nä½†æ˜¯è§‚å¯Ÿåˆ°ä¸Šé¢å£°æ˜ Lambda è¡¨è¾¾å¼ `max` çš„æ—¶å€™ï¼Œä½¿ç”¨çš„æ˜¯ç±»ä¼¼å˜é‡èµ‹å€¼çš„æ–¹æ³•ã€‚é‚£æ˜¯ä¸æ˜¯åªç•™ä¸‹ç­‰å¼å³è¾¹çš„éƒ¨åˆ†ä¹Ÿå¯ä»¥å½“å‡½æ•°ä½¿ç”¨ï¼Ÿå®é™…ä¸Šæ˜¯å¯ä»¥çš„ï¼Œè¿™å°±æ˜¯ Lambda å‡½æ•°çš„åŒ¿åæ€§è´¨ã€‚å³å¼•å…¥ Lambda è¡¨è¾¾å¼ä¹‹åï¼Œå°±å¯ä»¥éšæ—¶éšåœ°å®šä¹‰å‡½æ•°è€Œä¸ç»™å®ƒèµ·åå­—ã€‚  \nå¬èµ·æ¥æœ‰ç‚¹æŠ½è±¡ï¼Œå†ä¸¾ä¸ªä¾‹å­ï¼š`std::sort`  \nåŸæ¥æˆ‘ä»¬æƒ³è¦è‡ªå®šä¹‰æ¯”è¾ƒå‡½æ•°ï¼Œåªèƒ½è¿™æ ·ï¼š\n\n```cpp\nbool cmp(int a, int b) {\n\treturn a > b;\n}\n\n...\n\nstd::sort(a.begin(), a.end(), cmp);\n```\n\nå¼•å…¥ Lambda è¡¨è¾¾å¼ä¹‹åï¼š\n\n```cpp\nstd::sort(a.begin(), a.end(), [](int a, int b){return a > b;});\n```\n\nåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰ç»™æ¯”è¾ƒå‡½æ•°èµ·åå­—ï¼Œå°±ç›´æ¥æ‰”åˆ°äº† `std::sort` é‡Œé¢ï¼Œè¿™æ ·åšæ–¹ä¾¿å¾ˆå¤š~\n\nè¯»è€…å¯èƒ½æœ‰ç–‘é—®ï¼šè¿™æ ·åšæ•ˆç‡å¦‚ä½•ï¼Ÿäº‹å®ä¸Šï¼ŒLambda è¡¨è¾¾å¼å’Œä¸‹é¢çš„å‡½æ•°å¯¹è±¡çš„æ•ˆç‡éƒ½æ˜¯æ¯”è¾ƒé«˜çš„ï¼Œæ¯”ç¬¬ä¸€ç§æ–¹å¼ä¸­ `cmp` è¿™ç§å‡½æ•°æŒ‡é’ˆæ•ˆç‡é«˜ã€‚\n\n### å‡½æ•°å¯¹è±¡\n\nå‡å®šä½ å·²ç»å­¦ä¼šäº†ç±»/ç»“æ„ä½“çš„è¿ç®—ç¬¦é‡è½½ã€‚\n\nè§‚å¯Ÿå‡½æ•°ç»„æˆ `function()`ï¼Œå®ƒæ˜¯ä¸æ˜¯éå¸¸åƒä¸€ä¸ªç±»å‹ `function` æ­é…ä¸Šäº† `()` è¿™ä¸ªè¿ç®—ç¬¦ï¼Ÿå¤ªåƒäº†ï¼\n\né‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥è¿™æ ·åšï¼šå¼€ä¸€ä¸ªå¯¹è±¡ï¼Œé‡è½½ `()` è¿™ä¸ªè¿ç®—ç¬¦å†å½“å‡½æ•°ç”¨ï¼Ÿå½“ç„¶å¯ä»¥ã€‚  \nè¿˜æ˜¯ç”¨ `max` ä¸¾ä¾‹ï¼š\n\n```cpp\nstruct qwq {\n\tint operator() (int a, int b){\n\t\treturn a > b ? a : b;\n\t}\n};\n\nqwq max;\n\n...\n\na = max(a, b);\n```\n\néå¸¸è‡ªç„¶ï¼Œéå¸¸æ˜“æ‡‚ã€‚\n\n### æ•ˆç‡\n\n~~æ‡’å¾—æµ‹äº†ã€‚~~  \n~~å¯ä»¥å‚è€ƒä¸‹ [è¿™ä¸ªåšå®¢](https://blog.csdn.net/u011392018/article/details/39028457)~~\n\nåˆ©ç”¨å¦‚ä¸Šé“¾æ¥å†…æ–¹å¼æµ‹è¯•çš„ç»“æœæ˜¯ï¼šå·®ä¸å¤šã€‚","tags":["C++","å¸¸æ•°ä¼˜åŒ–","è¯­è¨€ç‰¹æ€§"],"categories":["C++"]},{"title":"Manacher","path":"/post/manacher/","content":"update: 2023/6/7 é‡ç”»å›¾ç‰‡ï¼ˆå…¨éƒ¨ç”± Krita + é¼ æ ‡ å®Œæˆï¼‰\n\næ±‚ä¸€ä¸ªå­—ç¬¦ä¸²æœ€é•¿çš„å›æ–‡å­ä¸²ã€‚\nå­—é¢æ„æ€ï¼Œå›æ–‡å°±æ˜¯ä¸€ä¸ªä¸²æ­£ç€è¯»å€’ç€è¯»ä¸€æ ·ï¼Œå­ä¸²å°±æ˜¯ä¸€ä¸ªè¿ç»­çš„å­åºåˆ—ã€‚\n\n## é¢„å¤„ç†\n\nä¸éš¾å‘ç°å¯¹äºä¸€ä¸ªå›æ–‡å­—ä¸²ï¼Œæœ‰ä¸¤ç§æƒ…å†µï¼š\n\n1. $\\texttt{ABBA}$ å³é•¿åº¦ä¸ºå¶æ•°ï¼Œæ²¡æœ‰ä¸­å¿ƒå­—ç¬¦ï¼ŒåŠå¾„ä¸º $2$ï¼Œé•¿åº¦ä¸º $4$\n2. $\\texttt{ABCBA}$ å³é•¿åº¦ä¸ºå¥‡æ•°ï¼Œæœ‰ä¸­å¿ƒå­—ç¬¦ï¼ŒåŠå¾„ä¸º $3$ï¼Œé•¿åº¦ä¸º $5$\n\næ‡’å¾—ç»™ä»–ä»¬å¤„ç†ä¸¤ç§æƒ…å†µï¼Œæ€ä¹ˆåŠï¼Ÿåªéœ€è¦æ’å…¥ä¸€äº›å…¶ä»–å­—ç¬¦å³å¯ã€‚  \næ¯”å¦‚è¯´æˆ‘ä»¬å¯ä»¥åœ¨å¤´éƒ¨æ’å…¥ä¸€ä¸ª $\\texttt?$ ä»£è¡¨ä¸²å¼€å§‹ï¼Œ$\\texttt^$ ä»£è¡¨ä¸²ç»“æŸï¼Œç„¶ååœ¨æ–°ä¸²çš„æ¯ä¸€ä¸ªå­—ç¬¦ä¹‹é—´æ’å…¥ä¸€ä¸ª $\\texttt#$ å·ï¼Œå¾—åˆ°çš„æ–°ä¸²å°±èƒ½è¾¾åˆ°ç®€åŒ–æƒ…å†µçš„ç›®çš„ã€‚  \næŒ‰ç…§ä¸Šé¢çš„æ–¹æ³•å¤„ç†ä¹‹åï¼ŒåŸæ¥çš„ä¸¤ä¸ªä¸²ä¼šå˜ä¸ºï¼š  \nï¼ˆåªè§‚å¯Ÿå›æ–‡å­ä¸²ï¼‰\n\n1. $\\texttt{?#A#B#B#A#^}$ é•¿åº¦å˜ä¸ºå¥‡æ•°ï¼Œæœ‰ä¸­å¿ƒå­—ç¬¦ï¼ŒåŠå¾„ä¸º $5$ï¼Œé•¿åº¦ä¸º $9$\n2. $\\texttt{?#A#B#C#B#A#^}$ é•¿åº¦ä¸ºå¥‡æ•°ä¸å˜ï¼Œæœ‰ä¸­å¿ƒå­—ç¬¦ï¼ŒåŠå¾„ä¸º $6$ï¼Œé•¿åº¦ä¸º $11$\n\næƒ…å†µè¢«ç®€åŒ–æˆä¸€ç§ï¼Œå³é•¿åº¦ä¸ºå¥‡æ•°ã€‚ä¸æ­¤åŒæ—¶æˆ‘ä»¬å‘ç°ï¼Œæ–°ä¸²çš„å›æ–‡å­ä¸²çš„ **åŠå¾„ $-1$** å°±æ˜¯åŸä¸²å›æ–‡å­ä¸²çš„ **é•¿åº¦**\n\nä¸æ­¤åŒæ—¶ï¼Œé—®é¢˜ä¸å˜ï¼Œè¿˜æ˜¯æ±‚ä¸²çš„æœ€é•¿å›æ–‡å­ä¸²ã€‚\n\n```cpp\nvoid init(std::string& b) {\n    b += '$';\n    b += '#';\n    for (int i = 0; i < n; ++i) {\n        b += a[i];\n        b += '#';\n    }\n    b += '^';\n    n = b.size();\n}\n```\n\n## Manacher\n\n### åŸºæœ¬æ€æƒ³\n\n~~æŠ½è±¡æ¥è¯´~~å°±æ˜¯å¯¹äºå­—ç¬¦ä¸²çš„æ¯ä¸€ä¸ªä½ç½®ï¼Œç»´æŠ¤ä»¥è¿™ä¸ªä½ç½®ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡ä¸²é•¿åº¦åŒæ—¶ç®—å‡ºè¿™ä¸ªå›æ–‡ä¸²çš„å³è¾¹ç•Œï¼Œå†é€šè¿‡è¿™ä¸ªå³è¾¹ç•Œæ¥æ›´æ–°ä¸‹ä¸€ä¸ªä½ç½®çš„æœ€é•¿å›æ–‡ä¸²é•¿åº¦ä¸å³è¾¹ç•Œã€‚\n\nå…·ä½“æ¥è¯´ï¼Œå¯¹äºä¸€ä¸ªå­—ç¬¦ä¸² $S$ï¼Œå¼€ä¸€ä¸ªæ•°ç»„ $P_i$ è®°å½•ä»¥ $i$ ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡ä¸²åŠå¾„ï¼ˆå« $S_i$ï¼‰ï¼Œå˜é‡ $mid$ ä¸ºåœ¨ $i$ ä¹‹å‰è¾¹ç•Œæœ€é å³çš„å›æ–‡å­ä¸²çš„ä¸­å¿ƒï¼Œ$mr$ï¼ˆä¹Ÿå°±æ˜¯ $maxright$ï¼‰è®°å½•è¿™ä¸ªå›æ–‡å­ä¸²çš„å³è¾¹ç•Œï¼Œé€šè¿‡è¿™äº›æ›´æ–°ä¸‹ä¸€ä¸ªä½ç½®çš„è¿™äº›å€¼ã€‚\n\nä¸ºäº†æ–¹ä¾¿è¯´æ˜ï¼Œä»¥ $i$ ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡å­ä¸²ç§°ä¸º $T_i$\n\n#### ç»§æ‰¿å¯¹ç§°ç‚¹çš„æ•°æ®\n\nå½“å‰çŠ¶æ€ï¼š\n\n![](https://pic.imgdb.cn/item/648048c91ddac507ccdcc735.webp)\n\næšä¸¾åˆ° $i$ åï¼Œå¯¹äº $mr$ å’Œ $i$ æ¥è¯´æœ‰ä¸¤ç§æƒ…å†µï¼š$i$ åœ¨ $mr$ å†…æˆ–åœ¨ $mr$ å¤–\n\n- $i$ åœ¨å·¦ä¾§\n  å³ $i$ è¢« $T_{mid}$ åŒ…å«ã€‚  \n  æ˜¾ç„¶ $i$ ä¹‹å‰çš„ $P_k, k < i$ éƒ½æ˜¯å·²çŸ¥çš„ï¼Œ$i$ åœ¨ $mid$ ä¸ºä¸­å¿ƒçš„å›æ–‡å­ä¸²å†…ï¼Œé‚£ä¹ˆä¸€å®šå­˜åœ¨ $j$ æ˜¯ $i$ å…³äº $mid$ çš„å¯¹ç§°ç‚¹ï¼Œæƒ³åŠæ³•ä» $P_j$ æ¨å‡º $P_i$ï¼Œåˆ™  \n  ![](https://pic.imgdb.cn/item/648050fa1ddac507ccea1002)\n  é‚£ä¹ˆ $P_j$ å·²çŸ¥ï¼Œå¯¹äºä»¥ $j$ ä¸ºä¸­å¿ƒçš„æœ€é•¿å›æ–‡å­ä¸² $T_j$ æ¥è¯´æœ‰ä¸¤ç§æƒ…å†µ\n\n  1. $T_j$ è¢« $T_{mid}$ ä¸¥æ ¼åŒ…å«ï¼Œç”± $T_{mid}$ çš„å›æ–‡æ€§è´¨å¯çŸ¥ï¼Œæ­¤æ—¶ $P_i$ å¯ä»¥ç»§æ‰¿ $P_j$ çš„å€¼ï¼Œå‰©ä¸‹çš„åç»­å†æ¨ã€‚\n  2. $T_j$ æœªè¢« $T_{mid}$ ä¸¥æ ¼åŒ…å«\n     ![](https://pic.imgdb.cn/item/64804cb51ddac507cce2a40d)\n     å®¹æ˜“å‘ç°ï¼Œä¸¤ä¸ªé’è‰²ä¸²ä¸€å®šå¯¹ç§°ï¼ˆ$T_{mid}$ çš„å›æ–‡æ€§è´¨ï¼‰ï¼Œåˆå› ä¸º $T_j$ çš„å›æ–‡æ€§è´¨ï¼Œå¾—åˆ°ä¸¤ä¸ªé’è‰²ä¸²ï¼Œå·¦é’è‰²ä¸²å’Œæ©™è‰²ä¸²åˆ†åˆ«å¯¹ç§°ã€‚\n     æ­¤æ—¶ $T_i$ ä¸€å®šè¢« $T_{mid}$ ä¸¥æ ¼åŒ…å«ã€‚å› ä¸ºå¦‚æœä¸è¢«ä¸¥æ ¼åŒ…å«ï¼Œåˆ™ $P_{mid}$ çš„å€¼ä»å¯ä»¥å¢å¤§ï¼Œå¦‚ä¸‹å›¾  \n     ![](https://pic.imgdb.cn/item/64804ed51ddac507cce5d0b5)\n     å›¾ä¸­è“è‰²å—é€šè¿‡ $T_{mid}$ ä¸²å›æ–‡çš„æ€§è´¨å·²çŸ¥ç›¸ç­‰ï¼Œæ¯ä¸ªè“è‰²å—å‡å¯ä»¥é€šè¿‡è‡ªèº«æ‰€åœ¨å›æ–‡ä¸²æ¨å‡ºå…¶å¤–ä¾§æ©™è‰²å—ä¹Ÿæ˜¯ç›¸ç­‰çš„ã€‚  \n     æ˜¾ç„¶è¿™ç§æƒ…å†µä¸ä¼šå‡ºç°ï¼Œå› ä¸ºè¿™ç§æƒ…å†µä¸‹ $P_{mid}$ æ˜¯ä¸€ä¸ªå‡å€¼ï¼Œè€Œä»¥ä¸Šé€’æ¨è¿‡ç¨‹çš„å‰ææ˜¯å‰é¢çš„å€¼ä¿è¯æ­£ç¡®ã€‚\n\n- $i$ åœ¨å³ä¾§  \n  æ²¡æœ‰å¯ä»¥ç»§æ‰¿çš„å€¼åˆ™å¯ä»¥ç›´æ¥é‡æ–°æ¨ï¼Œä¸éœ€è¦è¿‡å¤šè€ƒè™‘ã€‚\n\n```cpp\nif (i < mr) {\n    p[i] = min(p[(mid << 1) - i], mr - i);\n} else {\n    p[i] = 1;\n}\n```\n\n#### æ›´æ–° $P_i$\n\nç›´æ¥ä»å½“å‰è®°å½•çš„åŠå¾„å‘å¤–ç»§ç»­æšä¸¾ï¼Œç›´åˆ°é‡åˆ°ä¸¤ä¸ªä¸ç›¸åŒçš„å­—ç¬¦ä¸ºæ­¢ï¼ˆè¾¹ç•Œä¸Šæœ‰ `$` `^`ï¼Œæšä¸¾åˆ°ä¸€å®šä¼šåœæ­¢ï¼Œæ‰€ä»¥ä¸ç”¨è€ƒè™‘è¾¹ç•Œé—®é¢˜ï¼‰ã€‚\n\n```cpp\nwhile (b[i - p[i]] == b[i + p[i]]) {\n    ++ p[i];\n}\n```\n\n#### æ›´æ–° $mr$ å’Œ $mid$\n\nå‰æ–‡è¯´è¿‡ $mr$ $mid$ éƒ½æ˜¯è¾¹ç•Œæœ€é å³çš„å›æ–‡å­ä¸²çš„å±æ€§ï¼Œé‚£ä¹ˆåªéœ€è¦åˆ¤æ–­æ–°æ‰¾åˆ°çš„å›æ–‡å­ä¸²å³è¾¹ç•Œæ˜¯å¦å¤§äº $mr$ å³å¯ã€‚\n\n```cpp\nif (i + p[i] > mr) {\n    mr = i + p[i];\n    mid = i;\n}\n```\n\nè‡³æ­¤ Manacher ç®—æ³•ä¸»è¦è¿‡ç¨‹ç»“æŸã€‚\n\n### å®ç°\n\n```cpp\nvoid init(std::string& b) {\n    b += '$';\n    b += '#';\n    for (int i = 0; i < n; ++i) {\n        b += a[i];\n        b += '#';\n    }\n    b += '^';\n    n = b.size();\n}\n\nvoid manacher() {\n    int mr = 0, mid;\n    for (int i = 1; i < n; ++i) {\n        if (i < mr) {\n            p[i] = min(p[(mid << 1) - i], mr - i);\n        } else {\n            p[i] = 1;\n        }\n\n        while (b[i - p[i]] == b[i + p[i]]) {\n            ++p[i];\n        }\n\n        if (i + p[i] > mr) {\n            mr = i + p[i];\n            mid = i;\n        }\n    }\n}\n```\n\n### æ—¶é—´å¤æ‚åº¦[^1]\n\nå½“ $P_j$ å·¦ä¾§å–åˆ°å·¦è¾¹ç•ŒåŠä»¥å¤–æ—¶ï¼Œ$P_i$ æ‰éœ€è¦æ›´æ–°ï¼ˆå…¶ä»–æƒ…å†µéƒ½å› ä¸ºä¸æ»¡è¶³æ¡ä»¶è€Œä¸ç”¨è¿›å¾ªç¯ï¼‰ï¼Œè€Œå³ç«¯ç‚¹æ˜¯å•è°ƒé€’å¢ä¸”ä¸¥æ ¼å°äºç­‰äº $n$ çš„ï¼Œå› æ­¤æ€»æ—¶é—´å¤æ‚åº¦ä¸º $\\operatorname{O}(n)$\n\n[^1]: å‚è€ƒ[è°·é›¨çš„ç¬”è®°](https://www.acwing.com/file_system/file/content/whole/index/content/7964832/)","tags":["å­—ç¬¦ä¸²","ç®—æ³•","Manacher"],"categories":["å­—ç¬¦ä¸²"]},{"title":"æ ‘çŠ¶æ•°ç»„","path":"/post/binary-indexed-tree/","content":"> æ ‘çŠ¶æ•°ç»„ä»£æ›¿çº¿æ®µæ ‘ã€‚ â€”â€” zzzã€Šå¸¸æ•°ä¼˜åŒ–ä¸ NOILinuxã€‹\n\né¡¾åæ€ä¹‰ï¼Œæ ‘çŠ¶æ•°ç»„æ˜¯ä¸€ç§æ ‘å½¢ç»“æ„ï¼Œä½†æ˜¯å› ä¸ºä»–ç‹¬ç‰¹çš„ç»“æ„å’Œæ‹†åˆ†æ–¹å¼ï¼ˆäºŒè¿›åˆ¶ä½ åˆæ¥äº†æ˜¯å§ï¼‰ï¼Œå¯ä»¥ç›´æ¥ç”¨æ•°ç»„å­˜å‚¨ã€‚  \nç”¨é€”æ˜¯è§£å†³å¤§éƒ¨åˆ†åŒºé—´ä¿®æ”¹æŸ¥è¯¢é—®é¢˜ï¼Œå¤æ‚åº¦ä¸€èˆ¬æ˜¯ $\\operatorname{O}(\\log n)$ ï¼ŒåŒæ—¶å¸¸æ•°å°ï¼ˆæš—ç¤º [çº¿æ®µæ ‘](/post/segment-tree) ä¸è¡Œï¼‰ï¼ŒåŒæ—¶ç é‡å°ï¼Œå¥½ç†è§£ï¼ˆæš—ç¤º \\* 2ï¼‰ï¼Œä½†æ˜¯å¤æ‚çš„åŒºé—´ä¿®æ”¹æŸ¥è¯¢é—®é¢˜ä¸èƒ½è§£å†³ï¼ŒåŒæ—¶åŒºé—´æœ€å¤§æœ€å°å€¼ä¹Ÿä¸èƒ½ç”¨å®ƒå¤„ç†ï¼ˆåæ–‡ä¼šè¯´ï¼‰\n\nUpdate on 2023/6/7 æœ¬è´¨ä¸Šå°±æ˜¯èƒ½å¤Ÿä»¥æå°çš„å¸¸æ•°ä¸”ä¸¥æ ¼ $\\operatorname{O}(\\log n)$ çš„æ—¶é—´å¤æ‚åº¦è¿›è¡Œå•ç‚¹ä¿®æ”¹ä¸å‰ç¼€å’Œçš„ç»´æŠ¤ï¼Œä¸è¿‡è¿™ä¸ªå‰ç¼€å’Œå¯ä»¥ç©å¾—æ¯”è¾ƒèŠ±ã€‚\n\nå®é™…ä¸ŠåŸç†çœ‹çœ‹å°±å¾—äº†ï¼Œè¿™ç©æ„æ¿å­å†™å®Œäº†åŠå¹´è¿‡å»éƒ½ä¸å¸¦å¿˜çš„...\n\nå…³äºå¸¸æ•°å·®è·åˆ°åº•å¤šå¤§ï¼ŸS2 çš„åŒå­¦ä»¬å¯ä»¥çœ‹çœ‹ S2OJ # 786ï¼Œä½¿ç”¨æ™®é€šå¿«è¯»ä»… 2.60sï¼ˆç°åœ¨æœ€å¿«çš„æˆ‘çš„æäº¤è®°å½•æ˜¯å¡å¸¸ç‰ˆçš„ï¼‰ï¼Œçº¿æ®µæ ‘è§£æ³•è²Œä¼¼æœ€å¿«çš„æ˜¯ lyq å­¦é•¿çš„ 6.69sã€‚\n\n## åŸºæœ¬æ ‘çŠ¶æ•°ç»„\n\n### åŸç†\n\næ¥è‡ªå­¦é•¿çš„ä¸€å¼ å›¾  \n**æ³¨æ„**ä¸‹æ–‡åŸºæœ¬ä¸Šæ‰€æœ‰ä¸œè¥¿éƒ½å¯ä»¥/éœ€è¦æ­é…è¿™ä¸ªå›¾è¿›è¡Œç†è§£\n\n![](https://pic.imgdb.cn/item/63d613b2face21e9ef36c9df.jpg)\n\nä»¥æ±‚åŒºé—´å’Œçš„æ ‘çŠ¶æ•°ç»„ä¸ºä¾‹ï¼Œæ ‘ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹å­˜å‚¨ä¸€æ®µåŒºé—´çš„å’Œï¼Œè¯¢é—®æ—¶è¿›è¡Œå‰ç¼€å’ŒåŠ å‡å³å¯å¾—å‡ºä»»æ„åŒºé—´çš„å’Œã€‚  \nåˆ†åŒºé—´çš„æ–¹æ³•å³åˆ©ç”¨äºŒè¿›åˆ¶ï¼Œå¯¹äºç¬¬ $i$ èŠ‚ç‚¹æ¥è¯´ï¼Œ$i$ çš„äºŒè¿›åˆ¶å½¢å¼ä¸­æœ€ä½ä¸€ä½ `1` çš„ä½ç½®ä¸º $x$ï¼Œé‚£ä¹ˆ $tree_i$ å°±å­˜å‚¨äº† $[i-2^x+1,i]$ åŒºé—´çš„å’Œã€‚  \næ³¨æ„æ­¤å¤„ $x$ ä» `0` å¼€å§‹ç®—  \nä»¥ $3$ ä¸ºä¾‹ï¼Œ$3$ çš„äºŒè¿›åˆ¶ä¸º `0000 0011`ï¼Œæœ€ä½ä¸€ä½ `1` çš„ä½ç½®æ˜¯ 0ï¼Œåˆ™ $tree_3$ å­˜å‚¨ $[3-1+1,3]$ å³ $[3,3]$ çš„åŒºé—´å’Œã€‚  \nå†ä»¥ $8$ ä¸ºä¾‹ï¼Œ$8$ çš„äºŒè¿›åˆ¶ä¸º `0000 1000`ï¼Œæœ€ä½ä¸€ä½ `1` çš„ä½ç½®æ˜¯ 3ï¼Œåˆ™ $tree_8$ å­˜å‚¨ $[8-8+1,8]$ å³ $[1,8]$ çš„åŒºé—´å’Œã€‚\n\n<!-- TODO: åˆ¶ä½œåŠ¨ç”» -->\n\n### å®ç°\n\n#### å»ºç«‹\n\nå®é™…ä¸Šä¸ç”¨ç‰¹æ„å¤„ç†å»ºç«‹ï¼Œç›´æ¥åœ¨è¾“å…¥è¿‡ç¨‹ä¸­æ¯è¾“å…¥ä¸€ä¸ªæ•°å°±[ä¿®æ”¹](#å•ç‚¹ä¿®æ”¹)å³å¯ã€‚\n\n```cpp\nfor (int i = 1; i <= n; ++i) {\n    cin >> t1; // tmp\n    modify(i,t1);\n}\n```\n\n#### lowbit\n\næœ¬å‡½æ•°å®ç°æŸ¥æ‰¾ä¸€ä¸ªæ•°æœ€åä¸€ä½ $1$ çš„ä½ç½®ã€‚\n\né¦–å…ˆå£°æ˜ä¸€ä¸ªå†·çŸ¥è¯†ï¼ˆå¤§æ¦‚å†·ï¼‰ï¼Œä½è¿ç®—æ˜¯é’ˆå¯¹å†…å­˜ä¸­å­˜å‚¨çš„åŸæ•°æ®çš„è¿ç®—ï¼Œæ¢å¥è¯è¯´ï¼Œè¿›è¡Œä½è¿ç®—çš„æ˜¯è¡¥ç è€Œä¸æ˜¯åŸç ã€‚\n\n**åŸç **å³ä¸€ä¸ªæ•°æœ¬èº«çš„äºŒè¿›åˆ¶è¡¨ç¤ºï¼Œ**åç **å³åœ¨åŸç çš„åŸºç¡€ä¸Šç¬¦å·ä½ä¸å˜å…¶ä»–ä½å–åã€‚  \n**è¡¥ç **åˆ†ç±»æ¥è¯´ï¼Œæ­£æ•°çš„è¡¥ç æ˜¯å®ƒçš„åŸç ï¼Œè´Ÿæ•°çš„è¡¥ç ä¸ºå…¶åç $+1$ã€‚\n\nåœ¨è¿™é‡Œæˆ‘ä»¬åªè€ƒè™‘æœ€åä¸€ä½ `1` åŠå®ƒåé¢çš„ `0`ã€‚  \næ¯”å¦‚ `0011 0100` è¿™ä¸ªäºŒè¿›åˆ¶æ•°ï¼Œæˆ‘ä»¬å…ˆæŠŠå®ƒå˜æˆè´Ÿæ•°ï¼Œå³æŒ‰ä½å–åååŠ ä¸€ï¼ˆæ˜“è¯è¿™å°±æ˜¯ä»–çš„ç›¸åæ•°ï¼‰ï¼Œå˜ä¸º `11001011` å†å˜ä¸º `11001100`ã€‚  \nå‘ç°äº†ä¸€ä»¶ç¥å¥‡çš„äº‹æƒ…ï¼ŒåŸæ¥æœ€ä½ä¸€ä½ `1` ç«Ÿç„¶å›æ¥äº†ï¼  \næ˜¾ç„¶ï¼Œè¿™ä½ `1` å‰é¢çš„æ‰€æœ‰æ•°å­—å› ä¸ºè¢«å–åæ‰€ä»¥å’ŒåŸæ•°å®Œå…¨ä¸åŒï¼›åé¢çš„æ‰€æœ‰æ•°å­—åŸæ¥ä¸€å®šæ˜¯ `0` å–ååå˜æˆä¸€æ’ `1`ï¼Œè´Ÿæ•°çš„è¡¥ç æ˜¯åç $+1$ï¼Œä»è€Œä¸€ç›´è¿›ä½åˆ°åŸæ¥æœ€åä¸€ä½ `1` è¿™é‡Œï¼Œè€Œå®ƒä»¬æœ¬èº«å˜å›äº† `0` ï¼›åˆå› ä¸ºè¿™ä½ `1` è¢«å–ååæ˜¯ `0` æ‰€ä»¥æ— è®ºå¦‚ä½•éƒ½ä¸ä¼šå†å‘å‰è¿›ä½ã€‚  \nä»è€Œä¿è¯å¯¹äºä»»æ„ä¸€ä¸ªæ­£æ•° $x$ï¼Œ$-x$ ä¸ $x$ çš„å­˜å‚¨åªæœ‰ $x$ æœ¬èº«æœ€åä¸€ä½ `1` æ˜¯ç›¸åŒçš„ã€‚  \nå› æ­¤ `lowbit()` çš„å®ç°å°±éå¸¸ç®€å•äº†ï¼Œç›´æ¥ç”¨ `x&-x`ï¼Œå¾—åˆ°çš„ç»“æœå°±æ˜¯[åŸç†](#åŸç†)ä¸­æ‰€è¯´çš„ $2^x$ï¼Œåˆå¿«åˆå¥½æƒ³ï¼Œç”¨ç€è¿˜æ–¹ä¾¿ã€‚\n\n```cpp\nint lowbit(int x) {\n    return (x&-x);\n}\n```\n\n#### å•ç‚¹ä¿®æ”¹\n\nå‡è®¾ä¿®æ”¹ä¸ºç»™ç¬¬ $x$ ä¸ªæ•°å¢åŠ  $v$ï¼Œé‚£æˆ‘ä»¬å°±éœ€è¦ä¿®æ”¹æ‰€æœ‰åŒ…å«ç¬¬ $x$ ä¸ªå…ƒç´ çš„èŠ‚ç‚¹ï¼Œåˆ™ä»ç¬¬ $x$ ä¸ªèŠ‚ç‚¹å¯»æ‰¾çˆ¶äº²èŠ‚ç‚¹ç›´åˆ°æ ¹èŠ‚ç‚¹ä¸ºæ­¢ï¼ˆå‚è€ƒä¸Šå›¾ï¼‰ã€‚  \n$x$ èŠ‚ç‚¹çš„ç›´æ¥çˆ¶äº²æ˜¯ $x+\\operatorname{lowbit}(x)$ï¼Œå› æ­¤ç›´æ¥ä¸€å±‚å¾ªç¯å®ç° $\\operatorname{O}(\\log n)$ ä¿®æ”¹ã€‚\n\n```cpp\nvoid modify(int x, int v) {\n    for (int i = x; i <= n; i += lowbit(i)) {\n        tree[i] += v;\n    }\n}\n```\n\n#### åŒºé—´æŸ¥è¯¢\n\næŸ¥è¯¢åŒºé—´ä¸º $[l,r]$ æ—¶ï¼Œå°†é—®é¢˜è½¬åŒ–ä¸ºæ±‚ $[1,r] - [1,l-1]$ çš„å€¼ï¼ˆå‰ç¼€å’ŒçŸ¥è¯†ï¼‰ï¼Œå› æ­¤æˆ‘ä»¬åªéœ€è¦å®ç°æŸ¥è¯¢å‰ç¼€å’Œçš„åŠŸèƒ½å³å¯ã€‚  \nå› ä¸º $i$ èŠ‚ç‚¹å­˜å‚¨çš„æ˜¯ä¸€æ®µé•¿åº¦ä¸º $\\operatorname{lowbit}(i)$ çš„åŒºé—´çš„å’Œï¼Œå› æ­¤å–å®Œ $i$ å·ç‚¹çš„å€¼åå†å– $i-\\operatorname{lowbit}(i)$ å·èŠ‚ç‚¹çš„å€¼ï¼Œç›´åˆ°ä½ç½®å˜ä¸º $0$ï¼ˆåˆ°å¤´ï¼‰å³å¯ï¼ˆçœ‹ä¸æ‡‚å°±ç»“åˆä¸Šé¢å›¾ï¼‰\n\n```cpp\nint query(int x) {\n    int res = 0;\n    for (int i = x; i; i -= lowbit(i)) {\n        res += tree[i];\n    }\n    return res;\n}\n\nans = query(r) - query(l-1);\n```\n\n## æ”¹åŒºé—´æŸ¥å•ç‚¹\n\nä¸Šæ–‡æˆ‘ä»¬è§£å†³äº†æ±‚å‰ç¼€å’Œçš„é—®é¢˜ï¼Œæœ¬æ¬¡éœ€è¦æŸ¥è¯¢å•ç‚¹ï¼Œé‚£ä¹ˆå¾ˆå®¹æ˜“è”æƒ³åˆ°**å·®åˆ†**ã€‚æ›´æ”¹åŒºé—´å¯¹åº”æ”¹å·®åˆ†æ•°ç»„ä¸Šçš„ä¸¤ä¸ªç‚¹ï¼ŒæŸ¥è¯¢å•ç‚¹å¯¹åº”æŸ¥è¯¢å·®åˆ†æ•°ç»„çš„å‰ç¼€å’Œã€‚\n\n## åŒºé—´åŠ åŒºé—´æ±‚å’Œ\n\n~~å‘ç°æ ‘çŠ¶æ•°ç»„å¥½å¿«äºæ˜¯å›æ¥è¡¥ä¸€ä¸‹~~ï¼ˆ2023.6.23ï¼‰\n\nå¯¹åŸæ•°ç»„è¿›è¡Œå·®åˆ†ï¼Œæ˜“å¾—ï¼š\n\n$$\nd_i = a_i - a_{i-1} \\newline\na_i = \\sum_{j=1}^i d_i \\newline\n$$\n\nå– $[1,x]$ çš„åŒºé—´å’Œï¼Œå³ä¸ºï¼š\n\n$$\n\\begin{aligned}\nans &= \\sum_{i=1}^x a_i \\newline\n&= \\sum_{i=1}^x\\sum_{j=1}^{i} d_i \\newline\n&= \\sum_{i=1}^x d_i(x-i+1) \\newline\n&= \\sum_{i=1}^x(1+x)d_i-\\sum_{i=1}^x i\\cdot d_i\n\\end{aligned}\n$$\n\nç¬¬äºŒè¡Œåˆ°ç¬¬ä¸‰è¡Œé‚£é‡Œä¸çŸ¥é“æ€ä¹ˆæ¨å‡ºæ¥çš„è¯ï¼Œè§‚å¯Ÿæ¯ä¸ª $d_i$ å‡ºç°çš„æ¬¡æ•°ï¼Œæ˜¾ç„¶ $d_1$ å‡ºç° $x$ æ¬¡ï¼Œ$d_2$ å‡ºç° $x-1$ æ¬¡ï¼ˆé™¤äº† $i=1$ çš„æ—¶å€™éƒ½å‡ºç°äº†ï¼‰ï¼Œäºæ˜¯è½»æ¾æ¨å‡ºæ¥ã€‚\n\nå› æ­¤æˆ‘ä»¬åªéœ€è¦ç»´æŠ¤ä¸¤ä¸ªæ ‘çŠ¶æ•°ç»„ï¼Œä¸€ä¸ªç»´æŠ¤ $d_i$ å³å·®åˆ†æ•°ç»„ï¼Œå¦ä¸€ä¸ªç»´æŠ¤ $i\\cdot d_i$ å³å¯ã€‚\n\næ³¨æ„ï¼šæ­¤å¤„æ ‘çŠ¶æ•°ç»„ç»´æŠ¤çš„ä»ç„¶æ˜¯å‰ç¼€å’Œï¼Œ$i\\cdot d_i$ ä¸­çš„ $i$ å°±æ˜¯ä¿®æ”¹çš„ä½ç½®ï¼Œè€Œä¸æ˜¯æ ‘çŠ¶æ•°ç»„ä¿®æ”¹æ—¶å¾ªç¯çš„ $i$ã€‚\n\næ ¸å¿ƒä»£ç ï¼š\n\n```cpp\n#define N 100005\n\ni64 id[N], d[N];\ni32 n;\n\ninline void mod(i32 pos, i64 val) {\n    for (i32 i = pos; i <= n; i += lowbit(i)) {\n        id[i] += pos * val;\n        d[i] += val;\n    }\n}\n\ninline i64 que(i32 pos) {\n    i64 res = 0;\n    for (i32 i = pos; i; i -= lowbit(i)) {\n        res += d[i] * (pos + 1) - id[i];\n    }\n    return res;\n}\n\ninline void modify(i32 l, i32 r, i64 val) {\n    mod(l, val);\n    mod(r + 1, -val);\n}\n\ninline i64 query(i32 l, i32 r) {\n    return que(r) - que(l - 1);\n}\n```","tags":["æ ‘çŠ¶æ•°ç»„"],"categories":["æ•°æ®ç»“æ„"]},{"title":"RMQ/STè¡¨","path":"/post/sparse-table/","content":"ç›®æ ‡æ˜¯è§£å†³ RMQ é—®é¢˜ï¼Œå³å¯¹äºä¸€ä¸ªå¤§åŒºé—´ï¼ŒçŸ­æ—¶é—´å†…æŸ¥è¯¢ä¸€ä¸ªå°åŒºé—´çš„æœ€å¤§æœ€å°å€¼\n\nä¸‹æ–‡ä»¥æœ€å¤§å€¼ä¸ºä¾‹è¯´æ˜\n\nST è¡¨æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªåŠ¨æ€è§„åˆ’ï¼ˆå€å¢çš„ï¼‰\n\nå…ˆåˆ©ç”¨å€å¢ï¼ˆäºŒè¿›åˆ¶æ‹†åˆ†ï¼‰é¢„å¤„ç†ç„¶å $\\operatorname{O}(1)$ æŸ¥è¯¢ï¼Œæ¯”çº¿æ®µæ ‘å¿«ï¼Œä½†æ˜¯åªæ”¯æŒé™æ€åŒºé—´\n\n## åŸç†\n\n### é¢„å¤„ç†\n\n$f_{i,j}$ è¡¨ç¤ºä» $i$ å¼€å§‹ï¼Œé•¿åº¦ä¸º $2^j$ çš„åŒºé—´ä¸­çš„æœ€å¤§å€¼\n\né¢„å¤„ç†é˜¶æ®µï¼Œå¯¹äº $f_{i,j}$ æ¥è¯´ï¼Œç›´æ¥\n$$\n    \\max\\{ f_{i,{j-1}},f_{i+2^{j-1},j-1} \\}\n$$\né€’æ¨å³å¯ï¼Œéå¸¸å®¹æ˜“æƒ³ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º $\\operatorname{O}(n\\log n)$\n\n### æŸ¥è¯¢\n\nå¯¹äºä¸€ä¸ªåŒºé—´ $[L,R]$ æ¥è¯´ï¼Œå‡è®¾ä»–çš„é•¿åº¦ä¸º $len$ \n\n![](https://pic.imgdb.cn/item/63d4c4b0face21e9ef9f3cb9.jpg)\n\nå¾ˆå®¹æ˜“èƒ½æ‰¾åˆ°ä¸€ä¸ª $k$ ä½¿å¾—\n$$\n    \\frac{len}{2} < 2^k \\leqslant len\n$$\n\n![](https://pic.imgdb.cn/item/63d4c785face21e9efa61b8e.jpg)\n\næ˜¾ç„¶ $[L,R]$ è¢« $[L,2^k],[R-2^k-1,k]$ ä¸¥æ ¼åŒ…å«ï¼Œå› æ­¤ ST è¡¨ä¸­æŸ¥è¯¢æœ€å¤§æœ€å°å€¼çš„æ—¶é—´å¤æ‚åº¦æ˜¯å¸¸æ•°çº§åˆ«çš„ï¼Œè€Œä¸æ˜¯çº¿æ®µæ ‘çš„ $\\log$ çº§åˆ«  \næŸ¥è¯¢ç»“æœå°±æ˜¯ $\\max\n\\{f_{L,2^k},f_{R-2^k-1k,k}\\}$\n\n\nè‡³äº $k$ï¼Œè‚‰çœ¼å¯è§ $k=\\lfloor\\log _2 (len)\\rfloor$  \næ­¤å¤„å¯ä»¥ç›´æ¥ä½¿ç”¨ `cmath` åº“ä¸­çš„ `log()` å‡½æ•°ï¼Œå®ƒæ˜¯ç”¨æ¥æ±‚ä»¥ 10 ä¸ºåº•çš„å¯¹æ•°çš„\næ ¹æ®æ¢åº•å…¬å¼[^1]å¯çŸ¥ $$k=\\lfloor\\log_2(len)\\rfloor=\\lfloor \\frac{\\lg(len)}{\\lg2} \\rfloor$$\n\n\n## å®ç°\n\né¦–å…ˆæ˜¯åˆå§‹åŒ–\n```cpp\nfor (int j = 0; j < M; ++j) {\n    for (int i = 1; i + (1 << j) - 1 <= n; ++i) {\n        if (!j) {\n            f[i][j] = w[i];  // ä» i å¼€å§‹é•¿åº¦ä¸º 2^0=1 çš„åŒºé—´æœ€å¤§å€¼ä¸º i æœ¬èº«\n        } else {\n            f[i][j] = max(f[i][j - 1], f[i + (1 << j - 1)][j - 1]);\n        }\n    }\n}\n```\nç„¶åæ˜¯æŸ¥è¯¢\n```cpp\nint query(int l, int r) {\n    int len = r - l + 1;\n    int k = log(len) / log(2);\n\n    return max(f[l][k], f[r - (1 << k) + 1][k]);\n}\n```\n\n## åŠ¨æ€ä¿®æ”¹\n\nè¿™ä¸ªæ ‡é¢˜æ¯”è¾ƒè¯¡å¼‚ï¼Œå› ä¸ºæˆ‘æåˆ°è¿‡\n\n>åªæ”¯æŒé™æ€åŒºé—´\n\nä½†æ˜¯å®é™…ä¸Šæˆ‘ä»¬å¯ä»¥ç”¨ä¸€äº›å° trick å®ç°åœ¨ st è¡¨çš„å°¾éƒ¨å¢åŠ å€¼ã€‚ï¼ˆå‰ææ˜¯é¢˜ç›®è¦æ±‚æ¯”è¾ƒå°‘ï¼Œæ¯”å¦‚ç›®å‰è¿™é“é¢˜åªéœ€è¦åœ¨å°¾éƒ¨å¢åŠ æ•°ï¼ŒåŒæ—¶åªéœ€è¦æŸ¥è¯¢å°¾éƒ¨æŸé•¿åº¦åŒºé—´çš„æœ€å€¼ï¼‰  \næ˜¾ç„¶å¯¹äº st è¡¨çš„æ¯ä¸€ä¸ª $f_{i,j}$ æ¥è¯´ï¼Œä»–åªä¼šç”¨åˆ° $f_{k,j}$,$k>i$ çš„å€¼è€Œä¸ä¼šç”¨åˆ°å‰é¢çš„å€¼ï¼Œå› æ­¤æˆ‘ä»¬ç»™ä»–åšä¸€ä¸ªå€’è½¬ã€‚  \næ¢å¥è¯è¯´ï¼Œç°åœ¨ $f_{i,j}$ è¡¨ç¤ºä» $i$ å¼€å§‹ï¼Œå‘å‰é•¿åº¦ä¸º $2^j$ çš„åŒºé—´ä¸­çš„æœ€å¤§å€¼ã€‚  \nä»£ç å¦‚ä¸‹\n```cpp\nvoid add(int a) {\n    a += t;\n    a %= d;\n    ori[++tail] = a;\n    for (int j = 0; tail - (1 << j) + 1 > 0; ++j) {\n        if (!j) {\n            f[tail][j] = a;\n        } else {\n            f[tail][j] = max(f[tail][j - 1], f[tail - (1 << j - 1)][j - 1]);\n        }\n    }\n}\n\nvoid query(int len) {\n    int l = tail - len + 1;\n    int k = log2(len);\n    t =  max(f[tail][k], f[l + (1 << k) - 1][k]);\n}\n```\n\n\n[^1]: \n$$\n\\log_xy=\\frac{\\log_cy}{\\log_cx} \n$$","tags":["RMQ"],"categories":["æ•°æ®ç»“æ„"]},{"title":"å¹¶æŸ¥é›†","path":"/post/dsu/","content":"ä»Šå¤©è®²çš„æœ€çŸ­è·¯å•¥çš„æ„Ÿè§‰æœ‰ç‚¹è´¹åŠ²ï¼Œå…ˆæŠŠå¹¶æŸ¥é›†çš„ä¸œè¥¿å†™äº†\n\n## ç”¨é€”\n\nåŸºæœ¬ä¸Šç”¨æ¥å¤„ç† **å…³ç³»**  \nä»€ä¹ˆæ˜¯å…³ç³»ï¼Ÿæ¯”å¦‚ä¸€ä¸ªäººå’Œä»–çš„è¡¨å¼Ÿæ˜¯äº²æˆšï¼Œäº²æˆšçš„å…³ç³»å¯ä»¥äººä¸ºç†æ¸…ï¼Œ\nä½†æ˜¯~~æ¯’ç˜¤çš„~~å‡ºé¢˜äººä¼šç»™è¿™ä¸ªäººå®‰ä¸Š 114514 ä¸ªè¡¨å¼Ÿè¿™äº›è¡¨å¼Ÿçš„ 1919810 ä¸ªå…¶ä»–äº²æˆšä»¥åŠ 1145141919810 ä¸ªå…¶ä»–æ— å…³çš„äººï¼Œç„¶åé—®ä½ è¿™ä¸ªåºåˆ—é‡Œé¢ç¬¬ $a$ ä¸ªäººå’Œç¬¬ $b$ ä¸ªäººæ˜¯ä¸æ˜¯äº²æˆšï¼Œä¸€èˆ¬çš„æ–¹æ³•æ˜¾ç„¶å¤„ç†ä¸äº†ï¼Œè€Œå¹¶æŸ¥é›†å°±æ˜¯ä¸“é—¨ç”¨æ¥è§£å†³è¿™ç§ä¸œè¥¿ç”¨çš„ã€‚\n\n## å®ç°\n\nâ€œå¹¶æŸ¥é›†â€çš„æ“ä½œå°±æ˜¯å‰ä¸¤ä¸ªå­—ï¼Œå³åˆå¹¶ä¸æŸ¥è¯¢ã€‚  \næ­¤å¤„é»˜è®¤ä»¥æ ‘å®ç°å¹¶æŸ¥é›†ã€‚\n\n### åˆå¹¶\n\nåˆå¹¶çš„æ“ä½œå³æŠŠä¸¤æ£µæ ‘çš„æ ¹èŠ‚ç‚¹è¿æ¥åœ¨ä¸€èµ·ï¼Œæ–‡å­—è§£é‡Šä¸æ¸…æ¥šï¼Œä½†æ˜¯ç›´æ¥ç”¨æ ‘ç»“æ„å®ç°å°±æ¯”è¾ƒæ¸…æ¥šäº†ã€‚\n\nè¿™é‡Œæˆ‘ä»¬åªéœ€è¦å¼€ä¸€ä¸ªæ•°ç»„ $F$ å­˜å‚¨æ¯ä¸€ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆï¼Œæ¯æ¬¡æ›´æ”¹ $i$ èŠ‚ç‚¹çš„ç¥–å…ˆåªéœ€è¦ä¿®æ”¹ $F_i$ çš„å€¼\n\næ¯”å¦‚ç›®å‰æˆ‘ä»¬æœ‰äº”ä¸ªç‚¹\n\n![](https://pic.imgdb.cn/item/63c64e44be43e0d30eb8b23d.png)\n\nç„¶åç”±è¾“å…¥æ•°æ®å¯çŸ¥ï¼Œ`1` å’Œ `3`ï¼Œ`2` å’Œ `4`ï¼Œ`5` å’Œ `4`ï¼Œ`4` å’Œ `1` æ˜¯äº²æˆšï¼Œäºæ˜¯æˆ‘ä»¬æŠŠ `1` è®¾ä¸º `5` çš„ç¥–å…ˆæ¥è¡¨ç¤ºä»–ä»¬çš„å…³ç³»ï¼Œ `2` `4` åŒç†ï¼Œç›¸å½“äºæŠŠè¿™å››ä¸ªé›†åˆï¼ˆæˆ–è€…è¯´æ ‘ï¼‰ä¸¤ä¸¤åˆå¹¶\n\n![](https://pic1.imgdb.cn/item/63c65028be43e0d30ebcaa53.jpg)\n\nä¸‹ä¸€æ­¥\n\n![](https://pic1.imgdb.cn/item/63c6526dbe43e0d30ec1760c.jpg)\n\nä»¥åŠæŠŠä»¥ `4` ä¸ºæ ¹çš„è¿™æ£µæ ‘åˆå¹¶åˆ° `1` ä¸Šï¼Œè¿æ¥ä»–ä»¬çš„æ ¹èŠ‚ç‚¹\n\n![](https://pic.imgdb.cn/item/63c657d0be43e0d30ecda861.jpg)\n\nè¿™æ ·æˆ‘ä»¬å°±åŸºæœ¬å®Œæˆäº†è¿™ä¸ªé›†åˆçš„åˆå§‹åŒ–ï¼Œæˆ‘ä»¬åªéœ€è¦å†æŠŠæ ¹èŠ‚ç‚¹ `1` çš„ç¥–å…ˆè®¾ç½®ä¸ºè‡ªå·±ï¼Œæ¥è¡¨ç¤ºå®ƒæ˜¯è¿™æ£µæ ‘çš„æ ¹èŠ‚ç‚¹ï¼ˆåº”è¯¥åœ¨åˆå¹¶ä¹‹å‰åˆå§‹åŒ–æ¯ä¸€ä¸ªç»“ç‚¹çš„ç¥–å…ˆä¸ºè‡ªå·±ï¼Œå› ä¸ºå›¾å¯èƒ½ä¼šä¸å¤ªæ¸…æ¥šæ‰€ä»¥æ”¹åˆ°è¿™é‡Œäº†ï¼‰\n\n![](https://pic.imgdb.cn/item/63c6595cbe43e0d30ed06172.jpg)\n\nä»£ç å®ç°æ€è·¯å°±å¾ˆæ¸…æ¥šäº†\n\n```cpp\nvoid uni(int x, int y) {\n    // æŸ¥è¯¢ä¸¤ä¸ªèŠ‚ç‚¹æ‰€åœ¨æ ‘çš„æ ¹\n    xx = find(u);\n    yy = find(v);\n\n    if (xx != yy) f[xx] = yy; //è¿æ¥æ ¹èŠ‚ç‚¹\n}\n/*\n...\nint main() {\n    .....\n    cin >> m >> n; // m ä¸ºäººæ•°ï¼Œn ä¸ºå…³ç³»æ•°\n    int f[m+10], u, v;\n    int p,q;\n    memset(f,0,sizeof 0);\n    for (int i = 1; i <= m; ++i) {\n        f[i] = i;\n    }\n    ...\n}\n*/\n```\n\n### æŸ¥æ‰¾\n\nå‡å¦‚æˆ‘ä»¬éœ€è¦æŸ¥æ‰¾ä¸Šä¸€å¼ å›¾é‡Œé¢ `2` `3` æ˜¯å¦æ˜¯äº²æˆšï¼Œå¦‚ä½•æ“ä½œå‘¢ï¼Ÿ\n\nå¾ˆå®¹æ˜“å‘ç°ï¼Œ`2` `3`ä¸¤ä¸ªèŠ‚ç‚¹åœ¨åŒä¸€æ£µæ ‘ä¸­ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ç›´æ¥æŸ¥æ‰¾è¿™ä¸¤ä¸ªèŠ‚ç‚¹çš„æ ¹èŠ‚ç‚¹ï¼Œå¦‚æœç›¸åŒåˆ™æ˜¯äº²æˆšã€‚æŸ¥æ‰¾çš„å®ç°ä¹Ÿå¾ˆç®€å•ï¼Œç›´æ¥é€’å½’å¯»æ‰¾ä¸Šä¸€çº§çš„çˆ¶äº²èŠ‚ç‚¹ï¼Œå¦‚æœä¸€ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆæ˜¯è‡ªå·±ï¼Œå°±ç›´æ¥è¾“å‡ºè¿™ä¸ªèŠ‚ç‚¹å³å¯\n\n```cpp\n// æŸ¥è¯¢ pos çš„æ ¹\nint find(int pos) {\n    if (f[pos] == pos) return pos; // è¾¹ç•Œ\n    return find(father[pos]);\n}\n```\n\n## ä¼˜åŒ–\n\nç”±ä¸Šæ–‡å¯ä»¥å‘ç°ï¼Œåœ¨å¹¶æŸ¥é›†ä¸­æŸ¥æ‰¾ä¸€ä¸ªèŠ‚ç‚¹çš„ç¥–å…ˆæœ€åæƒ…å†µä¸‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(h)$ çš„ï¼ˆ$h$ ä¸ºæ ‘çš„æœ€å¤§æ·±åº¦ï¼‰ï¼Œé‚£ä¹ˆå°±å¯ä»¥é€šè¿‡å‡å°æœ€å¤§æ·±åº¦æ¥ä¼˜åŒ–å¹¶æŸ¥é›†ã€‚\n\n### æŒ‰æ ‘çš„å¤§å°åˆå¹¶\n\nå‡å¦‚è¯´æˆ‘ä»¬æœ‰è¿™æ ·ä¸¤æ£µæ ‘\n\n![](https://pic.imgdb.cn/item/63c66020be43e0d30edcc678.jpg)\n\nç°åœ¨ `1` `5`ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯äº²æˆšï¼Œé‚£ä¹ˆæŠŠ `5` çš„ç¥–å…ˆè®¾ä¸º `1` åˆé€‚è¿˜æ˜¯åè¿‡æ¥åˆé€‚å‘¢ï¼Ÿ  \næ˜¾ç„¶æ˜¯å‰è€…\n\nå¦‚æœæŒ‰ç…§å‰è€…åˆå¹¶ï¼Œç»“æœå°±æ˜¯\n\n![](https://pic.imgdb.cn/item/63c66135be43e0d30edef9df.jpg)\n\næœ€å¤§æ·±åº¦æ˜¯ 3\n\nå¦‚æœæŒ‰ç…§åè€…åˆå¹¶ï¼Œæœ€å¤§æ·±åº¦ä¸º 4\n\n![](https://pic.imgdb.cn/item/63c66158be43e0d30edf4e8c.jpg)\n\nä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ºäº†è®© $h$ å°½å¯èƒ½åœ°å°ï¼Œéœ€è¦æŠŠæ·±åº¦/ä½“ç§¯å°çš„æ ‘åˆå¹¶åˆ°æ·±åº¦å¤§çš„æ ‘ä¸Šï¼Œä½œä¸ºå¤§æ·±åº¦/ä½“ç§¯æ ‘çš„å­æ ‘\n\næ­¤å¤„å®šä¹‰ä¸€ä¸ª $R$ æ•°ç»„è®°å½•ä»¥ $i$ ä¸ºæ ¹èŠ‚ç‚¹çš„æ ‘çš„æœ€å¤§æ·±åº¦ä¸º $R_i$\nï¼ˆ$R$ çš„ä¿®æ”¹åœ¨åˆå§‹åŒ–/æ·»åŠ å…³ç³»æ—¶ä¿®æ”¹ï¼‰\n\n```cpp\nvoid uni(int x, int y) {\n    int xx = find(x);\n    int yy = find(y);\n\n    if (xx == yy) return; // åœ¨åŒä¸€æ£µæ ‘ä¸­ä¸éœ€è¦åˆå¹¶\n\n    if (r[xx] >= r[yy]) {\n        f[yy] = xx;\n        r[xx] = max(r[xx],r[yy]+1); // å¯èƒ½åˆå¹¶å y æ ‘æ·±åº¦ +1 å¤§äº x æ ‘æœ€å¤§æ·±åº¦\n    } else {\n        f[xx] = yy;\n        r[yy] = max(r[yy],r[xx]+1);\n    }\n}\n```\n\n### è·¯å¾„å‹ç¼©\n\n![](https://pic.imgdb.cn/item/63c66407be43e0d30ee5216d.jpg)\n\nä»¥ä¸Šä¸¤æ£µæ ‘æ˜¾ç„¶å³ä¾§çš„æ ‘æ›´ä¼˜ï¼Œå› ä¸ºå®ƒçš„æœ€å¤§æ·±åº¦æ›´å°\n\nå¹¶æŸ¥é›†çš„æŸ¥è¯¢æ–¹å¼ä¸ºâ€œæŸ¥è¯¢æ ¹èŠ‚ç‚¹â€ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æŸ¥è¯¢æ—¶åªéœ€è¦å…³æ³¨æŸ¥è¯¢æœ€ç»ˆçš„æ ¹èŠ‚ç‚¹ï¼Œè€Œä¸ç”¨å…³å¿ƒæŸ¥è¯¢é€”ä¸­ç»è¿‡çš„èŠ‚ç‚¹ï¼Œè¿™å°±æ˜¯è·¯å¾„å‹ç¼©çš„åŸç†ã€‚è·¯å¾„å‹ç¼©å³æŠŠä¸€ä¸ªæ²¡æœ‰è¿ç€æ ¹çš„èŠ‚ç‚¹ï¼ˆå¦‚ä¸Šå›¾å·¦ä¾§çš„`4` `5` `6` `7`ï¼‰ï¼Œâ€œè·³è¿‡â€æ‰€æœ‰ä¸­é—´èŠ‚ç‚¹ï¼Œç›´æ¥æŠŠå®ƒè¿åˆ°æ ¹èŠ‚ç‚¹ä¸Šã€‚  \nå¯¹äºä¸Šå›¾æ¥è¯´ï¼Œå°±æ˜¯æŠŠ `4` `5` `6` `7` æ‘˜å‡ºæ¥è¿æ¥åˆ° `2` `3` çš„çˆ¶èŠ‚ç‚¹ä¸Šï¼Œå³ `1`ï¼Œäºæ˜¯å½¢æˆäº†å³å›¾ï¼Œæœ€å¤§æ·±åº¦ä» 2 é™åˆ°äº† 1ã€‚\nç”±äºå¹¶æŸ¥é›†ç›¸å…³çš„é¢˜ç›®ä¸­å¯èƒ½åˆå§‹åŒ–ä¹‹åä»ç„¶æœ‰éœ€è¦å¢åˆ çš„å…ƒç´ ï¼ŒåŒæ—¶è·¯å¾„å‹ç¼©ä¹Ÿéœ€è¦è€—è´¹æ—¶é—´ï¼Œæ‰€ä»¥æˆ‘ä»¬åªåœ¨æŸ¥è¯¢éœ€è¦çš„ç‚¹æ—¶ä¼˜åŒ–ã€‚\n\n```cpp\nint find(int x) {\n    if (x != f[x]) { // å¦‚æœ x ä¸æ˜¯æ ¹èŠ‚ç‚¹\n        f[x] = find(f[x]);\n    }\n    return f[x];\n}\n```\n\næ–°çš„æŸ¥è¯¢å‡½æ•°å¯ä»¥ç»“åˆä¸Šå›¾ç†è§£ã€‚","tags":["å¹¶æŸ¥é›†"],"categories":["æ•°æ®ç»“æ„"]},{"title":"å›¾è®ºåŸºç¡€","path":"/post/basic-graph/","content":"å›¾è®ºæ˜¯å—œè¡€åˆ†æ”¯[^1]ï¼Œç›¸åº”çš„ï¼Œå›¾è®ºåŸºç¡€å¹¶æ²¡æœ‰ä»€ä¹ˆå¤ªå¤šéœ€è¦æ€è€ƒçš„ä¸œè¥¿ï¼Œåªæœ‰ä¸€å †è¯¥æ­»çš„æ¦‚å¿µç­‰ç€è®°ï¼Œæœ‰å¦‚ç»³ä¹‹ä»¥æ³•æŠ½è±¡äº†\n\n## åŸºæœ¬æ¦‚å¿µ\n\n### å›¾\n\nç”±é¡¶ç‚¹ï¼ˆç‚¹ï¼‰ï¼ˆVertexï¼‰çš„é›†åˆå’Œè¾¹ï¼ˆEdgeï¼‰çš„é›†åˆç»„æˆï¼Œè®°ä¸º $\\mathbb{G} = (\\mathbb{V}+\\mathbb{E})$  \nç‚¹çš„é›†åˆç”¨ $\\mathbb{V(G)}$ è¡¨ç¤ºï¼Œç‚¹ç”¨ $u,v$ ç­‰ç¬¦å·è¡¨ç¤º  \né¡¶ç‚¹çš„æ•°é‡ç§°ä¸ºå›¾çš„â€œé˜¶â€ï¼Œç”¨ $n$ è¡¨ç¤º  \nè¾¹çš„é›†åˆç”¨ $\\mathbb{E(G)}$ è¡¨ç¤ºï¼Œè¾¹ç”¨ $e$ ç­‰ç¬¦å·è¡¨ç¤º  \nè¾¹çš„ä¸ªæ•°ç§°ä¸ºå›¾çš„â€œè¾¹æ•°â€ ~~æ„Ÿè§‰è¯´äº†å’Œæ²¡è¯´ä¸€æ ·~~ï¼Œç”¨ $m$ è¡¨ç¤º\nåˆ†é‡ï¼šä¸€ä¸ªå›¾çš„å­å›¾ï¼ˆæ¶‰åŠï¼š[å¼ºè¿é€šåˆ†é‡](/post/strong-cc)ï¼‰\n\n### å›¾çš„ç§ç±»\n\nä» $u$ åˆ° $v$ çš„æ— å‘è¾¹ï¼š $(u,v)$  \nä» $u$ åˆ° $v$ çš„æœ‰å‘è¾¹ï¼š$\\langle u,v \\rangle$\n\næœ‰å‘å›¾ï¼šå›¾çš„æ‰€æœ‰è¾¹éƒ½æ˜¯æœ‰å‘è¾¹  \næ— å‘å›¾ï¼šå›¾çš„æ‰€æœ‰è¾¹éƒ½æ˜¯æ— å‘è¾¹  \nå®Œå…¨å›¾ï¼šæ¯ä¸ªç‚¹éƒ½ä¸å…¶ä»–æ‰€æœ‰é¡¶ç‚¹è¿æ¥ï¼›å¯¹äºæœ‰å‘å›¾æ¥è¯´ï¼Œä»»æ„é¡¶ç‚¹ $u,v$ éƒ½æœ‰è¾¹ $\\langle u,v \\rangle \\langle v,u \\rangle$  \nç¨€ç–å›¾/ç¨ å¯†å›¾ï¼šè¾¹å°‘/å¤šçš„å›¾  \nå¹³å‡¡å›¾ï¼šä¸€ä¸ªç‚¹çš„å›¾  \né›¶å›¾ï¼šæ²¡æœ‰è¾¹çš„å›¾  \n\n### åº¦\n\nå¯¹äºé¡¶ç‚¹ $v$ æ¥è¯´  \nå…¥åº¦ $ID(v)$ï¼šä»¥ $v$ ä¸ºç»ˆç‚¹çš„è¾¹çš„ä¸ªæ•°  \nå‡ºåº¦ $OD(v)$ï¼šä»¥ $v$ ä¸ºèµ·ç‚¹çš„è¾¹çš„ä¸ªæ•°  \nåº¦ $D(v)$ = å…¥åº¦ + å‡ºåº¦  \n\nåº¦ä¸ºå¥‡æ•°çš„ç‚¹ä¸ºå¥‡ç‚¹ï¼Œåº¦ä¸ºå¶æ•°çš„é¡¶ç‚¹ä¸ºå¶ç‚¹\n\näºæ˜¯å¯å¾—ï¼šå¯¹äºå›¾ $\\mathbb{G}$ ä¸­æ‰€æœ‰é¡¶ç‚¹çš„åº¦=è¾¹æ•°çš„ä¸¤å€  \nä»¥åŠæ¨è®ºï¼šä¸€ä¸ªå›¾ä¸­çš„å¥‡ç‚¹æ•°é‡ä¸ºå¶æ•°  \n\nç®€çŸ­è¯æ˜ï¼š\n1. æ¯æ¡è¾¹ä¸€å®šè´¡çŒ®ä¸€ä¸ªå‡ºåº¦ä¸€ä¸ªå…¥åº¦å…±ä¸¤ä¸ªåº¦  \n2. åº¦ä¸€å®šæ˜¯å¶æ•°æ‰€ä»¥å¥‡ç‚¹çš„æ•°é‡ä¸ºå¶æ•°ï¼ˆå¥‡$\\times$å¶$=$å¶ï¼‰  \n\n## å­˜å›¾\n\næ— å‘å›¾å¯ä»¥çœ‹ä½œæœ‰å‘å›¾ä½†æ˜¯ä¸¤ä¸ªç‚¹ä¹‹é—´äº’ç›¸æœ‰ä¸€æ¡æœ‰å‘è¾¹ï¼Œæ‰€ä»¥åªéœ€è¦è€ƒè™‘æœ‰å‘å›¾å­˜å›¾\n\n### é‚»æ¥çŸ©é˜µ\n\nåŸºæœ¬æ€æƒ³æ˜¯å­˜ä¸¤ä¸ªç‚¹ä¹‹é—´çš„è¾¹æƒï¼ˆä¸è¿æ¥å³ä¸º 0 æˆ– -1ï¼‰\n\næ¯”å¦‚å½“å‰å›¾æœ‰å››ä¸ªç‚¹ï¼Œåˆ™å¼€æ•°ç»„ `g[5][5]`ï¼Œåˆå§‹åŒ–ä¸º 0ã€‚\n\n|   |1|2|3|4|\n|---|---|---|---|---|\n|**1**|0|0|0|0|\n|**2**|0|0|0|0|\n|**3**|0|0|0|0|\n|**4**|0|0|0|0|\n\nç„¶å 1 åˆ° 2ï¼Œ3 åˆ° 1 æœ‰ä¸€æ¡æœ‰å‘è¾¹ï¼Œè¾¹æƒä¸º 1ï¼Œåˆ™ä¿®æ”¹ `g[1][2]` `g[3][1]` ä¸º 1\n\n|   |1|2|3|4|\n|---|---|---|---|---|\n|**1**|0|1|0|0|\n|**2**|0|0|0|0|\n|**3**|1|0|0|0|\n|**4**|0|0|0|0|\n\néå¸¸å®¹æ˜“ç†è§£ï¼Œç¼ºç‚¹ä¹Ÿæ˜¾è€Œæ˜“è§ï¼Œå¦‚æœæœ‰ $114514$ ä¸ªç‚¹ä½†æ˜¯åªæœ‰ $1$ æ¡è¾¹ï¼Œé‚£å°±éœ€è¦å¼€ $114514^2$ çš„ç©ºé—´ä½†æ˜¯åªæœ‰ä¸€ä¸ªä½ç½®æœ‰æ•°æ®ï¼Œæ˜¾ç„¶é€ æˆäº†å·¨å¤§çš„æµªè´¹ï¼ˆç©ºé—´æ—©å°±ç‚¸äº†ï¼‰  \nå› æ­¤éœ€è¦å¯»æ‰¾ä¸€ä¸ªåªå­˜è¾¹çš„å­˜å›¾æ–¹æ¡ˆï¼Œä»è€Œè¯ç”Ÿé‚»æ¥è¡¨\n\n### é‚»æ¥è¡¨\n\nè€ƒè™‘ä¸€ä»¶äº‹æƒ…ï¼Œå¯¹äºä¸€ä¸ªå›¾æ¥è¯´ï¼Œæœ‰ä¸¤ä¸ªå…ƒç´ ï¼šç‚¹ã€è¾¹ï¼Œè€Œç‚¹çš„ç›¸å…³è¦ç´ å¯ä»¥é€šè¿‡æ•°ç»„æ¥ä»¥ç‚¹ä¸ºå•ä½å­˜å‚¨ã€‚  \nè€ƒè™‘å­˜è¾¹ï¼šè¾¹çš„è¦ç´ æœ‰ä¸‰ä¸ªï¼Œå³èµ·ç‚¹ã€ç»ˆç‚¹ä»¥åŠè¾¹æƒã€‚è€ƒè™‘æŠŠè¾¹çœ‹ä½œä¸€ä¸ªå¯¹è±¡å­˜å‚¨ã€‚\n\n#### é“¾å¼å‰å‘æ˜Ÿ\n\nç”¨é“¾è¡¨å®ç°çš„é‚»æ¥è¡¨\n\nå…ˆè¯´é“¾è¡¨ï¼Œé¡¾åæ€ä¹‰ï¼Œé“¾çŠ¶é“¾æ¥çš„åˆ—è¡¨ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬æŠŠåŒä¸€ä¸ªèµ·ç‚¹è¾¹å­˜åˆ°ä¸€ä¸ªé“¾è¡¨é‡Œã€‚\n\nå¼€ä¸€ä¸ªç»“æ„ä½“å­˜é“¾çš„æ¯ä¸€ä¸ªå…ƒç´ \n\n```cpp\nstruct edge {\n    int data;\n    int to;\n    edge *nex;\n};\n```\næ˜¾ç„¶ï¼ŒæŠŠé“¾è¡¨æ¯ä¸€ä¸ªéƒ¨åˆ†è¿æ¥èµ·æ¥çš„ä¸œè¥¿å°±æ˜¯æŒ‡é’ˆ `nex`ï¼Œ`nex` æŒ‡å‘å½“å‰å…ƒç´ çš„ä¸‹ä¸€ä¸ªå…ƒç´ çš„åœ°å€ã€‚\nå½“ç„¶ï¼Œå¦‚æœå¼€ä¸€ä¸ªæ•°ç»„å­˜å‚¨æ‰€æœ‰çš„å…ƒç´ ï¼Œåœ°å€å¯ä»¥æ”¹ä¸ºå­˜å‚¨ä¸‹æ ‡ï¼Œå³ `nex` å¯ä»¥æ˜¯ä¸€ä¸ªæ•´æ•°ï¼Œå­˜å‚¨ä¸‹ä¸€ä¸ªå…ƒç´ åœ¨æ•°ç»„é‡Œçš„ä¸‹æ ‡ã€‚\n\n[^1]: æ•°å­¦ï¼Œæ¥è‡ª [GrainRainè°·ç¥](https://grainrain.site)","categories":["å›¾è®º"]},{"title":"åœ¨å¯ç”¨ ZSTD å‹ç¼©çš„ ZFS æ ¹åˆ†åŒºä¸Šå®‰è£… ArchLinux å¹¶é…ç½® Windows åŒå¯åŠ¨","path":"/post/archlinux-on-zfs-root-with-zbm/","content":"[ZFSBootMenu åŸºç¡€ä½¿ç”¨](/post/zbm-guide) å’Œè¿™ç¯‡æ–‡ç« çš„æœ€åéƒ¨åˆ†ç›¸åŒã€‚\næœ¬æ–¹æ¡ˆå·²ç»è¢«å®é™…æµ‹è¯•è¿‡ï¼Œå®Œå…¨å¯ç”¨ï¼Œä½†æ˜¯å»ºè®®åœ¨æœ‰ Linux åŸºç¡€çš„æƒ…å†µä¸‹æŠ˜è…¾ ZFSï¼Œå› ä¸ºæ²¡å‡†æœ‰æŸä¸ªåœ°æ–¹æˆ‘ä¼šå¿˜è®°ä¿®æ”¹...\n\n## æ€»è§ˆ\n\nåˆ†åŒºå¤§æ¦‚é•¿è¿™æ ·\n\n```TEXT\nåˆ†åŒº1 300M FAT16 EFI\nåˆ†åŒº2 128G ZFS   ArchLinux\nåˆ†åŒº3 128G NTFS  Windows\nåˆ†åŒºN **G  **FS  DATA // å…¶ä»–åˆ†åŒº\n```\n\nç„¶å ZFS æ± é‡Œé¢é•¿è¿™æ ·\n\n```TEXT\nzroot\n â”œâ”€ROOT\n |  â”œâ”€voidlinux // å®é™…ä¸Šå¯ä»¥åœ¨è¿™ä¸ªæ± é‡Œå®‰è£…å¤šä¸ª Linuxï¼Œæœ¬å¤„è®¡åˆ’æŠŠæ‰€æœ‰ Linux æ ¹åˆ†åŒºæ•°æ®é›†æ”¾åœ¨ zroot/ROOT/ é‡Œ\n |  â””â”€archlinux\n â””â”€data\n    â””â”€home // å­˜æ”¾ /home\n```\n\nZFS æ± é‚£å—çœ‹ä¸æ‡‚æ²¡å…³ç³»ï¼Œåªéœ€è¦è·Ÿç€æ–‡ç« åšå°±è¡Œ\n\n## å®‰è£…å‰\n\nå‡†å¤‡ä¸€ä¸ªæœ‰ ZFS æ”¯æŒçš„ archisoï¼Œè¿™é‡Œæˆ‘ä»¬æä¾›ä¸¤ä¸ªæ–¹æ¡ˆ\n\n### CachyOS LiveCDï¼ˆæ¨èï¼‰\n\nä» [CachyOS çš„ Sourceforge ç•Œé¢](https://sourceforge.net/projects/cachyos-arch/files/gui-installer/) ä¸‹è½½å¸¦ GUI çš„ LiveCDï¼ˆå®ƒçš„ CLI å®‰è£…å™¨æ²¡ ZFS æ”¯æŒï¼‰ï¼Œç„¶åæ‰”è¿› U ç›˜é‡å¯è¿›å…¥å³å¯\n\n```SHELL\nsudo modprobe zfs # åŠ è½½ ZFS æ¨¡å—\n\nsudo su # åˆ‡æ¢åˆ° root ç”¨æˆ·\n\ntimedatectl set-ntp true  # åŒæ­¥æ—¶é—´\n\nvim /etc/pacman.d/mirrorlist # æ”¹é•œåƒç«™\n# å¼€å¤´æ·»åŠ \nServer = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch\n```\n\n### archiso-zfs\n\næ­¤å¤„ä½¿ç”¨ [eoli3n çš„ archiso-zfs](https://github.com/eoli3n/archiso-zfs) é¡¹ç›®\n\né¦–å…ˆä¸‹è½½ä¸€ä¸ª[å®˜æ–¹çš„ ArchLinux LiveCD](https://archlinux.org/download/)ï¼Œç„¶åé‡å¯è¿›å…¥\n\n#### è”ç½‘\n\n```SHELL\niwctl # è¿›å…¥ iwctl å‘½ä»¤è¡Œç•Œé¢\n```\n\nä¸‹é¢çš„å‘½ä»¤åœ¨ `iwctl` ä¸­è¾“å…¥\n\n```SHELL\ndevice list # åˆ—å‡ºå¯ç”¨è®¾å¤‡\n# å‡è®¾ä¸Šé¢åˆ—å‡ºçš„è®¾å¤‡æ˜¯ wlan0\nstation wlan0 scan\nstation wlan0 connect SSID # è¿æ¥åä¸º SSID çš„ç½‘ç»œ\nexit\n```\n\néªŒè¯è”ç½‘\n\n```SHELL\nping www.baidu.com\ntimedatectl set-ntp true  # åŒæ­¥æ—¶é—´\n```\n\n#### åŠ è½½ ZFS æ¨¡å—\n\n```SHELL\ncurl -s https://raw.githubusercontent.com/eoli3n/archiso-zfs/master/init | bash -x\n```\n\nå¦‚æœè¿æ¥ github æœ‰é—®é¢˜ï¼Œåˆ™è¿è¡Œä¸‹é¢çš„å‘½ä»¤æ›¿ä»£\n\n```SHELL\ncurl -s https://ghproxy.com/https://raw.githubusercontent.com/eoli3n/archiso-zfs/master/init | bash -x\n```\n\næ‰§è¡Œè¿‡ç¨‹å› ä¸ºç½‘ç»œåŸå› ä¼šæ¯”è¾ƒæ…¢\n\n#### æ”¹é•œåƒç«™\n\n```SHELL\nvim /etc/pacman.d/mirrorlist\n# å¼€å¤´æ·»åŠ \nServer = https://mirrors.bfsu.edu.cn/archlinux/$repo/os/$arch\n```\n\nè‡³æ­¤ï¼Œç¯å¢ƒå‡†å¤‡å®Œæ¯•ï¼Œä¸‹é¢çš„æ“ä½œä¸å— livecd å½±å“\n\n## æ ¼å¼åŒ–\n\næ­¤å¤„è®¤ä¸ºä½ å·²ç»åˆ†å¥½åŒºäº†ï¼Œæ€»ä½“éœ€è¦ä¸‰ä¸ªåˆ†åŒº\n\n-   ESPï¼ˆEFIï¼‰ åˆ†åŒºï¼Œ300Mï¼Œæ‰“äº† ESP æ ‡ç­¾ï¼ˆå¯ä»¥ç”¨ `cfdisk` æ‰“ï¼‰ï¼Œæ­¤å¤„ä¸¾ä¾‹ä¸º `/dev/nvme0n1p1`\n-   Linux åˆ†åŒºï¼ˆZFS æ± ï¼‰ï¼Œ30+Gï¼Œæ­¤å¤„ä¸¾ä¾‹ä¸º `/dev/nvme0n1p2`\n-   Windows åˆ†åŒºï¼ˆå¦‚æœä¸éœ€è¦å®‰è£… Windows å°±ä¸ç”¨å»ºï¼‰ï¼Œ40+Gï¼Œæ­¤å¤„ä¸¾ä¾‹ä¸º `/dev/nvme0n1p3`\n\n#### åˆ›å»º ZFS æ± \n\n- `ashift = 12` ä»£è¡¨ 4096 å­—èŠ‚æ‰‡åŒºå¤§å°ï¼Œ9 ä»£è¡¨ 512 æ‰‡åŒºå¤§å°ï¼Œ13 ä»£è¡¨ 8192 å­—èŠ‚æ‰‡åŒºå¤§å°ï¼Œåœ¨ 4096/8192 æ‰‡åŒºå¤§å°çš„ SSD ä¸Šè®¾ç½® 9 ä¼šå¯¼è‡´æ€§èƒ½æŸå¤±ï¼Œåœ¨ 512 å­—èŠ‚æ‰‡åŒºå¤§å°çš„ç¡¬ç›˜ä¸Šè®¾ç½® 12/13 ä¼šå¯¼è‡´å®¹é‡æŸå¤±ï¼Œæ‰‡åŒºå¤§å°å¯ä»¥é€šè¿‡ fdisk -lï¼ˆä¸å‡†ï¼‰æˆ–è€… diskgenius è¿™ç±»å·¥å…·æŸ¥çœ‹  \n- `dedup=on` ä¸ºå»é‡åŠŸèƒ½ï¼Œå¯èƒ½ä¼šå ç”¨è¾ƒå¤§ RAMï¼Œä½é…æœºå­å¯ä»¥æŠŠè¿™è¡Œåˆ æ‰  \n- `compression=zstd` ä¸ºå‹ç¼©åŠŸèƒ½ï¼Œzstd ç›®å‰æ¥çœ‹å‹ç¼©ç‡å’Œæ€§èƒ½æŸå¤±æ¯”è¾ƒå¹³è¡¡ï¼Œåœ¨æ„æ€§èƒ½å¯ä»¥æ”¹ä¸ºå¿«é€Ÿå‹ç¼©ç®—æ³• lz4ï¼ˆgzip å‹ç¼©ç‡å’Œæ€§èƒ½éƒ½æ¯”ä¸ä¸Š zstdï¼‰ï¼ˆå¥½å§æˆ‘åæ¥åœ¨ä¹æ€§èƒ½æ¢æˆ lz4 äº†ï¼Œå®é™…ä¸Šå‹ç¼©ç‡ä¹Ÿä¸ç®—å¤ªå·®ï¼‰  \n- `atime=off` æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“æœ€åä¸€æ¬¡è®¿é—®æŸä¸ªæ–‡ä»¶çš„æ—¶é—´ã€‚   \n- `primarycache=metadata` é»˜è®¤ä¸º `all`ï¼Œä¸ºäº†å‡å° ARC å¸¦æ¥çš„å†…å­˜å‹åŠ›æ”¹ä¸º `metadata`  \n- `secondarycache=none` é»˜è®¤ä¸º `all`ï¼ŒL2ARC æ„Ÿè§‰å¯¹æ¡Œé¢ç«¯å¼Šå¤§äºåˆ©ï¼Œç›´æ¥å–æ¶ˆã€‚  \n- `checksum=blake3` é»˜è®¤ä¸º `on`ï¼Œ[blake3](https://github.com/BLAKE3-team/BLAKE3) æ˜¯ä¸€ç§é«˜æ€§èƒ½åŠ å¯†å“ˆå¸Œç®—æ³•ï¼Œæ¯”é»˜è®¤çš„ SHA-2 ç³»åˆ—å¿«å¾ˆå¤šã€‚\n\nå…¶ä»–ç…§åšå³å¯\n\n```SHELL\nzpool create -f -o ashift=12           \\\n             -O acltype=posixacl       \\\n             -O atime=off              \\\n             -O xattr=sa               \\\n             -O dnodesize=legacy       \\\n             -O normalization=formD    \\\n             -O mountpoint=none        \\\n             -O canmount=off           \\\n             -O devices=off            \\\n             -O compression=zstd       \\\n             -O dedup=on               \\\n             -O checksum=blake3        \\\n             -O primarycache=metadata  \\\n             -O secondarycache=none    \\\n             -R /mnt                   \\\n             zroot /dev/nvme0n1p2\n```\n\nåˆ›å»ºæ•°æ®é›†\n\n```SHELL\nzfs create -o mountpoint=none zroot/data\nzfs create -o mountpoint=none zroot/ROOT\nzfs create -o mountpoint=/ -o canmount=noauto zroot/ROOT/archlinux\nzfs create -o mountpoint=/home zroot/data/home\n```\n\næµ‹è¯• zpool æ˜¯å¦èƒ½å¤Ÿå¯¼å…¥å¯¼å‡º\n\n```SHELL\nzpool export zroot\nzpool import zroot -R /mnt\n```\n\næŒ‚è½½ zpool\n\n```SHELL\nzfs mount zroot/ROOT/archlinux\nzfs mount -a\n```\n\nè®¾ç½®å¯åŠ¨æ•°æ®é›†\n\n```SHELL\nzpool set bootfs=zroot/ROOT/archlinux zroot\n```\n\nè®¾ç½® zpool ç¼“å­˜\n\n```SHELL\nzpool set cachefile=/etc/zfs/zpool.cache zroot\nmkdir /mnt/etc\nmkdir /mnt/etc/zfs\ncp /etc/zfs/zpool.cache /mnt/etc/zfs/zpool.cache\n```\n\næŸ¥çœ‹æ˜¯å¦æœ‰æŒ‚è½½ä¸Š\n\n```SHELL\ndf -h\n```\n\nè¾“å‡º\n\n```TEXT\nzroot/ROOT/archlinux   30G  128K   30G   1% /mnt\n```\n\n#### æ ¼å¼åŒ– EFI åˆ†åŒº\n\næ³¨æ„æ­¤å¤„æŒ‚è½½ç‚¹ä¸å¯ä»¥è®¾ç½®æˆ `/boot`ï¼[^1]\n\n```SHELL\nmkfs.vfat /dev/nvme0n1p1\nmkdir /mnt/efi\nmount /dev/nvme0n1p1 /mnt/efi\n```\n\n## å®‰è£…\n\nè¿™éƒ¨åˆ†éœ€è¦ä½ åœ¨ `/etc/pacman.conf` é‡Œæ·»åŠ  [archzfs](https://github.com/archzfs/archzfs/wiki) æºæˆ–è€…æŒ‰ç…§[ä¸€åˆ€æ–©çš„åšå®¢](https://blog.yidaozhan.top/2022/08/11/arch-linux-upgrade-to-x86-64-v3-microarchitecture/)é…ç½® CachyOS æºï¼Œæ­¤å¤„ä¸å†èµ˜è¿°\n\n#### å®‰è£…åŸºæœ¬è½¯ä»¶åŒ…\n\nå¦‚æœæ˜¯ Intel çš„ CPU å°±æŠŠ `amd-ucode` æ¢æˆ `intel-ucode`\n\næ­¤å¤„ä½¿ç”¨ `zfs-linux` åŒ…æœ‰å¯èƒ½ä¼šå› ä¸ºç‰ˆæœ¬ä¸ç›¸åŒç„¶åæŒ‚æ‰ï¼Œæ‰€ä»¥å¦‚æœä½ æ·»åŠ äº† CachyOS çš„è½¯ä»¶æºï¼Œé‚£ä¹ˆæˆ‘æ¨èä½ ä½¿ç”¨ CachyOS çš„è‡ªå®šä¹‰å†…æ ¸ï¼ˆå®ƒçš„å†…æ ¸å’Œ zfs æ¨¡å—åŒæ—¶ç¼–è¯‘æ‰“åŒ…ï¼Œå°±ä¸ä¼šå‡ºç°ç‰ˆæœ¬ä¸ç»Ÿä¸€çš„é—®é¢˜ï¼‰ï¼ˆæœ€ä¸»è¦è¿˜æ˜¯å› ä¸ºå®‰è£… `zfs-linux` è¿˜å¾—å¯ç”¨ v3 æºï¼‰ï¼Œæœ‰å¤šç§ä»»åŠ¡è°ƒåº¦å™¨å¯é€‰ï¼Œæ¯”å¦‚ BMQ PDS TT ç­‰ï¼Œè¿˜æœ‰ LLVM LTO ç¼–è¯‘çš„ç‰ˆæœ¬\n\nä½¿ç”¨ CachyOS å†…æ ¸çš„è¯ç›´æ¥æ”¹åŒ…å³å¯ï¼Œæ¯”å¦‚æˆ‘æƒ³ç”¨ `linux-cachyos-pds`ï¼Œé‚£ä¹ˆæŠŠä¸‹é¢ `linux linux-headers zfs-linux` æ¢æˆ `linux-cachyos-pds linux-cachyos-pds-headers linux-cachyos-pds-zfs` å³å¯\n\nå¦‚æœä½ ä¸æƒ³ç”¨ CachyOS çš„å†…æ ¸ï¼Œä¹Ÿä¸æƒ³å› ä¸º zfs æ¨¡å—å’Œ linux å†…æ ¸ç‰ˆæœ¬ä¸ç»Ÿä¸€è€Œæ»šæŒ‚ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨ dkms æ¨¡å—ï¼ŒæŠŠ `zfs-linux` æ›¿æ¢ä¸º `zfs-dkms` å³å¯ï¼Œè¿™ä¸ªçš„ç¼ºç‚¹æ˜¯æ„å»º dkms æ¨¡å—æ—¶ä¼šé£æ‰‡ç‹‚è½¬ï¼ˆç†è®ºä¸Šä»»ä½•å†…æ ¸éƒ½å¯ä»¥ç”¨è¿™ä¸ªå½“ zfs å†…æ ¸æ¨¡å—ï¼‰\n\n```SHELL\npacstrap /mnt base linux-firmware linux linux-headers zfs-linux base-devel neovim os-prober amd-ucode openssh wget networkmanager zfs-utils\n```\n\n#### åŸºç¡€å®‰è£…\n\n```SHELL\n# é…ç½® /etc/fstab\ngenfstab -U /mnt >> /mnt/etc/fstab\n# éªŒè¯ /etc/fstab\ncat /mnt/etc/fstab\n\n# chroot è¿› ArchLinux\narch-chroot /mnt\n\n# è®¾ç½®zpoolç¼“å­˜\nzpool set cachefile=/etc/zfs/zpool.cache zroot\n\n# è®¾ç½®æ—¶åŒº\nln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime\nhwclock --systohc\ndate\n\n# è®¾ç½®è¯­è¨€\necho -e \"\\nen_US.UTF-8 UTF-8\\nzh_CN.UTF-8 UTF-8\\nzh_TW.UTF-8 UTF-8\" >> /etc/locale.gen\n\n# åº”ç”¨é…ç½®\nlocale-gen\n\n# è®¾ç½®é»˜è®¤è¯­è¨€\necho -e \"\\nLANG=en_US.UTF-8\\n\" >> /etc/locale.conf\n\n# è®¾ç½®rootå¯†ç \npasswd\n\n# æ·»åŠ é root ç”¨æˆ·\npacman -S fish # å¦‚æœä¸æƒ³ç”¨ fish å¯ä»¥è·³è¿‡è¿™ä¸€æ­¥å¹¶æŠŠä¸‹ä¸€æ­¥çš„ fish å­—æ®µæ¢æˆ bash\nuseradd -m -G wheel -s /bin/fish user # user æ›¿æ¢ä¸ºä½ çš„ç”¨æˆ·å\npasswd user # è®¾ç½®å¯†ç \nsed -i \"s|#%wheel ALL=(ALL) ALL|%wheel ALL=(ALL) ALL|g\" /etc/sudoers # æ·»åŠ  sudo æƒé™ï¼Œå‘½ä»¤å¯èƒ½æ— æ•ˆï¼Œè¯·è‡ªè¡ŒæŸ¥è¯¢å¦‚ä½•ç»™ wheel ç”¨æˆ·ç»„æ·»åŠ  sudo æƒé™\n\n\n# æ·»åŠ  multilib å’Œ archlinuxcn ä»“åº“\narch='$arch'\necho -e \"\\n[multilib]\\nInclude = /etc/pacman.d/mirrorlist\\n\\n[archlinuxcn]\\nServer = https://mirrors.bfsu.edu.cn/archlinuxcn/$arch\" >> /etc/pacman.conf\n```\n\n#### é…ç½®å†…æ ¸é’©å­\n\né‡ç‚¹éƒ¨åˆ†ï¼\nç¼–è¾‘ `/etc/mkinitcpio.conf`ï¼Œç›´æ¥åœ¨ `HOOKS=(......)` é‡Œé¢åŠ ä¸Š `zfs`\n\n```SHELL\nnvim /etc/mkinitcpio.conf\nHOOKS=(base udev autodetect modconf block zfs filesystems keyboard fsck)\n```\n\nç¼–è¾‘å®Œç›´æ¥å€Ÿç”¨ ArchLinux çš„æä¸ºäººæ€§åŒ–çš„è„šæœ¬ç”Ÿæˆå³å¯\n\n```SHELL\nmkinitcpio -P\n```\n\n#### è®¾ç½® zfs æœåŠ¡ä»¥åŠç½‘ç»œç®¡ç†æœåŠ¡\n\n```SHELL\nsystemctl enable zfs.target\nsystemctl enable zfs-import-cache\nsystemctl enable zfs-mount\nsystemctl enable zfs-import.target\nsystemctl enable sshd\nsystemctl enable NetworkManager\n```\n\n## é…ç½® ZFSBootMenu å¼•å¯¼\n\nï¼ˆéœ€è¦åœ¨ chroot ä¸­å®Œæˆï¼‰  \né‡ç‚¹éƒ¨åˆ†ï¼  \nè¯¦ç»†äº†è§£å¯ä»¥çœ‹æˆ‘ä¹‹å‰é‚£ç¯‡[åœ¨ UEFI ArchLinux ä¸‹ä½¿ç”¨ ZFSBootMenu ä½œä¸ºå¼•å¯¼å™¨ï¼ˆå¯åŒå¯åŠ¨ï¼‰](https://pinghigh.github.io/2022/11/28/2022-11-28-ZFSBootMenu/)  \nåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨é¢„æ„å»ºå¥½çš„ EFI æ–‡ä»¶~~å› ä¸ºæˆ‘æ²¡ç©æ˜ç™½ ZFSBootMenuï¼Œç»å¸¸å‡ºç°æ¢å†…æ ¸å†æ„å»ºå°±ä¼šç‚¸å¼•å¯¼çš„é—®é¢˜ï¼ŒåŒæ—¶ä¸èƒ½åšåˆ°å¯åŠ¨æ—¶æ¢å†…æ ¸~~\n\né¦–å…ˆä¸‹è½½é¢„æ„å»ºå¥½çš„ ZBM efi å¼•å¯¼æ–‡ä»¶\nï¼ˆè®¿é—®ä¸äº†å¯ä»¥æŠŠ https://github.com/ æ¢æˆ https://ghproxy.com/https://github.com/ï¼‰\n\n```SHELL\nmkdir /efi/EFI\nmkdir /efi/EFI/ZBM\nwget https://github.com/zbm-dev/zfsbootmenu/releases/download/v2.0.0/zfsbootmenu-release-vmlinuz-x86_64-v2.0.0.EFI -O /efi/EFI/ZBM/zfsbootmenu.efi\n```\n\nå†è¿›è¡Œä¸€ä¸ªç®€å•çš„é…ç½®\n\n```SHELL\nzfs set org.zfsbootmenu:commandline=\"rw\" zroot/ROOT\n```\n\nè¿™æ ·å°±åšåˆ°äº†å¯åŠ¨ï¼ˆå¦‚æœæ²¡æœ‰åŒå¯åŠ¨çš„éœ€æ±‚æ²¡å¿…è¦è¿›è¡Œä¸‹ä¸€æ­¥äº†ï¼‰\n\n## é…ç½® rEFInd ä»¥å®ç°ä¸ Windows åŒå¯åŠ¨\n\nå®‰è£… refind\n\n```SHELL\npacman -Sy refind git\nrefind-install\n```\n\nè¿™æ ·é‡å¯ä¹‹åå°±èƒ½åŒå¯åŠ¨äº†  \nä½†æ˜¯ä½ è¿˜å¯ä»¥ç¾åŒ–ä¸€ä¸‹ï¼Œå®‰è£… nord ä¸»é¢˜ï¼ˆéå¿…è¦ï¼‰\n\n```SHELL\npacman -U https://mirror.cachyos.org/repo/x86_64/cachyos/refind-theme-nord-1.1.0-1-any.pkg.tar.zst\n```\n\n## ç»“æŸ\n\né€€å‡º chroot\n\n```SHELL\nexit\n```\n\nè§£æŒ‚è½½\n\n```SHELL\numount /mnt/efi\nzfs umount zroot/ROOT/archlinux\nzfs umount -a\n```\n\nå¯¼å‡º zfs æ± \n\n```SHELL\nzpool export zroot\n```\n\nï¼ˆå¯¼å‡ºæ²¡æˆåŠŸä¹Ÿæ²¡å…³ç³»ï¼Œç›´æ¥é‡å¯å³å¯ï¼‰\né‡å¯\n\n```SHELL\nreboot\n```\n\nç„¶åä½ çš„ archlinux å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†\n\n## åè®°\n\nè¿˜æ˜¯åœ¨å¹´å‰å®Œæˆäº†è™šæ‹Ÿæœºä¸Šçš„æµ‹è¯•ï¼Œèƒ½å¤Ÿå®Œç¾å®‰è£…ï¼ŒåŸæ¥å†™çš„è¿˜æ˜¯æœ‰ç‚¹ä½çº§é”™è¯¯çš„  \nHyper-V ä¸Šå®‰è£…å¯èƒ½ä¼šæ¶‰åŠåˆ° pacman æ£€æµ‹ä¸åˆ°æ¶æ„ä¹‹ç±»çš„é—®é¢˜ï¼Œå› æ­¤å¯ç”¨ archlinuxcn æºéœ€è¦ä½ åœ¨ `/etc/pacman.conf` æ”¹ `Architecture = auto` ä¸­çš„ `auto` ä¸ºä½ çš„æ¶æ„ï¼Œå¦‚ `x86_64` `x86_64-v3`  \nå¦å¤–ä¸å¯ç”¨ CachyOS-v3 æºï¼Œåªå¯ç”¨ CachyOS æºä¹Ÿå¯ä»¥å®‰è£… CachyOS çš„ä¼˜åŒ–å†…æ ¸ï¼Œä½†æ˜¯æ²¡æœ‰ lto ç‰ˆæœ¬  \nä»¥åŠæˆ‘ä¸ªäººå®£å¸ƒï¼Œè¿™æ˜¯æœ¬åšå®¢ 2022 å¹´çš„æœ€ä½³åšæ–‡\n\n[^1]: åŸå› æ˜¯ ZFSBootMenu éœ€è¦ä» `/boot` åŠ è½½å†…æ ¸ï¼Œè€Œ ZBM çš„ initramfs å¯åŠ¨æ—¶å¤§æ¦‚ä¸ä¼šæŒ‚è½½ ESP åˆ†åŒºï¼ˆæˆ‘ä¹‹å‰è¿™ä¹ˆå¹²å¯„äº†","tags":["ArchLinux","ZFSBootMenu","ZFS"],"categories":["Linux"]},{"title":"åœ¨ UEFI ArchLinux ä¸‹ä½¿ç”¨ ZFSBootMenu ä½œä¸ºå¼•å¯¼å™¨ï¼ˆå¯åŒå¯åŠ¨ï¼‰","path":"/post/zbm-guide/","content":"## å‰è¨€\n\nå†™è¿™ç¯‡åšå®¢çš„ç¼˜ç”±æŒºç®€å•çš„ï¼Œå½“æ—¶ ClearArch å¼€å‘ç»„è®¨è®ºæ–‡ä»¶ç³»ç»Ÿåº”å½“ä½¿ç”¨ ZFS è¿˜æ˜¯ F2FSï¼Œç”±äºä½¿ç”¨è¿‡ F2FS ä½œä¸ºæ ¹æ–‡ä»¶ç³»ç»Ÿï¼ˆå®ƒæ²¡æœ‰ Windows ä¸‹çš„é©±åŠ¨ï¼Œé€æ˜å‹ç¼©ä¹Ÿä¸ä¼šæä¾›é¢å¤–çš„ç©ºé—´ï¼‰ï¼ŒåŒæ—¶æŸ¥åˆ°[ä¼é¹…å¤§å¤§çš„ä¸€ç¯‡æ–‡ç« ](https://qiedd.com/1386.html)ï¼Œçœ‹åˆ°è¿‘ 2x çš„å‹ç¼©ç‡ä¸ç¦å¿ƒåŠ¨ï¼Œéšåèµ°ä¸Šäº† ZFS+zstd ä½œä¸ºæ ¹æ–‡ä»¶ç³»ç»Ÿçš„æŠ˜è…¾ä¹‹è·¯\n\nä¼é¹…å¤§å¤§ä½¿ç”¨ SysLinux å¼•å¯¼ï¼Œæˆ‘åœ¨æœåŠ¡å™¨å°è¯•å®‰è£…ç»“æœæ— æ³•å¯åŠ¨ï¼›çœ‹åˆ° [CachyOS](https://cachyos.org) çš„ä»“åº“ä¸­æœ‰ä¸€ä¸ªæ‰“äº† ZFS+zstd æ”¯æŒè¡¥ä¸çš„ grubï¼Œå°è¯•ï¼Œå¯åŠ¨ä¸äº†ï¼ˆåæ¥è¯¢é—®äº† CachyOS çš„å¼€å‘å›¢é˜Ÿå¾—çŸ¥é‚£ä¸ªè¡¥ä¸æ˜¯ä¸èµ·æ•ˆæœçš„ï¼‰ï¼Œéšåï¼Œæˆ‘é‡åˆ°äº†ä¸€ä¸ªå®Œç¾çš„è§£å†³æ–¹å¼ï¼ˆæŒ‡ [eoli3n çš„ä½¿ç”¨ ZFSBootMenu çš„å®‰è£…è„šæœ¬](https://github.com/eoli3n/arch-config/blob/master/scripts/zfs/install/02-install.sh)ï¼‰ï¼ˆå¦‚æœæƒ³å®æœºå…¨ç›˜å•ç³»ç»Ÿå¯ä»¥ç›´æ¥ç”¨ä»–çš„å®‰è£…è„šæœ¬ï¼‰\n\næœ¬æ–‡çš„ç›®çš„æ˜¯ç”¨ ZFSBootMenu å¼•å¯¼ zstd å‹ç¼©çš„ ZFS æ–‡ä»¶ç³»ç»Ÿæ ¹ç›®å½•ï¼ŒåŒæ—¶é™„å¸¦åŒå¯åŠ¨æ•™ç¨‹\n\n## ZFSBootMenu ä»‹ç»\n\n[å®˜æ–¹ä»“åº“](https://github.com/zbm-dev/zfsbootmenu/) ä»‹ç»ï¼š\n\n> ZFSBootMenu æ˜¯ç”¨äº root-on-ZFS ç³»ç»Ÿçš„ ZFS å¼•å¯¼åŠ è½½ç¨‹åºï¼Œæ”¯æŒå¿«ç…§å’Œæœ¬æœºå…¨ç›˜åŠ å¯†\n\nå…¶åŸç†æ¯”è¾ƒå®¹æ˜“ç†è§£ï¼Œæ€»çš„æ¥è¯´ï¼š\n1. å¼•å¯¼ ZFSBootMenuï¼Œä»–æ˜¯ä¸€ä¸ª initramfs æ˜ åƒ\n2. æ‰¾åˆ°å¹¶å¯¼å…¥æ‰€æœ‰çš„ ZFS å­˜å‚¨æ± ï¼Œç„¶åæŒ‚è½½ç”¨æˆ·é€‰æ‹©çš„æ ¹æ•°æ®é›†\n3. ç”¨ `kexec`[^1] å°†ç³»ç»Ÿå†…æ ¸ã€initramfs æ˜ åƒåŠ è½½åˆ°å†…å­˜ä¸­\n4. å¸è½½æ‰€æœ‰ ZFS æ•°æ®é›†\n5. å¯åŠ¨æœ€ç»ˆå†…æ ¸\n\næ€»ä¹‹ï¼Œå®ƒèƒ½å¯åŠ¨ä»¥ ZFS ä¸ºæ ¹ç›®å½•çš„ Linuxï¼Œé€Ÿåº¦ä¸æ…¢ï¼Œé€‚ç”¨ç¯å¢ƒå¹¿ï¼Œæ˜¯ä½œä¸ºæœ¬æ–‡ç¯å¢ƒä¸‹å¼•å¯¼å™¨çš„ä¸äºŒä¹‹é€‰\n\n## å‡†å¤‡\n\nç¡®ä¿ä½ çš„ç”µè„‘ä¸º UEFI å¯åŠ¨ï¼Œä¸”å·²ç»åˆ†åŒºå®Œæˆï¼Œå»ºç«‹äº†æ ¹åˆ†åŒºç›¸åº”çš„å­æ•°æ®é›†\n\n```SHELL\n[ -d /sys/firmware/efi] && echo UEFI || echo BIOS\n```\n\nè¾“å…¥è¯¥å‘½ä»¤ï¼Œè‹¥è¾“å‡º `UEFI`ï¼Œåˆ™å¯ä»¥è¿›è¡Œä¸‹ä¸€æ­¥ï¼Œå¦åˆ™é€€å‡ºæœ¬æ•™ç¨‹ã€‚\n\n### æŒ‚è½½ ESP åˆ†åŒº\n\nESP åˆ†åŒºä¸€èˆ¬æ˜¯ç£ç›˜å¤´éƒ¨ 300M å·¦å³çš„ FAT16/32 åˆ†åŒºï¼ŒåŒæ—¶æœ‰ EFI System æ ‡è®°ï¼Œå¯ä»¥é€šè¿‡ `fdisk -l` æŸ¥çœ‹å„ä¸ªåˆ†åŒºçš„æ ‡è®°  \næ­¤å¤„æŒ‚è½½ç‚¹ç»å¯¹ä¸å¯ä»¥æ˜¯ `/boot`ï¼Œä¸€èˆ¬æ¥è¯´æœ‰ä¸¤ä¸ªå…¶ä»–é€‰æ‹©ï¼š`/boot/efi` å’Œ `/efi`ï¼Œæˆ‘åœ¨è¿™é‡Œé€‰æ‹©äº† `/efi`  \nä¾‹å¦‚æˆ‘çš„ ESP åˆ†åŒºæ˜¯ /dev/nvme0n1p1\nåˆ™\n```SHELL\nmkdir /mnt/efi\nmount /dev/nvme0n1p1 /mnt/efi\n```\n\n### è®¾ç½® ZFS Hook\n\n```SHELL\n# å…ˆ arch-chroot\narch-chroot /mnt\n\n# è¿›å…¥åç¼–è¾‘ /etc/mkinitcpio åŠ å…¥ zfs æ”¯æŒï¼Œåœ¨ HOOKS=(.......) ä¸­åŠ å…¥ zfs\nvim /etc/mkinitcpio\n# æ¯”å¦‚æ­£å¸¸å®‰è£…çš„ arch ä¿®æ”¹ååº”è¯¥é•¿è¿™æ ·ï¼Œç¡®ä¿å…¶ä¸­æœ‰ zfs å³å¯\nHOOKS=(base udev autodetect modconf block zfs filesystems keyboard fsck)\n\n# ç¼–è¾‘ååŠ è½½\nmkinitcpio -P\n```\n\n## å®‰è£… ZFSBootMenu\n\nåœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨é¢„æ„å»ºå¥½çš„ EFI æ–‡ä»¶~~å› ä¸ºæˆ‘æ²¡ç©æ˜ç™½ZFSBootMenuï¼Œç»å¸¸å‡ºç°æ¢å†…æ ¸å†æ„å»ºå°±ä¼šç‚¸å¼•å¯¼çš„é—®é¢˜ï¼ŒåŒæ—¶ä¸èƒ½åšåˆ°å¯åŠ¨æ—¶æ¢å†…æ ¸~~\n\n```SHELL\n# /efi æ¢æˆä½ çš„ ESP æŒ‚è½½ç›®å½•\nmkdir /efi/EFI\nmkdir /efi/EFI/ZBM\nwget https://github.com/zbm-dev/zfsbootmenu/releases/download/v2.0.0/zfsbootmenu-release-vmlinuz-x86_64-v2.0.0.EFI -O /efi/EFI/ZBM/zfsbootmenu.efi\n# è®¿é—®ä¸äº†å¯ä»¥æŠŠ https://github.com/ æ¢æˆ https://ghproxy.com/https://github.com/\n\n# é…ç½®\n# æ­¤å¤„å‡è®¾ä½ çš„æ ¹ç›®å½•çš„æ•°æ®é›†ä¸º zroot/ROOT/arch\n# è¿™æ ·å¯ä»¥å¼•å¯¼ zroot/ROOT ä¸‹çš„ä»»æ„å­æ•°æ®é›†ï¼Œæ¯”å¦‚ zroot/ROOT/arch ä¸Šå®‰è£… archï¼Œzroot/ROOT/void ä¸Šå®‰è£… voidlinuxï¼Œè¿™å°±å®ç°äº† Linux çš„åŒå¯åŠ¨\nzfs set org.zfsbootmenu:commandline=\"rw\" zroot/ROOT\n```\n\n## é…ç½® rEFInd\n\nrEFInd èƒ½å¤Ÿæ¯æ¬¡å¼€æœºéƒ½æœç´¢ EFI åˆ†åŒºä¸‹çš„ efi æ–‡ä»¶ï¼Œè¿™æ ·å°±ä¸ç”¨æ›´æ–°å¼•å¯¼æ–‡ä»¶äº†ï¼ŒåŒæ—¶æ’å¯åŠ¨ç›˜çš„æ—¶å€™ä¹Ÿä¸éœ€è¦è¿› bios é‡Œè°ƒå¯åŠ¨é¡ºåºï¼ŒrEFInd ä¼šè‡ªåŠ¨æœç´¢åˆ°\n```SHELL\n# å‡è®¾å½“å‰è¿˜åœ¨ chroot é‡Œ\npacman -Sy refind\nrefind-install\n```\néå¸¸ç®€å•ï¼Œè¿™æ ·å°±å®ç°äº† Windows/macOS(HFS+) ä¸ Linux on ZFS çš„åŒå¯åŠ¨\n```SHELL\n# å®‰è£… nord ä¸»é¢˜\npacman -U https://mirror.cachyos.org/repo/x86_64/cachyos/refind-theme-nord-1.1.0-1-any.pkg.tar.zst\n```\n\n## TODO\nå®éªŒå¹¶æ•´ç†æ•´ä¸ªå®‰è£…æµç¨‹\n\n[^1]: `kexec` æ˜¯ Linux å†…æ ¸çš„ä¸€ç§æœºåˆ¶ï¼Œå®ƒå…è®¸ä»å½“å‰è¿è¡Œçš„å†…æ ¸å¯åŠ¨æ–°å†…æ ¸ã€‚`kexec` ä¼šè·³è¿‡ç”±ç³»ç»Ÿå›ºä»¶ï¼ˆBIOS æˆ– UEFIï¼‰æ‰§è¡Œçš„å¼•å¯¼åŠ è½½ç¨‹åºé˜¶æ®µå’Œç¡¬ä»¶åˆå§‹åŒ–é˜¶æ®µï¼Œç›´æ¥å°†æ–°å†…æ ¸åŠ è½½åˆ°ä¸»å†…å­˜å¹¶ç«‹å³å¼€å§‹æ‰§è¡Œã€‚","tags":["ArchLinux","ZFSBootMenu","ZFS"],"categories":["Linux"]},{"title":"çº¿æ®µæ ‘","path":"/post/segment-tree/","content":"~~é—ªå‡»çº¿æ®µæ ‘~~\n\n## åŸºæœ¬çº¿æ®µæ ‘\n\n### æ“ä½œ\n\n`push_up()` é€šè¿‡å­åŒºé—´è®¡ç®—çˆ¶åŒºé—´çš„æ•°æ®\n\n`build()` å°†ä¸€æ®µåŒºé—´åˆå§‹åŒ–æˆçº¿æ®µæ ‘\n\n`modify()` \n* ä¿®æ”¹å•ç‚¹æ•°æ®\n* ä¿®æ”¹åŒºé—´æ•°æ® (å³ `push_down()`)\n\n`query()` æŸ¥è¯¢\n\n`push_down()` ä¿®æ”¹åŒºé—´æ•°æ®å¹¶é€’å½’ä¿®æ”¹å­åŒºé—´çš„æ•°æ®\n\n### åŸç†\n\nè¿˜æ˜¯ç”¨å›¾ç†è§£\n\n![](https://pic1.imgdb.cn/item/646ca3800d2dde5777c812ff.webp)\n\nç®€å•æ¥è¯´å°±æ˜¯æŠŠä¸€ä¸ªåŒºé—´æ•´æˆç±»ä¼¼ä¸Šå›¾çš„å®Œå…¨äºŒå‰æ ‘ï¼Œçˆ¶èŠ‚ç‚¹ï¼ˆåŒºé—´ï¼‰çš„æ•°æ®å¯ä»¥ç”±å­èŠ‚ç‚¹ï¼ˆåŒºé—´ï¼‰çš„æ•°æ®æ¨å‡ºï¼ˆå¦‚åŒºé—´æœ€å¤§å€¼ï¼ŒåŒºé—´å’Œç­‰ï¼‰ï¼ŒåŒæ—¶çˆ¶èŠ‚ç‚¹çš„æ›´æ”¹å¯ä»¥æ¨åˆ°å­èŠ‚ç‚¹é‡Œã€‚  \nå¯èƒ½æœ‰ç‚¹æŠ½è±¡ï¼Œä½†æ˜¯æŠŠæ“ä½œæŒ¨ä¸ªè§£é‡Šå°±æ¯”è¾ƒæ˜“æ‡‚äº†ã€‚\n\n### å­˜å‚¨èŠ‚ç‚¹\n\nä½¿ç”¨ç»“æ„ä½“æ„Ÿè§‰æ¯”è¾ƒæ¸…æ™°ï¼Œé…ä¸ŠæŒ‡é’ˆå°±èƒ½è„±ç¦»ä¸­æ‹¬å·çš„æŸç¼šäº†\n\n```cpp\nstruct Node {\n    int u;\n    int v;\n    Node *lc, *rc;\n    int l, r, mid;\n    int lazy;  // æ‡’æ ‡è®°\n    void init(int L, int R) {\n        l = L;\n        r = R;\n        mid = l + r >> 1;\n    }\n} tr[N * 4];\n```\n\nåŒæ—¶ `mid` æ˜¯éœ€è¦ç”¨åˆ°çš„å˜é‡ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ç›´æ¥å­˜åœ¨é‡Œé¢ï¼ŒåŒæ—¶å†™ä¸€ä¸ªåˆå§‹åŒ–å‡½æ•°ï¼Œç›´æ¥ä¼ è¿›å»åŒºé—´çš„å·¦å³ç«¯ç‚¹ï¼Œéå¸¸æ–¹ä¾¿ã€‚\n\n### å»ºç«‹çº¿æ®µæ ‘\n\nç¬¬ä¸€å±‚åŒºé—´ä¸º $[l,r]$\n\nå– $mid = \\lfloor \\frac{l+r}{2} \\rfloor $\n\nåˆ™ç¬¬äºŒå±‚çš„åŒºé—´åˆ†åˆ«æ˜¯ $[l,mid], [mid+1,r]$\n\nç›®å‰èŠ‚ç‚¹ä¸º $u$ï¼Œçº¿æ®µæ ‘æ•°ç»„ä¸º $tr$ï¼Œ`build()` å‡½æ•°å¦‚ä¸‹\n```cpp\nvoid build(Node* nod, int L, int R) {\n    nod->init(L, R); // è®°å½•åŒºé—´èŒƒå›´\n    if (L == R) { // åˆ°è¾¾å¶å­èŠ‚ç‚¹å°±å›æº¯\n        nod->v = ori[L];\n        nod->lc = nod->rc = tr; // é˜²æ­¢ç©ºæŒ‡é’ˆï¼Œå·¦å³å„¿å­æŒ‡å‘ç¬¬ä¸€ä¸ªç©ºèŠ‚ç‚¹\n        return;\n    }\n    nod->lc = ++tail; // tail æ˜¯ä¸€ä¸ªæŒ‡å‘æœ€ååˆ›å»ºçš„èŠ‚ç‚¹çš„æŒ‡é’ˆï¼Œè¿™æ ·æ˜¯ä¸€ä¸ªç±»ä¼¼åŠ¨æ€å¼€ç‚¹çš„æ“ä½œ\n    nod->rc = ++tail;\n    build(nod->lc, L, nod->mid);\n    build(nod->rc, nod->mid + 1, R);\n    push_up(nod);\n}\n\n```\n\n### æŸ¥è¯¢\n\nä»¥åŒºé—´å’Œä¸ºä¾‹\n\nè®¾æŸ¥è¯¢çš„åŒºé—´ä¸º $[l,r]$ï¼Œç›®å‰èŠ‚ç‚¹åŒºé—´ä¸º $[T_l,T_r]$\n\nåˆ™æœ‰äºŒç§æƒ…å†µ\n\n1. $[l,r] \\ni [T_l,T_r]$ æŸ¥è¯¢åŒºé—´åŒ…å«ç›®å‰èŠ‚ç‚¹åŒºé—´ï¼ˆå› ä¸ºæ¯æ¬¡æŸ¥è¯¢éƒ½å¯èƒ½æŠŠæŸ¥è¯¢åŒºé—´åˆ‡å‰²å¼€å†ä¸‹ä¼ ï¼Œæ‰€ä»¥è¿™ç§æƒ…å†µå¯è§†ä¸ºä¸¥æ ¼åŒ…å«ï¼‰\n2. $[l,r]\\cap[T_l,T_r] \\neq \\varnothing$\n3. $[l,r]\\not\\ni[T_l,T_r]$ ï¼ˆä¸å­˜åœ¨ï¼‰\n\næŠŠç¬¬äºŒç§æƒ…å†µè¿˜éœ€è¦å†åˆ†å¼€æˆä¸‰ç§æƒ…å†µ\n\n1. $[l,r] \\in [lc_l,lc_r]$ å³è¢«å·¦å„¿å­åŒºé—´åŒ…å«\n2. $[l,r] \\in [rc_l,rc_r]$ å³è¢«å³å„¿å­åŒºé—´åŒ…å«\n3. $l \\leqslant mid , r > mid$ å³å·¦å³åŒºé—´éƒ½ä¸èƒ½å•ç‹¬è¦†ç›–æŸ¥è¯¢åŒºé—´ï¼Œè¿™ç§æƒ…å†µæŠŠæŸ¥è¯¢åŒºé—´ä» mid åŠˆæˆä¸¤åŠå†åˆ†åˆ«åœ¨å·¦å³å„¿å­åŒºé—´æŸ¥è¯¢å³å¯ã€‚\n\næ‰€ä»¥åªç”¨å¤„ç†ç›¸åº”çš„æƒ…å†µå°±å¯ä»¥äº†\n\nè¿™é‡Œç›´æ¥ç»™å‡ºä¸€ä¸ªç»´æŠ¤åŒºé—´æœ€å¤§å€¼çš„æŸ¥è¯¢å‡½æ•°\n\n```cpp\nint query(Node* nod, int L, int R) {\n    push_down(nod);\n    \n    if (nod->r == R && nod->l == L) { // ä¸¥æ ¼è¦†ç›–\n        return nod->v;\n    }\n    \n    if (nod->lc->r >= R) {\n        return query(nod->lc, L, R);\n    } else if (nod->rc->l <= L) {\n        return query(nod->rc, L, R);\n    } else {\n        return query(nod->lc, L, nod->lc->r) + query(nod->rc, nod->rc->l, R);\n    }\n}\n```\n\n### ä»å­èŠ‚ç‚¹æ¨å‡ºçˆ¶èŠ‚ç‚¹æ•°æ®\n\nè¿˜æ˜¯ä»¥åŒºé—´å’Œä¸ºä¾‹ï¼Œçˆ¶åŒºé—´æœ€å¤§å€¼ä¸ºä¸¤ä¸ªå­åŒºé—´æœ€å¤§å€¼ä¸­çš„æœ€å¤§å€¼ã€‚\n\n```cpp\nvoid push_up(Node* nod) {\n    nod->v = nod->lc->v + nod->rc->v;\n}\n```\n\n### ä¿®æ”¹åŒºé—´å€¼\n\nç†è§£èµ·æ¥å…¶å®æŒºç®€å•çš„ï¼Œæ¯”å¦‚ç»™åŒºé—´ $[L,R]$ éƒ½åŠ ä¸€ä¸ªæ•° $x$ï¼Œæœ´ç´ å†™æ³•ç›´æ¥ç”¨ç±»ä¼¼[æŸ¥è¯¢](#æŸ¥è¯¢)çš„æ–¹æ³•é€’å½’åˆ°åº•éƒ¨å›æº¯çš„æ—¶å€™ä¸€ä¸ªä¸€ä¸ªæ›´æ–°å³å¯ã€‚\n\nä½†æ˜¯æ˜¾ç„¶è¿™æ ·åšæ•ˆç‡å¾ˆä½ï¼Œå¯¹äºé•¿åº¦ä¸º $n$ çš„ä¸€ä¸ªåŒºé—´ï¼Œæœ€åæƒ…å†µä¸‹å®ƒå¯¹åº” $\\log n$ ä¸ªæå¤§åŒºé—´ï¼ˆè¿™äº›åŒºé—´ä¸å­˜åœ¨å¯ä»¥åˆå¹¶çš„ä¸¤ä¸ªï¼‰ï¼›å¯¹äºæ¯ä¸€ä¸ªæå¤§åŒºé—´æ¥è¯´ä¿®æ”¹å®ƒå’Œå®ƒæ‰€æœ‰å­åŒºé—´çš„å€¼çš„æ—¶é—´å¤æ‚åº¦æ˜¾ç„¶æ˜¯ä»–çš„é•¿åº¦ï¼Œå³ $\\operatorname{O}(len)$ã€‚åˆ™å¦‚ä¸Šæœ´ç´ å†™æ³•æ¯æ¬¡ä¿®æ”¹çš„æ—¶é—´å¤æ‚åº¦æœ€åä¸º $\\operatorname{O}(n\\log n)$ï¼Œå±äºæ˜¯é£æ…¢äº†ã€‚\n\nä¼˜åŒ–çš„æ–¹å¼å¾ˆå®¹æ˜“æƒ³åˆ°ï¼Œå°±æ˜¯æ¯æ¬¡ä¿®æ”¹åªéœ€è¦ä¿è¯éœ€è¦ç”¨åˆ°çš„èŠ‚ç‚¹æ˜¯æ­£ç¡®çš„ï¼Œå…¶ä»–èŠ‚ç‚¹å…ˆä¸ç®¡ï¼Œéœ€è¦ç”¨åˆ°çš„æ—¶å€™å†æ›´æ”¹ã€‚è¿™ç§æ–¹å¼å¾ˆåƒå‰ç«¯é‡Œé¢çš„ä¸€ä¸ªä¼˜åŒ–â€œæ‡’åŠ è½½â€ï¼Œå³ä¸€ä¸ªç½‘é¡µå¦‚æœæœ‰å¾ˆå¤šå…ƒç´ ï¼Œä¸€æ¬¡å…¨éƒ¨åŠ è½½å®Œå¯èƒ½ä¼šç¼“æ…¢ï¼Œæ‰€ä»¥è®¾å¤‡æ˜¾ç¤ºåˆ°å“ªé‡Œå°±åªåŠ è½½å“ªé‡Œçš„å…ƒç´ ï¼Œçœ‹ä¸åˆ°çš„å…ƒç´ èƒ½ä¸åŠ è½½å°±ä¸åŠ è½½ã€‚åŒæ ·çš„ï¼Œè¿™ç§ä¼˜åŒ–æ–¹å¼éœ€è¦æ‰“æ ‡è®°ï¼ŒåŒæ—¶èƒ½ä¸ä¸‹æ”¾å°±ä¸ä¸‹æ”¾ï¼Œå­èŠ‚ç‚¹èƒ½ä¸ä¿®æ”¹å°±ä¸ä¿®æ”¹ï¼Œè¢«ç§°ä¸ºâ€œæ‡’æ ‡è®°â€ã€‚\n\nä¹Ÿå°±æ˜¯è¯´è‹¥ä¸€ä¸ªèŠ‚ç‚¹æ‹¥æœ‰æ‡’æ ‡è®°ï¼Œé‚£ä¹ˆè¯¥èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ä»¬éƒ½ä¸çŸ¥é“è¿™ä¸ªæ‡’æ ‡è®°çš„å­˜åœ¨ï¼ŒåŒæ—¶ä¹Ÿå°±è¡¨æ˜è¯¥èŠ‚ç‚¹çš„å¶å­èŠ‚ç‚¹å­˜å‚¨çš„ä¿¡æ¯å‡ä¸æ˜¯çœŸå®ä¿¡æ¯ã€‚å¦‚æœéœ€è¦ç”¨åˆ°å½“å‰æ‹¥æœ‰æ‡’æ ‡è®°çš„èŠ‚ç‚¹çš„çœŸå®ä¿¡æ¯ï¼Œå°±éœ€è¦æŠŠæ‡’æ ‡è®°ä¸‹æ”¾åˆ°å­èŠ‚ç‚¹ï¼Œé€šè¿‡æ‡’æ ‡è®°æ›´æ”¹å­èŠ‚ç‚¹æ•°æ®ï¼Œç„¶åå¤„ç†å­èŠ‚ç‚¹æ›´æ”¹é€ æˆçš„æ•°æ®æ›´æ”¹å³å¯ï¼ˆç›´æ¥ `push_up`ï¼‰\n\nå‡è®¾ç›®å‰è¦æ±‚ç»´æŠ¤åŒºé—´å’Œçš„åŒæ—¶å¤„ç†åŒºé—´åŠ çš„æ“ä½œï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹æ¥è¯´ï¼Œæˆ‘ä»¬éœ€è¦ç»´æŠ¤ä¸€ä¸ªæ‡’æ ‡è®° $lazy$ ï¼Œä»£è¡¨â€œå½“å‰åŒºé—´çš„å­åŒºé—´éœ€è¦åŠ ä¸€ä¸ª $lazy$ â€ã€‚\n\n```cpp\nvoid modify(Node* nod, int L, int R, int v) { // ç»™ [L,R] æ¯ä¸ªæ•°åŠ  v\n    if (L == nod->l && R == nod->r) { // åŒ…å«äº†\n        nod->lazy += v; // è¯¥åŒºé—´çš„æ¯ä¸ªå­åŒºé—´éƒ½éœ€è¦åŠ  v\n        nod->v += (nod->r - nod->l + 1) * v; // å½“å‰åŒºé—´ä¸€å…±æœ‰ R-L+1 ä¸ªå…ƒç´ ï¼ˆå› ä¸ºä¸¥æ ¼åŒ…å«æ‰€ä»¥ L å’Œ R å°±æ˜¯åŒºé—´çš„å·¦å³ç«¯ç‚¹ï¼‰\n        // ç”¨ä¸ä¸Šå­åŒºé—´çš„æ•°æ®ï¼Œä¸ä¸‹ä¼ æ‡’æ ‡è®°ç›´æ¥ç»“æŸ\n    } else {\n        push_down(nod);\n        /*\n        åˆ¤æ–­ä¸‰ç§æƒ…å†µ\n        */\n        if (nod->lc->r >= R) {\n            modify(nod->lc, L, R, v);\n        } else if (nod->rc->l <= L) {\n            modify(nod->rc, L, R, v);\n        } else {\n            modify(nod->lc, L, nod->lc->r, v);\n            modify(nod->rc, nod->rc->l, R, v);\n        }\n        push_down(nod);\n        push_up(nod);\n    }\n}\n```\n\n```cpp\nvoid push_down(Node* nod) {\n    if (nod->lazy == 0) return;\n    if (nod->lc) nod->lc->lazy += nod->lazy;\n    if (nod->rc) nod->rc->lazy += nod->lazy;\n    nod->lc->v += (nod->mid - nod->l + 1) * nod->lazy;\n    nod->rc->v += (nod->r - nod->mid) * nod->lazy;\n    nod->lazy = 0;\n}\n```\n\nå€¼å¾—æ³¨æ„çš„æ˜¯ï¼ŒåŠ ä¸Šæ‡’æ ‡è®°ä¹‹åï¼Œä¸ºäº†ä¿è¯æŸ¥è¯¢æ—¶è®¿é—®çš„èŠ‚ç‚¹æ•°æ®æ­£ç¡®ï¼Œéœ€è¦åœ¨æŸ¥è¯¢æ—¶æ·»åŠ  `push_down()` æ“ä½œï¼ˆä¸Šæ–‡å·²åŠ ï¼‰ã€‚\n\n### å®Œæ•´å®ç°\n\nåŒºé—´åŠ ä¿®æ”¹&æ±‚åŒºé—´å’Œ\n\n```cpp\n#include <iostream>\n\nusing namespace std;\n\n#define N 1000150\n\nstruct Node {\n    int u;\n    int v;\n    Node *lc, *rc;\n    int l, r, mid;\n    int lazy;  // æ‡’æ ‡è®°\n    void init(int L, int R) {\n        l = L;\n        r = R;\n        mid = l + r >> 1;\n    }\n} tr[N * 4];\n\nint n, m;\nint x, y, k;\nint ori[N];\nchar beh;\nint t1, t2, t3;\nint cnt = 1;\nNode* tail = tr;\n\nvoid push_up(Node* nod) {\n    nod->v = nod->lc->v + nod->rc->v;\n}\n\nvoid build(Node* nod, int L, int R) {\n    nod->init(L, R);\n    if (L == R) {\n        nod->v = ori[L];\n        nod->lc = nod->rc = tr;\n        return;\n    }\n    nod->lc = ++tail;\n    nod->rc = ++tail;\n    build(nod->lc, L, nod->mid);\n    build(nod->rc, nod->mid + 1, R);\n    push_up(nod);\n}\n\nvoid push_down(Node* nod) {\n    if (nod->lazy == 0) return;\n    if (nod->lc) nod->lc->lazy += nod->lazy;\n    if (nod->rc) nod->rc->lazy += nod->lazy;\n    nod->lc->v += (nod->mid - nod->l + 1) * nod->lazy;\n    nod->rc->v += (nod->r - nod->mid) * nod->lazy;\n    nod->lazy = 0;\n}\n\nvoid modify(Node* nod, int L, int R, int v) {\n    if (L == nod->l && R == nod->r) {\n        nod->lazy += v;\n        nod->v += (nod->r - nod->l + 1) * v;\n    } else {\n        push_down(nod);\n        if (nod->lc->r >= R) {\n            modify(nod->lc, L, R, v);\n        } else if (nod->rc->l <= L) {\n            modify(nod->rc, L, R, v);\n        } else {\n            modify(nod->lc, L, nod->lc->r, v);\n            modify(nod->rc, nod->rc->l, R, v);\n        }\n        push_down(nod);\n        push_up(nod);\n    }\n}\n\nint query(Node* nod, int L, int R) {\n    push_down(nod);\n    if (nod->r == R && nod->l == L) {\n        return nod->v;\n    }\n\n    if (nod->lc->r >= R) {\n        return query(nod->lc, L, R);\n    } else if (nod->rc->l <= L) {\n        return query(nod->rc, L, R);\n    } else {\n        return query(nod->lc, L, nod->lc->r) + query(nod->rc, nod->rc->l, R);\n    }\n}\n\nsigned main() {\n    ios::sync_with_stdio(0);\n    cin.tie(0);\n    cout.tie(0);\n\n    cin >> n >> m;\n    for (int i = 1; i <= n; ++i) {\n        cin >> ori[i];\n    }\n    build(++tail, 1, n);\n    while (m--) {\n        cin >> beh;\n        if (beh == '1') {\n            cin >> t1 >> t2 >> t3;\n            modify(tr + 1, t1, t2, t3);\n        } else {\n            cin >> t1 >> t2;\n            cout << query(tr + 1, t1, t2) << endl;\n        }\n    }\n\n    return 0;\n}\n```\n\n## åŒºé—´åŠ ä¹˜åŒæ—¶å­˜åœ¨\n\nä¸Šæ–‡ä»‹ç»äº†åŠ æ³•çš„æ‡’æ ‡è®°ï¼Œå¦‚æœæ˜¯å•ç‹¬ä¹˜æ³•çš„æ‡’æ ‡è®°ä¹Ÿå¾ˆå¥½å®ç°ã€‚ä½†æ˜¯å¦‚æœéœ€è¦åŒæ—¶å¤„ç†åŠ æ³•ã€ä¹˜æ³•ä¸¤ä¸ªåŒºé—´æ“ä½œè¯¥æ€ä¹ˆåŠæï¼Ÿ\n\nåªéœ€è¦ä½¿ç”¨ä¸€ä¸‹åˆ†é…å¾‹å³å¯ã€‚\n\n$(nod_cnod_v + nod_a) \\cdot d=d \\cdot nod_cnod_v+d \\cdot nod_a$ \n\n$nod_c$ å³ä¹˜æ³•æ‡’æ ‡è®°ï¼Œ $nod_a$ å³åŠ æ³•æ‡’æ ‡è®°ï¼Œ$d$ æ˜¯éœ€è¦ä¹˜çš„æ•°ï¼ˆæ“ä½œæ•°ï¼‰","tags":["çº¿æ®µæ ‘"],"categories":["æ•°æ®ç»“æ„"]},{"title":"åŒä½™æ–¹ç¨‹ä¸äºŒå…ƒä¸€æ¬¡ä¸å®šæ–¹ç¨‹","path":"/post/exgcd/","content":"## åŒä½™\n\n### å®šä¹‰\n\n$a\\bmod m = b \\bmod m$ åˆ™ç§° $a,b$ å¯¹äºæ¨¡ $m$ åŒä½™ï¼Œè®°ä¸º $a \\equiv b \\pmod m$\n\nç­‰ä»·äº $m$ æ•´é™¤ $(a-b)$ï¼Œå³ $m\\mid(a-b)$\n\n### åŒä½™æ–¹ç¨‹\n\n$ax \\equiv b \\pmod m$\n\nå·²çŸ¥ $a,b,n$ï¼Œæ±‚è§£ $x$ã€‚  \nå½“ä¸”ä»…å½“ $b$ èƒ½è¢« $a$ å’Œ $n$ çš„æœ€å¤§å…¬çº¦æ•°æ•´é™¤æ—¶æ­¤æ–¹ç¨‹æœ‰è§£  \nè‹¥ $x_0$ æ˜¯æ–¹ç¨‹çš„ä¸€ä¸ªè§£ï¼Œè§£é›†å³ä¸º $\\{ x_0+km /\\gcd(a,m) | k\\in \\mathbb{Z} \\}$\n\næœ‰è§£è¯æ˜ï¼š\n\nå¯¹äºçº¿æ€§åŒä½™æ–¹ç¨‹ $ax \\equiv b\\pmod m$ å¯ä»¥è½¬æ¢ä¸º $ax+km=b,k\\in \\mathbb{Z}$\n\nè®¾ $d=\\gcd(a,m)$ï¼Œè‹¥æ–¹ç¨‹æœ‰è§£ä¸º $c$ï¼Œ åˆ™ $m \\mid (ac-b)$ ï¼Œä»è€Œ $d\\mid(ac-b)$ï¼Œåˆå› ä¸º $d\\mid a$ï¼Œå³ $d\\mid ac$ï¼Œäºæ˜¯æœ‰ $d\\mid b$ï¼Œå³ $\\gcd(a,m)\\mid b$\n\n### æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•\n\n#### å‰ç½®çŸ¥è¯†\n\n##### è£´èœ€å®šç†\n\n$$\n\\forall a,b, \\exists x,y,ax+by=\\gcd(a,b)\n$$\n\nå³ $ax\\equiv \\gcd(a,b)\\pmod b$\n\n#### ç”¨é€”\n\n- æ±‚è§£åŒä½™æ–¹ç¨‹ $ax \\equiv \\gcd(a,n) \\pmod n$\n  - $\\forall a,b,\\exists x,y,ax+by=\\gcd(a,b)$ (è£´èœ€å®šç†)  \n    å³ $ax\\equiv \\gcd(a,b) \\pmod b$ã€‚è€Œ $x,y$ å¯ä»¥ç”¨æ‰©å±•æ¬§å‡ é‡Œå¾—ç®—æ³•æ±‚å‡º\n\nåŒæ—¶,[é€†å…ƒ](/post/multi-inverse-element)çš„å®šä¹‰ä¹Ÿæ˜¯ä¸€ä¸ªåŒä½™æ–¹ç¨‹,ä¹Ÿå°±æ˜¯è¯´è¯¥æ³•å¯ä»¥æ±‚æ¨¡æ„ä¹‰ä¸‹çš„é€†å…ƒ\n\n#### åŸç†\n\nå¯¹äºæ–¹ç¨‹ $ax_1+by_1=\\gcd (a,b)$ï¼Œç”±è£´èœ€å®šç†å¯å¾—ä¸€å®šå­˜åœ¨ä¸€ç»„ $x_1,y_1$ ä½¿å¾—ç­‰å¼æˆç«‹\n\näºæ˜¯åˆ†ä¸¤ç±»è®¨è®º\n\n- $b = 0$ æ—¶ï¼Œ$ax_1+by_1=a$ï¼Œæ˜¾ç„¶ $x_1 = 1, y_1 \\in \\mathbf R$\n\n- $b \\neq 0$ æ—¶ï¼Œåˆ©ç”¨å››ä¸ªæœªçŸ¥é‡ $x_1,y_1,x_2,y_2$ åˆ—å‡ºä¸¤ä¸ªæ–¹ç¨‹\n  $$\n  \\begin{cases}\n  ax_1+by_1 = \\gcd(a,b) = \\gcd(b, a\\bmod b) â‘  \\newline\n  bx_2+(a\\bmod b)y_2 = \\gcd(b, a \\bmod b) = \\gcd(a,b) = ax_1+by_1 â‘¡\n  \\end{cases}\n  $$\n  æ˜“å¾—\n  $$\n  a \\bmod b = a-\\lfloor\\frac{a}{b}\\rfloor b\n  $$\n  ç”±æ­¤æˆ‘ä»¬å¯ä»¥ç»§ç»­å±•å¼€æ¨å¯¼ $â‘¡$ å¼\n  $$\n  \\begin{aligned}\n  bx_2+(a\\bmod b)y_2 &= ax_1+by_1 \\newline\n  bx_2+(a-\\lfloor \\dfrac{a}{b}\\rfloor b)y_2 &= ax_1+by_1 \\newline\n  ay_2+b(x_2-\\lfloor \\dfrac{a}{b} \\rfloor y_2) &= ax_1+by_1\n  \\end{aligned}\n  $$\n    <!--$x_2,y_2$ åªæ˜¯ä¸¤ä¸ªè¡¨ç¤ºæœªçŸ¥é‡çš„ç¬¦å·ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æŠŠå®ƒä»¬ä¸¤ä¸ªäº’æ¢ä¸€ä¸‹ï¼Œå¾—åˆ°\n    \n    $$\n    ax_2+b(y_2-\\lfloor \\dfrac{a}{b} \\rfloor x_2) = ax_1+by_1\n    $$\n    -->\n  å› æ­¤\n  $$\n  \\begin{cases}\n  x_1 = y_2 \\newline\n  y_1 = x_2-\\lfloor \\dfrac{a}{b} \\rfloor y_2\n  \\end{cases}\n  $$\n\n#### å®ç°\n\n<!--\n* ç®—æ³•ï¼šå‡½æ•° `ex_gcd(a,b)`\n  * è‹¥ $b=0$ï¼Œ$ax_1+by_1=\\gcd(a,b)$ çš„è§£æ˜¯ $x_1=1,y_1=0$ï¼Œç›´æ¥è¿”å›\n  * å¦åˆ™é€’å½’è°ƒç”¨ $\\operatorname{ex\\_gcd}(b,a\\bmod b)$ï¼Œæ±‚è§£ $bx_2+(a\\bmod b)y_2 = \\gcd(b, a\\bmod b)$\n  * ç”¨ä¸Šä¸€æ­¥è§£çš„ $x_2,y_2$ï¼Œä»¤ $x_1=y_2, y_1=x_2-\\lfloor \\dfrac{a}{b} \\rfloor y_2$ ï¼Œ$x_1$ å’Œ $y_1$ å°±æ˜¯å½“å‰æ–¹ç¨‹çš„è§£\n  * è¿”å› $x_1,y_1$\n* å¯¹äºä»»æ„åŒä½™æ–¹ç¨‹ $ax\\equiv b \\pmod n$ï¼Œåªè¦æ»¡è¶³ $\\gcd(a,n)\\mid b$\n  å°±å¯ä»¥å…ˆç”¨æ‰©æ¬§æ±‚å‡º $ax_2\\equiv \\gcd(a,n)\\ \\pmod n$\n  å³ $d=\\gcd(a,n)$ï¼Œå¾—åˆ° $a(\\frac bd)x_2\\equiv b\\ \\pmod n$\n  æ‰€ä»¥åŸæ–¹ç¨‹ä¸€è§£ $x_0=(\\frac bd)x_2$ï¼Œé€šè§£ $x_0+(\\frac nd)k, k\\in \\mathbf{Z}$\n  -->\n\n##### å‡½æ•° $\\operatorname{exgcd}(a,b,x,y)$\n\né‡‡ç”¨é€’å½’å®ç°ï¼Œå› æ­¤å…ˆåˆ¤å®šé€’å½’è¾¹ç•Œï¼Œåˆ™ $b=0$ æ—¶åˆ°è¾¾è¾¹ç•Œï¼Œæ­¤æ—¶ $x = 1, y = 0$\n\næœªåˆ°è¾¹ç•Œï¼Œåˆ™å…ˆç»§ç»­è°ƒç”¨ $\\operatorname{exgcd}(b, a\\bmod b, x, y)$ ï¼Œç„¶åæ ¹æ®é€’å½’å›æº¯å¾—åˆ°çš„ $x,y$ å¾—åˆ° $x_1, y_1$ï¼Œå³\n\n$$\n\\begin{cases}\nx_1 = y \\newline\ny_1 = x-\\lfloor \\dfrac{a}{b} \\rfloor y\n\\end{cases}\n$$\n\nè¿”å›åˆ°å¤´ä¸ºæ­¢ã€‚\n\n##### æ±‚è§£ $ax + by = c$ ï¼Œå³ $a \\equiv c \\pmod b$\n\nå…ˆåˆ¤æ–­æ˜¯å¦æœ‰è§£ï¼Œè‹¥ $\\gcd(a,b) \\mid c$ åˆ™æœ‰è§£ï¼ˆ[è£´èœ€å®šç†](#è£´èœ€å®šç†)ï¼‰\nç„¶ååˆ©ç”¨ $\\operatorname{exgcd}$ æ±‚è§£ $ax_1 + by_1 = \\gcd (a,b)$\nå³å¾—åˆ°ä¸€ä»½ç‰¹è§£ $x = x_1 \\times \\frac{c}{\\gcd(a,b)}, y = y_1 \\times \\frac{c}{\\gcd(a,b)}$\n\næ±‚é€šè§£ï¼Œå®è´¨ä¸Šæ˜¯ä½¿ $x,y$ è¿›è¡Œä¸€å®šå˜æ¢ä½†ç­‰å¼ä¾ç„¶æˆç«‹ã€‚\næ˜“æƒ³åˆ° $x$ ä¸‹é™æ—¶ $y$ ä¸Šå‡ï¼Œå› æ­¤è®¾ï¼š$g = \\gcd(a,b), i>j$\n\n$$\n\\begin{aligned}\nax_i+by_i&=c \\newline\nax_j + by_j &= c\n\\end{aligned} \\newline\n$$\n\nå¯¼ä¸€ä¸‹å¼å­ï¼Œå¾—\n\n$$\n\\begin{aligned}\nax_i+by_i &= ax_j + by_j \\newline\na(x_i - x_j) &= b(y_j - y_i) \\newline\n\\frac ag (x_i - x_j) &= \\frac bg (y_j - y_i)\n\\end{aligned} \\newline\n$$\n\nå› ä¸º $g$ æ˜¯æœ€å¤§å…¬å› æ•°ï¼Œæ‰€ä»¥ $\\frac ag$ ä¸ $\\frac bg$ äº’è´¨ã€‚åˆå› ä¸ºæ–¹ç¨‹ä¸­æ¯ä¸€ä¸ªå­—æ¯éƒ½æ˜¯æ•´æ•°ï¼Œæ‰€ä»¥æ˜“å¾—ï¼š$\\frac bg$ æ˜¯ $x_i-x_j$ çš„å€æ•°ï¼Œè€Œ $\\frac ag$ æ˜¯ $y_j - y_i$ çš„å€æ•°ï¼ˆå³ $- \\frac ag$ æ˜¯ $y_i - y_j$ çš„å€æ•°ï¼‰\n\näºæ˜¯é€šè§£å°±æ¨å‡ºæ¥äº†\n\n$$\n\\begin{cases}\n\\mathbf X = \\{x+\\cfrac bg k \\mid k\\in\\mathbf Z\\} \\newline\n\\mathbf Y = \\{y-\\cfrac ag k \\mid k\\in\\mathbf Z\\}\n\\end{cases}\n$$\n\nå…³äºæœ€å°æ­£æ•´æ•° $x$ï¼Œæ±‚æ³•å¦‚ä¸‹ï¼š\n\n- æƒ…å†µ 1ï¼š$\\gcd(a,b) = 1$\n  - æ­¤æ—¶ $\\frac bg = 1$ ï¼Œåˆ™ $x_{min} = x \\bmod b$\n- æƒ…å†µ 2ï¼š$\\gcd(a,b)=g\\neq 1$\n  - æƒ³åŠæ³•åˆ—å‡ºæ–°æ–¹ç¨‹ï¼ˆ$x,y$ ä¸å˜ï¼‰$a_1x+b_1y=c_1,\\gcd(a_1,b_1)=1$ï¼Œå³ $a_1,b_1$ äº’è´¨\n  - å®¹æ˜“æƒ³åˆ° $a_1 = \\frac ag, b_1 = \\frac bg$ï¼Œç„¶åä¸ºäº†ä¿è¯ç­‰å¼æˆç«‹ï¼Œ$c_1 = \\frac cg$\n  - æ˜¾ç„¶ç›´æ¥åŒ–ä¸ºäº†ç¬¬ä¸€ç§æƒ…å†µï¼Œäºæ˜¯ $x_{min} = x \\bmod \\frac b{\\gcd(a,b)}$\n\n#### ä»£ç \n\n##### é¢˜ç›®æè¿°\n\nç»™å®šä¸å®šæ–¹ç¨‹\n$$ax+by=c$$\nè‹¥è¯¥æ–¹ç¨‹æ— æ•´æ•°è§£ï¼Œè¾“å‡º $-1$ã€‚  \nè‹¥è¯¥æ–¹ç¨‹æœ‰æ•´æ•°è§£ï¼Œä¸”æœ‰æ­£æ•´æ•°è§£ï¼Œåˆ™è¾“å‡ºå…¶**æ­£æ•´æ•°**è§£çš„æ•°é‡ï¼Œæ‰€æœ‰**æ­£æ•´æ•°**è§£ä¸­ $x$ çš„æœ€å°å€¼ï¼Œæ‰€æœ‰**æ­£æ•´æ•°**è§£ä¸­ $y$ çš„æœ€å°å€¼ï¼Œæ‰€æœ‰**æ­£æ•´æ•°**è§£ä¸­ $x$ çš„æœ€å¤§å€¼ï¼Œä»¥åŠæ‰€æœ‰**æ­£æ•´æ•°**è§£ä¸­ $y$ çš„æœ€å¤§å€¼ã€‚  \nè‹¥æ–¹ç¨‹æœ‰æ•´æ•°è§£ï¼Œä½†æ²¡æœ‰æ­£æ•´æ•°è§£ï¼Œä½ éœ€è¦è¾“å‡ºæ‰€æœ‰**æ•´æ•°è§£**ä¸­ $x$ çš„æœ€å°æ­£æ•´æ•°å€¼ï¼Œ $y$ çš„æœ€å°æ­£æ•´æ•°å€¼ã€‚\n\næ­£æ•´æ•°è§£å³ä¸º $x, y$ å‡ä¸ºæ­£æ•´æ•°çš„è§£ï¼Œ$\\boldsymbol{0}$ **ä¸æ˜¯æ­£æ•´æ•°**ã€‚  \næ•´æ•°è§£å³ä¸º $x,y$ å‡ä¸ºæ•´æ•°çš„è§£ã€‚  \n$x$ çš„æœ€å°æ­£æ•´æ•°å€¼å³æ‰€æœ‰ $x$ ä¸ºæ­£æ•´æ•°çš„æ•´æ•°è§£ä¸­ $x$ çš„æœ€å°å€¼ï¼Œ$y$ åŒç†ã€‚\n\n###### è¾“å…¥æ ¼å¼\n\nç¬¬ä¸€è¡Œä¸€ä¸ªæ­£æ•´æ•° $T$ï¼Œä»£è¡¨æ•°æ®ç»„æ•°ã€‚\n\næ¥ä¸‹æ¥ $T$ è¡Œï¼Œæ¯è¡Œä¸‰ä¸ªç”±ç©ºæ ¼éš”å¼€çš„æ­£æ•´æ•° $a, b, c$ã€‚\n\n###### è¾“å‡ºæ ¼å¼\n\n$T$ è¡Œã€‚\n\nè‹¥è¯¥è¡Œå¯¹åº”çš„è¯¢é—®æ— æ•´æ•°è§£ï¼Œä¸€ä¸ªæ•°å­— $-1$ã€‚  \nè‹¥è¯¥è¡Œå¯¹åº”çš„è¯¢é—®æœ‰æ•´æ•°è§£ä½†æ— æ­£æ•´æ•°è§£ï¼ŒåŒ…å« $2$ ä¸ªç”±ç©ºæ ¼éš”å¼€çš„æ•°å­—ï¼Œä¾æ¬¡ä»£è¡¨æ•´æ•°è§£ä¸­ï¼Œ$x$ çš„æœ€å°æ­£æ•´æ•°å€¼ï¼Œ$y$ çš„æœ€å°æ­£æ•´æ•°å€¼ã€‚  \nå¦åˆ™åŒ…å« $5$ ä¸ªç”±ç©ºæ ¼éš”å¼€çš„æ•°å­—ï¼Œä¾æ¬¡ä»£è¡¨æ­£æ•´æ•°è§£çš„æ•°é‡ï¼Œæ­£æ•´æ•°è§£ä¸­ï¼Œ$x$ çš„æœ€å°å€¼ï¼Œ$y$ çš„æœ€å°å€¼ï¼Œ$x$ çš„æœ€å¤§å€¼ï¼Œ$y$ çš„æœ€å¤§å€¼ã€‚\n\n##### å®ç°\n\n```cpp\ni64 ex_gcd(i64 u, i64 v, i64& x, i64& y) {\n    if (!v) {\n        x = 1, y = 0;\n        return u;\n    }\n\n    i64 g = ex_gcd(v, u % v, x, y);\n    i64 temp = x;\n    x = y;\n    y = temp - u / v * y;\n    return g;\n}\n\ni64 a, b, c, g, x, y, ga, gb, maxx, maxy, minx, miny;\ni64 t;\ni64 k;\n\nint main() {\n    read(t);\n    while (t--) {\n        read(a, b, c);\n        // if (a < b) std::swap(a, b);\n        g = ex_gcd(a, b, x, y);\n        x *= c / g, y *= c / g;\n        if (c % g) {\n            puts(\"-1\");\n        } else {\n            ga = a / g;\n            gb = b / g;\n\n            /*\n            æ­¤å¤„å…ˆæŠŠ x çš„æœ€å°æ­£æ•´æ•°å€¼æ±‚å‡ºæ¥ï¼Œå®¹æ˜“æƒ³åˆ° x æœ€å°æ—¶ y æœ€å¤§\n            x > 1 æ—¶ï¼Œç›´æ¥å¾€å°å–å°±è¡Œ\n            x <= 1 æ—¶ï¼Œæ±‚ 1 å’Œ x çš„å·®å€¼ç„¶åæŠŠå·®å€¼å‘ä¸Šå–æ•´åœ°æ¶ˆæ‰å³å¯\n            y åŒç†\n            */\n            if (x > 1) {\n                k = (x - 1) / gb;\n                minx = x - k * gb;\n                maxy = y + k * ga;\n            } else {\n                k = ceil((1.0 - x) / gb);\n                minx = x + k * gb;\n                maxy = y - k * ga;\n            }\n            if (y > 1) {\n                k = (y - 1) / ga;\n                miny = y - k * ga;\n                maxx = x + k * gb;\n            } else {\n                k = ceil((1.0 - y) / ga);\n                miny = y + k * ga;\n                maxx = x - k * gb;\n            }\n\n            // å¦‚æœ x, y çš„æœ€å¤§å€¼ä¸æ˜¯æ­£æ•´æ•°ï¼Œé‚£ä¹ˆæ— æ­£æ•´æ•°è§£ï¼Œæœ€å°æ­£æ•´æ•° x, y å°±æ˜¯ä¸Šé¢æ‰€æ±‚\n            if (maxy <= 0 || maxx <= 0) {\n                write(minx, ' ', miny, '\\n');\n            } else {\n                // æ­¤å¤„ç®—ä¸ªæ•°çš„æ—¶å€™éœ€è¦æ³¨æ„è¦ç®—è‡ªèº«ï¼Œæ‰€ä»¥ + 1\n                write((i64)ceil(maxy - 1.0) / ga + 1, ' ', minx, ' ', miny, ' ', maxx, ' ', maxy, '\\n');\n            }\n        }\n    }\n    return 0;\n}\n```","tags":["æ•°è®º","åŒä½™"],"categories":["æ•°å­¦"]},{"title":"åˆç­‰æ•°è®º","path":"/post/elementary-number-theory/","content":"## è´¨æ•°ç›¸å…³\n\nè´¨æ•°å³ä¸€ä¸ªæ•°çš„å› æ•°åªåŒ…å« $1$ å’Œè‡ªå·±ã€‚  \nç­›æ³•è¯·è§ï¼š[è´¨æ•°ç­›æ³•](/post/prime-sieve)\n\n\n## æ¨¡è¿ç®—ç›¸å…³\n\né¦–å…ˆï¼Œå­˜åœ¨å”¯ä¸€çš„æ•´æ•° $q,r$ æ»¡è¶³ $n=qm+r, 0\\leqslant r<m$ï¼Œ$q$ å°±æ˜¯å•†ï¼Œ$r$ å°±æ˜¯ä½™æ•°ã€‚    \nC++ ä¸­æ¨¡è¿ç®—å¯èƒ½ç»“æœæ˜¯è´Ÿæ•°ã€‚å½“ $n<0$ æ—¶ï¼Œæ¨¡è¿ç®—ç»“æœæ»¡è¶³ $-m<r \\leqslant 0$ã€‚    \nå› æ­¤å¯ä»¥ä½¿ç”¨ \n\n```cpp\n(n % m + m) % m\n```\n\nè¿›è¡Œå–ä½™æ“ä½œã€‚\n\n## æ±‚[æœ€å¤§å…¬çº¦æ•°](/post/gcd)\n\n\n```cpp\n#include <iostream>\nusing namespace std;\nint main() {\n    int a,b,r;\n    cin >> a >> b;\n    while (a % b) {\n        r = a % b;\n        a = b;\n        b = r;\n    }\n    cout << b << endl;\n    return 0;\n}\n```\n\n## åŒä½™æ–¹ç¨‹ç›¸å…³\n\n[åŒä½™æ–¹ç¨‹ä¸äºŒå…ƒä¸€æ¬¡ä¸å®šæ–¹ç¨‹](/post/exgcd)\n\n## æ•°è®ºå‡½æ•°\n\nå®šä¹‰åŸŸ[^1]ä¸ºæ­£æ•´æ•°çš„å‡½æ•°ã€‚\n\n### ç§¯æ€§å‡½æ•°\n\nç§¯æ€§å‡½æ•° $f(n)$ æ»¡è¶³ï¼š$f(1)=1$ï¼Œä¸” $\\forall x,y\\in \\mathbb{N^*},\\gcd(x,y)=1$ï¼Œéƒ½æœ‰ $f(xy)=f(x)f(y)$ã€‚\n\nå®Œå…¨ç§¯æ€§å‡½æ•° $f(n)$ æ»¡è¶³ï¼šæ»¡è¶³ï¼š$f(1)=1$ï¼Œä¸” $\\forall x,y\\in \\mathbb{N^*}$ï¼Œéƒ½æœ‰ $f(xy)=f(x)f(y)$ã€‚\n\n#### æ€§è´¨\n\nè‹¥ $f(x),g(x)$ ä¸ºç§¯æ€§å‡½æ•°ï¼Œåˆ™ä»¥ä¸‹å‡½æ•°ä¹Ÿä¸ºç§¯æ€§å‡½æ•°ã€‚\n\n- $h(x)=f(x^p)$\n- $h(x)=f^p(x)$\n- $h(x)=f(x)g(x)$\n- $h(x)=\\sum _{d\\mid x} f(d)g(\\frac xd)$ï¼ˆ[Dirichlet å·ç§¯](#Dirichlet å·ç§¯)ï¼‰\n \n\n#### å¸¸è§ç§¯æ€§å‡½æ•°\n\n- $\\varepsilon(n)=[n=1]$[^2]ï¼ˆå®Œå…¨ç§¯æ€§ï¼‰\n- æ¬§æ‹‰å‡½æ•° $\\varphi(n)=\\sum_{i=1}^n[\\gcd(i,n)=1]$\n\n### Dirichlet å·ç§¯\n\næœ‰ä¸¤ä¸ªæ•°è®ºå‡½æ•° $f(x),g(x)$ï¼Œå…¶ç‹„åˆ©å…‹é›·å·ç§¯è®¡ç®—çš„ç»“æœ $h(x)$ å³ï¼š\n\n$$\n\\begin{aligned}  \nh(x) &= \\sum _{d\\mid x} f(d)g(\\frac xd) \\newline\n     &= \\sum _{ab=x} f(a)g(b)\n\\end{aligned}\n$$\n\nåä¸€ç§å½¢å¼å®¹æ˜“ç†è§£ä¸€ç‚¹ã€‚äººè¯æ¥è§£é‡Š $h(x)$ çš„è®¡ç®—è¿‡ç¨‹ï¼Œå°±æ˜¯æŠŠ $x$ çš„æ¯ä¸€å¯¹å› æ•° $a,b$ æ‰¾å‡ºæ¥ï¼ˆå³ $ab=x$ï¼‰ï¼Œç„¶åè®¡ç®— $f(a)g(b)$ å’Œ $f(b)g(a)$ï¼Œå†å¯¹è¿™å¯¹ä¸œè¥¿æ±‚å’Œã€‚\n\nä¸Šé¢çš„å¼å­å¯ä»¥ç®€è®°ä¸º\n\n$$\nh=f*g\n$$\n\n#### æ€§è´¨\n\n- ä¸¤ä¸ªç§¯æ€§å‡½æ•°çš„ç‹„åˆ©å…‹é›·å·ç§¯å½¢å¼ä¾ç„¶æ˜¯ç§¯æ€§å‡½æ•°ã€‚\n\n- æ»¡è¶³äº¤æ¢å¾‹ ç»“åˆå¾‹ åˆ†é…å¾‹\n\n### å…¶ä»–ä¸œè¥¿\n\n- å•ä½å‡½æ•° $\\epsilon(n)=[n=1]$ã€‚\n- å¯¹äºæ¯ä¸ª $f(1) \\neq 0$ çš„æ•°è®ºå‡½æ•° $f$ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªå‡½æ•° $g$ ä½¿ $f*g=\\epsilon$ï¼ˆå‡½æ•°é€†å…ƒï¼‰\n- æ•´é™¤åˆ†å—ï¼šå¯¹äº $i,k\\in \\mathbb{N^*}$ï¼Œ$k$ ä¸ºå®šå€¼æ—¶ï¼Œ$\\lfloor \\frac ki \\rfloor$ æœ‰å¤§çº¦ $\\sqrt k$ ç§å–å€¼ã€‚å¯ä»¥ç”¨è¿™ä¸ªåšç­”æ¡ˆå…³äº $i\\in[x,y], \\lfloor \\frac ki \\rfloor$ ç›¸å…³çš„é—®é¢˜ï¼ˆæŠŠæ•´é™¤ç»“æœç›¸åŒçš„æ•°ç®—æˆä¸€ä¸ªå—æ¥æ±‚ç­”æ¡ˆï¼Œè¿™æ ·çš„å—å¤§çº¦æœ‰ $\\sqrt k$ ä¸ªï¼‰ã€‚\n- $I(n)$ æ’ç­‰å‡½æ•°ï¼Œå§‹ç»ˆç­‰äº $1$ã€‚\n- $id(n)=n$ å•ä½å‡½æ•°ã€‚\n\n\n[^1]: å‡½æ•° $f(x)$ çš„å®šä¹‰åŸŸå³ä¸º $x$ çš„å–å€¼èŒƒå›´ã€‚\n[^2]: è‰¾ä½›æ£®æ‹¬å· $[a]$ ä¸­åŒ…å«ä¸€ä¸ªæ¡ä»¶ $a$ï¼Œè¯¥è¡¨è¾¾å¼å½“ $a$ æˆç«‹æ—¶ä¸º $1$ï¼Œå¦åˆ™ä¸º $0$ã€‚","tags":["æ•°è®º","åŒä½™"],"categories":["æ•°å­¦"]},{"title":"èƒŒåŒ… DP","path":"/post/backpack-dp/","content":"ç¬¬ä¸€æ¬¡ä½¿ç”¨ $\\LaTeX$\n\n## 01 èƒŒåŒ…\n\n### æœ´ç´ \n\n```cpp\n#include <iostream>\n#include <algorithm>\n#define MAXN 1010\n\nusing namespace std;\n\nint n, m;\nint v[MAXN], w[MAXN];\nint f[MAXN][MAXN];\n\nint main() {\n    ios::sync_with_stdio(false);\n    cin.tie(0);\n    cout.tie(0);\n\n    cin >> n >> m;\n\n    for (int i = 1; i <= n; i ++) {\n        cin >> v[i] >> w[i];\n    }\n\n    for (int i = 1; i <= n; i ++) {\n        for (int j = 1; j <= m; j ++) {\n            f[i][j] = f[i - 1][j];\n            if (j >= v[i]) f[i][j] = max(f[i][j],f[i-1][j-v[i]] + w[i]);\n        }\n    }\n\n    cout << f[n][m];\n\n    return 0;\n}\n```\n\n### ä¸€ç»´ä¼˜åŒ–\n\n```cpp\n#include <iostream>\n#define MAXN 1010\n\nusing namespace std;\n\nint n,m;\nint v[MAXN],w[MAXN];\nint f[MAXN];\n\nint main() {\n    cin >> n >> m;\n    for (int i = 1; i <= n; i ++) {\n        cin >> v[i] >> w[i];\n    }\n\n    for (int i = 1; i <= n; i ++) { // æŒ‰ç…§ç‰©å“ä»å¤´åˆ°å°¾æšä¸¾\n        for (int j = m; j >= v[i]; j --) { // æŒ‰ç…§ä½“ç§¯ä»æœ€å¤§ä½“ç§¯åˆ°å½“å‰ï¼ˆç¬¬ i ä¸ªï¼‰ç‰©å“æšä¸¾\n            f[j] = max(\n                f[j], // æ­¤æ—¶æœªæ›´æ–°çš„ f[j] æ˜¯ä¸Šä¸€æ¬¡ï¼ˆi-1ï¼‰æšä¸¾çš„æ•°æ®ï¼Œå³ f[j] æ˜¯ä¸é€‰ç¬¬ i ä¸ªç‰©å“çš„ f[j]\n                f[j - v[i]] + w[i]\n                );\n        }\n    }\n\n    cout << f[m] << endl;\n\n    return 0;\n}\n```\n\n## å®Œå…¨èƒŒåŒ…\n\n### æœ´ç´ åšæ³•\n\nå³ 3 ç»´åšæ³•\n\n<!-- * çŠ¶æ€è¡¨ç¤º $f_{i,j}$\n    * é›†åˆï¼šæ‰€æœ‰åªè€ƒè™‘å‰ $i$ ä¸ªç‰©å“ï¼Œä¸”æ€»ä½“ç§¯ä¸å¤§äº $j$ çš„æ‰€æœ‰é€‰æ³•\n    * å±æ€§ï¼š$max$ ï¼ˆæœ€å¤§ï¼‰\n* çŠ¶æ€è®¡ç®— -> å³é›†åˆçš„åˆ’åˆ†\n    * ç›®å‰æˆ‘ä»¬è¦æ±‚ $max f_{i,j}$ï¼Œä¸å®¹æ˜“ç›´æ¥æ±‚ï¼Œå°±é‡‡ç”¨ç±»ä¼¼ 01 èƒŒåŒ…é—®é¢˜çš„â€œæ›²çº¿æ•‘å›½â€æ–¹æ³•\n        1. å»æ‰ $k$ ä¸ªç¬¬ $i$ ä¸ªç‰©å“ï¼Œå˜ä¸º $max f_{i-1,j}$\n        2. å»æ‰ç›¸åº”çš„ $k$ ä¸ªç¬¬ $i$ ä¸ªç‰©å“çš„ç©ºé—´ï¼Œå˜ä¸º $max f_{i-1,j-v_ik}$\n        3. æ±‚ä¸Šé¢çš„ $max$\n        4. åŠ å› $k$ ä¸ªç¬¬ $i$ ä¸ªç‰©å“çš„ä»·å€¼ï¼Œå˜ä¸º $max f_{i-1,j-v_ik} + w_ik$\n-->\n\nå…ˆè€ƒè™‘çŠ¶æ€ï¼Œå®¹æ˜“æƒ³åˆ°é€‰åˆ°æŸä¸ªä½ç½®åï¼Œå…¶ç‰¹å¾æœ‰ç©ºé—´ï¼Œç‰©å“ç§ç±»å’Œä»·å€¼ã€‚ä»·å€¼æ˜¯è¦æ±‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥å¼€äºŒç»´çŠ¶æ€ï¼Œåˆ†åˆ«è¡¨ç¤ºç©ºé—´å’Œç‰©å“ç§ç±»ã€‚å³ $f_{i,j}$ è¡¨ç¤ºä»å‰ $i$ ç§ç‰©å“é‡Œé€‰ï¼Œå äº† $j$ å•ä½ç©ºé—´çš„æœ€å¤§æ”¶ç›Šã€‚  \nå‚è€ƒ lzp å¤§ä½¬åšå®¢ä¸­çš„è¦æ±‚ï¼Œè¿™ä¸ªçŠ¶æ€æ˜¯å¦èƒ½ä¿è¯å”¯ä¸€ä¸”å¯é€’æ¨å‘¢ï¼Ÿ\n\n- å”¯ä¸€ï¼šé€‰ç‰©å“çš„èŒƒå›´ç¡®å®šï¼Œæ‰€å ç”¨çš„ç©ºé—´ç¡®å®šï¼Œåœ¨æ‰€æœ‰æ–¹æ¡ˆä¸­å­˜å‚¨æœ€å¤§æ”¶ç›Šçš„æ–¹æ¡ˆã€‚ç”±äºç©ºé—´ç¡®å®šï¼Œå› æ­¤ä¸ä¼šå½±å“åé¢å†³ç­–ï¼Œæ­¤æ—¶ä¸€å®šèƒ½ä¿è¯æœ€ä¼˜ä¸”å”¯ä¸€ã€‚\n- å¯é€’æ¨ï¼šå‰é¢æœ€ä¼˜ï¼Œå®¹æ˜“æƒ³åˆ°é€šè¿‡æšä¸¾æ–°æ‹¿çš„ç‰©å“æ•°é‡æ±‚å¾—å½“å‰æœ€ä¼˜æ–¹æ¡ˆï¼ˆåé¢è®²ï¼‰\n\næ¥ä¸‹æ¥è®²é€’æ¨è¿‡ç¨‹ï¼š  \nå‰é¢ 0/1 èƒŒåŒ…æˆ‘ä»¬åªéœ€è¦è€ƒè™‘ä¸€ä¸ªç‰©å“**æ˜¯å¦é€‰**ï¼Œä½†æ˜¯ç°åœ¨è¿˜éœ€è¦è€ƒè™‘**é€‰å¤šå°‘**ã€‚  \nè€ƒè™‘æ˜¯å¦é€‰æ‹©æ—¶ï¼Œæˆ‘ä»¬ç›´æ¥æšä¸¾å½“å‰ç‰©å“çš„çŠ¶æ€ï¼Œå³ 0/1ï¼Œé€‰æˆ–ä¸é€‰ã€‚  \næ”¾åˆ°ç°åœ¨è¿™ä¸ªé¢˜ç›®ä¸­ï¼ŒæŠŠåˆšæ‰ 0/1 èƒŒåŒ…æšä¸¾**é€‰æˆ–ä¸é€‰**çš„è¿‡ç¨‹çœ‹ä½œæšä¸¾**ç‰©å“æ•°é‡**ï¼Œå³é€‰ $1$ ä¸ªæˆ–é€‰ $0$ ä¸ªï¼Œè¿™å¯å‘æˆ‘ä»¬å¯ä»¥é€šè¿‡æšä¸¾ç‰©å“æ•°é‡æ¥è§£å†³**é€‰å¤šå°‘**çš„é—®é¢˜ã€‚  \nçŠ¶æ€è½¬ç§»æ–¹ç¨‹å°±è‡ªç„¶è€Œç„¶åœ°å‡ºæ¥äº†ï¼š\n\n$$\nf_{i,j} = \\max \\left\\{ f_{i-1,j-v_ik} + w_ik \\right\\}\n$$\n\n```cpp\nint backpack() {\n    #define MAXN 1010\n\n    using namespace std;\n\n    int n,m; //! åº”å½“å®šä¹‰åœ¨å‡½æ•°å¤–éƒ¨ï¼ŒåŸå› æˆ‘ä¸è¯´ï¼Œå› ä¸ºæ²¡äººçœ‹\n    int v[MAXN],w[MAXN];\n    int f[MAXN][MAXN];\n\n    cin >> n >> m;\n    for (int i = 1; i <= n; i ++) {\n        cin >> v[i] >> w[i];\n    }\n\n    for (int i = 1; i <= n; i ++)\n        for (int j = 0; j <= m; j ++) {\n            for (int k = 0; k * v[i] <= j; k ++)\n                f[i][j] = max(f[i][j], f[i - 1][j - v[i] * k] + w[i] * k);\n        }\n    cout << f[n][m] << endl;\n}\n```\n\n### 2 ç»´ä¼˜åŒ–\n\nä¸Šé¢çš„è½¬ç§»æœ‰ä¸‰ç»´ï¼å¤ªæ…¢äº†ï¼æƒ³åŠæ³•å¦‚ä½•å‡å»ä¸€ä¸ªç»´åº¦ã€‚\n\nçŠ¶æ€æ–¹é¢ï¼Œæ²¡æœ‰åŠæ³•å†é™äº†ï¼Œå› ä¸ºå»æ‰ä»»æ„ä¸€ç»´éƒ½ä¼šå¯¼è‡´æ— æ³•è¡¨ç¤ºå”¯ä¸€çš„çŠ¶æ€ã€‚  \né‚£å°±è€ƒè™‘ä¼˜åŒ–é€’æ¨çš„è¿‡ç¨‹ã€‚æƒ³ä¸€æƒ³æ˜¯å¦æœ‰å“ªäº›çŠ¶æ€èƒ½å¤Ÿè½¬ç§»åˆ°å½“å‰çŠ¶æ€ä½†æ˜¯æ²¡è€ƒè™‘åˆ°ï¼Ÿç­”æ¡ˆæ˜¯æœ‰çš„ã€‚  \nè€ƒè™‘é€’æ¨è¿‡ç¨‹çš„ç¬¬äºŒå±‚ã€ç¬¬ä¸‰å±‚å¾ªç¯ï¼Œå¯¹äºæ¯ä¸€ä¸ªä½“ç§¯ $j$ï¼Œ$k$ éƒ½éœ€è¦ä» $1$ æšä¸¾åˆ° $j/v_ik$ ï¼Œå½¢è±¡ç‚¹æ¥è¯´å¤§æ¦‚é•¿è¿™æ ·\n\n| 1 | 2 | 3 | 4 |  \n| --- | --- | --- | --- |  \n| xxx | | | |  \n| xxx | xxx | | |  \n| xxx | xxx | xxx | |  \n| xxx | xxx | xxx | xxx |  \n\næ˜¾ç„¶ï¼Œ$k = 1,2,3$ æ—¶éƒ½é‡å¤åœ°æšä¸¾äº†å¾…è½¬ç§»çŠ¶æ€ï¼Œæƒ³åŠæ³•æŠŠè¿™äº›å†—ä½™çš„ä¸œè¥¿å»æ‰â€”â€”ç›´æ¥ä»ç®—è¿‡ $k=1,2,3$ çš„çŠ¶æ€è½¬ç§»è¿‡æ¥ã€‚  \nè¿™æ„å‘³ç€æˆ‘ä»¬ä¸èƒ½å†å•çº¯çš„ç”¨ç‰©å“æ•°é‡è¿›è¡Œé€’æ¨ã€‚è§‚å¯Ÿç¬¬ä¸€è¡Œåˆ°ç¬¬äºŒè¡Œï¼Œå®¹æ˜“å‘ç°åœ¨æ»¡ä½“ç§¯çš„æ—¶å€™ï¼Œç¬¬äºŒè¡Œåªæ˜¯æ¯”ç¬¬ä¸€è¡Œå¤šäº†ä¸€ä¸ªç‰©å“ $i$ è€Œå·²ã€‚  \nè®¨è®ºå•ä¸ªç‰©å“æ˜¯å¦é€‰æ‹©ï¼Œäºæ˜¯æ–°çš„é€’æ¨æ–¹å¼å°±æ˜¾è€Œæ˜“è§äº†ï¼Œè®¾å½“å‰çŠ¶æ€ä¸º $f_{i,j}$ï¼Œæˆ‘æ—¢å¯ä»¥é€‰ä¸€ä¸ªç‰©å“ $i$ï¼Œä¹Ÿå¯ä»¥ä¸é€‰ä¸€ä¸ªç‰©å“ $i$ï¼Œä» $f_{i-1,j}$ è½¬ç§»è¿‡æ¥ã€‚  \nçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n\n$$\nf_{i,j} =\n\\begin{cases}\nf_{i-1,j} \\newline\n\\max \\left\\{ f_{i-1,j}, f_{i,j-v_i} + w_i \\right\\},\\ j\\geqslant v_i\n\\end{cases}\n$$\n\nä»£ç å¦‚ä¸‹\n\n```cpp\n#define MAXN 1010\n\nusing namespace std;\n\nint n,m;\nint v[MAXN],w[MAXN];\nint f[MAXN][MAXN];\n\n\ncin >> n >> m;\nfor (int i = 1; i <= n; i ++) {\n\tcin >> v[i] >> w[i];\n}\n\nfor (int i = 1; i <= n; i ++)\n\tfor (int j = 0; j <= m; j ++) {\n\t//  åŸåšæ³•\n\t//  for (int k = 0; k *v[i] <= j; k ++)\n\t//      f[i][j] = max(f[i][j], f[i - 1][j - v[i] * k] + w[i] * k);\n\t\tf[i][j] = f[i - 1][j];\n\t\tif (j >= v[i]) f[i][j] = max(f[i][j], f[i][j-v[i]] + w[i]);\n\t}\ncout << f[n][m] << endl;\n\n```\n\næ»šåŠ¨æ•°ç»„ä¼˜åŒ–\n\n```cpp\n#define MAXN 1010\n\nusing namespace std;\n\nint n,m;\nint v[MAXN],w[MAXN];\nint f[MAXN][MAXN];\n\nint backpack() {\n    cin >> n >> m;\n    for (int i = 1; i <= n; i ++) {\n        cin >> v[i] >> w[i];\n    }\n\n    for (int i = 1; i <= n; i ++)\n        for (int j = v[i]; j <= m; j ++) {\n            // f[i][j] = f[i - 1][j]; æ’ç­‰å¼ç›´æ¥åˆ é™¤\n            // if (j >= v[i]) ç›´æ¥ä» v[i] å¼€å§‹å¾ªç¯å°±å®Œäº‹äº†\n            f[j] = max(f[j], f[j-v[i]] + w[i]);\n        }\n    cout << f[m] << endl;\n}\n```\n\n## å¤šé‡èƒŒåŒ…\n\n### æœ´ç´ \n\n$N$ ç§ç‰©å“ï¼ŒèƒŒåŒ…å®¹é‡ä¸º $V$ï¼Œç¬¬ $i$ ä»¶ç‰©å“æœ€å¤šèƒ½é€‰ $C_i$ ä¸ªï¼Œæ¯ä»¶ç‰©å“å ç©ºé—´ $v_i$ï¼Œä»·å€¼ä¸º $w_i$\n\nç¬¬ä¸€ç§å®¹æ˜“æƒ³åˆ°çš„è§£æ³•æ˜¯æŠŠå®Œå…¨èƒŒåŒ…çš„æ–¹æ³•æ‹¿æ¥ç”¨ï¼Œå› ä¸ºå¤šé‡èƒŒåŒ…åªæ˜¯åŠ äº† $k$ çš„é™åˆ¶ã€‚\nçŠ¶æ€è½¬ç§»æ–¹ç¨‹ï¼š\n\n$$\nf_{i,j} = \\max\\{f_{i,j}, f_{i-1,j - C_ik} + w_ik\\}\n$$\n\nè€ƒè™‘å¤šé‡èƒŒåŒ…å’Œå®Œå…¨èƒŒåŒ…çš„åŒºåˆ«å¯ä»¥å‘ç°ï¼Œå¤šé‡èƒŒåŒ…è™½ç„¶æ¯ç§ç‰©å“ä¸åªä¸€ç§ï¼Œä½†æ˜¯æœ‰ç¡®å®šçš„æ•°é‡ï¼Œè€Œå®Œå…¨èƒŒåŒ…æ²¡æœ‰æ•°é‡é™åˆ¶ï¼Œåˆ™å¯ä»¥è½»æ¾åœ°åœ¨~~å¿½ç•¥æ—¶é—´å¤æ‚åº¦çš„æƒ…å†µä¸‹~~æŠŠå¤šé‡èƒŒåŒ…**æ‹†åˆ†**æˆ 01 èƒŒåŒ…ï¼Œå³æŠŠ $M_i$ ä»¶ç¬¬ $i$ ä»¶ç‰©å“æŒ¨ä¸ªç®—å•ä¸ªç‰©å“å†æŒ‰ç…§ 01 èƒŒåŒ…çš„æ–¹å¼å¤„ç†ã€‚\n\n```cpp\nfor (int i = 1; i <= n; ++ i) {\n    for (int j = 0; j <= m; ++ j) {\n        for (int k = 0; k <= min(c[i],j/w[i])/* æ•°é‡å’Œä½“ç§¯ä¸¤ä¸ªéƒ½é™åˆ¶æ•°é‡ */; ++ k) {\n            f[i][j] = max(f[i][j], f[i-1][j-k*v[i]] + k*w[i]);\n        }\n    }\n}\n```\n\n### äºŒè¿›åˆ¶ä¼˜åŒ–\n\nè¿™ç§æš´åŠ›æ–¹å¼æ±‚è§£æ¯”è¾ƒæ…¢ï¼Œå®¹æ˜“å‘ç°ï¼Œåœ¨æ±‚è§£è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸ª**åŒç§**ç‰©å“æ˜¯æŒ‰ç…§**ä¸åŒç§**ç‰©å“è¿›è¡Œå¤„ç†çš„ï¼Œæ¢å¥è¯è¯´ï¼Œæˆ‘é€‰ç¬¬ä¸€ä¸ª a ç‰©å“ä¸é€‰ç¬¬äºŒä¸ª a ç‰©å“ï¼Œå®é™…ä¸Šæ•ˆæœéƒ½æ˜¯é€‰ 1 ä¸ª a ç‰©å“ï¼Œä½†æ˜¯è¿™æ ·çš„æƒ…å†µåœ¨ä¸Šæ–‡è§£æ³•ä¸­åšäº†ä¸¤æ¬¡å†³ç­–ï¼Œæ˜¾ç„¶æœ‰ä¸€ç§æ˜¯å¤šä½™çš„ã€‚  \nä¹Ÿå°±æ˜¯è¯´ï¼Œæ¥ä¸‹æ¥çš„ä¼˜åŒ–æ–¹å‘æ˜¯**å‡å°‘**æ¯æ¬¡å†³ç­–æ‰€é‡åˆ°çš„**åŒæ•°é‡åŒç§**ç‰©å“ï¼Œé‚£ä¼šè”æƒ³åˆ°ä»€ä¹ˆå‘¢ï¼Ÿ  \næƒ³åŠæ³•æŠŠç‰©å“åˆ†ä¸ºå¤šä¸ªç»„ï¼Œä½¿è¿™äº›ç»„çš„ä¸åŒç»„åˆèƒ½è¡¨ç¤ºå‡ºæ‰€æœ‰æ•°é‡ï¼Œäºæ˜¯æƒ³åˆ°è¿›åˆ¶ï¼Œè¿™é‡Œé‡‡ç”¨äºŒè¿›åˆ¶æ‹†åˆ†ã€‚\n\næ˜“è¯ï¼Œä½¿ç”¨ $2^0, 2^1, 2^2, 2^3... 2^{k-1}$ èƒ½å¤Ÿè¡¨ç¤ºå‡º $0$ åˆ° $2^{k-1}$ ä¹‹é—´çš„æ‰€æœ‰çš„æ•°ï¼Œå³äºŒè¿›åˆ¶è®¡æ•°ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæŠŠç‰©å“çš„æ•°é‡ $C_i$ æ‹†åˆ†æˆ $2^0, 2^1, 2^2...2^{k-1} + p,0 \\leq p < 2^{k-1}$ï¼Œç”± $p$ çš„èŒƒå›´å¯å¾—ï¼Œå…¶ä¸­ $2^0+...2^{k-1}$ èƒ½å¤Ÿè¡¨ç¤ºå‡º $[0,p]$ çš„æ‰€æœ‰æ•´æ•°ï¼Œç„¶åä¹Ÿèƒ½è½»æ¾å¾—å‡º $2^0+...+2^{k-1}$ é€‰å‡ºè‹¥å¹²ä¸ $p$ ç›¸åŠ èƒ½è¡¨ç¤ºå‡º $[p,p+2^k-1]$ ä¹‹é—´æ‰€æœ‰æ•´æ•°ï¼Œä¸¤ä¸ªåˆå¹¶å³æ˜¯ $[0,C_i]$\n\nå› æ­¤å¯ä»¥å°† $C_i$ æ‹†åˆ†ä¸º $k+1$ ç§æ–°çš„ç‰©å“ï¼Œæ¯ç§æ–°ç‰©å“çš„ä½“ç§¯å’Œä»·å€¼åˆ†åˆ«ä¸ºï¼š\n\n$$\n\\begin{aligned}\n&2^0 \\cdot w_i,2^1 \\cdot w_i,2^2 \\cdot w_i,\\dots,2^{k-1} \\cdot w_i,p \\cdot w_i \\newline\n&2^0 \\cdot v_i,2^1 \\cdot v_i,2^2 \\cdot v_i,\\dots,2^{k-1} \\cdot v_i,p \\cdot v_i\n\\end{aligned}\n$$\n\næ‹†åˆ†å®Œå†è¿›è¡Œ 01 èƒŒåŒ…å³å¯ã€‚\n\nä»£ç æ¥è‡ª [GrainRain 's Blog](https://grainrain.site/2022/10/13/2022.10.13%20-%20%E5%8A%A8%E6%80%81%E8%A7%84%E5%88%92/)\n\n```cpp\nconst int N = 25000;\n// ä¸€å…±æœ‰ 1000 é¡¹ï¼Œæ¯é¡¹æœ€å¤šæ‹†åˆ†æˆ log s é¡¹\nconst int M = 2010;\n\nint n, m;\nint v[N], w[N];\nint f[N];\n\ncin >> n >> m;\n\nint cnt = 0;\nfor (int i = 1; i <= n; i ++) {\n    int a, b, s;\n    cin >> a >> b >> s;\n\n    for (int k = 1; k <= s; k *= 2) { // ä»2^0 å¼€å§‹æšä¸¾ 2 çš„æ¬¡å¹‚\n        s -= k;\n        v[++ cnt] = a * k;\n        w[cnt] = b * k;\n    }\n    if (s > 0) {\n        v[++ cnt] = a * s;\n        w[cnt] = b * s;\n    }\n}\nn = cnt;\n// äºŒè¿›åˆ¶æ‹†åˆ†è¯»å…¥\n\nfor (int i = 1; i <= n; i ++)\n    for(int j = m; j >= v[i]; j --)\n        f[j] = max(f[j], f[j - v[i]] + w[i]);\n\ncout << f[m] << endl;\n// 01èƒŒåŒ…è§£é¢˜è¿‡ç¨‹\n```\n\n## åˆ†ç»„èƒŒåŒ…\n\n$N$ ç»„ç‰©å“ï¼Œç¬¬ $i$ ç»„æœ‰ $C_i$ ä¸ªç‰©å“ï¼Œç¬¬ $i$ ç»„çš„ç¬¬ $j$ ä¸ªç‰©å“çš„ä»·å€¼æ˜¯ $w_{i,j}$ï¼Œä½“ç§¯ä¸º $v_{i,j}$ï¼ŒèƒŒåŒ…ä½“ç§¯ä¸º $M$ï¼Œæ¯ç»„ç‰©å“åªèƒ½é€‰æ‹© $1$ ä¸ª\n\nç›´æ¥æšä¸¾ç»„æ—¶æŒ¨ä¸ªæšä¸¾ç‰©å“å°±è¡Œäº†ã€‚  \næŒ‰ç…§ç»„åˆ’åˆ†é˜¶æ®µï¼Œç¬¬ $i$ ç»„ä¸é€‰åˆ™ $f_{i,j} = f_{i-1,j}$ï¼Œç¬¬ $i$ ç»„é€‰ç¬¬ $k$ ä¸ªåˆ™ $f_{i,j} = f_{i-1,j-v_{i,k}} + w_{i,k}$\n\nè¿™é‡Œç›´æ¥ç»™å‡ºæ•°ç»„åˆ ç»´ä¼˜åŒ–è¿‡çš„ä»£ç \n\n```cpp\nfor (int i = 1; i <= n; ++ i) {\n\tfor (int j = m; j >= m; -- j) {\n\t\tfor (int k = 1; k <= c[i]; ++ k) {\n\t\t\tf[i][j] = max(f[j], f[j-v[i][k]] + w[i][k]);\n\t\t}\n\t}\n}\n```\n\n## ä¾èµ–èƒŒåŒ…\n\n~~æˆ‘çš„ Windows ç›˜è¿˜å‰© 5 ä¸ª Gï¼Œæ–°ä¹°çš„ä¸œæ–¹å†°ä¹‹å‹‡è€…è®°å  2G,LLVM ä¾èµ–äº MSVC ç”Ÿæˆå·¥å…·ï¼ŒMSVC å ç”¨ 2G ç£ç›˜ï¼ŒLLVM å ç”¨ 2G ç£ç›˜ï¼Œé—®æˆ‘åº”è¯¥æ€ä¹ˆå®‰è£…æ”¶ç›Šæœ€å¤§~~  \n~~reboot to archlinux!~~\n\nA ç‰©å“ä¾èµ–äº Bï¼Œé€‰ B ç‰©å“ä¹‹å‰éœ€è¦å…ˆé€‰ A ç‰©å“ï¼Œé—®æœ€å¤§ä»·å€¼\n\nå®¹æ˜“å‘ç°å¯¹äºä»»æ„æœ‰ä¾èµ–å…³ç³»çš„ç‰©å“ A B æ¥è¯´ï¼Œä¸€å…±æœ‰ä»¥ä¸‹ä¸‰ç§å¯èƒ½çš„å†³ç­–  \nï¼ˆA ä¾èµ– Bï¼‰\n\n1. A B éƒ½ä¸é€‰\n2. é€‰ B ä¸é€‰ A\n3. A B éƒ½é€‰\n\nå› ä¸ºè¿™ä¸‰ç§æƒ…å†µåªä¼šå‡ºç°ä¸€ä¸ªï¼Œè”æƒ³åˆ†ç»„èƒŒåŒ…çš„ç‰¹å¾ï¼Œå°†è¿™ä¸‰ç§æƒ…å†µæ¯ä¸ªçœ‹æˆä¸€ä¸ªç»„é‡Œçš„ç‰©å“ï¼Œå³è½¬åŒ–ä¸ºäº†åˆ†ç»„èƒŒåŒ…ã€‚\n\nå½“æˆæ ‘å½¢ DP å¥½åšä¸€ç‚¹ï¼ŒåŠ åˆ° TODO é‡Œé¢ã€‚","tags":["åŠ¨æ€è§„åˆ’","èƒŒåŒ…é—®é¢˜"],"categories":["åŠ¨æ€è§„åˆ’"]},{"title":"è´¨æ•°ç­›æ³•","path":"/post/prime-sieve/","content":"åŸƒæ°ç­›```text2 3 4 5 6 7 8 92 3 ~~4~~ 5 ~~6~~ 7 ~~8~~ 9 //ç­›æ‰2çš„å€æ•°2 3 5 7 ~~9~~ //ç­›æ‰3çš„å€æ•°```ä¾‹ï¼š```cpp#include <cstdio>#include <cmath>bool b[100000005];int main() { int n; scanf(\"%d\",&n); for (int i=2; i <= sqrt(n); i++) { // æ³¨æ„æšä¸¾è´¨æ•°çš„èŒƒå›´ if (!b[i]){ // b[i]å€¼ä¸º0è¡¨ç¤ºiä¸ºè´¨æ•° for (int j = i; j <= n/i; j++) { // ç­›æ‰içš„å€æ•° b[i*j]=1; } } } for (int i = 2; i <= n; i ++) { if (!b[i]){ printf(\"%d \",i); } } return 0;}```11 è¡Œå¤„ä¸ºä¸€ä¸ªå°ä¼˜åŒ–ï¼š$i$ çš„å€æ•°ä» $i^2$ å¼€å§‹æšä¸¾ ï¼ˆè€ƒè™‘ $j = k\\cdot i<i\\cdot i$ï¼Œ $j$ ä¸€å®šä¼šè¢« $k$ çš„è´¨å› æ•°ç­›å»ï¼‰ä¸¾ä¸ªä¾‹å­ï¼šç­› $2$ çš„å€æ•°æ—¶ï¼Œè¢«æ‰“æ ‡è®°çš„æ•°å­—åˆ†åˆ«æ˜¯```TEXT2*2,2*3,2*4......2*n/2```é‚£ä¹ˆæˆ‘ä»¬ç­› $i$ çš„å€æ•°æ—¶ï¼Œæ— ä¼˜åŒ–ç®—æ³•è¢«æ‰“æ ‡è®°çš„æ•°åˆ†åˆ«æ˜¯```i*2,i*3,i*4.......i*n/i```å¯ä»¥å‘ç°ï¼Œ$2i$ å’Œ $4i$ (å³ $2\\cdot 2i$)åœ¨æšä¸¾ $2$ çš„å€æ•°æ—¶å·²ç»è¢«æ‰“è¿‡æ ‡è®°äº†  å…¶ä»–ä»»æ„ä¸€ä¸ª $k\\cdot i, 2\\leqslant k< i$ éƒ½åŒç†ã€‚çº¿æ€§ç­› (è½¬è½½)ç‰ˆæƒå£°æ˜ï¼šä¸‹æ–¹ä¸ºlyf_018åŸåˆ›æ–‡ç« ï¼Œéµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚  æœ¬æ–‡é“¾æ¥ï¼šhttps://blog.csdn.net/qq_41653433/article/details/88976544åˆå§‹æ—¶ï¼Œå‡è®¾å…¨éƒ¨éƒ½æ˜¯ç´ æ•°ï¼Œå½“æ‰¾åˆ°ä¸€ä¸ªç´ æ•°æ—¶ï¼Œæ˜¾ç„¶è¿™ä¸ªç´ æ•°ä¹˜ä¸Šå¦å¤–ä¸€ä¸ªæ•°ä¹‹åéƒ½æ˜¯åˆæ•°ã€‚å¦‚æœæŒ‰ç…§åŸƒæ°ç­›åšæ³•æšä¸¾æ¯ä¸ªè´¨æ•°çš„å€æ•°ï¼Œä¼šé€ æˆé‡å¤ç­›é™¤ï¼Œå½±å“æ•ˆç‡ã€‚ä¾‹å¦‚ $30=5\\times 3\\times 2$ï¼Œå®ƒè¢« $2\\times 15$ ç­›äº†ä¸€æ¬¡ï¼Œåˆè¢« $3\\times 10$ ç­›äº†ä¸€æ¬¡ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œçº¿æ€§ç­›åº”è¿è€Œç”Ÿï¼š```cppint mark[MAXN];  int prime[MAXN]; //åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€ä¸ªç´ æ•°  Mark æ ‡è®°æ•°ç»„ index ç´ æ•°ä¸ªæ•°  int Prime(int n){ int index = 0; for(int i = 2; i < n; i++){ //å¦‚æœæœªæ ‡è®°åˆ™å¾—åˆ°ä¸€ä¸ªç´ æ•° if(mark[i] == 0) prime[++index] = i; //æ ‡è®°ç›®å‰å¾—åˆ°çš„ç´ æ•°çš„iå€ä¸ºéç´ æ•° for(int j = 1; j <= index && prime[j] * i < n; j++){ mark[i * prime[j]] = 1; if(i % prime[j] == 0) break; } } return index;  }```åˆ©ç”¨äº†æ¯ä¸ªåˆæ•°å¿…æœ‰ä¸€ä¸ªæœ€å°ç´ å› å­ã€‚æ¯ä¸ªåˆæ•°ä»…è¢«å®ƒçš„æœ€å°ç´ å› å­ç­›å»æ­£å¥½ä¸€æ¬¡ã€‚æ‰€ä»¥ä¸ºçº¿æ€§æ—¶é—´ã€‚  ä»£ç ä¸­ä½“ç°åœ¨ï¼š```cppif(i%prime[j]==0) break;```$prime$ æ•°ç»„ä¸­çš„ç´ æ•°æ˜¯é€’å¢çš„,å½“ $i$ èƒ½æ•´é™¤ $prime_j$ï¼Œé‚£ä¹ˆ $i\\cdot prime_{j+1}$ è¿™ä¸ªåˆæ•°è‚¯å®šä¹Ÿå¯ä»¥è¢« $prime_j$ ç­›æ‰ï¼Œå› ä¸º $i$ ä¸­å«æœ‰ $prime_j$, $prime_j$ æ¯” $prime_{j+1}$ å°ã€‚æ¥ä¸‹å»çš„ç´ æ•°åŒç†ï¼Œæ‰€ä»¥ä¸ç”¨ç­›ä¸‹å»äº†ã€‚ åœ¨æ»¡è¶³ $i\\  \\bmod \\ prime_j = 0$ è¿™ä¸ªæ¡ä»¶ä¹‹å‰ä»¥åŠç¬¬ä¸€æ¬¡æ»¡è¶³è¯¥æ¡ä»¶æ—¶,$prime_j$ å¿…å®šæ˜¯ $prime_j\\cdot i$ çš„æœ€å°å› å­","tags":["æ•°è®º"],"categories":["æ•°å­¦"]},{"title":"æœç´¢åŸºç¡€","path":"/post/basic-search/","content":"## DFSä¸BFS\n\næ·±åº¦ä¼˜å…ˆæœç´¢ï¼š ä¸€æ£µæ ‘ä»ä¸€ä¸ªæå‘ä¸‹æœç´¢ï¼Œæœåˆ°å¤´ä¹‹åå›æº¯ï¼Œç»§ç»­æœä¸‹ä¸€ä¸ªæ  \nå®½åº¦ä¼˜å…ˆæœç´¢ï¼ˆBreath First Search è€Œä¸æ˜¯ Brain Fuck Schedulerï¼‰ï¼ˆåè€…å·²ç»åœæ­¢ç»´æŠ¤äº†ï¼‰ï¼š ä¸€å±‚ä¸€å±‚æœåˆ°åº•éƒ¨\n\n### DFS\n\næ³¨æ„å›æº¯éœ€è¦â€œæ¢å¤ç°åœºâ€\n\n[ä¸€ä¸ªä¾‹é¢˜](https://luogu.com.cn/problem/P1706)\n \n```cpp\n#include <cstdio>\n\nconst int N = 10;\n\nint n; // å±‚æ•°\nint path[N]; // å­˜å‚¨çŠ¶æ€\nbool state[N]; // å­˜å‚¨å„ä¸ªææ˜¯å¦è¢«ä½¿ç”¨\n\nvoid dfs(int a) {\n    if (a == n) { // åˆ°è¾¾æœ€åº•å±‚\n        for (int i = 0; i < n; i ++) {\n            printf(\"%5d\",path[i]);\n        }\n        putchar('\\n');\n        return ;\n    } \n    \n    for (int i = 1; i <= n; i ++) {\n        if (!state[i]) { // iæ²¡æœ‰è¢«ä½¿ç”¨\n            path[a] = i;\n            state[i] = 1;\n            dfs(a+1); // æœç´¢ä¸‹ä¸€å±‚\n            state[i] = 0; // dfsç»“æŸä¹‹åï¼Œå¼€å§‹å›æº¯ï¼Œæ¢å¤ç°åœº\n        }\n    }\n}\n\nint main() { \n    scanf(\"%d\",&n);\n\n    dfs(0);\n\n    return 0;\n}\n\n```","tags":["æœç´¢"],"categories":["åŸºç¡€ç®—æ³•"]},{"title":"STL","path":"/post/cpp-stl-container/","content":"## STL\n\n### vector å˜é•¿æ•°ç»„\néœ€è¦å¼•å…¥å¤´æ–‡ä»¶`vector`\n#### å£°æ˜\n```cpp\nvector<ç±»å‹> åç§°\n```\nå¤šä¸ªvectorç»„æˆçš„æ•°ç»„\n```cpp\nvector<ç±»å‹> åç§°[some_num]\n```\næ­¤å¤„çš„ç±»å‹ä¹Ÿå¯ä»¥æ˜¯è‡ªå®šä¹‰çš„ç»“æ„ä½“ã€ç±»\n\nç¤ºä¾‹\n```cpp\n#include<vector>\nvector<int> a;\nvector<int> b[233];\n```\n#### [å¸¸ç”¨å‘½ä»¤](##STLå®¹å™¨å¸¸ç”¨å‘½ä»¤)\n#### è¿­ä»£å™¨\nç±»ä¼¼æŒ‡é’ˆ/æ•°ç»„ä¸‹æ ‡ä¹‹ç±»çš„ä¸œè¥¿\n\n```cpp\n#include <vector>\n#include <iostream>\nint main() {\n    vector<int> a({\"NVIDIA\",\"FUCK\",\"YOU\",\"EOF\"});\n\n    std::cout << *a.begin() << std::endl; // a.begin() æŒ‡å‘ a çš„ç¬¬ä¸€ä¸ªå…ƒç´  æ­¤å¤„ç›¸å½“äº a[0]\n    std::cout << *(a.end()-1) << std::endl; // a.end() æŒ‡å‘ a çš„æœ€åä¸€ä¸ªå…ƒç´ çš„åä¸€ä½ï¼Œç›´æ¥ä½¿ç”¨æ˜¯è¶Šç•Œè®¿é—®ï¼Œæ­¤å¤„ç›¸å½“äº a[a.size()-1]\n\n    vector<int>::iterator it = a.begin();\n    vector<int>::iterator it_end = a.end(); // C++11 æ˜¾ç„¶ä½¿ç”¨ auto it=a.begin(); æ›´å¥½å†™\n    std::cout << *it << std::endl; // æ­¤æ—¶ç›¸å½“äº a[0] ä¸ *a.begin()\n    // vector çš„è¿­ä»£å™¨æ˜¯ä¸€ä¸ªéšæœºè®¿é—®è¿­ä»£å™¨ï¼Œå¯ä»¥åŠ å‡\n    std::cout << *(it + 1) << std::endl; // ç›¸å½“äº a[1]\n    std::cout << *(it-it_end) << std::endl; // æ±‚ä¸¤ä¸ªä¸‹æ ‡ä¹‹é—´çš„è·ç¦»\n    return 0;\n}\n```\n\n## STLå®¹å™¨å¸¸ç”¨å‘½ä»¤\n```cpp\nsth.size(); // è¿”å›å®¹å™¨ sth çš„å®é™…é•¿åº¦ï¼ˆåŒ…å«çš„å…ƒç´ ä¸ªæ•°ï¼‰\nsth.empty(); // è¿”å›ä¸€ä¸ª bool å€¼ï¼Œè¡¨ç¤ºå®¹å™¨ sth æ˜¯å¦ä¸ºç©º\nsth.clear(); // æŠŠå®¹å™¨ sth æ¸…ç©º\n```","tags":["STL"],"categories":["C++"]},{"title":"ç±»ä¸ç»“æ„ä½“","path":"/post/cpp-class-struct/","content":"## ç±» (class) ä¸ ç»“æ„ä½“ (struct)\n\n```cpp\n#include <iostream>\nusing namespace std;\nclass Person {\n    private: // Personç±»ç§æœ‰ åªèƒ½åœ¨ Person è¿™ä¸ªç±»é‡Œé¢è°ƒç”¨\n        int age, height;\n         double money;\n    public:\n        string name;\n        void say() {\n            cout << \"I'm \" << name << endl;\n        }\n        int get_age() {\n            return age; // Person ç±»ä¸­å¯ä»¥è°ƒç”¨ç”± Person ç±»ç§æœ‰çš„é‡\n        }\n        void add_money(int a){\n          money += a;\n        }\n    private: // private/public å¯ä»¥æœ‰å¤šä¸ª\n        string books[1000];\n};  // ç±»å®šä¹‰ç»“æŸè¦åŠ åˆ†å·\n\nint main(){\n    Person pinghigh();\n    Person persons[10]; // å¯ä»¥å®šä¹‰ä¸€ä¸ª Person ç±»çš„æ•°ç»„\n    pinghigh.name = \"Tibrella\"; // name æ˜¯å…¬æœ‰å˜é‡ï¼Œå¤–éƒ¨å¯ä»¥è®¿é—®\n//  pinghigh.age = 15;    //!é”™è¯¯ï¼Œ age æ˜¯ç§æœ‰å˜é‡ï¼Œå¤–éƒ¨ä¸å¯è®¿é—®\n    pinghigh.add_money(12345);\n    pinghigh.say();\n    cout << pinghigh.get_age() << endl;\n    return 0;\n}\n```\n\nè¾“å‡º:\n\n```text\nI'm Tibrella\n14\n```\n\n### class ä¸ struct çš„å¼‚åŒ\n\nå”¯ä¸€ä¸€ç‚¹ä¸åŒæ˜¯ class ä¸­çš„é‡é»˜è®¤ä¸º private , struct ä¸­çš„é‡é»˜è®¤ä¸º public  \nå…¶ä»–å®Œå…¨ç›¸åŒ","tags":["C++","ç»“æ„ä½“","ç±»"],"categories":["C++"]},{"title":"STL string","path":"/post/stl-string/","content":"å¯å˜é•¿çš„å­—ç¬¦åºåˆ—ï¼Œéœ€è¦å¼•å…¥å¤´æ–‡ä»¶ `<string>`\n\n### èµ‹å€¼\n\n```cpp\n#include <string>\nusing namespace std;\nint main(){\n    string s1; // é»˜è®¤ç©ºå­—ç¬¦ä¸²\n    string s2 = s1; // string ç±»å‹å¯ä»¥äº’ç›¸èµ‹å€¼ï¼Œæ— éœ€ memcpy() æˆ– strcpy() ã€‚ s2 æ˜¯ s1 çš„ä¸€ä¸ªå‰¯æœ¬\n    string s3 = \"hiya\"; // s3 æ˜¯è¯¥å­—ç¬¦ä¸²(\"hiya\")å­—é¢å€¼çš„ä¸€ä¸ªå‰¯æœ¬ï¼ˆæˆ‘ä¹Ÿä¸çŸ¥é“æ˜¯ä»€ä¹ˆï¼Œæ€»ä¹‹ s3 çš„å€¼æ˜¯\"hiya\"\n    string s4(5,'T'); // s4 çš„å†…å®¹æ˜¯â€œTTTTTâ€\n\n    return 0;\n}\n```\n\n### è¾“å…¥è¾“å‡º\n\n```cpp\n#include <cstdio>\n#include <iostream>\n#include <string>\nusing namespace std;\nint main(){\n    string s1, s2;\n\n//è¯»å…¥æ— ç©ºæ ¼å­—ç¬¦ä¸²\n    cin >> s1; // scanf() fgets() ä¸èƒ½è¯»å…¥ string ç±»å‹\n//è¯»å…¥ä¸€è¡Œ\n    getline(cin,s2);\n//è¾“å‡º\n    cout << s1 << endl << s2 << endl;\n    /*\n    printf() ä¸èƒ½ç›´æ¥è¾“å‡ºstringç±»å‹\n    éœ€è¦å†™æˆ printf(\"%s\",s1.c_str())\n    è¿™é‡Œ s.c_str() ä½œç”¨æ˜¯æŠŠ string ç±»å‹è½¬åŒ–ä¸ºå­—ç¬¦æ•°ç»„\n    */\n    // å½“ç„¶ä¹Ÿå¯ä»¥ puts(s1.c_str())\n\n    return 0;\n}\n```\n\n#### åè®°\n\nä½¿ç”¨ `getline(cin,str)` è¾“å…¥æ—¶éœ€è¦æ³¨æ„å›è½¦ç¬¦  \nä»€ä¹ˆæ„æ€å‘¢ï¼Ÿä¸¾ä¸ªä¾‹å­\n\n```cpp\n#include <iostream>\n#include <string>\n\nusing namespace std;\n\nint main(){\n  string a,b;\n  cin >> a;\n  getline(cin, s);\n  cout << a << endl << b << endl;\n  return 0;\n}\n```\n\nè¿™æ—¶ä½ è¾“å…¥\n\n```TEXT\nNVIDIA\nFUCK U\n```\n\nç¨‹åºä¼šåœ¨ä½ è¾“å…¥å®Œç¬¬ä¸€è¡Œåç›´æ¥è¾“å‡ºä¸€ä¸ª`NVIDIA`ä¸å‡ ä¸ªæ¢è¡Œç¬¦  \nåŸå› æ˜¯ cin é‡åˆ°å›è½¦åœæ­¢ï¼Œæ­¤æ—¶ getline ç›´æ¥æŠŠ`NVIDIA`åçš„éƒ¨åˆ†(ç©º)è¯»å…¥ç„¶åå†æ¬¡é‡åˆ°å›è½¦ç¬¦ï¼Œåœæ­¢è¾“å…¥ã€‚  \nä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦å¿½ç•¥æ‰ä¸€ä¸ªå›è½¦ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨`getchar()`ã€‚\n\n```cpp\n#include <iostream>\n#include <string>\n\nusing namespace std;\n\nint main(){\n  string a,b;\n  cin >> a; // NVIDIA\n  getchar(); // \\nï¼ˆè·³è¿‡ä¸€ä¸ªæ¢è¡Œç¬¦ï¼‰\n  getline(cin, s); // FUCK U\n  cout << a << endl << b << endl;\n  return 0;\n}\n```\n\n### å¸¸ç”¨æ“ä½œ\n\n-   `str.empty()`\n    -   è¿”å›ä¸€ä¸ª bool å€¼ã€‚\n    -   å¦‚æœ string ä¸ºç©ºè¿”å› 1ï¼Œéç©ºè¿”å› 0ã€‚\n-   `str.size()` è¿”å› string çš„é•¿åº¦ï¼Œç­‰ä»·äº `s.length()`\n    -   `strlen()` éœ€è¦å¾ªç¯ä¸€éæ•°ç»„ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(n)ã€‚\n    -   `str.size()` ä¸éœ€è¦å¾ªç¯ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ã€‚\n-   æ¯”è¾ƒ\n    -   string å‹ä¹‹é—´æŒ‰å­—å…¸åºæ¯”è¾ƒç›´æ¥ `str1 < str2` å³å¯ï¼Œ`== != <= >= < > <=>`éƒ½æ”¯æŒã€‚\n-   ç›¸åŠ \n    -   string å‹ä¹‹é—´ç›¸åŠ ç›´æ¥ `str1 += str2`ã€`str3 = str1 + str2` è¿™æ ·å†™å³å¯ã€‚\n    -   ä¸å…¶ä»–ç±»å‹ï¼ˆå­—ç¬¦ã€å­—ç¬¦ä¸²ï¼‰ç›¸åŠ æ—¶ä¼šå…ˆæŠŠè¿™äº›ç±»å‹çš„é‡è½¬åŒ–ä¸º string å¯¹è±¡ï¼Œå¯ä»¥ç›´æ¥åŠ è¿™äº›ç±»å‹çš„é‡ï¼Œå¦‚ `str += 'a'` ã€ `str1 = str2 + \"abc\"`\n    -   ç›¸åŠ è¿ç®—æ—¶ï¼Œå¿…é¡»ä¿è¯ç­‰å·ä¸¤è¾¹éƒ½æœ‰ string å‹ï¼Œ`str1 = str2 + \"hello\" + 'a' `ã€ `str1 += \"hello\"` æ˜¯å¯ä»¥çš„ï¼Œ ä½†æ˜¯ `str1 = \"hello\" + 'a'` ä¼šæŠ¥é”™ã€‚\n        -   æ³¨æ„è¿ç®—é¡ºåºï¼Œå¦‚ `string s1 = s2 + \"abc\" + 'd'` æ­£ç¡®ï¼Œå› ä¸ºä¼šå…ˆå°† s2 ä¸ \"abc\" ç›¸åŠ å¾—åˆ°å¦ä¸€ä¸ª string å¯¹è±¡ï¼Œå†ç»§ç»­è¿ç®—ã€‚è€Œ `string s1 = \"abc\" + 'd' + s2` ä¼šæŠ¥é”™ï¼Œå› ä¸º \"abc\" å’Œ 'd' ä¸èƒ½ç›¸åŠ  ï¼ˆ\"abc\"å’Œ\"cde\"ä¹Ÿä¸è¡Œï¼‰\n-   æ“ä½œå•ä¸ªå­—ç¬¦\n\n    -   å¯ä»¥å½“ä½œå­—ç¬¦æ•°ç»„å¤„ç†ï¼Œå¦‚ `str[0]` , `str[3]`\n    -   ç‹¬ç‰¹çš„éå†æ–¹å¼\n\n        ```cpp\n        #include <iostream>\n        #include <string>\n        using namespace std;\n        int main(){\n          cout << \"So, NVIDIA,\" << endl;\n          string s = \"Fuck U\";\n          for (char c : s) { // char cå¯ä»¥å†™ä½œ auto c\n            cout << c << endl;\n          }\n          return 0;\n        }\n        ```\n\n        è¾“å‡ºï¼š\n\n        ```text\n        So, NVIDIA,\n        F\n        u\n        c\n        k\n\n        U\n        ```\n\n-   `str.pop_back()` åˆ é™¤ string å‹å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦\n-   `str.substr(int i,int len)`\n    -   è¾“å‡ºå­—ç¬¦ä¸² str ä» i å¼€å§‹é•¿åº¦ä¸º len çš„å­—ç¬¦ä¸²","tags":["å­—ç¬¦ä¸²"],"categories":["C++"]},{"title":"å­—ç¬¦æ•°ç»„","path":"/post/cpp-string/","content":"color:error è­¦å‘Š æœ¬æ–‡æœ‰å› ä¸ºåˆå­¦ C++ è‡†æƒ³è¿‡å¤šå¯¼è‡´çš„å¾ˆå¤šè°¬è¯¯ï¼Œå¾…ä¿®å­—ç¬¦æ•°ç»„è¾“å‡º```cpp#include <iostream>#include <cstdio>using namespace std;int main(){ char str[3]=\"ab\"; // ä»¥ä¸‹ä¸‰ç§è¾“å‡ºæ–¹å¼éƒ½æ˜¯é‡åˆ°æ¢è¡Œæˆ–ç©ºæ ¼ä¸åœæ­¢ï¼Œè€Œæ˜¯é‡åˆ°'\\0'æ‰åœæ­¢ cout << str << endl; printf(\"%s\\n\",str); puts(str); // ç­‰ä»·äºä¸Šé¢çš„printfè¯­å¥ return 0;}```è¯»å…¥åˆ†ä¸¤ç§æƒ…å†µ  1.è¯»å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé‡åˆ°ç©ºæ ¼/å›è½¦åœæ­¢  ä½¿ç”¨ cin```cpp#include <iostream>using namespace std;int main(){ char str[3]; cin >> str; //è¾“å…¥ cout << str << endl; return 0;}```æˆ–ä½¿ç”¨ scanf```cpp#include <cstdio>int main(){ char str[3]; scanf(\"%s\",str); //è¾“å…¥ /* è¿™é‡Œæ³¨æ„ä¸€ç‚¹ï¼Œstr ä¸èƒ½å†™ä½œ &str æ•°ç»„åå®é™…ä¸Šæ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå­˜å‚¨æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ çš„å†…å­˜åœ°å€ï¼ˆæŒ‡å‘æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼‰ scanf(\"%s\",__) è¿™é‡Œä¸‹åˆ’çº¿éƒ¨åˆ†åº”å½“æ˜¯ä¸€ä¸ªå†…å­˜åœ°å€ï¼Œè€Œæ•´å‹ã€æµ®ç‚¹ã€å­—ç¬¦ç­‰ç±»å‹å˜é‡ä¸­å­˜å‚¨çš„ä¸æ˜¯åœ°å€è€Œæ˜¯å®ƒå¯¹åº”çš„å†…å®¹ï¼Œæ‰€ä»¥éœ€è¦ç”¨â€˜&â€™å–å‡ºå®ƒçš„å†…å­˜åœ°å€ï¼Œå¦‚å–å‡ºæ•´å‹ï¼ˆintï¼‰å˜é‡açš„å†…å­˜åœ°å€å°±æ˜¯ &aã€‚ è€Œæ•°ç»„åæœ¬èº«å°±å­˜å‚¨ç€å†…å­˜åœ°å€ï¼Œæ‰€ä»¥ä¸éœ€è¦å†ç”¨ & å–ä¸€éå†…å­˜åœ°å€ */ printf(\"%s\",str); return 0;}```2.è¯»å…¥ä¸€è¡Œå†…å®¹ï¼Œè¾“å…¥ç©ºæ ¼ä¸åœæ­¢```cpp#include <iostream>#include <cstring>using namespace std;int main(){ char str[100]; fgets(str,100,stdin); // gets() å‡½æ•°åœ¨ C11 æ ‡å‡†ä¸­å› ä¸ºå®¹æ˜“æº¢å‡ºè€Œè¢«åˆ é™¤ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯ fgets() /* \"str\"ä¸ºå­—ç¬¦ä¸²å â€œ100â€æ˜¯è¯»å…¥çš„æœ€å¤§å­—ç¬¦æ•°ï¼ˆä¸€èˆ¬ä½¿ç”¨æ•°ç»„é•¿åº¦å³å¯ï¼‰ â€œstdinâ€åº”è¯¥æ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¸ç”¨ç®¡ï¼Œç…§ç€å†™å°±è¡Œ */ cout << str << endl; return 0;}```æˆ–```cpp#include <iostream>#include <cstdio>#include <string>using namespace std;int main(){ char str[100]; string str1; cin.getline(str,100); // å­—ç¬¦æ•°ç»„ä½¿ç”¨ cin.getline() getline(cin,str1); // string ä½¿ç”¨ getline() cout << str << endl << str1 << endl; return 0;}```å¸¸ç”¨å‡½æ•°[^1]- `strlen(str)` æ±‚å­—ç¬¦ä¸²é•¿åº¦ï¼ˆä¸åŒ…å«'\\0'ï¼‰- `strcmp(a,b)` æ¯”è¾ƒä¸¤ä¸ªå­—ç¬¦ä¸²å¤§å°(ASCII ç )ï¼Œ a < b è¿”å› -1 ï¼Œa == b è¿”å› 0ï¼Œ a > b è¿”å› 1ï¼ˆæ¯”è¾ƒæ–¹å¼ä¸ºå­—å…¸åº[^2]ï¼‰- `strcpy(a,b)` å°†å­—ç¬¦ä¸² `b` èµ‹å€¼ç»™ä» `a` å¼€å§‹çš„å­—ç¬¦æ•°ç»„strlen()ç¤ºä¾‹```cpp#include <iostream> // ç”¨äºè¾“å‡º#include <cstring> // æˆ–è€…string.hï¼Œè¿™æ˜¯Cè¯­è¨€çš„å¤´æ–‡ä»¶using namespace std; // ç”¨äºè¾“å‡ºint main(){ char s[100]=\"abc\"; cout << strlen(s) << endl; return 0;}```strcmp()ç¤ºä¾‹```cpp#include <iostream> // ç”¨äºè¾“å‡º#include <cstring> // æˆ–è€…string.hï¼Œè¿™æ˜¯Cè¯­è¨€çš„å¤´æ–‡ä»¶using namespace std; // ç”¨äºè¾“å‡ºint main(){ char s[100]; scanf(\"%s\",s); cout << strcmp(s,\"abc\") << endl; return 0;}```æ­¤å¤„å°†è¾“å…¥çš„å­—ç¬¦ä¸²ä¸ abc è¿›è¡Œæ¯”è¾ƒ```textè¾“å…¥#1 bac#2 abc#3 aacè¾“å‡º#1 1#2 0#3 -1```strcpy ç¤ºä¾‹```cpp#include <iostream> // ç”¨äºè¾“å‡º#include <cstring> // æˆ–è€…string.hï¼Œè¿™æ˜¯Cè¯­è¨€çš„å¤´æ–‡ä»¶using namespace std; // ç”¨äºè¾“å‡ºint main(){ char s1[100]=\"abc\",s2[100]; strcpy(s2,s1); // s1 å¤åˆ¶åˆ° s2 cout << s2 << endl; return 0;}```è¾“å‡ºä¸º`abc`[^1]: ä»¥ä¸‹ä¸‰ä¸ªå‡½æ•°å‡éœ€è¦æŠŠå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå­—ç¬¦å¾ªç¯ä¸€éï¼Œå¦‚æœæˆ‘ä»¬å†™å¾ªç¯æ—¶éœ€è¦ç”¨åˆ°å…¶ä¸­ä¸€ä¸ªï¼Œä¼šå¯¼è‡´æ—¶é—´å¤æ‚åº¦æå‡ï¼Œéœ€è¦æ”¹è¿›ã€‚ å¦‚ ```cpp for (int i = 0; i <= strlen(str); i++) ``` æœ€å¥½æ”¹å†™æˆ ```cpp for (int i =  0, len=strlen(str); i <= len; i++) ```[^2]: å­—å…¸åºï¼šä»å‰å‘åæ¯”ï¼Œå¦‚ 2 ä¸ 10ï¼Œæ¯”è¾ƒæ•°å­—åˆ™ 10 å¤§ï¼ŒæŒ‰å­—å…¸åºæ¯”è¾ƒåˆ™æ˜¯ 2 å¤§ï¼ˆå› ä¸º 2>1ï¼‰","tags":["C++","å­—ç¬¦ä¸²","å­—ç¬¦æ•°ç»„"],"categories":["C++"]},{"title":"è¯»å…¥æœªçŸ¥æ•°é‡çš„æ•°æ®","path":"/post/cpp-read-until-eof/","content":"å®é™…ä¸Šæ˜¯å€ŸåŠ©è¯»å…¥å‡½æ•°çš„è¿”å›å€¼å®ç°çš„ã€‚\n\n```cpp\n#include <stdio.h>\nint main() {\n    int k,sum=0;\n    while (scanf(\"%d\",&k) != EOF)   // EOFæ˜¯è¯»å–ç»“æŸæ ‡è¯†\n    // åˆå› ä¸º scanf åœ¨è¯»å–åˆ° EOF ä¼šè¿”å› -1ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥å†™æˆ while (~scanf(\"%d\",&k))\n    {\n        sum += 1;\n    }\n    printf(\"%d\",sum);\n    return 0;\n}\n```\n\nå¦å¤–ä¸€ç‚¹å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå…³äºä½¿ç”¨ `cin >> x` æ—¶çš„è¿”å›å€¼å¹¶ä¸æ˜¯ `cin` çš„è¿”å›å€¼ï¼Œ`cin` åªæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œå®é™…è¿›è¡Œè¿ç®—çš„æ˜¯æµè¿ç®—ç¬¦ `>>`ã€‚\n\nWindows ç³»ç»Ÿè¾“å…¥ [^ç»„åˆé”®]\n\n```shell\n1 2 3\n^z\n```\n\nGNU/Linux è¾“å…¥\n\n```shell\n1 2 3\n^d\n```\n\nè¾“å‡º\n\n```text\n3\n```\n\n[^ç»„åˆé”®]: æœ¬æ–‡ä¸­\\^zã€\\^d éƒ½æŒ‡ç»„åˆé”®ï¼Œ\\^d ä¸º Ctrl+Dï¼Œ\\^z ä¸º Ctrl+Zã€‚","tags":["C++"],"categories":["C++"]},{"title":"æœ€å¤§å…¬çº¦æ•°","path":"/post/gcd/","content":"## æœ€å¤§å…¬çº¦æ•°\n### è¾—è½¬ç›¸é™¤æ³•\n\nä¾‹ï¼š\n```text\n70 % 50 = 20\n50 % 20 = 10\n20 % 10 = 0\n```\n\nå–æ¨¡åˆ°0ä¸ºæ­¢ï¼Œæ­¤æ—¶10å°±æ˜¯70ã€50æœ€å¤§å…¬çº¦æ•°\n\n```cpp\n#include <iostream>\nusing namespace std;\nint main() {\n    int a,b,r;\n    cin >> a >> b;\n    while (a % b != 0){\n        r = a % b;\n        a = b;\n        b = r;\n    }\n    cout << b << endl;\n    return 0;\n}\n```\n\n### æ›´ç›¸å‡æŸæœ¯\n\n```text\n54 24\n|        é™¤ä»¥2ï¼ˆå¯é™¤å¯ä¸é™¤ï¼Œé™¤åæ–¹ä¾¿è®¡ç®—ï¼‰\nV\n27 12\n27-12=15    å¤§å‡å°\n...\n...\n\n6-3=3\n```\n\næ­¤å¤„3=3,æ‰€ä»¥æœ€å¤§å…¬çº¦æ•°ä¸º3","tags":["æœ€å¤§å…¬çº¦æ•°"],"categories":["æ•°å­¦"]},{"title":"Hello World","path":"/post/hello world/","content":"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•é¡µ\n\n```cpp\n#include <iostream>\n\nusing std::cout;\n\n#define endl '\\n'\n\nint main() {\n    std::ios::sync_with_stdio(0);\n    cout.tie(0);\n\n    cout << \"Hello World!\" << endl;\n\n    return 0;\n}\n```\n\n$Test Math$ ~~å¥½å§ï¼Œæ•°å­¦å¥½åƒè¿˜ä¸æ”¯æŒ~~ æ·»åŠ äº†æ”¯æŒ[^1]  \n$$ Test $$\n\n[^1]: æ³¨é‡Šæµ‹è¯•ï¼›~~å¦å¤–ï¼Œå¦‚æœåœ¨æœ¬ç«™ä»»æ„ä½ç½®å‘ç°æ•°å­¦å…¬å¼æœªæ¸²æŸ“ä¸”ç¡®è®¤ä¸æ˜¯æ‚¨çš„ç½‘ç»œé—®é¢˜ï¼Œè¯·åˆ·æ–°ä¸€ä¸‹ã€‚~~ ä¿®å¥½äº†ï¼Œå¯èƒ½å°±æ˜¯ä½ çš„ç½‘ç»œé—®é¢˜ã€‚"},{"title":"å…³äº","path":"/about/index.html","content":"ä¸€ä¸ªæ­£åœ¨å­¦ä¹  OI çš„å°†è¦é€€å½¹çš„å‚»é€¼ã€‚\n\næ¬¢è¿ä¸€èµ·äº¤æµã€‚"},{"path":"/links/index.html","content":"# å‹æƒ…é“¾æ¥æ ‡é¢˜ï¼šTibrella çš„éš™é—´  URLï¼šhttps://blog.tibrella.space/ æˆ– https://www.tibrella.space/  ç®€ä»‹ï¼šå¤©ç»ˆä¼šå†æ˜ã€‚"},{"title":"Timeline","path":"/timeline/index.html","content":"2021 å¹´ ? æœˆ ? æ—¥ä½¿ç”¨ Github Pages + LOFFER æ­å»ºäº†ç¬¬ä¸€ä¸ªåšå®¢é¡µé¢ï¼Œä¸Šä¼ äº†ä¸€ä¸ªç»™æŸå†å²è€å¸ˆçš„æ•´æ´»æ–‡ç« ã€‚ 2022 å¹´ 1 æœˆ ? æ—¥åœ¨ C4096 çš„å¼•è·¯ä¸‹å¼€å§‹ä½¿ç”¨ Arch Linuxã€‚~~å‘½è¿çš„é½¿è½®å¼€å§‹è½¬åŠ¨~~ 2022 å¹´ ? æœˆ ? æ—¥è¿ç§»è‡³ Hexo + Butterflyï¼Œå¹¶å¼€å§‹è®°å½• Linux æŠ˜è…¾ç¬”è®°ã€‚ 2022 å¹´ 6 æœˆ 20 æ—¥ä¸­è€ƒå‰ä¸€å¤©æŠŠè‡ªç¼–è¯‘å†…æ ¸ linux-tikogasa æäº†å‡ºæ¥ï¼ŒåŒæ—¶æŠ˜è…¾äº† github actionsã€‚ä»“åº“å·²ç»åˆ é™¤äº†ï¼Œè¿™æ˜¯ yjacks çš„ fork å­˜æ¡£ 2023 å¹´ 6 æœˆ ? æ—¥é£è›¾æ‰‘ç«ã€‚ 2022 å¹´ 3 æœˆ 14 æ—¥è´­ä¹° tibrella.top åŸŸåã€‚ 2022 å¹´ 12 æœˆ 28 æ—¥ä¸º Catium çš„ PHP ç»ƒæ‰‹é¡¹ç›®ç¼–å†™äº†çº¯ HTML + CSS å‰ç«¯é¡µé¢ï¼ŒåŒæ—¶æ˜¯æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦å‰ç«¯ã€‚ 2023 å¹´ 2 æœˆ 24 æ—¥åšå®¢åˆ‡æ¢åˆ° Hugo + Stackã€‚ 2023 å¹´ 5 æœˆ 18 æ—¥ç”¨çº¯ HTML + CSS å†™äº†åˆä»£ä¸ªäººä¸»é¡µã€‚ 2023 å¹´ 6 æœˆ 8 æ—¥å­¦ä¹  React JSXï¼Œå¹¶ç”¨ä¸¤å¤©æ—¶é—´æ­é… Geist UI å†™å‡ºäº†ç¬¬äºŒä»£ä¸ªäººä¸»é¡µã€‚ 2023 å¹´ 8 æœˆ 16 æ—¥åšå®¢åˆ‡æ¢å› Hexo + Stellarisã€‚ 2023 å¹´ 11 æœˆ 18 æ—¥é€€å½¹ï¼Œå›å½’é«˜è€ƒ 2023 å¹´ 12 æœˆ ? æ—¥tibrella.top è¿‡æœŸï¼Œè´­ä¹°åå¹´ tibrella.space åŸŸåã€‚"},{"title":"Tikogasa Kernel","path":"/wiki/linux-tikogasa/index.html","content":"æœ¬å†…æ ¸ç”±äº ZFS-builtin è¿åè®¸å¯è¯ï¼Œæ‰€ä»¥åªæä¾›æ„å»ºè„šæœ¬ï¼Œä¸åˆ†å‘äºŒè¿›åˆ¶åŒ…ã€‚\n\nä»“åº“ä¸­çš„ config ä¸æ˜¯é»˜è®¤ä¼˜åŒ–è€Œæ˜¯æˆ‘è‡ªå·±å†™çš„ï¼Œç²¾ç®€æ‰äº†å¾ˆå¤šæ¨¡å—ï¼ˆæ¯”å¦‚ XFSï¼ŒINTEL æ˜¾å¡ï¼Œé™¤äº† Realtek ä»¥å¤–çš„æ‰€æœ‰å£°å¡ç­‰ï¼‰ï¼Œæ‰€ä»¥ä½ éœ€è¦è‡ªå·±æä¸€ä»½ configã€‚\n\nå®é™…ä¸Šä¼˜åŒ– config çš„è¿‡ç¨‹æ˜¯åœ¨ PKGBUILD é‡Œå†™å¥½äº†çš„ï¼Œæ‰€ä»¥ä½ æŠŠ Arch å®˜æ–¹çš„é…ç½®æ‹¿æ¥ build ä¹Ÿæ²¡é—®é¢˜ã€‚\n\næ·»åŠ äº† cjktty è¡¥ä¸ã€‚\n\nç¼–è¯‘æ—¶æ·»åŠ äº†ç‰¹å¼‚åŒ–ç¼–è¯‘ï¼Œæ‰€ä»¥ä½ éœ€è¦åœ¨ config å’Œ PKGBUILD é‡Œæ‰¾åˆ° `ZEN2` `znver2` ç›¸å…³å­—æ ·ï¼Œæ¢æˆä½ è‡ªå·±çš„æ¶æ„ã€‚"}]