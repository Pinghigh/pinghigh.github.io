console.log(`\n %c Hexo theme Stellaris %c ${stellar.github} %c \n \n`,"color: #eff4f9; background: #030307; padding: 5px; border-radius: 4px 0 0 4px;","background: #eff4f9; padding: 5px; border-radius: 0 4px 4px 0;","");console.log("By YidaozhanYa");const util={diffDate:(e,t=false)=>{const l=new Date;const a=new Date(e);const n=l.getTime()-a.getTime();const s=1e3*60;const i=s*60;const r=i*24;const o=r*30;let c;if(t){const d=n/o;const u=n/r;const f=n/i;const p=n/s;if(d>12){c=null}else if(d>=1){c=parseInt(d)+" "+stellar.config.date_suffix.month}else if(u>=1){c=parseInt(u)+" "+stellar.config.date_suffix.day}else if(f>=1){c=parseInt(f)+" "+stellar.config.date_suffix.hour}else if(p>=1){c=parseInt(p)+" "+stellar.config.date_suffix.min}else{c=stellar.config.date_suffix.just}}else{c=parseInt(n/r)}return c},copy:(e,t)=>{const l=document.getElementById(e);if(l){l.select();document.execCommand("Copy");if(t&&t.length>0){hud.toast(t)}}},toggle:e=>{const t=document.getElementById(e);if(t){t.classList.toggle("display")}}};const hud={toast:(e,t)=>{t=isNaN(t)?2e3:t;var l=document.createElement("div");l.classList.add("toast");l.innerHTML=e;document.body.appendChild(l);setTimeout(function(){var e=.5;l.style.webkitTransition="-webkit-transform "+e+"s ease-in, opacity "+e+"s ease-in";l.style.opacity="0";setTimeout(function(){document.body.removeChild(l)},e*1e3)},t)}};const sidebar={toggle:()=>{const e=document.querySelector(".l_body");if(e){e.classList.add("mobile");e.classList.toggle("sidebar")}}};const init={toc:()=>{stellar.jQuery(()=>{const i=32;var r=[];$("article.md-text :header").each(function(e,t){r.push(t)});$(document,window).scroll(function(e){var t=$(this).scrollTop();var l=null;for(var a in r){var n=$(r[a]);if(n.offset().top>t+i){continue}if(!l){l=n}else if(n.offset().top>=l.offset().top){l=n}}if(l){$(".toc#toc a.toc-link").removeClass("active");var s="#"+l.attr("id");if(s!="#undefined"){$('.toc#toc a.toc-link[href="'+encodeURI(s)+'"]').addClass("active")}else{$(".toc#toc a.toc-link:first").addClass("active")}}})})},sidebar:()=>{stellar.jQuery(()=>{$(".toc#toc a.toc-link").click(function(e){const t=document.querySelector(".l_body");t.classList.remove("sidebar")})})},hydrate:()=>{stellar.jQuery(()=>{const l=$(".on-click-event");l.each(e=>{const t=$(l[e]);t.attr("onclick",t.attr("data-on-click"));t.removeAttr("data-on-click")})})},relativeDate:e=>{e.forEach(e=>{const t=e;const l=t.getAttribute("datetime");let a=util.diffDate(l,true);if(a){t.innerText=a}})},registerTabsTag:function(){document.querySelectorAll(".tabs ul.nav-tabs .tab").forEach(l=>{l.addEventListener("click",e=>{e.preventDefault();if(l.classList.contains("active"))return;[...l.parentNode.children].forEach(e=>{e.classList.toggle("active",e===l)});const t=document.getElementById(l.querySelector("a").getAttribute("href").replace("#",""));[...t.parentNode.children].forEach(e=>{e.classList.toggle("active",e===t)});t.dispatchEvent(new Event("tabs:click",{bubbles:true}))})});window.dispatchEvent(new Event("tabs:register"))},outdatedCheck:()=>{const e=document.getElementById("outdated");if(!e)return;const t=(e,t)=>{if(t.getFullYear()-e.getFullYear()>0){return true}else{return t.getMonth()-e.getMonth()>stellar.article.outdate_month}};const l=document.getElementById("post-meta").getElementsByTagName("time");if(e!==null){if(t(new Date(l[l.length-1].dateTime),new Date)){e.innerText="，文章内容可能已经过时"}}}};const initAll=()=>{init.toc();init.sidebar();init.hydrate();init.relativeDate(document.querySelectorAll("#post-meta time"));init.registerTabsTag();init.outdatedCheck();console.log(`New page loaded: ${window.location.pathname}`)};InstantClick.on("change",initAll);window.addEventListener("load",initAll,false);if(stellar.plugins.scrollreveal){reveal=()=>{ScrollReveal().reveal("body .reveal",{distance:stellar.plugins.scrollreveal.distance,duration:stellar.plugins.scrollreveal.duration,interval:stellar.plugins.scrollreveal.interval,scale:stellar.plugins.scrollreveal.scale,easing:"ease-out"})};stellar.loadScript(stellar.plugins.scrollreveal.js).then(reveal);InstantClick.on("change",reveal)}if(stellar.plugins.lazyload){stellar.loadScript(stellar.plugins.lazyload.js,{defer:true});window.lazyLoadOptions={elements_selector:".lazy"};window.addEventListener("LazyLoad::Initialized",function(e){window.lazyLoadInstance=e.detail.instance},false);InstantClick.on("change",()=>{if("lazyLoadInstance"in window){window.lazyLoadInstance.update()}})}if(stellar.plugins.stellar){for(let t of Object.keys(stellar.plugins.stellar)){let e=stellar.plugins.stellar[t];if(t=="linkcard"){stellar.loadScript(e,{defer:true}).then(function(){setCardLink(document.querySelectorAll("a.link-card[cardlink]"))})}else{const els=document.getElementsByClassName("stellar-"+t+"-api");if(els!=undefined&&els.length>0){stellar.jQuery(()=>{stellar.loadScript(e,{defer:true});if(t=="timeline"){stellar.loadScript(stellar.plugins.marked)}})}}}}if(stellar.plugins.swiper){const swiper_api=document.getElementById("swiper-api");if(swiper_api!=undefined){stellar.loadCSS(stellar.plugins.swiper.css);stellar.loadScript(stellar.plugins.swiper.js,{defer:true}).then(function(){const e=swiper_api.getAttribute("effect")||"";var t=new Swiper(".swiper#swiper-api",{slidesPerView:"auto",spaceBetween:8,centeredSlides:true,effect:e,loop:true,pagination:{el:".swiper-pagination",clickable:true},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}})})}}const initFancyBox=()=>{if(stellar.plugins.fancybox){let e="img[fancybox]:not(.error)";if(stellar.plugins.fancybox.selector){e+=`, ${stellar.plugins.fancybox.selector}`}if(document.querySelectorAll(e).length!==0){stellar.loadCSS(stellar.plugins.fancybox.css);stellar.loadScript(stellar.plugins.fancybox.js,{defer:true}).then(function(){Fancybox.bind(e,{groupAll:true,hideScrollbar:false,Thumbs:{autoStart:false},caption:function(e,t,l){return null}})})}}};InstantClick.on("change",initFancyBox);window.addEventListener("load",initFancyBox,false);if(stellar.search.service){if(stellar.search.service=="local_search"){stellar.jQuery(()=>{stellar.loadScript("/js/search/local-search.js",{defer:true}).then(function(){const l=$("input#search-input");if(l.length==0){return}const e=document.querySelector("div#search-result");l.focus(function(){let e;if(stellar.search.service in stellar.search){e=stellar.search[stellar.search.service].path}else{e="/search.json"}if(!e.startsWith("/")){e="/"+e}const t=l.attr("data-filter")||"";searchFunc(e,t,"search-input","search-result")});l.keydown(function(e){if(e.which==13){e.preventDefault()}});const t=new MutationObserver(function(e,t){if(e.length==1){if(e[0].addedNodes.length){$(".search-wrapper").removeClass("noresult")}else if(e[0].removedNodes.length){$(".search-wrapper").addClass("noresult")}}});t.observe(e,{childList:true})})})}}